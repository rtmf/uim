2012-03-18 Muneyuki Noguchi <nogu.dev@gmail.com>

    Update release number.
    
    * RELNOTE
      - Update.

2012-03-18 Muneyuki Noguchi <nogu.dev@gmail.com>

    Get rid of gnuify-changelog.pl when creating ChangeLog.
    
    * ChangeLog.old.2
      - ChangeLog created by gnuify-changelog.pl.
    * Makefile.am
      - (ChangeLog): Don't use gnuify-changelog.pl.

2012-03-18 Muneyuki Noguchi <nogu.dev@gmail.com>

    Update RELNOTE for uim-1.8.0-alpha.
    
    * RELNOTE
      - Update.

2012-03-18 Muneyuki Noguchi <nogu.dev@gmail.com>

    Add description on new feature to NEWS.
    
    * NEWS
      - Add description on horizontal candidate window to NEWS.

2012-03-18 Muneyuki Noguchi <nogu.dev@gmail.com>

    Simplify releasing process in doc/RELEASING.
    
    * doc/RELEASING
      - Simplify.

2012-03-18 Muneyuki Noguchi <nogu.dev@gmail.com>

    Remove obsolete comment in Makefile.am.
    
    * Makefile.am
      - Remove comment on $(RELEASE_URL)
        because $(RELEASE_URL) is no longer used.

2012-03-18 Muneyuki Noguchi <nogu.dev@gmail.com>

    Remove RELEASE_SUFFIX features from make-{dist,wc}.sh
    
    * Makefile.am
      - Remove $(RELEASE_SUFFIX).
    * make-dist.sh
    * make-wc.sh
      - Remove RELEASE_SUFFIX features because they don't work currently
        and editing Makefile.in directly should be avoided.
        Use "make dist distdir=uim-x.y.z-${RELEASE_SUFFIX}" instead.

2012-03-18 Muneyuki Noguchi <nogu.dev@gmail.com>

    Remove version number from Project-Id-Version in po files.
    
    * po/fr.po
    * po/ja.po
    * po/ko.po
      - Remove version number from Project-Id-Version
        because the number isn't used.

2012-03-18 Muneyuki Noguchi <nogu.dev@gmail.com>

    Make all tests pass by following changes in 5a636aee1248.
    
    * test/test-im.scm
      - Change length of value returned by retrieve-im
        because delay-activating-hander was added.
      - Add elements for test-im and test-im2
        because delay-activating-hander was added.
    * test/test-lazy-load.scm
      - Add elements for py because delay-activating-hander was added.

2012-03-18 Muneyuki Noguchi <nogu.dev@gmail.com>

    Add support for arbitrary names to gnuify-changelog.pl.
    
    * tools/gnuify-changelog.pl
      - Add support for names which aren't in %hackers.

2012-03-17 Muneyuki Noguchi <nogu.dev@gmail.com>

    Update translation files.
    
    * po/fr.po
    * po/ja.po
    * po/ko.po
      - Update with "make update-po".

2012-03-17 Muneyuki Noguchi <nogu.dev@gmail.com>

    Add scm/m17nlib-custom.scm to po/POTFILES.in.
    
    * po/POTFILES.in
      - Add scm/m17nlib-custom.scm.

2012-03-17 Muneyuki Noguchi <nogu.dev@gmail.com>

    Add m17nlib-custom.scm to SCM_FILES in scm/Makefile.am.
    
    * scm/Makefile.am
      - (SCM_FILES): Add m17nlib-custom.scm.

2012-03-17 Muneyuki Noguchi <nogu.dev@gmail.com>

    Fix typo in scm/sj3v2-socket.scm.
    
    * scm/sj3v2-socket.scm
      - (sj3-lib-error-str-alist): Fix typo.

2012-03-10 Muneyuki Noguchi <nogu.dev@gmail.com>

    * po/POTFILES.in
      - Remove scm/spellcheck-custom.scm.
    * scm/spellcheck-custom.scm
    * scm/spellcheck.scm
    * uim/spellcheck.c
      - Remove.

2012-03-17 Muneyuki Noguchi <nogu.dev@gmail.com>

    Update NEWS.
    
    * NEWS
      - Update.

2012-03-17 Muneyuki Noguchi <nogu.dev@gmail.com>

    Avoid error by "git log" in Makefile.am.
    
    * Makefile.am
      - (ChangeLog): Add separator to arguments of "git log"
        to avoid error, such as
        "fatal: ambiguous argument 'uim-1.8.0': both revision and filename".

2012-03-17 Muneyuki Noguchi <nogu.dev@gmail.com>

    Enable build of knotify4 when CMAKE_SOURCE_DIR != CMAKE_BINARY_DIR.
    
    * notify/CMakeLists.txt
      - (include_directories): Add "${CMAKE_BINARY_DIR}/../../uim".

2012-03-17 Muneyuki Noguchi <nogu.dev@gmail.com>

    Make distclean works in notify.
    
    * notify/Makefile.am
      - Remove notify/build in distclean-local instead of distclean.
      - Don't remove notify/build when knotify4 isn't enabled.

2012-03-17 Muneyuki Noguchi <nogu.dev@gmail.com>

    Enable knotify4 in make-dist.sh.
    
    * make-dist.sh
      - (CONF_FULL_WO_MAINT): Add knotify4 to "--enable-notify".

2012-03-17 Muneyuki Noguchi <nogu.dev@gmail.com>

    Display uim plasma widget regardless of toolbar-display-time.
    
    * qt4/toolbar/common-uimstateindicator.cpp
      - (UimStateIndicator::propListUpdate):
        * Display plasma widget regardless of toolbar-display-time
          because this widget isn't toolbar.
        * Cosmetic change.

2012-03-17 Muneyuki Noguchi <nogu.dev@gmail.com>

    Save position when uim-toolbar-gtk is dragged.
    
    * gtk2/toolbar/standalone-gtk.c
      - (helper_win_set_position):
        Save position before moving uim-toolbar-gtk.
      - (main): Don't save position
        just after helper_win_set_position() is called.

2012-03-17 Muneyuki Noguchi <nogu.dev@gmail.com>

    Check current visibility of toolbar before changing visibility.
    
    * gtk2/toolbar/common-gtk.c
      - (helper_toolbar_prop_list_update):
        Check if uim-toolbar-gtk is visible.
    * qt4/toolbar/common-uimstateindicator.cpp
      - (UimStateIndicator::propListUpdate):
        Check if uim-toolbar-qt4 is visible.

2012-03-15 Muneyuki Noguchi <nogu.dev@gmail.com>

    Don't try to run `make' in qt4/chardict/po.
    
    * qt4/chardict/Makefile.am
      - Don't try to run `make' in po
        because qt4/chardict/po was removed.

2012-03-15 Muneyuki Noguchi <nogu.dev@gmail.com>

    Make some variables in m17nlib.scm configurable.
    
    * scm/m17nlib-custom.scm
      - New file.
    * scm/m17nlib.scm
      - Don't define m17nlib-widgets, default-widget_m17nlib_input_mode
        and m17nlib-input-mode-actions here.

2012-03-13 Muneyuki Noguchi <nogu.dev@gmail.com>

    * Apply patch by JR to replace rsvg with rsvg-convert (#47204).
      Recent versions of librsvg no longer have rsvg command.
      We don't have to worry about developers not having rsvg-convert
      because rsvg-convert was introduced in librsvg-2.13.4,
      released more than 6 years ago.
      http://ftp.gnome.org/pub/GNOME/sources/librsvg/2.13/librsvg-2.13.4.changes
    * configure.ac
      - Replace rsvg with rsvg-convert.
    * pixmaps/Makefile.am
      - Follow change of configure.ac.

2012-03-13 KIHARA Hideto <deton.kih@gmail.com>

    * NEWS
      - Add news about uim-tutcode.

2012-03-12 KIHARA Hideto <deton@m1.interq.or.jp>

    * po/ja.po
      - Add translation about tutcode.

2012-03-11 Muneyuki Noguchi <nogu.dev@gmail.com>

    * .gitignore
      - Add baidu-olime-jp.png and baidu-olime-jp.svg.

2012-03-11 Iwata <iratqq@gmail.com>

    Merge branch 'master' of https://code.google.com/p/uim

2012-03-11 Iwata <iratqq@gmail.com>

    * scm/http-server.scm (http-server):
      - Use make-tcp-server.
      (http-server:make-server):
      - Delete.

2012-03-11 Iwata <iratqq@gmail.com>

    * scm/socket.scm (make-socket-server):
      - New generic function.
      - Poll with accepted fd and session fd at same time.
      (tcp-accept):
      - Delete.
      (make-tcp-server, make-unix-domain-server):
      - New function.

2012-03-11 Iwata <iratqq@gmail.com>

    * scm/sj3v2-socket.scm (sj3-lib-gakusyuu2):
      - Fix state that learning was never called.

2012-03-11 Iwata <iratqq@gmail.com>

    * uim/uim-helper-server.c (init_server_fd):
      - Revert 46d78f8fba81.
        fchown(2) return always -1 (EINVAL).
        when fd is unix domain socket.

2012-03-11 Iwata <iratqq@gmail.com>

    * scm/yahoo-jp.scm (yahoo-jp-lib-get-nth-word)
      (yahoo-jp-proc-input-state-with-preedit):
      - Fix typo.

2012-03-11 Iwata <iratqq@gmail.com>

    * scm/google-cgiapi-jp-custom.scm (google-cgiapi-jp-im-name-label):
      - Fix name.

2012-03-11 Muneyuki Noguchi <nogu.dev@gmail.com>

    * NEWS
      - Update.

2012-03-11 Iwata <iratqq@gmail.com>

    * scm/Makefile.am (SCM_FILES, module_names):
      - Add baidu-olime-jp.
    * scm/baidu-olime-jp-key-custom.scm:
    * scm/baidu-olime-jp-custom.scm:
      - New file.
    * scm/baidu-olime-jp.scm:
      - Copy from google-cgiapi-jp.scm
    * pixmaps/Makefile.am (IM_SUBST_SVGS, IM_SUBST_PNGS):
      - Add icon.
    * scm/im-switcher.scm (imsw-iconic-label-alist):
      - Add baidu-olime-jp.
    
     New web-based Japanese multi-segment input method 'baidu-olime-jp'.
     Web API is undocumened, but we can understand it from javascript.
      - http://ime.baidu.jp/type/cloudime/olime_jp.js
     It is nealy the same as google-cgiapi-jp.

2012-03-11 Muneyuki Noguchi <nogu.dev@gmail.com>

    * po/fr.po
    * po/ja.po
    * po/ko.po
      - Update po files.

2012-03-11 Muneyuki Noguchi <nogu.dev@gmail.com>

    * gtk2/toolbar/common-gtk.c
      - (helper_toolbar_prop_list_update):
        Don't hide toolbar even when indication_id has suffix "_alnum".
    * qt4/toolbar/common-uimstateindicator.cpp
      - (UimStateIndicator::propListUpdate): Ditto.

2012-03-11 Muneyuki Noguchi <nogu.dev@gmail.com>

    * gtk2/toolbar/common-gtk.c
      - (helper_toolbar_prop_list_update): Change behavior of toolbar display
        based on "toolbar-display-time".
    * qt4/toolbar/common-uimstateindicator.cpp
      - (UimStateIndicator::propListUpdate): Ditto.
    * scm/im-custom.scm
      - Add custom group "toolbar-display".
      - Add custom "toolbar-display-time".

2012-03-11 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/toolbar/common-quimhelpertoolbar.cpp
      - Revert 4670a75cc53e29660ac61a1877f6bd084fe8e314.
    * qt4/toolbar/common-quimhelpertoolbar.h
      - Revert 4670a75cc53e29660ac61a1877f6bd084fe8e314.
    * qt4/toolbar/common-uimstateindicator.cpp
      - (UimStateIndicator::propListUpdate):
        Change implementation. Don't use signal.
    * qt4/toolbar/common-uimstateindicator.h
      - Revert 4670a75cc53e29660ac61a1877f6bd084fe8e314.
    * qt4/toolbar/standalone-qt4.cpp
      - Revert 4670a75cc53e29660ac61a1877f6bd084fe8e314.

2012-03-11 Muneyuki Noguchi <nogu.dev@gmail.com>

    * gtk2/toolbar/common-gtk.c
      - (helper_toolbar_prop_list_update):
        Hide toolbar on direct input (#25695).
        Toolbar needs to restore its position before shown.
    * gtk2/toolbar/standalone-gtk.c
      - (main): Save position of toolbar.

2012-03-10 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/toolbar/common-uimstateindicator.cpp
      - (UimStateIndicator::propListUpdate): Cosmetic change.

2012-03-10 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/toolbar/common-quimhelpertoolbar.cpp
      - (QUimHelperToolbar::QUimHelperToolbar):
        Add connection on modeChanged().
    * qt4/toolbar/common-quimhelpertoolbar.h
      - (QUimHelperToolbar): Add modeChanged().
    * qt4/toolbar/common-uimstateindicator.cpp
      - (UimStateIndicator::propListUpdate):
        Hide toolbar on direct input (#25695).
    * qt4/toolbar/common-uimstateindicator.h
      - (UimStateIndicator): Add modeChanged().
    * qt4/toolbar/standalone-qt4.cpp
      - (UimStandaloneToolbar::UimStandaloneToolbar):
        Add connection on modeChanged().

2012-03-10 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt3/candwin/Makefile.am
    * qt3/pref/Makefile.am
    * qt3/switcher/Makefile.am
      - Don't define QT_CXXFLAGS and QT_LDFLAGS
        to avoid "possible typo" message from automake.

2012-03-10 Muneyuki Noguchi <nogu.dev@gmail.com>

    * .gitignore
      - Add more files to ignore in /gtk{2,3}/dict.

2012-03-10 Muneyuki Noguchi <nogu.dev@gmail.com>

    * po/POTFILES.in
      - Enable build with intltool 0.50.x.

2012-03-10 Muneyuki Noguchi <nogu.dev@gmail.com>

    * po/POTFILES.in
    * po/POTFILES.skip
      - Apply patch by dai to enable build with intltool 0.50.x (#47027).
        (cherry picked from commit 1bb9041dd1068815316ec513135e2ed846eb1b99)

2012-03-09 Muneyuki Noguchi <nogu.dev@gmail.com>

    * .gitignore
      - Add more files to ignore.
      - Remove /qt{3,4}/chardict/po.

2012-03-09 Muneyuki Noguchi <nogu.dev@gmail.com>

    * po/fr.po
    * po/ja.po
    * po/ko.po
      - Clear fuzzy.

2012-03-04 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt3/qtgettext.h
      - Don't define GETTEXT_CONTEXT_GLUE.
    * qt4/qtgettext.h
      - Don't define GETTEXT_CONTEXT_GLUE.
    * uim/gettext.h
      - Define GETTEXT_CONTEXT_GLUE.

2012-03-04 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt3/chardict/unicodeviewwidget.cpp
      - Don't include locale.h.

2012-03-04 Muneyuki Noguchi <nogu.dev@gmail.com>

    * uim/gettext.h
      - Revert dd24492ca097b38e65dfd5854fba7fe8f4ba187d.
    * qt3/qtgettext.h
    * qt4/qtgettext.h
      - define GETTEXT_CONTEXT_GLUE.

2012-03-04 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/chardict/unicodeviewwidget.cpp
      - (UnicodeViewWidget::setupWidgets): Use QByteArray instead of QString.

2012-03-04 Muneyuki Noguchi <nogu.dev@gmail.com>

    * po/Makevars
      - Scan `NC_' instead of `Q_'.
    * po/fr.po
    * po/ja.po
    * po/ko.po
      - Update.
    * qt3/chardict/unicodeviewwidget.cpp
      - Use `NC_' instead of `Q_'.
    * qt3/qtgettext.h
      - Define `NC_' instead of `Q_'.
    * qt4/chardict/unicodeviewwidget.cpp
      - Use `NC_' instead of `Q_'.
    * qt4/qtgettext.h
      - Define `NC_' instead of `Q_'.

2012-03-03 Muneyuki Noguchi <nogu.dev@gmail.com>

    * po/ja.po
      - Add translation for uim-chardict-qt{,4},
        which was in qt{3,4}/chardict/po.

2012-03-03 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/chardict/qt4.cpp
      - (main): Add 2nd argument to bind_textdomain_codeset().

2012-03-03 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/chardict/Makefile.am
      - (EXTRA_DIST): Remove qtgettext.h.

2012-03-03 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt3/chardict/qt.cpp
      - (main): Set domain to `PACKAGE'.
    * qt4/chardict/qt4.cpp
      - (main): Ditto.

2012-03-03 Muneyuki Noguchi <nogu.dev@gmail.com>

    * autogen.sh
      - Remove workarounds.
    * configure.ac
      - Remove qt{3,4}/chardict/po-releated lines.
    * po/Makevars
      - (XGETTEXT_OPTIONS): Add `--keyword=Q_:1c,2'.
    * po/POTFILES.in
      - Add source files of chardicts.
    *  po/fr.po
    *  po/ja.po
    *  po/ko.po
       - Update
    * qt3/chardict/Makefile.am
      - (SUBDIRS): Remove po.
      - (INCLUDES): Add `..'.
      - (HEADER_FILES): Remove qtgettext.h.
    * qt3/chardict/po/ChangeLog
    * qt3/chardict/po/LINGUAS
    * qt3/chardict/po/Makevars
    * qt3/chardict/po/POTFILES.in
    * qt3/chardict/po/ja.po
    * qt3/chardict/po/remove-potcdate.sin
    * qt3/chardict/po/uim-chardict-qt.pot
    * qt3/chardict/qtgettext.h
      - Remove.
    * qt3/chardict/unicodeviewwidget.cpp
      - Use `Q_' instead of `_'.
    * qt3/qtgettext.h
      - Define `Q_'.
    * qt4/chardict/Makefile.am
      - (SUBDIRS): Remove po.
    * qt4/chardict/po/ChangeLog
    * qt4/chardict/po/LINGUAS
    * qt4/chardict/po/Makevars
    * qt4/chardict/po/POTFILES.in
    * qt4/chardict/po/ja.po
    * qt4/chardict/po/remove-potcdate.sin
    * qt4/chardict/po/uim-chardict-qt.pot
    *  qt4/chardict/qtgettext.h
      - Remove.
    * qt4/chardict/uim-chardict-qt4.pro.in
      - (INCLUDEPATH): `Add @srcdir@/..'.
      - (HEADERS): Remove `@srcdir@/qtgettext.h'.
    * qt4/chardict/unicodeviewwidget.cpp
      - Use `Q_' instead of `_'.
    * qt4/qtgettext.h
      - Define `Q_'.
    * uim/gettext.h
      - Update to modified version of gettext 0.18.

2012-03-04 Muneyuki Noguchi <nogu.dev@gmail.com>

    * notify/Makefile.am
      - Add `install' for knotify4.

2012-03-04 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/quiminputcontext.h
      - (QUimInputContext::setCandwinActive): Rename setActive().
    * qt4/immodule/abstractcandidatewindow.cpp
      - (AbstractCandidateWindow::candidateActivate):
        Follow change in QUimInputContext.

2012-03-04 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/abstractcandidatewindow.cpp
      - (AbstractCandidateWindow::candidateActivate):
        Call QUimInputContext::setActive().
      - (AbstractCandidateWindow::timerDone): Remove comment.
    * qt4/immodule/quiminputcontext.cpp
      - (QUimInputContext::cand_activate_cb): Don't set candwinIsActive here.
    * qt4/immodule/quiminputcontext.h
      - (QUimInputContext::setActive): New function.

2012-03-04 Muneyuki Noguchi <nogu.dev@gmail.com>

    * Add support for delay API to Qt4 immodule.
    * qt4/immodule/abstractcandidatewindow.cpp
      - (AbstractCandidateWindow::AbstractCandidateWindow): Add timer.
      - (AbstractCandidateWindow::deactivateCandwin): Stop timer first.
      - (AbstractCandidateWindow::candidateActivate): Ditto.
      - (AbstractCandidateWindow::candidateActivateWithDelay): New function.
      - (AbstractCandidateWindow::timerDone): New function.
    * qt4/immodule/abstractcandidatewindow.h
      - (AbstractCandidateWindow::candidateActivateWithDelay): New function.
      - (AbstractCandidateWindow::timerDone): New function.
    * qt4/immodule/quiminputcontext.cpp
      - (QUimInputContext::createUimContext):
        Call uim_set_delay_candidate_selector_cb().
      - (QUimInputContext::cand_activate_with_delay_cb): New function.
    * qt4/immodule/quiminputcontext.h
      - (QUimInputContext):
        Declare QUimInputContext::cand_activate_with_delay_cb().

2012-03-04 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/abstractcandidatewindow.h
      - (UIM_QT_USE_NEW_PAGE_HANDLING): Add comment.

2012-03-04 Muneyuki Noguchi <nogu.dev@gmail.com>

    * .gitignore
      - Add more files to ignore.

2012-03-03 Muneyuki Noguchi <nogu.dev@gmail.com>

    * .gitignore
      - Update.

2012-03-03 Muneyuki Noguchi <nogu.dev@gmail.com>

    * .gitignore
      - Ignore files generated by make-dist.sh.

2012-03-03 Muneyuki Noguchi <nogu.dev@gmail.com>

    * sigscheme
      - Update submodule.

2012-03-03 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/switcher/qt4.cpp
      - (UimImSwitcher::parseHelperStrImList):
        Use mygettext() instead of gettext().

2012-03-03 Muneyuki Noguchi <nogu.dev@gmail.com>

    * .gitignore
      - Update.

2012-03-02 Muneyuki Noguchi <nogu.dev@gmail.com>

    * configure.ac
      - Check if csi is installed.
    * scm/Makefile.am
      - Don't try to run csi unless csi is installed.

2012-03-02 Muneyuki Noguchi <nogu.dev@gmail.com>

    * sigscheme
      - Update submodule.

2012-03-02 Muneyuki Noguchi <nogu.dev@gmail.com>

    * .gitignore
      - Add more files to ignore.

2012-02-26 Muneyuki Noguchi <nogu.dev@gmail.com>

    * configure.ac
      - Disable GTK+2 feature when gdk-x11-2.0 isn't installed.

2012-02-26 Muneyuki Noguchi <nogu.dev@gmail.com>

    * configure.ac
      - Disable XIM feature when libXext isn't installed.

2012-02-26 Muneyuki Noguchi <nogu.dev@gmail.com>

    * xim/canddisp.cpp
      - (candwin_command): Avoid compile error
        when CANDWIN_PROG_SUFFIX isn't defined.

2012-02-26 Muneyuki Noguchi <nogu.dev@gmail.com>

    * sigscheme
      - Update submodule.

2012-02-26 Muneyuki Noguchi <nogu.dev@gmail.com>

    * .gitignore
      - Add /compile

2012-02-26 Muneyuki Noguchi <nogu.dev@gmail.com>

    * .gitignore
      - New file.

2012-02-26 Muneyuki Noguchi <nogu.dev@gmail.com>

    * uim/uim.h
      - Update URL.

2012-02-26 Muneyuki Noguchi <nogu.dev@gmail.com>

    * tools/gnuify-changelog.pl
      - Don't check if git-svn-id exists
        because log doesn't contain git-svn-id.

2012-02-26 Muneyuki Noguchi <nogu.dev@gmail.com>

    * sigscheme
      - Update submodule.

2012-02-26 Muneyuki Noguchi <nogu.dev@gmail.com>

    * make-dist.sh
      - (SSCM): Rename to SSCM_TAG.
      - (LIBGCROOTS): Rename to LIBGCROOTS_TAG.
    * doc/RELEASING
      - Follow changes in make-dist.sh.

2012-02-26 Muneyuki Noguchi <nogu.dev@gmail.com>

    * doc/RELEASING
      - Replace `svn' with `git'.
      - Add `$' to represent prompt.

2012-02-26 Muneyuki Noguchi <nogu.dev@gmail.com>

    * Makefile.am
      - Specify with RELEASE_TAG.

2012-02-26 Muneyuki Noguchi <nogu.dev@gmail.com>

    * Makefile.am
      - RELEASE_BRAMCH

2012-02-26 Muneyuki Noguchi <nogu.dev@gmail.com>

    * Makefile.am
      - Replace `svn log with `git log'

2012-02-26 Muneyuki Noguchi <nogu.dev@gmail.com>

    * tools/gnuify-changelog.pl
      - Support `git log'.

2012-02-26 Muneyuki Noguchi <nogu.dev@gmail.com>

    * make-dist.sh
      - Replace `svn export' with `git submodule'

2012-02-26 Muneyuki Noguchi <nogu.dev@gmail.com>

    * make-wc.sh
      - Check out master branch after updating submodule.

2012-02-26 Muneyuki Noguchi <nogu.dev@gmail.com>

    * make-wc.sh
      - Use Git instead of Subversion.

2012-02-26 Muneyuki Noguchi <nogu.dev@gmail.com>

    * .gitmodules
    * sigscheme
      - Add libgcroots as a submodule.

2012-02-19 KIHARA Hideto <deton@m1.interq.or.jp>

    * scm/trycode.scm
      - (trycode-rule): Copy comments from original definition.

2012-02-19 KIHARA Hideto <deton@m1.interq.or.jp>

    * scm/trycode.scm
      - (trycode-rule): Update: add 10 kanji.

2012-02-19 KIHARA Hideto <deton@m1.interq.or.jp>

    * scm/trycode.scm
      - (trycode-rule): Reorder.

2012-02-16 Muneyuki Noguchi <nogu.dev@gmail.com>

    * notify/uim-knotify4.cpp
      - Don't include kdemacros.h because it is unneeded.
      - (send_knotify): Output messages to stderr.

2012-02-14 Etsushi Kato <ek.kato@gmail.com>

    * emacs/uim-el-agent.c (main) : Set locale.
    * emacs/im.c (output_default_im_engine) : Use LC_CTYPE.
    * emacs/context.c (create_uim_agent_context) : Ditto.

2012-02-14 Etsushi Kato <ek.kato@gmail.com>

    * qt4/immodule/plugin.cpp (UimInputContextPlugin::create)
      - Use LC_CTYPE instead for LC_ALL for NetBSD compatibility.

2012-02-13 Etsushi Kato <ek.kato@gmail.com>

    * NEWS
    * RELNOTE
      - Merge r7448 from 1.7 branch.

2012-02-13 Etsushi Kato <ek.kato@gmail.com>

    * qt4/immodule/quiminputcontextplugin.pro.in
      - (LIBS) : Fix linking libuim-counted-init if LINK is set to use
        libtool ([uim-ja 322]).

2012-02-11 Muneyuki Noguchi <nogu.dev@gmail.com>

    * uim/uim-posix.c
      - (c_get_config_path): Remove unused variable "exist".

2012-02-11 Muneyuki Noguchi <nogu.dev@gmail.com>

    * uim/iconv.c
      - (uim_iconv_code_conv): Remove unused variable "err".

2012-02-11 Muneyuki Noguchi <nogu.dev@gmail.com>

    * uim/agent.c
      - (main): Check return value of fgets().

2012-02-11 Muneyuki Noguchi <nogu.dev@gmail.com>

    * uim/uim-helper-server.c
      - (init_server_fd): Check return value of fchown().

2012-02-11 Muneyuki Noguchi <nogu.dev@gmail.com>

    * xim/helper.cpp
      - (send_im_list): Check return value of asprintf.
        GLIBC version of asprintf doesn't set the 1st arguments to NULL
        even on failure. Note that free(NULL) does nothing.
    * xim/locale.cpp
      - (get_valid_locales, all_locales): Ditto.
    * xim/main.cpp
      - (init_supported_locales): Ditto.
    * xim/ximserver.cpp
      - (InputContext::switch_system_global_im, InputContext::update_prop_list,
         InputContext::update_prop_label): Ditto.

2012-02-08 Etsushi Kato <ek.kato@gmail.com>

    * po/ja.po : s/注釈/註釈/

2012-02-08 Etsushi Kato <ek.kato@gmail.com>

    * uim/m17nlib.c
      - (get_right_of_cursor)
      - (get_selected_candidate)
      - (get_right_of_candidate)
        - Bug fix for making uim_lisp str from invalid pointer.

2012-02-08 Etsushi Kato <ek.kato@gmail.com>

    * uim/m17nlib.scm (m17nlib-release-key-handler) : Don't discard
      key release event (bug #45734, thanks to Matt).

2012-02-01 Etsushi Kato <ek.kato@gmail.com>

    * fep/uim-fep.c (MAXPATHLEN) : Removed.

2012-02-01 Etsushi Kato <ek.kato@gmail.com>

    * replace/os_dep.h
      - (MAXPATHLEN)
      - (PATH_MAX)
        - Use 1024 in uim unless defined.

2012-02-01 Etsushi Kato <ek.kato@gmail.com>

    * replace/os_dep.h : Add check for MAXPATHLEN and PATH_MAX.

2012-01-31 Etsushi Kato <ek.kato@gmail.com>

    * uim/skk.c (do_search_line) : Avoid possible integer overflow.

2012-01-23 Etsushi Kato <ek.kato@gmail.com>

    * qt4/immodule/qtextutil.cpp
      - (QUimTextUtil::deleteSelectionTextInQTextEdit) : Bug fix
        by merging r7425 from branches/1.7.

2012-01-23 KIHARA Hideto <deton@m1.interq.or.jp>

    * Support binding procedure to key sequence.
    * scm/tutcode.scm
      - (tutcode-stroke-help-update-alist-with-rule):
        Add label for procedure.
      - (tutcode-proc-state-on,
         tutcode-proc-state-yomi,
         tutcode-proc-state-bushu,
         tutcode-proc-state-interactive-bushu):
        Call procedure bound to key sequence.
      - (tutcode-selection-filter): New function.

2012-01-22 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/toolbar/CMakeLists.txt
      - Remove "-Wconversion" from CXXFLAGS to avoid lots of warnings
        from Qt4 header files.

2012-01-22 Muneyuki Noguchi <nogu.dev@gmail.com>

    * notify/uim-knotify4.cpp
      - (uim_notify_knotify4_desc, uim_notify_plugin_get_desc,
         uim_notify_plugin_init, uim_notify_plugin_info,
         uim_notify_plugin_fatal): Fix indent size.

2012-01-22 Muneyuki Noguchi <nogu.dev@gmail.com>

    * notify/uim-knotify4.cpp
      - (send_knotify): Check if QApplication::instance() is 0.

2012-01-22 Muneyuki Noguchi <nogu.dev@gmail.com>

    * notify/CMakeLists.txt
      - (include_directories): Add "${CMAKE_SOURCE_DIR}/.."
         and "${CMAKE_SOURCE_DIR}/../qt4" for qtgettext.h.
    * notify/uim-knotify4.cpp
      - (send_knotify): Use mygettext() for l10n.

2012-01-21 Muneyuki Noguchi <nogu.dev@gmail.com>

    * notify/uim-knotify4.cpp
      - (send_knotify): Fix typo.

2012-01-21 Muneyuki Noguchi <nogu.dev@gmail.com>

    * configure.ac
      - Add support for knotify4 as notify agent.
    * notify/CMakeLists.txt
      - New file.
    * notify/Makefile.am
      - Add knotify4.
    * notify/uim-knotify4.cpp
      - New file.

2012-01-11 Etsushi Kato <ek.kato@gmail.com>

    * Update copyright by svn ls -R | egrep -v '/$' | xargs perl -i -pe 's/\b(20\d\d)([,-\s]+20\d\d)*\s+uim\b/\1-2012 uim/'

2012-01-11 Etsushi Kato <ek.kato@gmail.com>

    * RELNOTE
    * NEWS
      - Merge r7408, r7409 from 1.7 branch.

2012-01-11 Etsushi Kato <ek.kato@gmail.com>

    * uim/uim-custom.c
      - (uim_custom_save_group): Simplify changes in r7322 and r7319.

2012-01-09 Muneyuki Noguchi <nogu.dev@gmail.com>

    * uim/uim-custom.c
      - (row_list_to_str): Suppress warnings.

2012-01-09 Muneyuki Noguchi <nogu.dev@gmail.com>

    * configure.ac
      - Revert r7400.
    * gtk2/candwin/Makefile.am
      - (uim_candwin_horizontal_gtk_LDADD): Add "-lm" to avoid link error.

2012-01-08 Muneyuki Noguchi <nogu.dev@gmail.com>

    * configure.ac
      - Check if libm is available to avoid link error
        caused by floor() in horizontal-gtk.c.

2012-01-03 Muneyuki Noguchi <nogu.dev@gmail.com>

    * gtk2/pref/gtk-custom-widgets.c
      - (table_pref_add_button_clicked_cb):
        * Use g_value_set_static_string() instead if g_value_set_string().
        * Plug leak.
      - (choose_table_clicked_cb): Plug leak.

2012-01-02 Muneyuki Noguchi <nogu.dev@gmail.com>

    * gtk2/pref/gtk-custom-widgets.c
      - (create_table_tree_view): Update comment.
      - (table_pref_dialog_response_cb, uim_pref_gtk_set_default_value):
        Add comment.
    * qt4/pref/customwidgets.cpp
      - (TableEditForm::setTable): Update comment.
      - (CustomTable::setDefault, TableEditForm::table): Add comment.

2012-01-02 Muneyuki Noguchi <nogu.dev@gmail.com>

    * gtk2/pref/gtk-custom-widgets.c
      - (uim_pref_gtk_set_default_value):
        Implement uim_pref_gtk_set_default_value() for table.

2012-01-02 Muneyuki Noguchi <nogu.dev@gmail.com>

    * gtk2/pref/gtk-custom-widgets.c
      - (table_pref_add_button_clicked_cb): Set empty string
        for every column.

2012-01-02 Muneyuki Noguchi <nogu.dev@gmail.com>

    * gtk2/pref/gtk-custom-widgets.c
      - (create_table_tree_view): Make variable names more comprehensive.

2012-01-02 Muneyuki Noguchi <nogu.dev@gmail.com>

    * gtk2/pref/gtk-custom-widgets.c
      - (table_pref_dialog_response_cb): Check if value is NULL.
      - (create_table_tree_view): Set NULL instead if empty string.

2012-01-02 Muneyuki Noguchi <nogu.dev@gmail.com>

    * gtk2/pref/gtk-custom-widgets.c
      - (table_pref_dialog_response_cb): Check if return value of
        g_value_get_string() is NULL.

2012-01-02 Muneyuki Noguchi <nogu.dev@gmail.com>

    * gtk2/pref/gtk-custom-widgets.c
      - (choose_table_clicked_cb): Check if custom variable is
        UCustom_Table.

2012-01-02 Muneyuki Noguchi <nogu.dev@gmail.com>

    * gtk2/pref/gtk-custom-widgets.c
      - Add support for saving table configuration.
      - (table_pref_dialog_response_cb): Implement saving function.
      - (table_pref_renderer_edited, table_pref_add_button_clicked_cb,
         table_pref_remove_button_clicked_cb,
         table_pref_move_button_clicked_cb):
        Call uim_pref_gtk_mark_value_changed().
      - (choose_table_clicked_cb)
        * Set table_label to tree_view again.
        * Pass tree_view to table_pref_dialog_response_cb.

2012-01-02 Muneyuki Noguchi <nogu.dev@gmail.com>

    * gtk2/pref/gtk-custom-widgets.c
      - (sync_value_table_from_tree_view): Remove.
      - (table_pref_renderer_edited): Don't call
        sync_value_table_from_tree_view().
      - (table_pref_add_button_clicked_cb): Ditto.
      - (table_pref_remove_button_clicked_cb): Ditto.
      - (table_pref_move_button_clicked_cb): Ditto.
      - (choose_table_clicked_cb): Don't set table_label to tree_view.

2012-01-02 Muneyuki Noguchi <nogu.dev@gmail.com>

    * gtk2/pref/gtk-custom-widgets.c
      - (create_table_tree_view): Change indent size.

2012-01-02 Muneyuki Noguchi <nogu.dev@gmail.com>

    * gtk2/pref/gtk-custom-widgets.c
      - (choose_table_clicked_cb): Don't use g_snprintf.

2012-01-01 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/chardict/qt4.cpp
      - (main): Set window icon to uim-icon.png.
    * qt4/pref/qt4.cpp
      - (main): Ditto.
    * qt4/switcher/qt4.cpp
      - (main): Ditto.

2012-01-01 Muneyuki Noguchi <nogu.dev@gmail.com>

    * gtk2/pref/gtk-custom-widgets.c
      - Begin to add support for custom type "table".
      - (DEFAULT_TABLE_WINDOW_WIDTH, DEFAULT_TABLE_WINDOW_HEIGHT):
         New macros.
      - (table_pref_dialog_response_cb, sync_value_table,
         sync_value_table_from_tree_view, table_pref_renderer_edited,
         create_table_tree_view, table_pref_add_button_clicked_cb,
         table_pref_remove_button_clicked_cb,
         table_pref_move_button_clicked_cb, table_pref_up_button_clicked_cb,
         table_pref_down_button_clicked_cb, create_table_button,
         choose_table_clicked_cb, update_custom_type_table_cb,
         add_custom_type_table): New function.
      - (uim_pref_gtk_set_default_value):
         Begin to add support for custom type "table".

2011-12-29 KIHARA Hideto <deton@m1.interq.or.jp>

    * scm/tutcode.scm
      - Update comment.

2011-12-07 IWATA Ray <iwata@quasiquote.org>

    * scm/google-cgiapi-jp-custom.scm (google-cgiapi-jp-use-ssl?):
      - Check openssl.

2011-12-07 IWATA Ray <iwata@quasiquote.org>

    * scm/Makefile.am (SCM_FILES, module_names):
      - Add google-cgiapi-jp.
    * scm/google-cgiapi-jp-key-custom.scm:
    * scm/google-cgiapi-jp-custom.scm:
      - New file.
    * scm/google-cgiapi-jp.scm:
      - Copy from social-ime.scm
    * pixmaps/Makefile.am (IM_SUBST_SVGS, IM_SUBST_PNGS):
      - Add icon.
    * scm/im-switcher.scm (imsw-iconic-label-alist):
      - Add google-cgiapi-jp.
      - Style.
    
     New web-based Japanese multi-segment input method 'google-cgiapi-jp'.
     API is here
      - http://www.google.com/intl/ja/ime/cgiapi.html
    
     Use SSL by default. This is undocumented, but works fine.

2011-12-07 IWATA Ray <iwata@quasiquote.org>

    * packrat.scm.in: New file.

2011-12-07 IWATA Ray <iwata@quasiquote.org>

    * COPYING (Author): Add copyright.
    * scm/Makefile.am (SCM_FILES, OTHER_SCM_FILES, json-parser-expanded.scm):
      - Add packrat/json entries.
    * scm/packrat.scm:
      - New file. sigscheme-side packrat parsers without macro.
    * scm/json.scm:
      - New file. sigscheme-side json parser without macro.
    * scm/json-parser-expanded.scm:
      - New pre-expanded file. Automatically generated from json.scm.in.
    * scm/packrat.scm.in:
      - Import from packrat.egg.
    * scm/json.scm.in:
      - Import from chicken.egg.
      - Add utf-8 functions.
      - Surrogate pair handling is not supported.
    * scm/macro-expander.scm:
      - Add helper files.
    * scm/macro-expander-chicken.scm:
      - Add helper files. chicken specific.
    * scm/json-parser-expander.scm:
      - Ditto.
    
      Add packrat parser library and json parser based on {packrat,json}.egg.
      uim-scheme cannot handle it directly, because our interpreter cannot
     expand "define-syntax" type macro (implementation of define-syntax on sigscheme
     is incomplete and disabled on uim). In this case, we can use external scheme
     interpreter's macro expand feature, "syntax-case" module on chicken 3
     ("portable syntax-case", originaly chez scheme), macroexpand on gauche,
     and so on.
    
     SEE ALSO
      packrat/json source (for racket)
       - http://dev.lshift.net/tonyg/json-scheme/
      Egg files
       - http://wiki.call-cc.org/eggref/3/syntax-case
       - http://wiki.call-cc.org/eggref/4/packrat
       - http://wiki.call-cc.org/eggref/4/json

2011-12-01 KIHARA Hideto <deton@m1.interq.or.jp>

    * scm/tutcode.scm
      - (tutcode-proc-state-on):
        Move check of tutcode-history-start, tutcode-undo, tutcode-help,
        tutcode-help-clipboard and tutcode-auto-help-redisplay
        before postfix conversion key sequences.

2011-12-01 KIHARA Hideto <deton@m1.interq.or.jp>

    * scm/tutcode.scm
      - (tutcode-undo): Add undo for yomi state.
      - (tutcode-proc-state-yomi):
        Change to call tutcode-undo-prepare for commit as katakana
        and commit as input sequence.

2011-12-01 KIHARA Hideto <deton@m1.interq.or.jp>

    * scm/tutcode.scm
      - (tutcode-proc-state-yomi):
        Add kanji to sequence conversion on yomi.

2011-12-01 KIHARA Hideto <deton@m1.interq.or.jp>

    * Add sequence to kanji conversion on clipboard.
    * scm/tutcode-key-custom.scm
      - (tutcode-clipboard-seq2kanji-start-sequence): New custom.
    * scm/tutcode.scm
      - (tutcode-stroke-help-update-alist-with-rule):
        Add label for sequence to kanji conversion on clipboard.
      - (tutcode-help-clipboard):
        Follow the change of tutcode-clipboard-acquire-text.
      - (tutcode-begin-clipboard-seq2kanji-conversion): New.
      - (tutcode-clipboard-acquire-text-wo-nl):
        New function extracted from tutcode-clipboard-acquire-text.
      - (tutcode-clipboard-acquire-text):
        Extract deletion of "\n" to tutcode-clipboard-acquire-text-wo-nl.
      - (tutcode-proc-state-on):
        Follow the change of tutcode-clipboard-acquire-text.
        Add check of sequence to kanji conversion on clipboard.
      - (tutcode-proc-state-yomi):
        Follow the change of tutcode-clipboard-acquire-text.
      - (tutcode-proc-state-code): Ditto.
      - (tutcode-proc-state-bushu): Ditto.
      - (tutcode-proc-state-interactive-bushu): Ditto.
      - (tutcode-custom-set-mazegaki/bushu-start-sequence!):
        Add start sequence of sequence to kanji conversion on clipboard.

2011-11-25 KIHARA Hideto <deton@m1.interq.or.jp>

    * scm/tutcode.scm
      - Fix migration when obsolete custom variable
        tutcode-commit-candidate-by-label-key? is #f.

2011-11-24 KIHARA Hideto <deton@m1.interq.or.jp>

    * scm/tutcode.scm
      - (tutcode-proc-state-bushu):
        Change to support pasting bushu conversion sequence.
      - (tutcode-bushu-convert-on-list): New function.
      - (tutcode-proc-state-interactive-bushu):
        Change to support pasting some characters.
      - (tutcode-begin-interactive-bushu-conversion):
        Change to retry bushu conversion trimming pasted characters.

2011-11-24 KIHARA Hideto <deton@m1.interq.or.jp>

    * Change to use label key as next key sequence when the key has
      no candidate or candidate window is not shown.
    * scm/tutcode-custom.scm
      - (tutcode-commit-candidate-by-label-key?): Remove.
      - (tutcode-commit-candidate-by-label-key): New custom.
    * scm/tutcode.scm
      - Add conversion from tutcode-commit-candidate-by-label-key?
        to tutcode-commit-candidate-by-label-key for upgrade.
      - (tutcode-commit-by-label-key,
         tutcode-commit-by-label-key-for-kigou-mode,
         tutcode-commit-by-label-key-for-history,
         tutcode-commit-by-label-key-for-prediction):
        Change to return #t on commit.
      - (tutcode-proc-state-on):
        Change to treat prediction label key as normal key input
        when label key does not match any candidates.
      - (tutcode-proc-state-kigou): Ditto.
        Remove needless key check.
      - (tutcode-proc-state-history): Ditto.
      - (tutcode-proc-state-yomi): Ditto.
      - (tutcode-proc-state-bushu): Ditto.
      - (tutcode-proc-state-interactive-bushu): Ditto.
      - (tutcode-proc-state-converting):
        Change to treat label key as normal key input when the key
        does not match any candidates or candidate window is not shown.

2011-11-22 KIHARA Hideto <deton@m1.interq.or.jp>

    * Move custom keys about postfix conversion to new tutcode-keys3
      custom group.
    * scm/tutcode-key-custom.scm
      - (tutcode-keys3): New custom group.
      - (tutcode-postfix-bushu-start-sequence,
         tutcode-postfix-mazegaki-start-sequence,
         tutcode-postfix-mazegaki-1-start-sequence,
         tutcode-postfix-mazegaki-2-start-sequence,
         tutcode-postfix-mazegaki-3-start-sequence,
         tutcode-postfix-mazegaki-4-start-sequence,
         tutcode-postfix-mazegaki-5-start-sequence,
         tutcode-postfix-mazegaki-6-start-sequence,
         tutcode-postfix-mazegaki-7-start-sequence,
         tutcode-postfix-mazegaki-8-start-sequence,
         tutcode-postfix-mazegaki-9-start-sequence,
         tutcode-postfix-mazegaki-inflection-start-sequence,
         tutcode-postfix-mazegaki-inflection-1-start-sequence,
         tutcode-postfix-mazegaki-inflection-2-start-sequence,
         tutcode-postfix-mazegaki-inflection-3-start-sequence,
         tutcode-postfix-mazegaki-inflection-4-start-sequence,
         tutcode-postfix-mazegaki-inflection-5-start-sequence,
         tutcode-postfix-mazegaki-inflection-6-start-sequence,
         tutcode-postfix-mazegaki-inflection-7-start-sequence,
         tutcode-postfix-mazegaki-inflection-8-start-sequence,
         tutcode-postfix-mazegaki-inflection-9-start-sequence,
         tutcode-postfix-katakana-start-sequence,
         tutcode-postfix-katakana-1-start-sequence,
         tutcode-postfix-katakana-2-start-sequence,
         tutcode-postfix-katakana-3-start-sequence,
         tutcode-postfix-katakana-4-start-sequence,
         tutcode-postfix-katakana-5-start-sequence,
         tutcode-postfix-katakana-6-start-sequence,
         tutcode-postfix-katakana-7-start-sequence,
         tutcode-postfix-katakana-8-start-sequence,
         tutcode-postfix-katakana-9-start-sequence,
         tutcode-postfix-kanji2seq-start-sequence,
         tutcode-postfix-kanji2seq-1-start-sequence,
         tutcode-postfix-kanji2seq-2-start-sequence,
         tutcode-postfix-kanji2seq-3-start-sequence,
         tutcode-postfix-kanji2seq-4-start-sequence,
         tutcode-postfix-kanji2seq-5-start-sequence,
         tutcode-postfix-kanji2seq-6-start-sequence,
         tutcode-postfix-kanji2seq-7-start-sequence,
         tutcode-postfix-kanji2seq-8-start-sequence,
         tutcode-postfix-kanji2seq-9-start-sequence,
         tutcode-postfix-seq2kanji-start-sequence,
         tutcode-postfix-seq2kanji-1-start-sequence,
         tutcode-postfix-seq2kanji-2-start-sequence,
         tutcode-postfix-seq2kanji-3-start-sequence,
         tutcode-postfix-seq2kanji-4-start-sequence,
         tutcode-postfix-seq2kanji-5-start-sequence,
         tutcode-postfix-seq2kanji-6-start-sequence,
         tutcode-postfix-seq2kanji-7-start-sequence,
         tutcode-postfix-seq2kanji-8-start-sequence,
         tutcode-postfix-seq2kanji-9-start-sequence):
        Change custom group to tutcode-keys3 from tutcode-keys1
        and move after tutcode-keys2.

2011-11-22 KIHARA Hideto <deton@m1.interq.or.jp>

    * Add conversions on selection.
    * scm/tutcode-key-custom.scm
      - (tutcode-selection-mazegaki-start-sequence,
         tutcode-selection-mazegaki-inflection-start-sequence,
         tutcode-selection-katakana-start-sequence,
         tutcode-selection-kanji2seq-start-sequence,
         tutcode-selection-seq2kanji-start-sequence): New custom.
    * scm/tutcode.scm
      - (tutcode-commit-with-auto-help):
        Change for conversion on selection.
      - (tutcode-stroke-help-update-alist-with-rule):
        Add labels for conversion on selection.
      - (tutcode-commit-editor-context):
        Change for conversion on selection.
      - (tutcode-proc-state-on):
        Add check of conversion on selection start keys.
      - (tutcode-begin-selection-mazegaki-conversion,
         tutcode-begin-selection-mazegaki-inflection-conversion,
         tutcode-begin-selection-katakana-conversion,
         tutcode-begin-selection-kanji2seq-conversion,
         tutcode-begin-selection-seq2kanji-conversion,
         tutcode-selection-commit,
         tutcode-selection-acquire-text-wo-nl,
         tutcode-selection-acquire-text): New function.
      - (tutcode-back-to-yomi-state):
        Change for conversion on selection.
      - (tutcode-proc-state-converting):
        Change for conversion on selection.
      - (tutcode-custom-set-mazegaki/bushu-start-sequence!):
        Add conversion on selection start sequences.

2011-11-21 KIHARA Hideto <deton@m1.interq.or.jp>

    * Add postfix sequence to kanji conversion.
    * scm/tutcode-key-custom.scm
      - (tutcode-postfix-seq2kanji-start-sequence,
         tutcode-postfix-seq2kanji-1-start-sequence,
         tutcode-postfix-seq2kanji-2-start-sequence,
         tutcode-postfix-seq2kanji-3-start-sequence,
         tutcode-postfix-seq2kanji-4-start-sequence,
         tutcode-postfix-seq2kanji-5-start-sequence,
         tutcode-postfix-seq2kanji-6-start-sequence,
         tutcode-postfix-seq2kanji-7-start-sequence,
         tutcode-postfix-seq2kanji-8-start-sequence,
         tutcode-postfix-seq2kanji-9-start-sequence): New custom.
    * scm/tutcode.scm
      - (tutcode-commit-raw,
         tutcode-commit):
        Change for new tutcode-child-type-seq2kanji.
      - (tutcode-setup-child-context):
        Change for new tutcode-child-type-seq2kanji.
        Change to return created child context.
      - (tutcode-stroke-help-update-alist-with-rule):
        Add label for postfix sequence to kanji conversion key.
      - (tutcode-do-update-preedit):
        Change for new tutcode-child-type-seq2kanji.
        Add postfix sequence to kanji mode.
      - (tutcode-proc-state-on):
        Add check of postfix sequence to kanji conversion start.
      - (tutcode-ascii?):
        New function extracted from tutcode-postfix-mazegaki-acquire-yomi.
      - (tutcode-postfix-mazegaki-acquire-yomi):
        Change to call tutcode-ascii?
      - (tutcode-postfix-acquire-text,
         tutcode-postfix-delete-text):
        Add support for new tutcode-child-type-seq2kanji.
      - (tutcode-sequence->kanji-list,
         tutcode-seq2kanji-commit-from-child,
         tutcode-seq2kanji-commit-raw-from-child,
         tutcode-begin-postfix-seq2kanji-conversion,
         tutcode-proc-state-postfix-seq2kanji): New function.
      - (tutcode-state-has-preedit?):
        Add postfix sequence to kanji state.
      - (tutcode-key-press-handler):
        Change to call tutcode-key-press-handler-internal.
      - (tutcode-key-press-handler-internal):
        Extract from tutcode-key-press-handler.
        Add postfix sequence to kanji state.
      - (tutcode-custom-set-mazegaki/bushu-start-sequence!):
        Add postfix sequence to kanji start key sequences.

2011-11-21 KIHARA Hideto <deton@m1.interq.or.jp>

    * Fix division by zero error on delay showing bushu prediction with
      no candidates for "YA"(hiragana) after bushu prediction candidates
      for "A"(hiragana) are shown and "A" is deleted by backspace.
    * scm/tutcode.scm
      - (tutcode-check-bushu-prediction-make):
        Move common codes from tutcode-check-bushu-prediction-{tc21,tc23}.
      - (tutcode-check-bushu-prediction-tc21):
        Rename to tutcode-bushu-predict-tc21.
      - (tutcode-bushu-predict-tc21):
        Rename from tutcode-check-bushu-prediction-tc21.
        Change not to depend on tutcode context.
      - (tutcode-check-bushu-prediction-tc23):
        Rename to tutcode-bushu-predict-tc23.
      - (tutcode-bushu-predict-tc23):
        Rename from tutcode-check-bushu-prediction-tc23.
        Change not to depend on tutcode context.
      - (tutcode-bushu-prediction-make-page):
        Change to return #f for no candidates.
      - (tutcode-delay-activating-handler):
        Change to check return value of tutcode-bushu-prediction-make-page.

2011-11-18 KIHARA Hideto <deton@m1.interq.or.jp>

    * scm/tutcode.scm
      - (tutcode-postfix-commit):
        Fix problem that unexpected characters are deleted on Firefox
        when preedit is shown.

2011-11-13 KIHARA Hideto <deton@m1.interq.or.jp>

    * scm/tutcode.scm
      - (tutcode-proc-state-on):
        Fix bug that extending text selection by <Shift>left/right key
        does not work because empty string committed by the key
        replaces current selection.

2011-11-12 KIHARA Hideto <deton@m1.interq.or.jp>

    * scm/tutcode.scm
      - (tutcode-begin-postfix-katakana-conversion): Simplify.
      - (tutcode-kanji-list->sequence):
        Fix error when tutcode-postfix-kanji2seq-3-start-sequence
        is typed on top of text field.
      - (tutcode-begin-postfix-kanji2seq-conversion): Simplify.
      - (tutcode-proc-state-postfix-kanji2seq): Simplify.

2011-11-11 KIHARA Hideto <deton@m1.interq.or.jp>

    * Add postfix kanji to sequence conversion.
    * scm/tutcode-key-custom.scm
      - (tutcode-postfix-kanji2seq-start-sequence,
         tutcode-postfix-kanji2seq-1-start-sequence,
         tutcode-postfix-kanji2seq-2-start-sequence,
         tutcode-postfix-kanji2seq-3-start-sequence,
         tutcode-postfix-kanji2seq-4-start-sequence,
         tutcode-postfix-kanji2seq-5-start-sequence,
         tutcode-postfix-kanji2seq-6-start-sequence,
         tutcode-postfix-kanji2seq-7-start-sequence,
         tutcode-postfix-kanji2seq-8-start-sequence,
         tutcode-postfix-kanji2seq-9-start-sequence,
         tutcode-verbose-stroke-key): New custom.
    * scm/tutcode-custom.scm
      - (tutcode-keep-illegal-sequence?): New custom.
      - (tutcode-delete-leading-space-on-postfix-kanji2seq?): New custom.
    * scm/tutcode.scm
      - (tutcode-postfix-kanji2seq-delimiter-char-list): New variable.
      - (tutcode-commit-with-auto-help):
        Change to call tutcode-postfix-commit.
      - (tutcode-stroke-help-update-alist-with-rule):
        Add label for postfix kanji to sequence conversion key.
      - (tutcode-do-update-preedit): Add postfix kanji to sequence mode.
      - (tutcode-commit-editor-context):
        Change to call tutcode-postfix-commit.
      - (tutcode-proc-state-on):
        Change to commit the sequence by verbose stroke key
        in the middle of sequence.
        Change not to ignore illegal sequence.
        Add check of postfix kanji to sequence conversion start.
      - (tutcode-begin-postfix-bushu-conversion):
        Change to call tutcode-postfix-commit.
      - (tutcode-undo-prepare-postfix): Remove.
        Move into tutcode-postfix-commit.
      - (tutcode-postfix-commit):
        New function extracted from call of
        tutcode-undo-prepare-postfix and commit.
      - (tutcode-postfix-katakana-commit):
        Change to call tutcode-postfix-commit.
      - (tutcode-kanji-list->sequence,
         tutcode-begin-postfix-kanji2seq-conversion,
         tutcode-proc-state-postfix-kanji2seq): New function.
      - (tutcode-proc-state-yomi):
        Change to use the sequence by verbose strokey key
        in the middle of sequence.
        Change not to ignore illegal sequence.
        Change to call tutcode-postfix-commit.
      - (tutcode-state-has-preedit?): Add postfix kanji to sequence state.
      - (tutcode-key-press-handler): Add postfix kanji to sequence state.
      - (tutcode-custom-set-mazegaki/bushu-start-sequence!):
        Add postfix kanji to sequence start key sequences.
    * scm/tutcode-rule.scm
      - (tutcode-rule):
        Move katakana rules which use uppercase keys to separate rule.
      - (tutcode-rule-uppercase-for-katakana):
        Extracted katakana rules which use uppercase keys from tutcode-rule.
      - (tutcode-rule-uppercase-for-kigou-in-katakana):
        Extracted kigou rules which use uppercase keys from tutcode-rule.
      - Add check not to add rules which use uppercase keys.

2011-11-08 KIHARA Hideto <deton@m1.interq.or.jp>

    * Add postfix katakana conversion.
    * scm/tutcode-key-custom.scm
      - (tutcode-postfix-katakana-start-sequence,
         tutcode-postfix-katakana-1-start-sequence,
         tutcode-postfix-katakana-2-start-sequence,
         tutcode-postfix-katakana-3-start-sequence,
         tutcode-postfix-katakana-4-start-sequence,
         tutcode-postfix-katakana-5-start-sequence,
         tutcode-postfix-katakana-6-start-sequence,
         tutcode-postfix-katakana-7-start-sequence,
         tutcode-postfix-katakana-8-start-sequence,
         tutcode-postfix-katakana-9-start-sequence): New custom.
    * scm/tutcode.scm
      - (tutcode-stroke-help-update-alist-with-rule):
        Add label for postfix katakana key.
      - (tutcode-do-update-preedit): Add postfix katakana mode.
      - (tutcode-proc-state-on): Add check of postfix katakana start.
      - (tutcode-postfix-katakana-commit,
         tutcode-begin-postfix-katakana-conversion,
         tutcode-proc-state-postfix-katakana): New function.
      - (tutcode-katakana-convert):
        New function extracted from tutcode-proc-state-yomi and modified.
      - (tutcode-proc-state-yomi):
        Change to use tutcode-katakana-convert.
        Add check of postfix katakana start key.
      - (tutcode-state-has-preedit?): Add postfix katakana state.
      - (tutcode-key-press-handler): Add postfix katakana state.
      - (tutcode-custom-set-mazegaki/bushu-start-sequence!):
        Add postfix katakana start key sequences.

2011-11-06 KIHARA Hideto <deton@m1.interq.or.jp>

    * scm/tutcode.scm
      - (tutcode-undo):
        Fix to update commit-strs for completion on undo.

2011-11-03 KIHARA Hideto <deton@m1.interq.or.jp>

    * scm/tutcode.scm
      - Update comment.

2011-11-03 KIHARA Hideto <deton@m1.interq.or.jp>

    * Add function to paste clipboard text into preedit
      using text acquisition API.
    * scm/tutcode-key-custom.scm
      - (tutcode-paste-key): New custom key.
    * scm/tutcode.scm
      - (tutcode-help-clipboard):
        Change to call tutcode-clipboard-acquire-text.
      - (tutcode-clipboard-acquire-text):
        Extracted from tutcode-help-clipboard.
      - (tutcode-proc-state-on,
         tutcode-proc-state-yomi,
         tutcode-proc-state-code,
         tutcode-proc-state-bushu,
         tutcode-proc-state-interactive-bushu): Add check of paste key.

2011-11-03 KIHARA Hideto <deton@m1.interq.or.jp>

    * scm/tutcode-key-custom.scm
      - (tutcode-help-clipboard-sequence): New custom.
    * scm/tutcode.scm
      - (tutcode-stroke-help-update-alist-with-rule):
        Add label for help on clipboard key sequence.
      - (tutcode-help-clipboard): New function.
      - (tutcode-proc-state-on):
        Add check of help on clipboard key sequence.
      - (tutcode-custom-set-mazegaki/bushu-start-sequence!):
        Add help on clipboard key sequence.

2011-11-02 KIHARA Hideto <deton@m1.interq.or.jp>

    * scm/tutcode.scm
      - (tutcode-begin-history): Fix typo.

2011-10-31 KIHARA Hideto <deton@m1.interq.or.jp>

    * scm/tutcode.scm
      - (tutcode-commit-with-auto-help):
        Add call of tutcode-undo-prepare to undo commit
        of prefix mazegaki conversion.
      - (tutcode-begin-kanji-code-input):
        Add call of tutcode-undo-prepare.
      - (tutcode-commit-editor-context,
         tutcode-begin-postfix-bushu-conversion,
         tutcode-proc-state-converting):
        Follow the rename of tutcode-undo-prepare-postfix.
      - (tutcode-proc-state-on):
        Add reset of undo data before starting bushu conversion.
      - (tutcode-undo): Change to support prefix conversion.
      - (tutcode-undo-prepare):
        Add state argument to distinguish type of prefix conversion.
      - (tutcode-undo-prepare-postfix):
        New function rename from tutcode-undo-prepare.
      - (tutcode-proc-state-bushu): Change to support undo.
      - (tutcode-bushu-commit): Ditto.

2011-10-31 KIHARA Hideto <deton@m1.interq.or.jp>

    * scm/tutcode.scm
      - (tutcode-set-candidate-index-handler):
        Change to treat button click on virtual keyboard as key press.

2011-10-31 KIHARA Hideto <deton@m1.interq.or.jp>

    * Add function to show help for char at current position
      using surrounding text API
    * scm/tutcode-key-custom.scm
      - (tutcode-help-sequence): New key custom.
    * scm/tutcode.scm
      - (tutcode-stroke-help-update-alist-with-rule):
        Add label for help key sequence.
      - (tutcode-check-auto-help-window-begin):
        Add optional argument.
        Change to show help immediately if opt-immediate? argument is #t.
      - (tutcode-help): New function.
      - (tutcode-proc-state-on): Add check of help key sequence.
      - (tutcode-custom-set-mazegaki/bushu-start-sequence!):
        Add help key sequence.

2011-10-31 KIHARA Hideto <deton@m1.interq.or.jp>

    * scm/tutcode.scm
      - (tutcode-prediction-calc-window-param):
        Remove obsolete comment.

2011-10-29 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/toolbar/common-uimstateindicator.cpp
      - (UimStateIndicator::propListUpdate): Use Qt4 library function
        QFile::exists() instead of POSIX function stat().
      - (QHelperPopupMenu::insertHelperItem): Ditto.

2011-10-29 Muneyuki Noguchi <nogu.dev@gmail.com>

    * doc/COMPATIBILITY
      - Add new section "Support range for table custom type".

2011-10-29 Muneyuki Noguchi <nogu.dev@gmail.com>

    * doc/COMPATIBILITY
      - Add new section "New table custom type".

2011-10-28 KIHARA Hideto <deton@m1.interq.or.jp>

    * Add function to undo last commit of postfix conversion.
    * scm/tutcode-key-custom.scm
      - (tutcode-undo-sequence): New key custom.
    * scm/tutcode.scm
      - (tutcode-context-rec-spec): Add undo variable.
      - (tutcode-commit-raw, tutcode-commit): Reset undo variable.
      - (tutcode-commit-with-auto-help,
         tutcode-commit-editor-context,
         tutcode-begin-postfix-bushu-conversion,
         tutcode-proc-state-converting): Prepare for undo.
      - (tutcode-stroke-help-update-alist-with-rule):
        Add label for undo key sequence.
      - (tutcode-proc-state-on): Add check of undo key sequence.
      - (tutcode-undo, tutcode-undo-prepare): New function.
      - (tutcode-custom-set-mazegaki/bushu-start-sequence!):
        Add undo key sequence.

2011-10-27 KIHARA Hideto <deton@m1.interq.or.jp>

    * scm/tutcode.scm
      - (tutcode-back-to-yomi-state):
        Fix bug that suffix is appended to committed string when new
        entry is registered to mazegaki dictionary after conversion cancel.
    
        Steps to reproduce the bug:
          type "alj" to enter yomi input mode for mazegaki conversion,
          type "whwkri" then "MEMAI" in hiragana as yomi,
          type " " to begin mazegaki conversion,
          candidate for "ME-" ("ME" as yomi and "MAI" as suffix) is shown,
          type <Control>g to cancel conversion,
          type "|" to enter register mode for "MEMAI",
          enter "XXX" as candidate for yomi "MEMAI",
          type Return key to finish register mode,
          "XXXMAI" is committed ("XXX" is expected).

2011-10-23 KIHARA Hideto <deton@m1.interq.or.jp>

    * Add previous and next page buttons to gtk candidate window.
    * gtk2/candwin/gtk.c
    * gtk2/candwin/horizontal-gtk.c
    * gtk2/candwin/tbl-gtk.c
      - (_UIMCandidateWindow): Add prev/next page buttons.
      - (pagebutton_clicked): New.
      - (candidate_window_init):
        Add initialization of prev/next page buttons.
      - (candwin_activate):
        Add reset of need_page_update.
        Set sensitiveness of prev/next page buttons
        according to number of candidates.
      - (candwin_set_nr_candidates): Ditto.
      - (uim_cand_win_gtk_set_index):
        Update page when prev/next page button is clicked.
      - (uim_cand_win_gtk_set_page):
        Add check whether page data is received
        because candwin may not have page data when
        prev/next page button is clicked.
      - (uim_cand_win_gtk_show):
        Change num_label to hbox which contains prev/next page buttons.
    * gtk2/immodule/uim-cand-win-gtk.c
      - (pagebutton_clicked): New.
      - (uim_cand_win_gtk_init):
        Add initialization of prev/next page buttons.
      - (uim_cand_win_gtk_set_nr_candidates):
        Set sensitiveness of prev/next page buttons
        according to number of candidates.
      - (uim_cand_win_gtk_set_candidates): Ditto.
    * gtk2/immodule/uim-cand-win-gtk.h
      - (_UIMCandWinGtk): Add prev/next page buttons.
    * gtk2/immodule/gtk-im-uim.c
      - (index_changed_cb):
        Get page candidates from IM when prev/next page button is clicked.
    * gtk2/immodule/uim-cand-win-horizontal-gtk.c
      - (uim_cand_win_horizontal_gtk_set_index):
        Add check whether page data is received
        because candwin may not have page data when
        prev/next page button is clicked.
      - (update_table_button): Ditto.
    * gtk2/immodule/uim-cand-win-tbl-gtk.c
      - (uim_cand_win_tbl_gtk_set_page): Ditto.
    * scm/tutcode.scm
      - (tutcode-set-candidate-index-handler):
        If index is in shown page on candidate window then commit
        the index, else only update selected index because
        prev/next page button is pressed.
    * scm/prime.scm
      - (prime-set-candidate-index-handler): Ditto.

2011-10-23 KIHARA Hideto <deton@m1.interq.or.jp>

    * Extract vertical candwin from uim-cand-win-gtk.c
      to uim-cand-win-vertical-gtk.c.
    * gtk2/immodule/uim-cand-win-gtk.c
      - (uim_cand_win_gtk_init):
        Move initialization of TreeView to uim_cand_win_vertical_gtk_init().
      - (tree_selection_change,
         tree_selection_changed,
         tree_view_button_press): Move to uim-cand-win-vertical-gtk.c.
      - (uim_cand_win_gtk_real_set_index):
        Move TreeView dependent codes to uim-cand-win-vertical-gtk.c.
      - (uim_cand_win_gtk_real_set_page):
        Comment out TreeView dependent code.
    * gtk2/immodule/gtk-im-uim.c
      - (im_uim_create_cand_win_gtk):
        Change to call uim_cand_win_vertical_gtk_new()
        on creating vertical candwin.
    * gtk2/immodule/uim-cand-win-vertical-gtk.c
      - New file extracted from uim-cand-win-gtk.c
    * gtk2/immodule/uim-cand-win-vertical-gtk.h
      - New file.
    * gtk2/immodule/uim-cand-win-horizontal-gtk.c
      - (uim_cand_win_horizontal_gtk_init):
        Remove destroy of vertical view.
    * gtk2/immodule/uim-cand-win-tbl-gtk.c
      - (uim_cand_win_tbl_gtk_init):
        Remove destroy of vertical view.
    * gtk2/immodule/Makefile.am
      - (IM_UIM_SOURCES): Add uim-cand-win-vertical-gtk.[ch]
    * gtk3/immodule/Makefile.am
      - (IM_UIM_SOURCES): Add uim-cand-win-vertical-gtk.[ch]

2011-10-23 KIHARA Hideto <deton@m1.interq.or.jp>

    * scm/tutcode.scm
      - (tutcode-commit-by-label-key-for-prediction,
         tutcode-set-candidate-index-handler):
        Change not to set index without kanji combination guide
        to prediction-index to avoid confusion.
      - (tutcode-get-prediction-string): Add idx argument.
      - (tutcode-learn-prediction-string):
        Change to use idx argument instead of prediction-index context.
      - (tutcode-do-commit-prediction,
         tutcode-do-commit-prediction-for-bushu,
         tutcode-do-commit-prediction-for-interactive-bushu):
        Change to use idx argument.
      - (tutcode-do-update-preedit,
         tutcode-proc-state-interactive-bushu):
        Follow the argument change of tutcode-get-prediction-string.

2011-10-23 KIHARA Hideto <deton@m1.interq.or.jp>

    * scm/tutcode.scm
      - (tutcode-begin-bushu-conversion):
        Change to show previous shown bushu prediction page
        when bushu conversion with new bushu is failed.
      - (tutcode-check-bushu-prediction-tc21,
         tutcode-check-bushu-prediction-tc23):
        Clear prediction-bushu-page-start for new bushu prediction.

2011-10-20 KIHARA Hideto <deton@m1.interq.or.jp>

    * doc/COMPATIBILITY
      - Add new section "New API for delay showing candidate window"

2011-10-19 KIHARA Hideto <deton@m1.interq.or.jp>

    * scm/tutcode.scm
      - (tutcode-begin-interactive-bushu-conversion):
        Fix mismatch of preedit and shown page on candidate window
        when interactive bushu conversion with new bushu is failed.

2011-10-18 KIHARA Hideto <deton@m1.interq.or.jp>

    * gtk2/candwin/horizontal-gtk.c
      - (button_clicked): Fix problem that select by click does not work.

2011-10-18 KIHARA Hideto <deton@m1.interq.or.jp>

    * scm/tutcode.scm
      - (tutcode-proc-state-bushu):
        Fix error when next page key is typed twice on bushu prediction.

2011-10-16 KIHARA Hideto <deton@m1.interq.or.jp>

    * scm/tutcode.scm
      - (tutcode-proc-state-bushu):
        Fix to show bushu prediction only when rk sequence is not started.

2011-10-15 KIHARA Hideto <deton@m1.interq.or.jp>

    * scm/tutcode.scm
      - (tutcode-proc-state-bushu):
        Change to show bushu prediction on commit or cancel of
        recursive bushu conversion.
      - (tutcode-begin-bushu-conversion):
        Change to show bushu prediction again on bushu conversion failure.

2011-10-15 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/toolbar/common-uimstateindicator.cpp
      - (UimStateIndicator::propListUpdate): Fix segfault with uim-mozc.

2011-10-14 KIHARA Hideto <deton@m1.interq.or.jp>

    * Add API for delay showing candidate window [uim-ja 305].
    * scm/im-custom.scm
      - (candidate-window-use-delay?):
        Rename to tutcode-candidate-window-use-delay?
    * scm/tutcode-custom.scm
      - (tutcode-candidate-window-use-delay?):
        Rename from candidate-window-use-delay?
    * scm/tutcode.scm
      - (candidate-window-activate-delay): Remove.
      - (candidate-window-delay-selected-index):
        Move into tutcode-context-rec-spec.
      - (tutcode-candidate-window-delay-support?): Remove.
      - (tutcode-context-rec-spec):
        Add candwin-delay-selected-index.
      - (tutcode-context-new):
        Add call of im-set-delay-activating-handler!
      - (tutcode-activate-candidate-window):
        Change to use new API im-delay-activate-candidate-selector.
      - (tutcode-candidate-window-enable-delay?):
        New function to replace tutcode-candidate-window-delay-support? variable.
      - (tutcode-select-candidate): Follow the change of delay-selected-index.
      - (tutcode-check-stroke-help-window-begin):
        Change to use tutcode-candidate-window-enable-delay?
        Change to pass -1 as display-limit argument for delay
        to show calling as delay request explicitly
        because that argument is not used on requesting delay activate.
        Change to pass 0 as delay argument for non-delay
        to show calling as non-delay request explicitly.
      - (tutcode-check-auto-help-window-begin): Ditto.
      - (tutcode-check-completion): Ditto.
      - (tutcode-check-prediction): Ditto.
      - (tutcode-check-bushu-prediction): Ditto.
      - (tutcode-check-bushu-prediction-make):
        Rename from tutcode-check-bushu-prediction-with-delay.
        Change argument delay to show-candwin?
      - (tutcode-check-bushu-prediction-tc21,
         tutcode-check-bushu-prediction-tc23):
        Change argument delay to show-candwin?
      - (tutcode-bushu-prediction-make-page):
        Rename from tutcode-bushu-prediction-show-page.
        Change argument delay to show-candwin?
      - (tutcode-change-bushu-prediction-page):
        Follow the change of tutcode-bushu-prediction-make-page.
      - (tutcode-reset-candidate-window):
        Add reset of variables related to delay.
      - (tutcode-get-candidate-handler):
        Extract delay related codes to tutcode-delay-activating-handler.
        Remove negotiation about table style candidate window.
      - (tutcode-delay-activating-handler):
        New function extracted from tutcode-get-candidate-handler.
    * scm/im.scm
      - (im): Add delay-activating-handler as new record entry.
      - (delay-activating-handler): New.
    * uim/uim.c
      - (uim_delay_activating_args): New struct.
      - (uim_set_delay_candidate_selector_cb): New function.
      - (uim_delay_activating): New function.
      - (uim_delay_activating_internal): New function.
    * uim/uim.h
      - (uim_set_delay_candidate_selector_cb): New.
      - (uim_delay_activating): New.
    * uim/uim-internal.h
      - (uim_context_): Add candidate_selector_delay_activate_cb.
    * uim/uim-func.c
      - (im_delay_activate_candidate_selector): New.
      - (im_delay_activate_candidate_selector_supportedp): New.
      - (uim_init_im_subrs):
        Add initialization of new functions.
    * xim/ximserver.cpp
      - (InputContext::createUimContext):
        Change to use uim_set_delay_candidate_selector_cb()
        to register InputContext::candidate_activate_with_delay_cb()
        for delay activate.
      - (InputContext::candidate_activate_with_delay_cb):
        Change argument nr and display_limit to delay.
      - (InputContext::candidate_activate):
        Add call timer_cancel() for the case of being called while delay.
        Remove call of negotiate_scm() and candidate_select_cb().
      - (InputContext::candidate_activate_with_delay):
        Change argument nr and display_limit to delay.
        Change to use delay argument instead of get value of
        candidate-window-activate-delay variable.
      - (InputContext::candidate_activate_timeout):
        Add call of uim_delay_activating() and candidate_select().
    * xim/ximserver.h
      - (InputContext::candidate_activate_with_delay):
        Change argument nr and display_limit to delay.
      - (InputContext::candidate_activate_with_delay_cb): Ditto.
    * xim/canddisp.cpp
      - (Canddisp::Canddisp): Remove initializer of negotiated_scm.
      - (Canddisp::negotiate_scm): Remove.
    * xim/canddisp.h
      - (Canddisp): Remove negotiate_scm() and negotiated_scm.
    * gtk2/immodule/gtk-im-uim.c
      - (negotiate_scm): Remove.
      - (cand_activate_cb):
        Add call cand_delay_timer_remove()
        for the case of being called while delay.
        Remove call of negotiate_scm() and cand_select_cb().
      - (cand_activate_timeout):
        Add call of uim_delay_activating() and cand_select_cb().
      - (cand_activate_with_delay_cb):
        Change argument nr and display_limit to delay.
        Change to use delay argument instead of get value of
        candidate-window-activate-delay variable.
      - (im_module_create):
        Change to use uim_set_delay_candidate_selector_cb()
        to register cand_activate_with_delay_cb() for delay activate.

2011-10-07 KIHARA Hideto <deton@m1.interq.or.jp>

    * Add delay showing candidate window for prediction and help.
    * scm/tutcode-custom.scm
      - (tutcode-candidate-window-activate-delay-for-mazegaki,
         tutcode-candidate-window-activate-delay-for-stroke-help,
         tutcode-candidate-window-activate-delay-for-auto-help,
         tutcode-candidate-window-activate-delay-for-completion,
         tutcode-candidate-window-activate-delay-for-prediction,
         tutcode-candidate-window-activate-delay-for-bushu-prediction,
         tutcode-candidate-window-activate-delay-for-interactive-bushu):
        New custom.
    * scm/tutcode.scm
      - (candidate-window-activate-delay,
         candidate-window-delay-selected-index): New variable.
      - (tutcode-candidate-window-delay-support?): New variable.
      - (tutcode-context-rec-spec): Add candwin-delay-waiting.
      - (tutcode-begin-conversion):
        Replace im-select-candidate with tutcode-select-candidate.
      - (tutcode-check-candidate-window-begin,
         tutcode-begin-kigou-mode,
         tutcode-begin-history):
        Change to call tutcode-check-candidate-window-begin.
      - (tutcode-activate-candidate-window,
         tutcode-select-candidate): New function.
      - (tutcode-stroke-help-make):
        New function extracted from tutcode-check-stroke-help-window-begin.
      - (tutcode-check-stroke-help-window-begin):
        Change for delay showing candidate window.
      - (tutcode-auto-help-make):
        New function extracted from tutcode-check-auto-help-window-begin.
      - (tutcode-check-auto-help-window-begin):
        Change for delay showing candidate window.
      - (tutcode-auto-help-redisplay):
        Follow the change of tutcode-check-auto-help-window-begin.
      - (tutcode-check-completion):
        Change for delay showing candidate window.
      - (tutcode-check-completion-make):
        New function extracted from tutcode-check-completion.
      - (tutcode-check-prediction):
        Change for delay showing candidate window.
      - (tutcode-check-prediction-make):
        New function extracted from tutcode-check-prediction.
      - (tutcode-check-bushu-prediction):
        Change for delay showing candidate window.
      - (tutcode-check-bushu-prediction-with-delay):
        Rename from tutcode-check-bushu-prediction and add delay argument.
      - (tutcode-check-bushu-prediction-tc21,
         tutcode-check-bushu-prediction-tc23):
        Add delay argument.
      - (tutcode-bushu-prediction-show-page):
        Add delay argument.
        Change for delay showing candidate window.
      - (tutcode-proc-state-kigou):
        Replace im-select-candidate with tutcode-select-candidate.
      - (tutcode-begin-interactive-bushu-conversion):
        Change for delay showing candidate window.
      - (tutcode-change-candidate-index,
         tutcode-change-prediction-index):
        Replace im-select-candidate with tutcode-select-candidate.
      - (tutcode-change-bushu-prediction-page):
        Follow the argument change of tutcode-bushu-prediction-show-page.
      - (tutcode-back-to-converting-state):
        Replace im-select-candidate with tutcode-select-candidate.
      - (tutcode-get-candidate-handler):
        Change for delay showing candidate window.
    * scm/im-custom.scm
      - (candidate-window-use-delay?): New custom.
    * xim/ximserver.cpp
      - (InputContext::~InputContext): Add call of timer_cancel().
      - (InputContext::createUimContext):
        Switch activate_cb according to candidate-window-use-delay?
      - (InputContext::focusOut): Add call of timer_cancel().
      - (InputContext::candidate_activate_with_delay_cb,
         InputContext::candidate_activate_timeout_cb): New function.
      - (InputContext::candidate_activate): Change to use negotiate_scm().
      - (InputContext::candidate_activate_with_delay,
         InputContext::candidate_activate_timeout): New function.
      - (InputContext::candidate_deactivate): Add call of timer_cancel().
    * xim/main.cpp
      - (timer_check, timer_ptr, timer_cb, timer_time,
         timer_set, timer_cancel): New.
      - (main_loop):
        Change select timeout from 2 seconds to 1 second.
        Add call of timer_check().
    * xim/ximserver.h
      - (UIM_XIM_USE_DELAY): New.
      - (timer_set, timer_cancel): Add declaration.
      - (InputContext::candidate_activate_with_delay,
         InputContext::candidate_activate_timeout,
         InputContext::candidate_activate_with_delay_cb,
         InputContext::candidate_activate_timeout_cb): Add declaration.
    * xim/canddisp.cpp
      - (Canddisp::Canddisp): Add initialization of negotiated_scm.
      - (Canddisp::negotiate_scm):
        Rename from adjust_display_limit.
        Change for delay showing candidate window.
    * xim/canddisp.h
      - (Canddisp::negotiate_scm):
        Rename adjust_display_limit to negotiate_scm.
      - (Canddisp::negotiated_scm): New member variable.
    * gtk2/immodules/gtk-im-uim.c
      - (negotiate_scm):
        New function extracted from cand_activate_cb()
        and changed for delay showing candidate window.
      - (cand_activate_cb):
        Change to call negotiate_scm().
      - (cand_activate_timeout,
         cand_delay_timer_remove,
         cand_activate_with_delay_cb): New function.
      - (cand_deactivate_cb,
         update_candwin_style,
         im_uim_finalize): Add call of cand_delay_timer_remove().
      - (im_module_create):
        Switch activate_cb according to candidate-window-use-delay?
    * gtk2/immodules/gtk-im-uim.h
      - (IM_UIM_USE_DELAY): New.

2011-09-21 KIHARA Hideto <deton@m1.interq.or.jp>

    * uim/uim-custom.c
      - (uim_custom_save_group): Fix SEGV on Apply button of uim-pref-gtk.

2011-09-19 Muneyuki Noguchi <nogu.dev@gmail.com>

    * gtk2/switcher/gtk.c
      - (load_configration): Plug leak.

2011-09-19 Muneyuki Noguchi <nogu.dev@gmail.com>

    * gtk2/dict/canna.c
      - (parse_canna_priv_dic_buf): Check if "p" is NULL.
      - (uim_dict_canna_open): Plug leak.
    * gtk2/dict/word-win-gtk.c
      - (word_window_add): free "word" with free() instead of g_free()
        because "word" is allocated with malloc().

2011-09-19 Muneyuki Noguchi <nogu.dev@gmail.com>

    * uim/uim-custom.c
      - (uim_custom_value_internal): Plug leak.
      - (uim_custom_save_group): Ditto.

2011-09-19 Muneyuki Noguchi <nogu.dev@gmail.com>

    * xim/helper.cpp
      - (send_im_list): Plug leak.

2011-09-19 Muneyuki Noguchi <nogu.dev@gmail.com>

    * uim/scim.cpp
      - (alloc_id): Plug leak.

2011-09-19 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt3/pref/customwidgets.cpp
      - (CustomChoiceCombo::slotActivated): Avoid crash
        by checking if variable "choice" is NULL.
    * qt4/pref/customwidgets.cpp
      - (CustomChoiceCombo::slotActivated): Ditto.

2011-09-19 Muneyuki Noguchi <nogu.dev@gmail.com>

    * gtk2/immodule/compose.c
      - (im_uim_create_compose_tree): Plug leak.
    * qt4/immodule/quiminputcontext_compose.cpp
      - (QUimInputContext::create_compose_tree): Ditto.
    * qt3/immodule/quiminputcontext_compose.cpp
      - (QUimInputContext::create_compose_tree): Ditto.
    * xim/compose.cpp
      - (XimIM::create_compose_tree): Ditto.

2011-09-19 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/pref/customwidgets.cpp
      - (CustomTable::slotEditButtonClicked):
        Fix crashy code. See also: http://www.kdedevelopers.org/node/3919

2011-09-18 KIHARA Hideto <deton@m1.interq.or.jp>

    * scm/tutcode-custom.scm
      - (tutcode-nr-candidate-max-for-prediction):
        Remove activity hook on tutcode-use-candidate-window?
        because tutcode-nr-candidate-max-for-prediction
        is not depend on tutcode-use-candidate-window?
      - (tutcode-nr-candidate-max-for-guide): Ditto.
      - (tutcode-nr-candidate-max-for-history): Add missed activity hook.
      - (candidate-window-style):
        Change set hook to update tutcode-nr-candidate-max-for-history.

2011-09-17 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/pref/customwidgets.cpp
      - (TableEditForm::TableEditForm): Set default row height.
      - (TableEditForm::setTable): Don't set row height here.
      - (TableEditForm::slotAddClicked): Ditto.

2011-09-17 Muneyuki Noguchi <nogu.dev@gmail.com>

    * scm/japanese-custom.scm
      - (ja-rk-rule-table-basic): Fix typo.

2011-09-17 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/pref/customwidgets.cpp
      - (TableEditForm::slotAddClicked): Make row height narrower.

2011-09-17 Muneyuki Noguchi <nogu.dev@gmail.com>

    * scm/japanese-custom.scm
      - (ja-rk-rule-table-basic): Use ja-rk-rule-basic-uim
        instead of ja-rk-rule-basic to get initialized value.

2011-09-16 Muneyuki Noguchi <nogu.dev@gmail.com>

    * Add "..." to button text if another window opens
      when button is clicked.
    * qt4/pref/customwidgets.cpp
      - (CustomOrderedListEdit::CustomOrderedListEdit,
         CustomKeyEdit::CustomKeyEdit, CustomTable::CustomTable):
        Add "..." to button text.
    * qt4/pref/keyeditformbase.cpp
      - (KeyEditFormBase::KeyEditFormBase): Ditto.

2011-09-16 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/pref/customwidgets.cpp
      - (TableEditForm::TableEditForm): Adjust horizontal header size.
      - (TableEditForm::setTable): Make row height of table narrower.

2011-09-16 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/pref/customwidgets.cpp
      - (CustomTable::slotEditButtonClicked): Follow changes
        of function names.
      - (TableEditForm::setCustomTable): Rename to TableEditForm::setTable.
      - (TableEditForm::customTable): Rename to TableEditForm::table.
    * qt4/pref/customwidgets.h
      - (TableEditForm::setCustomTable): Rename to TableEditForm::setTable.
      - (TableEditForm::customTable): Rename to TableEditForm::table.

2011-09-16 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/pref/customwidgets.cpp
      - (CustomTable::slotEditButtonClicked): Set header items.
      - (TableEditForm::TableEditForm): Don't hide horizontal header.
      - (TableEditForm::setTableHeaderItem): New function.
    * qt4/pref/customwidgets.h
      - (TableEditForm::setTableHeaderItem): New function.
    * scm/custom.scm
      - (custom-table?): Handle range.
      - (custom-range): Add support for table.
    * scm/japanese-custom.scm
      - (ja-rk-rule-table-basic): Set header items.
    * test/test-custom.scm
      - (test-case-table): Set header items.
      - (test custom-type-attrs): Follow change in test-case-table.
      - (test custom-range): Ditto.
    * uim/uim-custom.c
      - (uim_custom_table_header_item_list): New function.
      - (uim_custom_range_get): Handle range.
    * uim/uim-custom.h
      - (uim_custom_range): Add as_table_header.

2011-09-13 KIHARA Hideto <deton@m1.interq.or.jp>

    * scm/tutcode-custom.scm
      - (tutcode-show-stroke-help-window-on-no-input?): New custom.
    * scm/tutcode.scm
      - (tutcode-stroke-help-top-page-alist,
         tutcode-stroke-help-top-page-katakana-alist):
        Change initial value.
      - (tutcode-check-stroke-help-window-begin):
        Add check of tutcode-show-stroke-help-window-on-no-input?.
        Change to make help if tutcode-stroke-help-top-page-alist is #f.

2011-09-11 Muneyuki Noguchi <nogu.dev@gmail.com>

    * scm/japanese-custom.scm
      - (ja-rk-rule-table->rule): Don't use string-to-list.

2011-09-11 KIHARA Hideto <deton@m1.interq.or.jp>

    * scm/tutcode-custom.scm
      - (tutcode-use-table-style-candidate-window?):
        Remove.
        Change set-hooks for tutcode-nr-candidate-max{-for-XXX}
        to candidate-window-style.
      - (tutcode-candidate-window-table-layout):
        Change hook to candidate-window-style.
    * scm/tutcode.scm
      - Apply obsolete setting of tutcode-use-table-style-candidate-window?
        to candidate-window-style for seamless upgrade.
      - (uim-candwin-prog): Remove.
      - (tutcode-context-new): Change to check candidate-window-style
        instead of tutcode-use-table-style-candidate-window?.

2011-09-11 Muneyuki Noguchi <nogu.dev@gmail.com>

    * scm/japanese-custom.scm
      - (ja-rk-rule-table->rule): Simplify.

2011-09-11 Muneyuki Noguchi <nogu.dev@gmail.com>

    * scm/japanese-custom.scm
      - (ja-rk-rule-additional, ja-rk-rule): Move to japanese.scm.
    * scm/japanese.scm
      - Ditto.

2011-09-11 Muneyuki Noguchi <nogu.dev@gmail.com>

    * scm/japanese-custom.scm
      - (ja-rk-rule-rule->table): Don't use string-to-list.
      - (ja-type-direct, ja-type-hiragana, ja-type-katakana,
         ja-type-halfkana, ja-type-halfwidth-alnum, ja-type-fullwidth-alnum,
         ja-make-kana-str): Move back to japanese.scm.
    * scm/japanese.scm
      - (ja-type-direct, ja-type-hiragana, ja-type-katakana,
         ja-type-halfkana, ja-type-halfwidth-alnum, ja-type-fullwidth-alnum,
         ja-make-kana-str): Ditto.
      - Fix typo.

2011-09-11 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/pref/customwidgets.cpp
      - (CustomTable::CustomTable): Set margin and spacing.

2011-09-11 Muneyuki Noguchi <nogu.dev@gmail.com>

    * scm/japanese-custom.scm
      - (ja-rk-rule-type)
        * Move into composing-rule group.
        * Change label.
      - (ja-rk-rule-table-basic): Ditto.

2011-09-11 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/pref/customwidgets.cpp
      - (CustomTable::setDefault): Set dialog title.

2011-09-11 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/pref/customwidgets.cpp
      - (CustomPathnameEdit::setDefault): Change title.
      - (CustomOrderedListEdit::slotEditButtonClicked):
        Set title based on custom label.
      - (CustomKeyEdit::slotKeyButtonClicked): Ditto.
    * qt4/pref/keyeditformbase.cpp
      - (KeyEditFormBase::KeyEditFormBase): Don't set title here.
    * qt4/pref/olisteditformbase.cpp
      - (OListEditFormBase::OListEditFormBase): Ditto.

2011-09-11 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/pref/customwidgets.cpp
      - (TableEditForm::setCustomTable): Set m_customTable to custom_table.
      - (TableEditForm::customTable): Free custom_table to avoid leak.
    * qt4/pref/customwidgets.h
      - (TableEditForm): Add TableEditForm::m_customTable.

2011-09-11 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/pref/customwidgets.cpp
      - (TableEditForm::TableEditForm): Add TableEditForm::m_upButton
        and TableEditForm::m_downButton.
      - (TableEditForm::slotItemSelectionChanged): Change status of
        TableEditForm::m_upButton and and TableEditForm::m_downButton
        depending on selection.
      - (TableEditForm::slotUpClicked, TableEditForm::slotDownClicked):
        New function.
    * qt4/pref/customwidgets.h
      - (TableEditForm::m_upButton, TableEditForm::m_downButton):
        New variable.
      - (TableEditForm::slotUpClicked, TableEditForm::slotDownClicked):
        New function.

2011-09-11 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/pref/customwidgets.cpp
      - (TableEditForm::TableEditForm): Add connection for m_table.
      - (TableEditForm::slotItemSelectionChanged): New function.
    * qt4/pref/customwidgets.h
      - (TableEditForm): Add TableEditForm::m_removeButton
        and TableEditForm::slotItemSelectionChanged().

2011-09-11 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/pref/customwidgets.cpp
      - (CustomTable): Make CustomTable::m_editButton local variable.
      - (TableEditForm): Make TableEditForm::m_addButton
         and TableEditForm::m_removeButton.
    * qt4/pref/customwidgets.h
      - Ditto.

2011-09-10 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/pref/customwidgets.cpp
      - (TableEditForm::setCustomTable, TableEditForm::slotAddClicked):
        Don't call QTableWidget::setEnabled()
        because it is no longer needed.

2011-09-10 Muneyuki Noguchi <nogu.dev@gmail.com>

    * Use dialog instead of embedded widget.
    * qt4/pref/customwidgets.cpp
      - (CustomTable::slotEditButtonClicked): New slot.
      - (CustomTable::setTableCustom, CustomTable::slotCellChanged,
         CustomTable::slotAddClicked, CustomTable::slotRemoveClicked): Remove
      - (TableEditForm): New class.
    * qt4/pref/customwidgets.h
      - Ditto.
    * qt4/pref/qt4.cpp
      - (GroupPageWidget::addCustomTypeTable): Change layout.

2011-09-10 Muneyuki Noguchi <nogu.dev@gmail.com>

    * scm/japanese.scm
      - (ja-rk-rule-update): Fix comments.

2011-09-10 Muneyuki Noguchi <nogu.dev@gmail.com>

    * scm/japanese-custom.scm
      - (ja-rk-rule-keep-consonant?): Don't update ja-rk-rule-basic.
      - (ja-rk-rule-type): Remove hook
         because we have hook for ja-rk-rule-table-basic
    * scm/japanese.scm
      - (ja-rk-rule-keep-consonant-update): New.
      - (ja-rk-rule-update)
        * Add comments.
        * Use ja-rk-rule-keep-consonant-update.

2011-09-10 Muneyuki Noguchi <nogu.dev@gmail.com>

    * scm/japanese.scm
      - (ja-rk-rule-update): Don't set ja-rk-rule-basic
        when ja-rk-rule-type is 'uim.

2011-09-10 Muneyuki Noguchi <nogu.dev@gmail.com>

    * scm/japanese-custom.scm
      - (ja-rk-rule-basic-uim): New.
      - (ja-rk-rule-type): New custom variable.

2011-09-10 Muneyuki Noguchi <nogu.dev@gmail.com>

    * Add a new custom type "table"
    * qt4/pref/customwidgets.cpp
      - (CustomTable): New class for UCustom_Table.
    * qt4/pref/customwidgets.h
      - (CustomTable): New.
    * qt4/pref/qt4.cpp
      - (GroupPageWidget::addCustom): Add support for UCustom_Table.
      - (GroupPageWidget::addCustomTypeTable): New function
        for UCustom_Table.
    * qt4/pref/qt4.h
      - (GroupPageWidget::addCustomTypeTable): New function
        for UCustom_Table.
    * scm/custom.scm
      - (custom-validator-alist): Add support for table.
      - (custom-table?): New procedure.
      - (custom-list-as-table): New procedure.
      - (custom-list-as-table): Add support for table.
    * scm/japanese-custom.scm
      - (ja-rk-rule-basic, ja-rk-rule-additional,
         ja-type-direct, ja-type-hiragana, ja-type-katakana,
         ja-type-halfkana, ja-type-halfwidth-alnum, ja-type-fullwidth-alnum,
         ja-rk-rule, ja-make-kana-str): Move from japanese.scm.
      - (ja-rk-rule-rule->table): New procedure to convert to table format.
      - (ja-rk-rule-table->rule): New procedure to convert from table format.
      - (ja-rk-rule-table-basic): New custom variable.
    * scm/japanese.scm
      - (ja-rk-rule-basic, ja-rk-rule-additional,
         ja-type-direct, ja-type-hiragana, ja-type-katakana,
         ja-type-halfkana, ja-type-halfwidth-alnum, ja-type-fullwidth-alnum,
         ja-rk-rule, ja-make-kana-str): Move to japanese-custom.scm.
    * test/test-custom.scm
      - (test custom-table?): New tests.
      - (testcase custom methods, test custom-value, test custom-set-value!,
         test custom-default?, test custom-default-value, test custom-groups,
         test custom-type, test custom-type-attrs, test custom-range,
         test custom-label, test custom-desc, test custom-value-as-literal,
         test custom-definition-as-literal): Add test for table.
    * uim/uim-custom.c
      - (uim_custom_type): Add support for UCustom_Table.
      - (uim_custom_value_internal): Ditto.
      - (uim_custom_set): Ditto.
      - (uim_custom_table_get): New.
      - (literalized_strdup): New.
      - (row_list_to_str): New.
      - (table_to_str): New.
    * uim/uim-custom.h
      - (UCustomType): Add UCustom_Table.
      - (uim_custom_value): Add as_table.

2011-09-02 Etsushi Kato <ek.kato@gmail.com>

    * uim/skk.c (append_comp_array_from_server) : Partial support of
      completed words separated by a white space.

2011-09-01 Etsushi Kato <ek.kato@gmail.com>

    * scm/skk-custom.scm
      - (skk-skkserv-enable-completion?) : New.  Add activity hook
        with skk-use-skkserv?
      - (skk-skkserv-completion-timeout) : New.  If it exceeds the
        timeout value, server completion is disabled in the process.
    * uim/skk.c : Import skkserver completion feature from
      https://github.com/eagletmt/uim-skk-server-completion with some
      modifications.  Thanks to @eagletmt.
      - Include poll.h.
      - (dic_info_) : Add skkserv_completion_timeout member.
      - (SKK_SERV_TRY_COMPLETION) : New.
      - (open_dic) : Set di->skkserv_completion_timeout.
      - (append_comp_array_from_server) : New.
      - (find_comp_array) : Do server completion if enabled.
      - (open_skkserv) : Check skk-skkserv-enable-completion?.

2011-08-30 KIHARA Hideto <deton@m1.interq.or.jp>

    * scm/tutcode-custom.scm
      - (tutcode-mazegaki-fixed-priority-count):
        New custom and activity hook.
    * scm/tutcode.scm
      - (tutcode-prepare-commit-string):
        Change to keep candidate order for candidates
        whose index is lower than tutcode-mazegaki-fixed-priority-count.

2011-08-26 Etsushi Kato <ek.kato@gmail.com>

    * qt4/pref/uim-pref-qt4.pro.in (LIBS) : Add -luim explicitly to
      cope with the linking order problem when --as-needed is used
      (#40385, Julian Taylor).

2011-08-24 KIHARA Hideto <deton@m1.interq.or.jp>

    * scm/tutcode-bushu.scm
      - (tutcode-bushu-for-char-hash-table): New variable.
      - (tutcode-bushu-for-char): Change to use cache for performance.
      - (tutcode-bushu-less?):
        Change optional argument to required argument to reduce optional check.
        Change for performance.
      - (tutcode-bushu-strong-compose-set,
         tutcode-bushu-weak-compose-set,
         tutcode-auto-help-bushu-decompose-tc23):
        Follow the argument change of tutcode-bushu-less?.

2011-08-24 Etsushi Kato <ek.kato@gmail.com>

    * uim/iconv.c (uim_iconv_code_conv) : Fix to checke the xistence
      of instr first.

2011-08-18 KIHARA Hideto <deton@m1.interq.or.jp>

    * scm/tutcode.scm
      - (tutcode-bushu-decompose,
         tutcode-rule->reverse-hash-table,
         tutcode-reverse-find-seq):
        Change to use kanji code as hash-table key for performance.
      - (tutcode-euc-jp-string->ichar):
        New function to get kanji code from EUC-JP string.

2011-08-18 KIHARA Hideto <deton@m1.interq.or.jp>

    * Replace large alist to hash-table for performance.
    * scm/tutcode.scm
      - (tutcode-reverse-rule-hash-table):
        Rename from tutcode-reverse-rule-alist.
      - (tutcode-reverse-kigou-rule-hash-table):
        Rename from tutcode-reverse-kigou-rule-alist.
      - (tutcode-reverse-bushudic-hash-table):
        Rename from tutcode-reverse-bushudic-alist.
      - (tutcode-bushu-decompose):
        Change to use hash-table instead of alist.
      - (tutcode-rule->reverse-hash-table): New.
        Extracted from tutcode-bushu-decompose and tutcode-reverse-find-seq.
      - (tutcode-reverse-find-seq):
        Change to use hash-table instead of alist.

2011-08-13 KIHARA Hideto <deton@m1.interq.or.jp>

    * Change to be able to disable sort for slow PC.
    * scm/tutcode-bushu.scm
      - (tutcode-bushu-sort!): New.
      - (tutcode-bushu-complete-compose-set,
         tutcode-bushu-strong-compose-set,
         tutcode-bushu-weak-compose-set,
         tutcode-bushu-strong-diff-set,
         tutcode-bushu-weak-diff-set,
         tutcode-auto-help-bushu-decompose-tc23):
        Replace sort! with tutcode-bushu-sort!.

2011-08-13 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/qtextutil.cpp
      - (QUimTextUtil::deletePrimaryTextInQLineEdit,
         QUimTextUtil::deletePrimaryTextInQTextEdit):
        Fix multiple bugs in implementation of surrounding text API.

2011-08-13 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/qtextutil.cpp
      - (QUimTextUtil::deletePrimaryTextInQTextEdit): Fix bugs.

2011-08-12 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/qtextutil.cpp
      - (QUimTextUtil::deletePrimaryTextInQTextEdit): Fix bug.

2011-08-12 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/qtextutil.cpp
      - (QUimTextUtil::deletePrimaryTextInQTextEdit):
        Use QTextEdit::setPlainText() instead of QTextEdit::setText().

2011-08-12 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/qtextutil.cpp
      - (QUimTextUtil::deletePrimaryTextInQTextEdit): Fix bugs.

2011-08-12 Muneyuki Noguchi <nogu.dev@gmail.com>

    * scm/tutcode.scm
      - Update comment because surrounding text API was implemented
        in QTextEdit.

2011-08-12 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/qtextutil.cpp
      - (QUimTextUtil::acquirePrimaryTextInQLineEdit,
         QUimTextUtil::acquirePrimaryTextInQTextEdit,
         QUimTextUtil::deletePrimaryTextInQLineEdit,
         QUimTextUtil::deletePrimaryTextInQTextEdit):
        Fix bugs in handling of surrounding text.

2011-08-12 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/qtextutil.cpp
      - (QUimTextUtil::acquirePrimaryTextInQTextEdit,
         QUimTextUtil::acquireSelectionTextInQTextEdit,
         QUimTextUtil::deletePrimaryTextInQTextEdit,
         QUimTextUtil::deleteSelectionTextInQTextEdit): Implement function.

2011-08-07 KIHARA Hideto <deton@m1.interq.or.jp>

    * scm/tutcode.scm
      - Update comment.

2011-08-05 KIHARA Hideto <deton@m1.interq.or.jp>

    * Move common code about kanji code input in skk.scm and tutcode.scm
      to japanese.scm.
    * scm/japanese.scm
      - (ja-kanji-code-input): New.
        Extracted from skk.scm and tutcode.scm.
    * scm/skk.scm
      - (skk-proc-state-kcode):
        Change to use ja-kanji-code-input.
    * scm/tutcode.scm
      - (tutcode-begin-kanji-code-input):
        Change to use ja-kanji-code-input.

2011-08-05 KIHARA Hideto <deton@m1.interq.or.jp>

    * Add kanji code input mode to uim-skk.
    * scm/skk.scm
      - (skk-do-update-preedit): Change for kanji code input mode.
      - (skk-proc-state-direct-no-preedit): Add check of skk-kcode-input-key.
      - (skk-proc-state-direct): Change for kanji code input mode.
      - (skk-proc-state-kcode): New.
      - (skk-push-key): Add call of skk-proc-state-kcode.
    * scm/skk-key-custom.scm
      - (skk-kcode-input-key): New custom key.
    * scm/japanese.scm
      - (ja-euc-jp-code->euc-jp-string,
         ja-jis-code->euc-jp-string,
         ja-kanji-code-input-jis,
         ja-kanji-code-input-kuten,
         ja-kanji-code-input-ucs):
        Move from tutcode.scm and rename from tutcode-XXX to ja-XXX.
    * scm/tutcode.scm
      - (tutcode-kanji-code-input-ucs,
         tutcode-kanji-code-input-kuten,
         tutcode-kanji-code-input-jis,
         tutcode-jis-code->euc-jp-string,
         tutcode-euc-jp-code->euc-jp-string):
        Move to japanese.scm and rename from tutcode-XXX to ja-XXX.
      - (tutcode-begin-kanji-code-input): Follow the rename.

2011-08-04 KIHARA Hideto <deton@m1.interq.or.jp>

    * Add Yamanobe algorithm of Kanchoku Win to bushu conversion algorithms.
    * scm/tutcode-custom.scm
      - (tutcode-bushu-conversion-algorithm): Add 'kw-yamanobe choice.
    * scm/tutcode.scm
      - (tutcode-bushu-convert): Add check of 'kw-yamanobe.
      - (tutcode-bushu-convert-kwyamanobe): New.

2011-08-03 KIHARA Hideto <deton@m1.interq.or.jp>

    * Change to be able to select bushu conversion algorithm.
    * scm/tutcode-custom.scm
      - (tutcode-bushu-conversion-algorithm): New custom.
      - (tutcode-bushu-index2-filename,
         tutcode-bushu-expand-filename):
        Change to depend on tutcode-bushu-conversion-algorithm.
    * scm/tutcode.scm
      - (tutcode-check-bushu-prediction):
        Change to be wrapper for some bushu conversion algorithms.
      - (tutcode-check-bushu-prediction-tc21):
        Rename from tutcode-check-bushu-prediction.
      - (tutcode-check-bushu-prediction-tc23): New.
      - (tutcode-bushu-convert):
        Change to be wrapper for some bushu conversion algorithms.
      - (tutcode-bushu-convert-tc21): Rename from tutcode-bushu-convert.
      - (tutcode-auto-help-bushu-decompose):
        Change to be wrapper for some bushu conversion algorithms.
      - (tutcode-auto-help-bushu-decompose-tc21):
        Rename from tutcode-auto-help-bushu-decompose.
        Follow the rename.
      - (tutcode-get-candidate-handler):
        Support empty word for tc-2.3.1-22.6 bushu conversion algorithm.
    * scm/tutcode-bushu.scm
      - (tutcode-bushu-compose-tc23):
        Rename from tutcode-bushu-compose-interactively.
        Add argument to specify whether to return when one candidate is found
        for performance on non-interactive bushu conversion.
      - (tutcode-bushu-compose-interactively):
        Change to call tutcode-bushu-compose-tc23.
      - (tutcode-bushu-convert-tc23): New.
      - (tutcode-bushu-decompose-to-two-char,
         tutcode-bushu-composed,
         tutcode-auto-help-bushu-decompose-tc23): New.

2011-07-31 KIHARA Hideto <deton@m1.interq.or.jp>

    * Add sort for interactive bushu conversion.
    * scm/tutcode-bushu.scm
      - (tutcode-bushu-sequence-sensitive?,
         tutcode-bushu-prioritized-chars,
         tutcode-bushu-inhibited-output-chars): New variable.
      - (tutcode-bushu-lookup-index2-entry-2):
        Change string<=? to string<? according to tc-2.3.1-22.6.
      - (tutcode-bushu-priority-level,
         tutcode-bushu-higher-priority?,
         tutcode-bushu-less?,
         tutcode-bushu-less-against-sequence?): New function for sort.
      - (tutcode-bushu-complete-compose-set,
         tutcode-bushu-strong-compose-set,
         tutcode-bushu-weak-compose-set,
         tutcode-bushu-strong-diff-set,
         tutcode-bushu-weak-diff-set): Change to sort result.
      - (tutcode-bushu-compose-interactively):
        Change not to make bushu-list in each function.
        Add filter for tutcode-bushu-inhibited-output-chars.

2011-07-27 Etsushi Kato <ek.kato@gmail.com>

    * NEWS : Update.

2011-07-27 Etsushi Kato <ek.kato@gmail.com>

    * NEWS
    * RELNOTE
      - Merge update from 1.7 branch.

2011-07-26 Etsushi Kato <ek.kato@gmail.com>

    * po/POTFILES.in : Add uim/uim.c.

2011-07-25 KIHARA Hideto <deton@m1.interq.or.jp>

    * scm/tutcode-bushu.scm
      - (tutcode-bushu-help-load):
        Support bushu.help file that has two or more bushu composition at a line.

2011-07-25 KIHARA Hideto <deton@m1.interq.or.jp>

    * scm/tutcode-bushu.scm
      - (tutcode-bushu-compose-explicitly):
        Change to use bushu.help file on interactive bushu conversion
        with one bushu (not only two bushu).

2011-07-23 KIHARA Hideto <deton@m1.interq.or.jp>

    * scm/tutcode-bushu.scm
      - (tutcode-bushu-help-load): Fix indent.

2011-07-23 KIHARA Hideto <deton@m1.interq.or.jp>

    * scm/tutcode.scm
      - (tutcode-bushu-predict): Simplify.

2011-07-22 KIHARA Hideto <deton@m1.interq.or.jp>

    * scm/tutcode.scm
      - (tutcode-bushu-predict): Change to use bushu.help.

2011-07-21 KIHARA Hideto <deton@m1.interq.or.jp>

    * scm/fileio.scm
      - (file-read-line):
        Fix to return last line which does not end with newline.

2011-07-19 KIHARA Hideto <deton@m1.interq.or.jp>

    * Change to use bushu.help on bushu conversion (not only auto help).
    * scm/tutcode-custom.scm
      - (tutcode-bushu-help-filename):
        Change group to tutcode-bushu from candwin.
    * scm/tutcode.scm
      - (tutcode-bushu-convert): Change to use bushu.help.
      - (tutcode-bushu-compose): Add bushudic argument for bushu.help.
    * scm/tutcode-bushu.scm
      - (tutcode-bushu-help): New variable.
      - (tutcode-bushu-help-load,
         tutcode-bushu-compose-explicitly): New.
      - (tutcode-bushu-compose-interactively):
        Change to use tutcode-bushu-compose-explicitly.

2011-07-19 KIHARA Hideto <deton@m1.interq.or.jp>

    * scm/tutcode.scm
      - (tutcode-auto-help-bushu-decompose): Unify coding style.

2011-07-12 KIHARA Hideto <deton@m1.interq.or.jp>

    * Rename tutcode-auto-help-bushu-combination-XXX to
      tutcode-auto-help-bushu-composition-XXX.
    * scm/tutcode.scm
      - (tutcode-auto-help-update-stroke-alist-with-kanji): Follow the rename.
      - (tutcode-auto-help-bushu-composition-add-guide):
        Rename from tutcode-auto-help-bushu-combination-add-guide.
      - (tutcode-auto-help-bushu-composition-strs):
        Rename from tutcode-auto-help-bushu-combination-strs.
      - (tutcode-auto-help-bushu-composition-traverse):
        Rename from tutcode-auto-help-bushu-combination-traverse.
      - (tutcode-auto-help-update-stroke-alist-normal-with-kanji):
        Follow the rename.

2011-07-11 KIHARA Hideto <deton@m1.interq.or.jp>

    * po/ja.po
      - Add translation about tutcode.

2011-07-11 KIHARA Hideto <deton@m1.interq.or.jp>

    * scm/tutcode.scm
      - (tutcode-auto-help-cand-str-list): Add labels for third bushu.
      - (tutcode-auto-help-time-limit): New variable.
      - (tutcode-auto-help-update-stroke-alist-with-kanji,
         tutcode-auto-help-update-stroke-alist-normal-with-kanji,
         tutcode-auto-help-bushu-decompose):
        Support bushu combination which consists of three or more bushu.
      - (tutcode-rule-element?,
         tutcode-auto-help-bushu-combination-add-guide,
         tutcode-auto-help-bushu-combination-strs,
         tutcode-auto-help-bushu-combination-traverse): New.

2011-07-11 Etsushi Kato <ek.kato@gmail.com>

    * po/fr.po
    * po/ko.po
    * po/ja.po
      - Clear fuzzy.

2011-07-11 Etsushi Kato <ek.kato@gmail.com>

    * po/fr.po
    * po/ko.po
    * po/ja.po
      - make update-po

2011-07-10 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/qhelpermanager.cpp
      - (QUimHelperManager::parseHelperStr):
        Don't use QUimInputContext::readIMConf().
      - (QUimHelperManager::parseHelperStrImChange):
        Don't update style of candidate windows.
    * qt4/immodule/quiminputcontext.cpp
      - (QUimInputContext::switch_app_global_im): Ditto.
      - (QUimInputContext::readIMConf): Remove.
    * qt4/immodule/quiminputcontext.h
      - (QUimInputContext::readIMConf): Remove.

2011-07-10 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/quiminputcontext.cpp
      - (QUimInputContext::QUimInputContext): Don't use isStyleUpdated.
      - (QUimInputContext::restorePreedit)
        * Plug leak.
        * Don't use isStyleUpdated.
      - (QUimInputContext::updateStyle):
        Set all candidate windows in cwinHash to 0 when style is updated.
    * qt4/immodule/quiminputcontext.h
      - (QUimInputContext::isStyleUpdated): Remove.

2011-07-09 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/quiminputcontext.cpp
      - (QUimInputContext::QUimInputContext): Don't update
        style of candidate.

2011-07-09 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/quiminputcontext.cpp
      - (QUimInputContext::QUimInputContext):
        Add isStyleUpdated to initialization list.
      - (QUimInputContext::restorePreedit):
        Commit preedit when style has been updated.
      - (QUimInputContext::updateStyle):
        Set isStyleUpdated to true when style is updated.
    * qt4/immodule/quiminputcontext.h
      - (QUimInputContext::isStyleUpdated): New.

2011-07-09 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/quiminputcontext.cpp
      - (QUimInputContext::saveContext): Update comment.

2011-07-09 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/qhelpermanager.cpp
      - (QUimHelperManager::parseHelperStr)
        * Call QUimInputContext::updatePosition()
          when candidate-window-position is specified.
        * Call QUimInputContext::updateStyle()
          when candidate-window-style is specified.
        * Call QUimInputContext::readIMConf()
          when help string has custom_reload_notify
          to update style of candidate window dynamically.
    * qt4/immodule/quiminputcontext.cpp
      - (QUimInputContext::updatePosition): New.
      - (QUimInputContext::updateStyle): New.
      - (QUimInputContext::readIMConf):
        Call not only updatePosition() but also updateStyle().
    * qt4/immodule/quiminputcontext.h
      - (QUimInputContext::updatePosition): New.
      - (QUimInputContext::updateStyle): New.

2011-07-09 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/quiminputcontext.cpp
      - (QUimInputContext::createCandidateWindow): Update comment.

2011-07-09 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/candidatewindow.cpp
      - (CandidateWindow::subWindowRect): Add const to 2nd argument.
    * qt4/immodule/candidatewindow.h
      - Ditto.

2011-07-08 KIHARA Hideto <deton@m1.interq.or.jp>

    * scm/tutcode-custom.scm
      - (tutcode-bushu-help-filename): New custom.
    * scm/tutcode.scm
      - (tutcode-context-new): Move (require "tutcode-bushu.scm") to toplevel
        for tutcode-bushu-help-lookup.
      - (tutcode-bushu-help-lookup): New.
      - (tutcode-auto-help-bushu-decompose):
        Change to use tutcode-bushu-help-lookup.

2011-07-07 Etsushi Kato <ek.kato@gmail.com>

    * po/POTFILES.in : Add scm/fileio.scm.
    * scm/fileio.scm (file-ready?) : Fix gettext usage.
    * scm/dict-socket.scm (dict-server-get-message) : Ditto.
    * scm/process.scm (process-io, process-with-daemon): Ditto.
    * uim/dynlib.c (dynlib_bind_internal) : Ditto.
    * uim/skk.c (open_skkserv) : Ditto.
    * uim/uim-notify.c (uim_notify_stderr_info, uim_notify_stderr_fatal) :
      dgettext msgs for uim_notify.
    * uim/uim.c (notify_info, notify_fatal) : Ditto.
    * uim/uim-notify.h : Fix comment.

2011-07-05 Etsushi Kato <ek.kato@gmail.com>

    * uim/uim.c : Include "gettext.h" for !UIM_USE_NOTIFY_PLUGINS.

2011-07-05 Etsushi Kato <ek.kato@gmail.com>

    - Add missing changes which complement r7184.
    
    * configure.ac
      - (UIM_USE_NOTIFY) : Rename to UIM_USE_NOTIFY_PLUGINS.
      - (UIM_USE_NOTIFY_PLUGINS) : Renamed.

2011-07-05 Etsushi Kato <ek.kato@gmail.com>

    - Fix uim functional even when --disable-notify is set.
    
    * configure.ac
      - (UIM_USE_NOTIFY) : Rename to UIM_USE_NOTIFY_PLUGINS.
      - (UIM_USE_NOTIFY_PLUGINS) : Renamed.
    * uim/dynlib.c : Follow the change.
    * uim/uim-error.c : Ditto.
    * uim/uim.c : Ditto.
      - (uim_init_internal) : Call uim_init_notify_subrs() even
        when --disable-notify is set.
      - (notify_get_plugins) : Implementation for
        !UIM_USE_NOTIFY_PLUGINS.
      - (notify_info) : Ditto.
      - (notify_fatal) : Ditto.
      - (uim_init_notify_subrs) : Ditto.
    * uim/uim-internal.h : Follow the changes.

2011-07-05 Etsushi Kato <ek.kato@gmail.com>

    * scm/action.scm (context-current-widget-states) : Fix bug which
      caused an error when indicator and actions are isolated.

2011-07-04 Etsushi Kato <ek.kato@gmail.com>

    * gtk2/candwin/horizontal-gtk.c
      - (uim_cand_win_gtk_set_page) : Call show_table() here to make
        sure showing all labels.
      - (uim_cand_win_gtk_show) : Not here.

2011-07-04 Etsushi Kato <ek.kato@gmail.com>

    * gtk2/immodule/uim-cand-win-horizontal-gtk.c
      - (uim_cand_win_horizontal_gtk_set_index) : Hide sub_window if
        the word is not selected.

2011-07-04 Etsushi Kato <ek.kato@gmail.com>

    * gtk2/immodule/uim-cand-win-horizontal-gtk.c
    * gtk2/candwin/horizontal-gtk.c
      - (update_table_button) : Show colon after the headings.

2011-07-04 Etsushi Kato <ek.kato@gmail.com>

    * gtk2/candwin/horizontal-gtk.c (label_draw)
      - Remove unexpected new line.

2011-07-04 Etsushi Kato <ek.kato@gmail.com>

    * gtk2/candwin/horizontal-gtk.c
      - (index_button) : Use GtkEventBox instead of GtkButton.
      - (button_clicked) : Ditto.
      - (scale_label) : Ditto.
      - (candidate_window_init) : Ditto.
      - (assign_cellbutton) : Ditto.
      - (update_table_button) : Ditto.
      - (get_layout_x) : New.
      - (show_table) : Ditto.  Use gtk_widget_show_all() for the
        GtkEventBox.
      - (label_draw) : New.  For GTK+3, highlight the selected label.
      - (label_exposed) : New. For GTK+2.
      - (uim_cand_win_gtk_set_index) : Clear sub_window when not
        selected.

2011-07-02 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/candidatewindow.cpp
      - (CandidateWindow::slotHookSubwindow):
        Use 2nd argument of CandidateWindow::subWindowRect().

2011-07-02 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/candidatewindow.cpp
      - (CandidateWindow::slotHookSubwindow, CandidateWindow::moveEvent,
         CandidateWindow::resizeEvent): Use subWindowRect().
      - (CandidateWindow::subWindowRect): New.
    * qt4/immodule/candidatewindow.h
      - (CandidateWindow::subWindowRect): New.

2011-07-02 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/candidatewindow.cpp
      - (CandidateWindow::updateView): Remove trailing space.

2011-07-02 Etsushi Kato <ek.kato@gmail.com>

    * gtk2/immodule/uim-cand-win-horizontal-gtk.c
      - (uim_cand_win_horizontal_gtk_init) : Connect "draw" signal to
        label_draw() for GTK+3.
      - (label_draw) : New for GTK+3.
      - (label_exposed) : Use for GTK+2 only.
      - (button_clicked) : Use gtk_widget_unmap() and gtk_widget_map()
        to redraw labels.
      - (assign_cellbutton) : Connect "draw" signal to label_draw()
        for GTK+3.
      - (uim_cand_win_horizontal_gtk_set_index) : Use
        gtk_widget_unmap() and gtk_widget_map() to redraw labels.

2011-07-01 Etsushi Kato <ek.kato@gmail.com>

    * gtk2/immodule/uim-cand-win-horizontal-gtk.c
      - (button_clicked) : Adjust x when resetting the highlight.
      - (uim_cand_win_horizontal_gtk_set_index) : Ditto.

2011-07-01 Etsushi Kato <ek.kato@gmail.com>

    * gtk2/immodule/uim-cand-win-horizontal-gtk.c
      - (get_layout_x) : New.  Get adjusted parameter for label.
      - (label_exposed) : Adjust the highlight label position.
      - (button_clicked) : Ditto.
      - (uim_cand_win_horizontal_gtk_set_index) : Ditto.

2011-07-01 Etsushi Kato <ek.kato@gmail.com>

    * gtk2/immodule/uim-cand-win-horizontal-gtk.c
      - (uim_cand_win_horizontal_gtk_set_index) : Fixed to reset
        selection.

2011-07-01 Etsushi Kato <ek.kato@gmail.com>

    * gtk2/immodule/uim-cand-win-horizontal-gtk.c : Tentative compilation
      fix of r7169 for GTK+3.

2011-07-01 Etsushi Kato <ek.kato@gmail.com>

    * gtk2/immodule/uim-cand-win-horizontal-gtk.c
      - (index_button) : Use GtkEventBox instead of GtkButton.
      - (button_clicked) : Ditto.
      - (scale_label) : Ditto.
      - (uim_cand_win_horizontal_gtk_init) : Ditto.
      - (assign_cellbutton) : Ditto.
      - (update_table_button) : Ditto.
      - (show_table) : Ditto.  Use gtk_widget_show_all for the
        GtkEventBox.
      - (label_exposed) : New.
      - (uim_cand_win_horizontal_gtk_set_page) : Add a comment.

2011-06-30 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/subwindow.cpp
      - (SubWindow::layoutWindow): Add support for horizontal candidate window.
    * qt4/immodule/subwindow.h
      - (SubWindow::layoutWindow): Ditto.
    * qt4/immodule/candidatewindow.cpp
      - (CandidateWindow::slotHookSubwindow, CandidateWindow::moveEvent,
         CandidateWindow::resizeEvent): Follow API change.

2011-06-30 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/candidatewindow.cpp
      - (CandidateWindow::updateSize): Change window size with setFixedSize
        to correct size of horizontal candidate window.

2011-06-27 Etsushi Kato <ek.kato@gmail.com>

    * xim/compose.cpp (XimIM::get_mb_string) : Fix off-by-one error.

2011-06-26 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/quiminputcontext.cpp
      - (QUimInputContext::createCandidateWindow): Add check for
        candidate-window-style custom variable.

2011-06-26 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/candidatewindow.cpp
      - (CandidateWindow::updateView, CandidateWindow::setIndex,
         CandidateWindow::slotHookSubwindow): Unify coding style.

2011-06-26 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/candidatewindow.cpp
      - (CandidateWindow::CandidateWindow): Add dummy row and column
        for horizontal candidate window.
      - (CandidateWindow::updateView): New.
      - (CandidateListView::sizeHint): New.

2011-06-26 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/candidatewindow.cpp
      - (CandidateWindow::updateView): Show "..."
        when annotation is available.

2011-06-26 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/candidatewindow.cpp
      - (MIN_CAND_HEIGHT, HEADING_ROW, CANDIDATE_ROW, ANNOTATION_ROW):
         Remove.
      - (CandidateWindow::CandidateWindow,
         CandidateWindow::updateView): Change layout.
      - (CandidateWindow::slotCandidateSelected): Fix style.
      - (CandidateListView::sizeHint): Follow layout change.

2011-06-26 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/quiminputcontext.cpp
      - (QUimInputContext::createCandidateWindow): Fix crash bug.

2011-06-26 Muneyuki Noguchi <nogu.dev@gmail.com>

    - Implement an experimental horizontal candidate window for Qt4 immodule.
    
    * qt4/immodule/candidatewindow.cpp
      - (MIN_CAND_HEIGHT, HEADING_ROW, CANDIDATE_ROW, ANNOTATION_ROW): New.
      - (CandidateWindow::CandidateWindow): Add isVertical.
      - (CandidateWindow::updateView, CandidateWindow::setIndex,
         CandidateWindow::slotCandidateSelected,
         CandidateWindow::slotHookSubwindow, CandidateListView::sizeHint):
        Check isVertical.
    * qt4/immodule/candidatewindow.h
      - (CandidateWindow::CandidateWindow): Add argument "vertical".
      - (CandidateWindow::slotCandidateSelected): Add argument "column".
      - (CandidateWindow::isVertical): New.
      - (CandidateListView::CandidateListView): Add argument "vertical".
      - (CandidateListView::isVertical): New.
    * qt4/immodule/quiminputcontext.cpp
      - (QUimInputContext::createCandidateWindow):
        Check "uim-candwin-horizontal" prefix for uim-candwin-prog.

2011-06-22 Etsushi Kato <ek.kato@gmail.com>

    * scm/im-custom.scm (candidate-window-style) : New.
    * gtk2/immodule/gtk-im-uim.c
      - Add declaration of im_uim_create_cand_win_gtk().
      - (update_candwin_style) : New.  Dynamically update the style of
        candidate window.  uim-candwin-prog should be deprecated.
      - (parse_helper_str) : Update candidate style when custom
        changed.
      - (im_uim_create_cand_win) : Add check for
        candidate-window-style custom variable.
    * xim/main.cpp
      - (XimServer::gCandWinPosType) : Move to ximserver.cpp.
      - (main) : Check candidate window style at the startup.
    * xim/ximserver.cpp
      - (XimServer::gCandWinPosType) : Moved from main.cpp.
      - (XimServer::gCandWinStyle) : New.
      - (XimServer::gCandWinStyleUpdated) : New.
      - (XimServer::customContext) : Check candidate window style.
      - (XimServer::reloadConfigs) : Ditto.
      - (check_candwin_style) : New.
    * xim/canddislp.cpp
      - Include <sys/param.h> for MAXPATHLEN.
      - (CANDWIN_PROG_PREFIX) : New.
      - (CANDWIN_PROG_SUFFIX) : New.
      - (NO_TOOLKIT) : New.
      - (candwin_command) : Use candidate-window-style custom
        variable.  uim-candwin-prog should be deprecated.
      - (canddisp_singleton) : Launch candidate window program when
        style is updated.
      - (Canddisp::adjust_display_limit) : Add a sanity check.
    * xim/ximserver.h
      - (CandWinStyle) : New.
      - Add declaration of check_candwin_style().
      - (class XimServer) : Add gCandWinStyle and gCandWinStyleUpdated
        member.

2011-06-20 Etsushi Kato <ek.kato@gmail.com>

    * gtk2/toolbar/common-gtk.c
      - (save_default_im_internal)
      - (save_default_im)
        - Use uim_scm_callf() with gc ready stack.

2011-06-20 Etsushi Kato <ek.kato@gmail.com>

    * gtk2/horizontal-gtk.c (uim_cand_win_horizontal_gtk_get_type)
      - Fix typo.

2011-06-20 Etsushi Kato <ek.kato@gmail.com>

    * gtk2/candwin/gtk.c
    * gtk2/candwin/tbl-gtk.c
    * gtk2/candwin/horizontal-gtk.c
      - (candidate_window_get_type) : Use equivalent names in
        immodule.

2011-06-20 Etsushi Kato <ek.kato@gmail.com>

    * gtk2/candwin/horizontal-gtk.c (candidate_window_get_type) :
      Use UIMCandidateWindowHorizontal type_name.

2011-06-19 KIHARA Hideto <deton@m1.interq.or.jp>

    * scm/tutcode.scm
      - (tutcode-proc-state-on): Avoid to commit-raw tutcode-on-key.
      - (tutcode-proc-state-off): Avoid to commit-raw tutcode-off-key.

2011-06-17 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt3/chardict/Makefile.am
      - (uim_chardict_qt_SOURCES): Use qtgettext.h in current directory,
        not in parent directory.

2011-06-17 Etsushi Kato <ek.kato@gmail.com>

    * gtk2/candwin/horizontal-gtk.c (uim_cand_win_gtk_set_page) :
      Fix indent.

2011-06-17 Etsushi Kato <ek.kato@gmail.com>

    * gtk2/candwin/horizontal-gtk.c (uim_cand_win_gtk_set_index) :
      Fix to show new page.

2011-06-17 Etsushi Kato <ek.kato@gmail.com>

    - Add an experimental horizontal candidate window for uim-xim.
    
    * gtk2/candwin/Makefile.am
    * gtk3/candwin/Makefile.am
      - (libexec_PROGRAMS) : Add uim-candwin-horizontal-gtk{3}.
      - (uim_candwin_horizontal_gtk_SOURCES) : New.
      - (uim_candwin_horizontal_gtk_LDADD) : Ditto.
      - (uim_candwin_horizontal_gtk_CPPFLAGS) : Ditto.
      - (uim_candwin_horizontal_gtk_CFLAGS) : Ditto.
    * gtk2/candwin/horizontal-gtk.c : Copied from tbl-gtk.c.  Add
      subwindow and merge changes for horizontal table from GTK+
      bridge.

2011-06-17 Etsushi Kato <ek.kato@gmail.com>

    * gtk2/uim-cand-win-horizontal-gtk.c
      - (uim_cand_win_horizontal_gtk_set_index) : Fix indent.

2011-06-17 Etsushi Kato <ek.kato@gmail.com>

    * gtk2/immodule/uim-cand-win-horizontal-gtk.c
      - (assign_cellbutton) : Remove unused argument.
      - (update_table_button) : Follow the change.

2011-06-17 Etsushi Kato <ek.kato@gmail.com>

    - Implement an experimental horizontal candidate window for GTK+
      immodule.
    
    * gtk2/immodule/Makefile.am (IM_UIM_SOURCES) : Add
      uim-cand-win-horizontal-gtk.c uim-cand-win-horizontal-gtk.
    * gtk3/immodule/Makefile.am (IM_UIM_SOURCES) : Ditto.
    * gtk2/immodule/uim-cand-win-horizontal-gtk.c : Copied from
      uim-cand-win-tbl-gtk.c. Modified for the single row table.
    * gtk2/immodule/uim-cand-win-horizontal-gtk.h : Copied from
      uim-cand-win-tbl-gtk.h.
    * gtk2/immodule/uim-cand-win-gtk.h
      - (_UIMCandWinGtkClass) : Add create_sub_window and
        layout_sub_window members and make
        uim_cand_win_gtk_create_sub_window and
        uim_cand_win_gtk_layout_sub_window public.
    * gtk2/immodule/uim-cand-win-gtk.c
      - (uim_cand_win_gtk_create_sub_window) : Make public and call
        member function of the class.
      - (uim_cand_win_gtk_layout_sub_window) : Ditto.
      - (uim_cand_win_gtk_real_create_sub_window) : Rename from
        uim_cand_win_gtk_create_sub_window.
      - (uim_cand_win_gtk_real_layout_sub_window) : Rename from
        uim_cand_win_gtk_layout_sub_window.
      - (uim_cand_win_gtk_class_init) : Set create_sub_window and
        layout_subwindow.
      - (uim_cand_win_gtk_layout) : Change positioning when right side
        of the candidate window exceeds the display's limit.
    * gtk2/immodule/gtk-im-uim.c
      - Include "uim-cand-win-horizontal-gtk.h".
      - (im_uim_create_cand_win_gtk) : Check "uim-candwin-horizontal"
        prefix for uim-candwin-prog.

2011-06-16 Etsushi Kato <ek.kato@gmail.com>

    * gtk2/immodule/Makefile.am (GTK_RC_GET_IMMODULE_FILE) : Fix path.

2011-06-15 Etsushi Kato <ek.kato@gmail.com>

    * scm/social-ime.scm
    * scm/ajax-ime.scm
      - Fix grammar by Justin B Rye.

2011-06-14 Etsushi Kato <ek.kato@gmail.com>

    * gtk2/toolbar/common-gtk.c (toolbar_new) : Check
      uim-toolbar-save-default-im? variable in ~/.uim to use
      uim-custom.

2011-06-12 Muneyuki Noguchi <nogu.dev@gmail.com>

    * gtk2/dict/canna.c
      - Follow wide character API changes in Canna 3.7
        with CANNA_NEW_WCHAR_AWARE (Gentoo bug #353949).

2011-06-12 KIHARA Hideto <deton@m1.interq.or.jp>

    * Show stroke help temporarily by keys in kanji combination guide.
    * scm/tutcode-custom.scm
      - (tutcode-stroke-help-with-kanji-combination-guide): New custom.
    * scm/tutcode.scm
      - Update comment.
      - (tutcode-push-key!): Reset guide-chars on end of stroke.
      - (tutcode-flush): Reset guide-chars.
      - (tutcode-check-stroke-help-window-begin):
        Change stroke help according to
        tutcode-stroke-help-with-kanji-combination-guide.
      - (tutcode-stroke-help-guide-add-kanji): Fix comment.
      - (tutcode-key-press-handler):
        Add check of tutcode-stroke-help-with-kanji-combination-guide.

2011-06-07 Etsushi Kato <ek.kato@gmail.com>

    * scm/annotation-osx-dcs.scm
      (annotation-osx-dcs-init)
      (annotation-osx-dcs-release)
      - Unload dynlib whith annotation-osx-dcs-release.

2011-06-04 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/pref/keyeditformbase.cpp
      - (KeyEditFormBase::KeyEditFormBase): Don't set default size
        of spacer.
    * qt4/pref/olisteditformbase.cpp
      - (OListEditFormBase::OListEditFormBase): Ditto.

2011-06-04 Muneyuki Noguchi <nogu.dev@gmail.com>

    * gtk2/immodule/key-util-gtk.c
      - (im_uim_init_modifier_keys): Remove unused variable `nm'.
    * gtk2/pref/gtk-custom-widgets.c
      - (choose_key_button_clicked_cb): Remove unused variable `rv'.

2011-06-03 Etsushi Kato <ek.kato@gmail.com>

    * scm/im-custom.scm : Fix indentation.

2011-06-03 Etsushi Kato <ek.kato@gmail.com>

    * scm/im-custom.scm (notify-agent) : Add custom-set-hooks.

2011-05-31 Etsushi Kato <ek.kato@gmail.com>

    * gtk2/toolbar/common-gtk.c (popup_prop_menu) : Always show images.

2011-05-31 Etsushi Kato <ek.kato@gmail.com>

    * gtk2/toolbar/common-gtk.c (popup_prop_menu) : Show icons even
      if there is no selected item.

2011-05-31 Etsushi Kato <ek.kato@gmail.com>

    * gtk2/toolbar/common-gtk.c : Revert r7125.

2011-05-31 Etsushi Kato <ek.kato@gmail.com>

    * gtk2/toolbar/common-gtk.c (popup_prop_menu) : Show icons even
      if there is no selected item.

2011-05-26 Muneyuki Noguchi <nogu.dev@gmail.com>

    * helper
      - Remove.

2011-05-26 Jae-hyeon Park <jhyeon@gmail.com>

    * byeoru-data/byeoru-dict
      - reordered so that Chinese characters in EUC-KR appear above

2011-05-26 Jae-hyeon Park <jhyeon@gmail.com>

    * po/ko.po
      - updated translations

2011-05-26 KIHARA Hideto <deton@m1.interq.or.jp>

    * scm/tutcode.scm
      - Fix typo in comment.

2011-05-26 Etsushi Kato <ek.kato@gmail.com>

    * po/fr.po
    * po/ja.po
      - Remove fuzzy.

2011-05-26 Etsushi Kato <ek.kato@gmail.com>

    * po/fr.po
    * po/ko.po
    * po/ja.po
      - make update-po

2011-05-26 Etsushi Kato <ek.kato@gmail.com>

    * po/POTFILES.in : Follow the split of annotation-custom.scm from
      im-custom.scm

2011-05-25 Jae-hyeon Park <jhyeon@gmail.com>

    This commit is to change the dictionary format used by byeoru.scm from
    a scheme alist to a text file.  Now a word is looked up by the bsdlook
    plugin.  This speeds up the search process by eliminating the
    necessity to load the entire dictionary into memory.
    
    This commit also introduces a new way to define a personal dictionary.
    
    * Makefile.am
      - SUBDIRS: added byeoru-data
    * configure.ac
      - AC_CONFIG_FILES: added byeoru-data/Makefile
    
    * byeoru-data/Makefile.am
      - new
    * byeoru-data/byeoru-dict
      - new dictionary file for byeoru.scm
      - replaces byeoru-dic.scm
    
    * scm/Makefile.am
      - SCM_FILES: deleted byeoru-dic.scm
    * scm/byeoru.scm
      - now uses bsdlook to look up a word when converting Korean
        characters into Chinese characters
      - conversion history can be saved to disk (which is loaded
        automatically the next time) by selecting a menu item
      - other cleanups
    * scm/byeoru-custom.scm
      - added a new custom group and variables for dictionary and
        conversion history settings
    * scm/byeoru-dic.scm
      - deleted

2011-05-25 Jae-hyeon Park <jhyeon@gmail.com>

    * scm/byeoru-symbols.scm
      - UCS codes were rewritten in hexadecimal format to ease reference
        to the Unicode chart

2011-05-25 Etsushi Kato <ek.kato@gmail.com>

    * uim/uim-eb.h : Fix in a comment.

2011-05-24 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt
    * qt/test
    * qt/chardict
    * qt/chardict/po
    * gtk
    * gtk/test
      - Remove.

2011-05-24 Muneyuki Noguchi <nogu.dev@gmail.com>

    * Refactor directory structure ([uim-en 377]).
    * qt3/Makefile.am
    * qt3/candwin/Makefile.am
    * qt3/immodule/Makefile.am
    * qt3/pref/Makefile.am
    * qt3/switcher/Makefile.am
    * qt3/toolbar/Makefile.am
      - New file.
    * qt/Makefile.am
      - Remove.
    * qt/chardict/Makefile.am
      - Move to qt3/chardict.
    * qt/candwin-qt.cpp
    * qt/candwin-qt.h.
      - Move to qt3/candwin
    * qt/chardict/bushu.t
    * qt/chardict/chardict-bushuviewwidget.cpp
    * qt/chardict/chardict-bushuviewwidget.h
    * qt/chardict/chardict-chargridview.cpp
    * qt/chardict/chardict-chargridview.h
    * qt/chardict/chardict-kseparator.cpp
    * qt/chardict/chardict-kseparator.h
    * qt/chardict/po/ChangeLog
    * qt/chardict/po/LINGUAS
    * qt/chardict/po/Makevars
    * qt/chardict/po/POTFILES.in
    * qt/chardict/po/ja.po
    * qt/chardict/po/remove-potcdate.sin
    * qt/chardict/po/uim-chardict-qt.pot
    * qt/chardict/chardict-qt.cpp
    * qt/chardict/chardict-qt.h
    * qt/chardict/qtgettext.h
    * qt/chardict/chardict-unicodeviewwidget.cpp
    * qt/chardict/chardict-unicodeviewwidget.h
      - Move to qt3/chardict.
    * qt/immodule-candidatewindow.cpp
    * qt/immodule-candidatewindow.h
    * qt/immodule-plugin.cpp
    * qt/immodule-plugin.h
    * qt/immodule-qhelpermanager.cpp
    * qt/immodule-qhelpermanager.h
    * qt/immodule-qtextutil.cpp
    * qt/immodule-qtextutil.h
    * qt/immodule-quiminfomanager.cpp
    * qt/immodule-quiminfomanager.h
    * qt/immodule-quiminputcontext.cpp
    * qt/immodule-quiminputcontext.h
    * qt/immodule-quiminputcontext_compose.cpp
    * qt/immodule-quiminputcontext_compose.h
    * qt/immodule-quiminputcontext_with_slave.cpp
    * qt/immodule-quiminputcontext_with_slave.h
    * qt/immodule-subwindow.cpp
    * qt/immodule-subwindow.h
      - Move to qt3/immodule.
    * qt/pref-customwidgets.cpp
    * qt/pref-customwidgets.h
    * qt/pref-keyeditformbase.ui
    * qt/pref-kseparator.cpp
    * qt/pref-kseparator.h
    * qt/pref-olisteditformbase.ui
    * qt/pref-qt.cpp
    * qt/pref-qt.h
      - Move to qt3/pref.
    * qt/qtgettext.h -> qt3/qtgettext.h
      - Move to qt3.
    * qt/switcher-qt.cpp
    * qt/switcher-qt.h
      - Move qt3/switcher.
    * qt/test/Makefile.am
    * qt/test/qedittest.cpp
      - Move to qt3/test.
    * qt/toolbar-applet-kde.cpp
    * qt/toolbar-applet-kde.h
    * qt/toolbar-common-quimhelpertoolbar.cpp
    * qt/toolbar-common-quimhelpertoolbar.h
    * qt/toolbar-common-uimstateindicator.cpp
    * qt/toolbar-common-uimstateindicator.h
    * qt/toolbar-standalone-qt.cpp
    * qt/toolbar-standalone-qt.h
    * qt/uimapplet.desktop.in
      - Move to qt3/toolbar.
    * Makefile.am
    * autogen.sh
    * configure.ac
    * po/POTFILES.in
      - Follow directory changes.

2011-05-24 Muneyuki Noguchi <nogu.dev@gmail.com>

    * Refactor directory structure ([uim-en 377]).
    * gtk2/candwin/Makefile.am
    * gtk2/dict/Makefile.am
    * gtk2/pad/Makefile.am
    * gtk2/pref/Makefile.am
    * gtk2/switcher/Makefile.am
    * gtk2/toolbar/Makefile.am
      - New file.
    * helper/candwin-gtk.c
    * helper/candwin-tbl-gtk.c
      - Move to gtk2/candwin.
    * helper/dict-anthy.c
    * helper/dict-anthy.h
    * helper/dict-canna-cclass.c
    * helper/dict-canna-cclass.h
    * helper/dict-canna.c
    * helper/dict-canna.h
    * helper/dict-cclass-dialog.c
    * helper/dict-cclass-dialog.h
    * helper/dict-dict.c
    * helper/dict-dict.h
    * helper/dict-main-gtk.c
    * helper/uim-dict-ui.xml.in
    * helper/dict-util.c
    * helper/dict-util.h
    * helper/dict-word-list-view-gtk.c
    * helper/dict-word-list-view-gtk.h
    * helper/dict-word-list-win-gtk.c
    * helper/dict-word-list-win-gtk.h
    * helper/dict-word-win-gtk.c
    * helper/dict-word-win-gtk.h
    * helper/dict-word.c
    * helper/dict-word.h
      - Move to gtk2/dict.
    * helper/input-pad-ja.c
      - Move to gtk2/pad.
    * helper/pref-gtk-custom-widgets.c
    * helper/pref-gtk-custom-widgets.h
    * helper/pref-gtk-keytab.h
    * helper/pref-gtk.c
      - Move to gtk2/pref.
    * helper/im-switcher-gtk.c
      - Move to gtk2/switcher.
    * helper/GNOME_UimApplet.server.in.in
    * helper/toolbar-applet-gnome.c
    * helper/toolbar-common-gtk.c
    * helper/eggtrayicon.c
    * helper/eggtrayicon.h
    * helper/toolbar-standalone-gtk.c
    * helper/toolbar-systray-gtk.c
      - Move to gtk2/toolbar.
    * helper/Makefile.am
     - Remove.
    * Makefile.am
    * configure.ac
    * gtk2/Makefile.am
    * po/POTFILES.in
    * gtk3/candwin/Makefile.am
    * gtk3/dict/Makefile.am
    * gtk3/pad/Makefile.am
    * gtk3/pref/Makefile.am
    * gtk3/switcher/Makefile.am
    * gtk3/toolbar/Makefile.am
      - Follow directory move.

2011-05-24 Muneyuki Noguchi <nogu.dev@gmail.com>

    * Refactor directory structure ([uim-en 377]).
    * gtk2/Makefile.am
      - New file.
    * gtk/Makefile.am
    * gtk/caret-state-indicator.c
    * gtk/caret-state-indicator.h
    * gtk/compose.c
    * gtk/compose.h
    * gtk/gtk-im-uim.c
    * gtk/gtk-im-uim.h
    * gtk/gtk-rc-get-immodule-file.c
    * gtk/key-util-gtk.c
    * gtk/key-util-gtk.h
    * gtk/text-util.c
    * gtk/text-util.h
    * gtk/uim-cand-win-gtk.c
    * gtk/uim-cand-win-gtk.h
    * gtk/uim-cand-win-tbl-gtk.c
    * gtk/uim-cand-win-tbl-gtk.h
    * gtk/test/Makefile.am
      - Move to gtk2/immodule
    * gtk/test/Makefile.am
    * gtk/test/entry.c
    * gtk/test/test.sh.in
      - Move to gtk2/test
    * Makefile.am
    * configure.ac
    * gtk3/candwin/Makefile.am
    * gtk3/immodule/Makefile.am
    * gtk3/pref/Makefile.am
    * gtk3/test/Makefile.am
    * helper/Makefile.am
    * helper/candwin-gtk.c
    * helper/candwin-tbl-gtk.c
    * helper/pref-gtk-custom-widgets.c
    * helper/pref-gtk.c
      - Follow directory move.

2011-05-24 Etsushi Kato <ek.kato@gmail.com>

    * scm/Makefile.am (SCM_FILES) : Add annotation-osx-dcs.scm.

2011-05-24 Etsushi Kato <ek.kato@gmail.com>

    * scm/annotation-osx-dcs.scm : New file for osx-dcs annotation
      agent.

2011-05-24 Etsushi Kato <ek.kato@gmail.com>

    * configure.ac (OSX_DCS) : Fix typo.

2011-05-24 Etsushi Kato <ek.kato@gmail.com>

    * uim/uim-eb.c : Remove obsolete comment.
    * uim/uim-eb.h : Ditto.  Don't use UIM_GTK_ prefix for the include
      guard.
    * uim/Makefile.am
      - (lib-eb-static.la) : Don't build because the convenience
        library is no longer used by other than libuim-eb.so.
      - (libuim_eb_la_SOURCES) : Use uim-eb.[ch] directory.
      - (libuim_eb_la_LIBADD) : Remove lib-eb-static.la.

2011-05-24 Etsushi Kato <ek.kato@gmail.com>

    * configure.ac (osx-dcs) : Add check for OS X Dictionary Services.
    * scm/annotation-custom.scm : New file.
      - (enable-annotation)
      - (annotation-agent)
      - (eb)
      - (eb-enable-for-annotation?)
      - (annotation-eb-dic-path)
      - (dict)
      - (annotation-dict-server)
      - (annotation-dict-servname)
      - (annotation-dict-database)
      - (annotation-dict-cache-words)
      - (filter)
      - (annotation-filter-server-setting?)
      - (annotation-filter-unix-domain-socket-path)
      - (annotation-filter-tcpserver-name)
      - (annotation-filter-tcpserver-port)
      - (annotation-filter-command)
        - Move definitions from im-custom.scm.
      - (annotation-agent-list) : New.  Remove uninstalled agents.
    * scm/Makefile.am (SCM_FILES) : Add annotation-custom.scm.
    * scm/init.scm : Load annotatino-custom.scm when loading
      annotation agent.
    * scm/im-custom.scm : Move annotation related definitions into
      annotation-custom.scm.
    * uim/osx-dcs.m : New file.  This makes dictionary services
      available for the annotation system.
    * uim/Makefile.am
      - (uim_plugin_LTLIBRARIES) : Add libuim-osx-dcs.la.
      - (libuim_osx_dcs_la_SOURCES) : New.
      - (libuim_osx_dcs_la_OBJCFLAGS) : New.
      - (libuim_osx_dcs_la_LDFLAGS) : New.

2011-05-21 Muneyuki Noguchi <nogu.dev@gmail.com>

    * make-dist.sh
      - Update position of comments.

2011-05-21 Etsushi Kato <ek.kato@gmail.com>

    * helper/toolbar-systray-gtk.c (main) : Make indicator shown in
      the gnome-shell.

2011-05-21 Etsushi Kato <ek.kato@gmail.com>

    * configure.ac
    * uim/uim.h
      - Post release version bump.

2011-05-19 Muneyuki Noguchi <nogu.dev@gmail.com>

    * make-dist.sh
      - Use loop for detecting eb.conf.

2011-05-18 Muneyuki Noguchi <nogu.dev@gmail.com>

    * make-dist.sh
      - Check if eb.conf exists.

2011-05-18 Muneyuki Noguchi <nogu.dev@gmail.com>

    * po/Makevars
      - (XGETTEXT_OPTIONS): Remove `--keyword=UIC_'.
    * qt4/pref/uim-pref-qt4.pro.in
      - (QMAKE_UIC): Use default $QMAKE_UIC.
    * qt4/qtgettext.h
      - Don't define UIC_().

2011-05-18 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/pref/keyeditformbase.cpp
    * qt4/pref/keyeditformbase.h
    * qt4/pref/olisteditformbase.cpp
    * qt4/pref/olisteditformbase.h
      - New.
    * qt4/pref/keyeditformbase.ui
    * qt4/pref/olisteditformbase.ui
      - Remove.
    * po/POTFILES.in
      - Remove keyeditformbase.ui and olisteditformbase.ui.
        Add keyeditformbase.h, keyeditformbase.cpp,
        olisteditformbase.h, and olisteditformbase.cpp.
    * qt4/pref/Makefile.am
      - (EXTRA_DIST): Ditto.
    * qt4/pref/customwidgets.cpp
      - Replace Ui_OListEditFormBase with OListEditFormBase.
      - Replace Ui_KeyEditFormBase with KeyEditFormBase.
    * qt4/pref/customwidgets.h
      - Ditto.
    * qt4/pref/uim-pref-qt4.pro.in
      - (HEADERS): Add keyeditformbase.h and olisteditformbase.h.
      - (FORMS): Remove.
      - (SOURCES): Add keyeditformbase.cpp and olisteditformbase.cpp.

2011-05-17 Etsushi Kato <ek.kato@gmail.com>

    * RELNOTE : Update.

2011-05-17 Etsushi Kato <ek.kato@gmail.com>

    * RELNOTE : Update.

2011-05-17 Etsushi Kato <ek.kato@gmail.com>

    * RELNOTE : Update.

2011-05-16 Etsushi Kato <ek.kato@gmail.com>

    * scm/im-custom.scm (annotation-filter-server-setting?) : Add
      an activity hook.

2011-05-15 Etsushi Kato <ek.kato@gmail.com>

    * gtk/uim-cand-win-gtk.c (uim_cand_win_gtk_create_sub_window) :
      Use GTK_WRAP_WORD_CHAR even for gtk+2.
    * helper/candwin-gtk.c (uim_cand_win_gtk_create_sub_window) :
      Ditto.

2011-05-14 Muneyuki Noguchi <nogu.dev@gmail.com>

    * NEWS
      - Update.

2011-05-14 Muneyuki Noguchi <nogu.dev@gmail.com>

    * NEWS
      - Update.

2011-05-14 Muneyuki Noguchi <nogu.dev@gmail.com>

    * gtk/uim-cand-win-gtk.c
      - (uim_cand_win_gtk_create_sub_window): Avoid subwindow size changes
        even when line breaks can't be added between words in annotation text.

2011-05-12 Muneyuki Noguchi <nogu.dev@gmail.com>

    * configure.ac
      - (enable-gnome3-applet): Fix typo.

2011-05-12 Etsushi Kato <ek.kato@gmail.com>

    * NEWS : Update

2011-05-12 Etsushi Kato <ek.kato@gmail.com>

    * NEWS : Update.

2011-05-12 Etsushi Kato <ek.kato@gmail.com>

    * helper/toolbar-common-gtk.c
      - (uim_launch_helper_application) : Rename to
        uim_toolbar_launch_helper_application.
      - (uim_toolbar_launch_helper_application) : Renamed from
        uim_launch_helper_application.
    * helper/toolbar-applet-gnome.c : Follow the change.
    * gtk3/applet-gnome3.c : Ditto.

2011-05-12 Etsushi Kato <ek.kato@gmail.com>

    * tables/Makefile.am (.scm.table) : Fix to use LANG=C.

2011-05-12 Etsushi Kato <ek.kato@gmail.com>

    * configure.ac (with-gtk3) : Fix messages.

2011-05-10 Etsushi Kato <ek.kato@gmail.com>

    * test/test-intl.scm (guess-current-locale) : Don't use locale -a.
    * test/test-im.scm(test find-im-for-locale) : Disable vi because
      it may depend on the m17nlib version.

2011-05-10 Etsushi Kato <ek.kato@gmail.com>

    * helper/dict-dict.c (uim_dict_open) : Oops.  Fix r7028.

2011-05-10 Etsushi Kato <ek.kato@gmail.com>

    * configure.ac : Use user specified path for the
      CMAKE_INSTALL_PREFIX of KDE4 applet.
    * qt4/toolbar/CMakeLists.txt : Specify build directory of
      plasma-applet-uim.desktop.

2011-05-10 KIHARA Hideto <deton@m1.interq.or.jp>

    * scm/tutcode.scm
      - Update comment.

2011-05-10 Etsushi Kato <ek.kato@gmail.com>

    * configure.ac : Use correct path-to-source in cmake for
      applet-kde4.

2011-05-10 Etsushi Kato <ek.kato@gmail.com>

    * make-dist.sh : Use sigscheme-0.8.6.

2011-05-10 Etsushi Kato <ek.kato@gmail.com>

    * COPYING : Update.

2011-05-10 Etsushi Kato <ek.kato@gmail.com>

    * m4/ax_cflags_gcc_option.m4 : Update to the latest version.

2011-05-10 Etsushi Kato <ek.kato@gmail.com>

    * make-dist.sh (CONF_NONE, CONF_FULL_WO_MAINT) : Update.

2011-05-10 Etsushi Kato <ek.kato@gmail.com>

    * helper/toolbar-common-gtk.c (reset_icon) : Don't remove
      reference of uim_factory.

2011-05-10 Etsushi Kato <ek.kato@gmail.com>

    * po/ja.po : Add some translations.

2011-05-10 Etsushi Kato <ek.kato@gmail.com>

    * scm/predict-custom.scm
      - (predict-custom-google-suggest-language)
      - (predict-custom-google-suggest-use-ssl)
        - Add custom-activity-hooks.

2011-05-10 Etsushi Kato <ek.kato@gmail.com>

    * scm/predict-custom.scm (predict-custom-enable?) : Update
      description.
    * po/fr.po
    * po/ko.po
    * po/ja.po
      - Update.

2011-05-10 Etsushi Kato <ek.kato@gmail.com>

    * RELNOTE : Update.

2011-05-10 Etsushi Kato <ek.kato@gmail.com>

    * NEWS : Update.

2011-05-09 KIHARA Hideto <deton@m1.interq.or.jp>

    * po/ja.po
      - Fix translation about tutcode.

2011-05-09 KIHARA Hideto <deton@m1.interq.or.jp>

    * po/ja.po
      - Update translation about tutcode.

2011-05-09 KIHARA Hideto <deton@m1.interq.or.jp>

    * NEWS
      - Add news about tutcode.

2011-05-09 Etsushi Kato <ek.kato@gmail.com>

    * po/ja.po : Translate fuzzy.  Some of the tutcode related things
      needs to be checked later.

2011-05-09 Etsushi Kato <ek.kato@gmail.com>

    * fr.po
    * ko.po
      - Remove fuzzy.

2011-05-09 Etsushi Kato <ek.kato@gmail.com>

    * po/fr.po
    * po/ko.po
    * po/ja.po
      - make update-po

2011-05-09 Etsushi Kato <ek.kato@gmail.com>

    * emacs/candidate.c (select_candidate) : Remove unused code.
    * emacs/helper.c (helper_send_im_list) : Ditto.
    * notify/uim-libnotify.c : Don't use C++ style comment.
    * helper/toolbar-standalone-gtk.c (motion_notify_event_cb) :
      Remove unused code.
    * helper/dict-word-list-win-gtk.c (activate_radio_action) : Ditto.
    * helper/im-switcher-gtk.c (get_selected_im_name) : Ditto.
    * uim/m17nlib.c
      - (get_left_of_cursor)
      - (get_right_of_cursor)
      - (get_left_of_candidate)
      - (get_selected_candidate)
      - (get_right_of_candidate)
        - Remove unused code.  Simplify using MAKE_STR_DIRECTLY().

2011-05-09 Etsushi Kato <ek.kato@gmail.com>

    * helper/dict-dict.c (uim_dict_open) : Fix a bug which was
      introduced in r6513.

2011-05-09 Etsushi Kato <ek.kato@gmail.com>

    * gtk/gtk-im-uim.c (im_uim_reset)
    * scm/byeoru.scm (byeoru-reset-handler)
      - Follow the discussion in [Anthy-dev 2390].

2011-05-08 Muneyuki Noguchi <nogu.dev@gmail.com>

    * NEWS
      - Update.

2011-05-08 Etsushi Kato <ek.kato@gmail.com>

    * NEWS : Update.

2011-05-08 Etsushi Kato <ek.kato@gmail.com>

    * xim/Makefile.am : Define USE_GTK3_CANDWIN if default_toolkit is
      gtk3.
    * xim/canddisp.cpp (DEFAULT_CANDWIN_PROG) : Add uim-candwin-gtk3.

2011-05-08 Muneyuki Noguchi <nogu.dev@gmail.com>

    * notify/uim-libnotify.c
      - (uim_libnotify_notify): Add support for libnotify >= 0.7.

2011-05-07 Etsushi Kato <ek.kato@gmail.com>

    * uim/libtool-version.mk (libuim_version) : Update to 8:0:1 from
      7:0:0 (libuim.so.7.0.0 -> libuim.so.7.1.0).
    * doc/COMPATIBILITY : Update.

2011-05-07 Etsushi Kato <ek.kato@gmail.com>

    * gtk3/immodule/Makefile.am (im_uim_la_LIBADD) : Add libuim-counted-init.la.

2011-05-07 Etsushi Kato <ek.kato@gmail.com>

    * gtk/gtk-im-uim.c
      - (im_module_init)
      - (im_module_exit)
        - Use uim_counted_init() and uim_counted_quit() for QGtkStyle
          in Qt4.
    * gtk/Makefile.am (im_uim_la_LIBADD) : Add libuim-counted-init.la.
    * qt4/immodule/plugin.cpp
      - (UimInputContextPlugin::uimInit)
      - (UimInputContextPlugin::uimQuit)
        - Use uim_counted_init() and uim_counted_quit() for QGtkStyle.
    * qt4/immoculd/quiminputcontextplugin.pro.in (LIBS) : Add
      libuim-counted-init.a.
    * uim/counted-init.c (uim_init_count) : Move the variable into uim.c.
    * uim/uim.c (uim_init_count) : Moved from counted-init.c.
    * uim/counted-init.h (uim_init_count) : Extern the variable.

2011-05-07 Etsushi Kato <ek.kato@gmail.com>

    * qt4/toolbar/CMakeLists.txt
      - (include_directories) : Add build directory of uim/.
      - (target_link_libraries) : Use CMAKE_BINARY_DIR.

2011-05-07 Etsushi Kato <ek.kato@gmail.com>

    * helper/pref-gtk-custom-widgets.c : Include
      pref-gtk-custom-widgets.h with "" instead of <>.

2011-05-07 Muneyuki Noguchi <nogu.dev@gmail.com>

    * gtk3/pref/Makefile.am
      - Define helper_defs.
      - (uim_pref_gtk3_CPPFLAGS): Use top_srcdir instead of relative path
        to specify include directory to avoid fail in `make distcheck'.

2011-05-07 Muneyuki Noguchi <nogu.dev@gmail.com>

    * gtk3/toolbar/Makefile.am
      - (appletdir): Change install directory of uim-toolbar-applet-gnome3.

2011-05-07 Muneyuki Noguchi <nogu.dev@gmail.com>

    * gtk3/toolbar/applet-gnome3.c
      - (exec_switcher, exec_pref, exec_dic, exec_pad):
        Launch GTK+3 version of helper applications.

2011-05-06 Muneyuki Noguchi <nogu.dev@gmail.com>

    * gtk3/toolbar/Makefile.am
      - Add uim-toolbar-applet-gnome3.
    * helper/UimApplet.panel-applet.in.in
      - Move to gtk3/toolbar.
    * helper/org.gnome.panel.applet.UimAppletFactory.service.in
      - Ditto.
    * helper/toolbar-applet-gnome3.c
      - Ditto.
      - Rename to applet-gnome3.c
    * helper/Makefile.am
      - Remove uim-toolbar-applet-gnome3.
    * po/POTFILES.in
      - Follow change of toolbar-applet-gnome3.c.

2011-05-06 Etsushi Kato <ek.kato@gmail.com>

    * helper/Makefile.am
      - (DISTCLEANFILES) : Add toolbar-commont-gtk3.c.
      - (uim_toolbar_applet_gnome3_LDADD) : Use GTK3_LIBS.
      - (uim_toolbar_applet_gnome3_CDFLAGS) : Use GTK3_CFLAGS.
      - (uim_toolbar_applet_gnome3_SOURCES) : Use
         toolbar-common-gtk3.c.
      - (toolbar-common-gtk3.c) : Symlink to toolbar-common-gtk3.c.

2011-05-06 Etsushi Kato <ek.kato@gmail.com>

    * configure.ac (APPLET_GNOME3) : Use libpanelapplet-4.0.
    * helper/toolbar-applet-gnome3.c : Update for API change in
      libpanel-applet >= 2.91.90.

2011-05-05 Muneyuki Noguchi <nogu.dev@gmail.com>

    * helper/Makefile.am
      - (EXTRA_DIST): Add UimApplet.panel-applet.in.in
        and org.gnome.panel.applet.UimAppletFactory.service.in.

2011-05-05 Muneyuki Noguchi <nogu.dev@gmail.com>

    * gtk3/dict/Makefile.am
      - (uim_dict_gtk3_SOURCES): Correct path of dict-cclass-dialog.h.

2011-05-05 Muneyuki Noguchi <nogu.dev@gmail.com>

    * tools/gnuify-changelog.pl
      - (%hackers): Update.

2011-05-02 Muneyuki Noguchi <nogu.dev@gmail.com>

    * xim/canddisp.cpp
      - (candwin_read_cb): Suppress warnings by casting.
    * xim/compose.cpp
      - (XimIM::get_mb_string, XimIM::parse_compose_line, KeySymToUcs4,
         mb_string_to_utf8): Ditto.
    * xim/connection.cpp
      - (XConnection::readToBuf): Ditto.
    * xim/convdisp.cpp
      - (PeWin::draw_char, PeWin::set_back, PeLineWin::get_char_width,
         ConvdispOv::check_atr, ConvdispOv::layoutCharEnt,
         ConvdispOs::compose_preedit_array,
         ConvdispOs::compose_feedback_array): Ditto.
    * xim/helper.cpp
      - (send_im_list, helper_str_parse): Ditto.
    * xim/locale.cpp
      - (valid_locales, all_locales): Ditto.
    * xim/main.cpp
      - (add_window_watch, remove_window_watch, findWindowIf, notifyLocale,
         init_supported_locales): Ditto.
    * xim/ximic.cpp
      - (icxatr::icxatr, XimIC::send_key_event, XimIC::get_ic_atr,
         XimIC::reset_ic, XimIC::onSendPacket): Ditto.
    * xim/ximpacket.cpp
      - (TxString::TxString): Ditto.
    * xim/ximserver.cpp
      - (XimServer::strToUstring,
         InputContext::get_caret_state_label_from_prop_list,
         InputContext::update_prop_list, keyState::check_key): Ditto.
    * xim/ximtrans.cpp
      - (XIMATTRIBUTE::write_imattr_to_packet,
         XICATTRIBUTE::write_icattr_to_packet,
         Connection::push_error_packet): Ditto.

2011-05-01 Muneyuki Noguchi <nogu.dev@gmail.com>

    * uim/scim.cpp
      - Fix compile error in broken uim-scim by including string.h,
        which is needed to use strcmp().

2011-04-08 KIHARA Hideto <deton@m1.interq.or.jp>

    * scm/tutcode-editor.scm
      - (tutcode-editor-commit-raw):
        Replace tutcode-make-string with string-list-concat.
    * scm/tutcode.scm
      - (tutcode-make-string): Remove.
      - (tutcode-lib-commit-nth-prediction,
         tutcode-get-nth-candidate,
         tutcode-prepare-commit-string,
         tutcode-purge-candidate,
         tutcode-begin-conversion,
         tutcode-check-stroke-help-window-begin,
         tutcode-check-auto-help-window-begin,
         tutcode-do-update-preedit,
         tutcode-commit-editor-context,
         tutcode-check-completion,
         tutcode-check-prediction,
         tutcode-proc-state-yomi,
         tutcode-proc-state-interactive-bushu,
         tutcode-get-candidate-handler):
        Replace tutcode-make-string with string-list-concat.
      - (tutcode-postfix-delete-text):
        Replace tutcode-make-string with apply string-append.

2011-04-06 KIHARA Hideto <deton@m1.interq.or.jp>

    * Add history input mode for tutcode.
    * scm/tutcode-custom.scm
      - (tutcode-history-size,
        tutcode-nr-candidate-max-for-history): New custom.
    * scm/tutcode-key-custom.scm
      - (tutcode-history-start-sequence): New custom.
    * scm/tutcode.scm
      - Add comment about history input mode.
      - (tutcode-heading-label-char-list-for-history): New variable.
      - (tutcode-context-rec-spec): Add history.
      - (tutcode-context-new):
        Add initialization of tutcode-heading-label-char-list-for-history.
      - (tutcode-get-nth-candidate-for-history,
        tutcode-get-current-candidate-for-history,
        tutcode-prepare-commit-string-for-history): New.
      - (tutcode-commit): Change to update commit history list.
      - (tutcode-commit-by-label-key):
        Change to use tutcode-get-idx-by-label-key.
      - (tutcode-commit-by-label-key-for-prediction): Ditto.
      - (tutcode-get-idx-by-label-key):
        New function extracted and merged from tutcode-commit-by-label-key
        and tutcode-commit-by-label-key-for-prediction.
      - (tutcode-commit-by-label-key-for-history): New.
      - (tutcode-append-history): New.
      - (tutcode-begin-history): New.
      - (tutcode-check-candidate-window-begin): Change for history mode.
      - (tutcode-stroke-help-update-alist-with-rule):
        Add label for history start sequence.
      - (tutcode-do-update-preedit): Add update for history mode.
      - (tutcode-proc-state-on):
        Add parameter to tutcode-commit not to append to history on normal input.
        Add check of history start sequence.
      - (tutcode-postfix-delete-text):
        Add parameter to tutcode-commit not to append to history
        of fallback-backspace-string.
      - (tutcode-proc-state-history): New.
      - (tutcode-change-candidate-index): Fix error except in converting mode.
      - (tutcode-heading-label-char-for-history?): New.
      - (tutcode-proc-state-converting):
        Fix not to use key with modifier as label key.
      - (tutcode-state-has-preedit?): Add tutcode-state-history.
      - (tutcode-key-press-handler): Add history mode.
      - (tutcode-get-candidate-handler): Change for history mode.
      - (tutcode-set-candidate-index-handler): Change for history mode.
      - (tutcode-custom-set-mazegaki/bushu-start-sequence!):
        Add history start sequence.

2011-04-06 KIHARA Hideto <deton@m1.interq.or.jp>

    * scm/tutcode.scm
      - (tutcode-kanji-code-input-kuten): Simplify by reducing format check.

2011-04-06 KIHARA Hideto <deton@m1.interq.or.jp>

    * uim/encoding-table.c
      - (alias_eucjp): Prepend EUC-JIS-2004 and EUC-JISX0213 before EUC-JP
        for JIS X 0213.

2011-04-06 KIHARA Hideto <deton@m1.interq.or.jp>

    * Add kanji code input mode for tutcode.
    * scm/tutcode-key-custom.scm
      - (tutcode-kanji-code-input-start-sequence): New custom.
    * scm/tutcode.scm
      - Add comment about kanji code input mode.
      - (tutcode-begin-kanji-code-input,
         tutcode-kanji-code-input-ucs,
         tutcode-kanji-code-input-kuten,
         tutcode-kanji-code-input-jis,
         tutcode-jis-code->euc-jp-string,
         tutcode-euc-jp-code->euc-jp-string): New.
      - (tutcode-stroke-help-update-alist-with-rule):
        Add label for kanji code input start sequence.
      - (tutcode-do-update-preedit):
        Add preedit update for kanji code input mode.
      - (tutcode-proc-state-on): Add check of kanji code input start sequence.
      - (tutcode-proc-state-code): New.
      - (tutcode-state-has-preedit?): Add kanji code input mode.
      - (tutcode-key-press-handler): Add kanji code input mode.
      - (tutcode-custom-set-mazegaki/bushu-start-sequence!):
        Add kanji code input start sequence.

2011-03-27 Muneyuki Noguchi <nogu.dev@gmail.com>

    * po/POTFILES.in
      - Add helper/toolbar-applet-gnome3.c.

2011-03-27 Muneyuki Noguchi <nogu.dev@gmail.com>

    * configure.ac
      - (QTLIBDIR): Check if $QTDIR/lib64 exists first for openSUSE 64bit.

2011-03-27 Muneyuki Noguchi <nogu.dev@gmail.com>

    * helper/Makefile.am
      - (DISTCLEANFILES):
        Don't include org.gnome.panel.applet.UimAppletFactory.service.in.

2011-03-27 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/chardict/kseparator.cpp
    * qt4/chardict/kseparator.h
    * qt4/pref/kseparator.cpp
    * qt4/pref/kseparator.h
      - Remove.
    * qt4/chardict/Makefile.am
    * qt4/chardict/qt4.cpp
    * qt4/chardict/uim-chardict-qt4.pro.in
    * qt4/pref/Makefile.am
    * qt4/pref/qt4.cpp
    * qt4/pref/uim-pref-qt4.pro.in
      - Remove kseparator.cpp and kseparator.h.

2011-03-22 Etsushi Kato <ek.kato@gmail.com>

    * emacs/uim-leim.el (uim-leim-input-method-activate-hook) : Don't
      set current-input-method-title here (bug #35318).

2011-03-20 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/qtextutil.h
      - (QUimTextUtil::acquirePrimaryTextInQTextEdit,
         QUimTextUtil::acquireSelectionTextInQTextEdit,
         QUimTextUtil::deletePrimaryTextInQTextEdit,
         QUimTextUtil::deleteSelectionTextInQTextEdit): Add stubs for QTextEdit.
    * qt4/immodule/qtextutil.cpp
      - Ditto.
      - (QUimTextUtil::acquirePrimaryText, QUimTextUtil::acquireSelectionText,
         QUimTextUtil::deletePrimaryText, QUimTextUtil::deleteSelectionText):
        Call stub.
    * scm/tutcode.scm
      - Change comment.

2011-03-20 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/qtextutil.cpp
    * qt4/immodule/qtextutil.h
      - (acquirePrimaryTextInQTextEdit):
        Rename to acquirePrimaryTextInQ3TextEdit.
      - (acquireSelectionTextInQTextEdit):
        Rename to acquireSelectionTextInQ3TextEdit.
      - (deletePrimaryTextInQTextEdit): Rename to deletePrimaryTextInQ3TextEdit.
      - (deleteSelectionTextInQTextEdit):
        Rename to deleteSelectionTextInQ3TextEdit.
      - (QTextEditPositionBackward): Rename to Q3TextEditPositionBackward.
      - (QTextEditPositionForward): Rename to Q3TextEditPositionForward.

2011-03-12 Jae-hyeon Park <jhyeon@gmail.com>

    * scm/byeoru.scm
      - replaced ucs-to-utf8-string with ucs->utf8-string
      - cosmetic changes

2011-02-24 KIHARA Hideto <deton@m1.interq.or.jp>

    * Add fallback of surrounding text API
      which gets former text from internal commit string buffer
      and deletes former text by commiting "\b".
    * scm/tutcode-custom.scm
      - (tutcode-enable-fallback-surrounding-text?): New custom.
    * scm/tutcode.scm
      - (tutcode-fallback-backspace-string): New variable.
      - (tutcode-commit-raw):
        Add check of tutcode-enable-fallback-surrounding-text?.
      - (tutcode-commit): Ditto.
        Add optional argument whether to skip appending to commit-strs.
      - (tutcode-proc-state-on):
        Change for tutcode-enable-fallback-surrounding-text?.
      - (tutcode-postfix-acquire-text):
        Change to get commit string from tutcode-context-commit-strs
        when im-acquire-text returns #f.
      - (tutcode-postfix-delete-text):
        Change to commit "\b" and update commit-strs
        when im-delete-text returns #f.

2011-02-23 KIHARA Hideto <deton@m1.interq.or.jp>

    * scm/tutcode.scm
      - (tutcode-proc-state-kigou):
        Change to commit by label key regardless of
        tutcode-commit-candidate-by-label-key?.
        Change not to take return key for commit to pass it to application.

2011-02-23 KIHARA Hideto <deton@m1.interq.or.jp>

    * scm/tutcode.scm
      - (tutcode-context-rec-spec): Change to initialize with evaluated value.

2011-02-23 KIHARA Hideto <deton@m1.interq.or.jp>

    * Change to be able to customize to do completion/prediction only when
      tutcode-begin-completion-key is typed.
    * scm/tutcode-custom.scm
      - (tutcode-completion-chars-min,
         tutcode-prediction-start-char-count): Change lower limit to 0.
    * scm/tutcode.scm
      - Update comment.
      - (tutcode-check-completion):
        Move call of tutcode-make-string after decision to do completion
        for performance.
      - (tutcode-check-prediction): Ditto.
      - (tutcode-proc-state-on):
        Change not to call tutcode-check-completion
        when tutcode-completion-chars-min is 0
        and tutcode-begin-completion-key is not typed.
      - (tutcode-proc-state-yomi): Ditto.

2011-02-23 KIHARA Hideto <deton@m1.interq.or.jp>

    * Add inflection support for postfix and prefix mazegaki conversion.
    * scm/tutcode.scm
      - Update comments about postfix conversion and inflection support.
      - (require-extension): Add srfi 8 for receive.
      - (tutcode-postfix-mazegaki-terminate-char-list): New variable.
      - (tutcode-context-rec-spec): Add mazegaki-yomi-len-specified,
        mazegaki-yomi-all and mazegaki-suffix.
      - (tutcode-flush): Add reset of added variables.
      - (tutcode-prepare-commit-string): Change to add suffix.
      - (tutcode-commit-with-auto-help): Ditto.
      - (tutcode-begin-conversion): Add argument yomi and suffix
        and update corresponding context variables when candidates are found
        to reduce reset of context variables when candidates are not found.
      - (tutcode-begin-conversion-with-relimit-right):
        Move before tutcode-postfix-mazegaki-relimit-left
        and rename to tutcode-mazegaki-relimit-right.
      - (tutcode-begin-conversion-with-inflection): New.
      - (tutcode-begin-mazegaki-inflection-conversion): New.
      - (tutcode-stroke-help-update-alist-with-rule):
        Add label for tutcode-postfix-mazegaki-inflection{,-[1-9]}-start.
      - (tutcode-do-update-preedit):
        Change for inflection support by cursor position before suffix.
      - (tutcode-commit-editor-context): Change to add suffix.
      - (tutcode-proc-state-on):
        Add check of tutcode-postfix-mazegaki-inflection{,-[1-9]}-start.
      - (tutcode-begin-postfix-mazegaki-conversion):
        Add update of added context variables.
        Change to use tutcode-postfix-mazegaki-acquire-yomi.
        Follow the argument change of tutcode-begin-conversion.
      - (tutcode-mazegaki-relimit-right):
        Rename from tutcode-begin-conversion-with-relimit-right.
        Add inflection support.
      - (tutcode-postfix-mazegaki-relimit-left,
         tutcode-mazegaki-inflection?,
         tutcode-begin-postfix-mazegaki-inflection-conversion,
         tutcode-mazegaki-inflection-relimit-right,
         tutcode-mazegaki-inflection-relimit-left): New.
      - (tutcode-mazegaki-proc-relimit-right,
         tutcode-mazegaki-proc-relimit-left):
        Extract from tutcode-proc-state-converting.
        Add inflection support.
      - (tutcode-postfix-mazegaki-acquire-yomi): New.
      - (tutcode-proc-state-yomi):
        Follow the argument change of tutcode-begin-conversion.
        Change to call tutcode-begin-conversion-with-inflection
        instead of tutcode-begin-conversion for conversion started by user.
        Add handle of tutcode-postfix-mazegaki{,-inflection}-start
        to start conversion explicitly without/with inflection.
      - (tutcode-back-to-yomi-state):
        Change to call tutcode-flush for postfix conversion.
      - (tutcode-proc-state-converting):
        Extract to tutcode-mazegaki-proc-relimit-right and
        tutcode-mazegaki-proc-relimit-left
        for tutcode-mazegaki-relimit-{right,left}-key.
      - (tutcode-custom-set-mazegaki/bushu-start-sequence!):
        Add rules for tutcode-postfix-mazegaki-inflection{,-[1-9]}-start.
    * scm/tutcode-custom.scm
      - (tutcode-mazegaki): New custom group.
      - (tutcode-enable-mazegaki-learning?,
         tutcode-use-recursive-learning?): Change to tutcode-mazegaki group.
      - (tutcode-mazegaki-yomi-max): Ditto. Change lower limit to 1.
      - (tutcode-mazegaki-enable-inflection?,
         tutcode-mazegaki-suffix-max): New custom.
    * scm/tutcode-key-custom.scm
      - (tutcode-postfix-mazegaki-start-sequence,
         tutcode-postfix-mazegaki-1-start-sequence,
         tutcode-postfix-mazegaki-2-start-sequence,
         tutcode-postfix-mazegaki-3-start-sequence,
         tutcode-postfix-mazegaki-4-start-sequence,
         tutcode-postfix-mazegaki-5-start-sequence,
         tutcode-postfix-mazegaki-6-start-sequence,
         tutcode-postfix-mazegaki-7-start-sequence,
         tutcode-postfix-mazegaki-8-start-sequence,
         tutcode-postfix-mazegaki-9-start-sequence): Change label.
      - (tutcode-postfix-mazegaki-inflection-start-sequence,
         tutcode-postfix-mazegaki-inflection-1-start-sequence,
         tutcode-postfix-mazegaki-inflection-2-start-sequence,
         tutcode-postfix-mazegaki-inflection-3-start-sequence,
         tutcode-postfix-mazegaki-inflection-4-start-sequence,
         tutcode-postfix-mazegaki-inflection-5-start-sequence,
         tutcode-postfix-mazegaki-inflection-6-start-sequence,
         tutcode-postfix-mazegaki-inflection-7-start-sequence,
         tutcode-postfix-mazegaki-inflection-8-start-sequence,
         tutcode-postfix-mazegaki-inflection-9-start-sequence): New custom key.
      - (tutcode-mazegaki-relimit-left-key):
        Rename from tutcode-postfix-mazegaki-relimit-left-key
        because this key is also used in prefix mazegaki conversion.
      - (tutcode-mazegaki-relimit-right-key): Ditto.

2011-02-20 Muneyuki Noguchi <nogu.dev@gmail.com>

    * helper/toolbar-standalone-gtk.c
      - (button_press_event_cb): Fix handling of negative values and zero.

2011-02-19 Muneyuki Noguchi <nogu.dev@gmail.com>

    * helper/toolbar-common-gtk.c
      - (set_button_style): Fix property name.

2011-02-19 Muneyuki Noguchi <nogu.dev@gmail.com>

    * helper/toolbar-common-gtk.c
      - (set_button_style): Fix typo.

2011-02-19 Muneyuki Noguchi <nogu.dev@gmail.com>

    * helper/toolbar-common-gtk.c
      - (set_button_style): New function to set style in GTK+3.
      - (prop_button_create, helper_toolbar_prop_list_update, toolbar_new):
        Use set_button_style().
      - (uim_toolbar_trayicon_new): Comment out gtk_rc_parse_string() in GTK+3.
        This function has no effect in GTK+3.

2011-02-19 Muneyuki Noguchi <nogu.dev@gmail.com>

    * helper/toolbar-applet-gnome3.c
      - (exec_switcher, exec_pref, exec_dic, exec_pad):
    	Launch GTK+2 version.

2011-02-19 Muneyuki Noguchi <nogu.dev@gmail.com>

    * helper/toolbar-applet-gnome3.c
      - (uim_menu_actions): Use icons registered in init_icon().
      - (register_icons): Remove.
      - (uim_applet_new): Don't call register_icons().

2011-02-18 Muneyuki Noguchi <nogu.dev@gmail.com>

    * helper/Makefile.am
      - (libexec_PROGRAMS): Check APPLET_GNOME.

2011-02-18 Muneyuki Noguchi <nogu.dev@gmail.com>

    * gtk3/toolbar/Makefile.am
      - Remove uim-toolbar-applet-gnome3 because this applet depends on GTK+2.
    * helper/Makefile.am
      - Add uim-toolbar-applet-gnome3.
    * gtk3/toolbar/UimApplet.panel-applet.in.in
      - Move to helper/UimApplet.panel-applet.in.in.
    * gtk3/toolbar/org.gnome.panel.applet.UimAppletFactory.service.in
      - Move to helper/org.gnome.panel.applet.UimAppletFactory.service.in.
    * gtk3/toolbar/toolbar-applet-gnome3.c
      - Move to helper/toolbar-applet-gnome3.c

2011-02-17 Muneyuki Noguchi <nogu.dev@gmail.com>

    * helper/eggtrayicon.c
      - (egg_tray_icon_draw): Fix coordinates in GTK+3.

2011-02-17 Muneyuki Noguchi <nogu.dev@gmail.com>

    * gtk/caret-state-indicator.c
      - (caret_state_indicator_paint_window):
        Make GTK+3 immodule more compatible with GTK+2 immodule.

2011-02-17 Muneyuki Noguchi <nogu.dev@gmail.com>

    * helper/toolbar-standalone-gtk.c
      - (handle_draw_cb): Fix coordinates and remove unused "rect".

2011-02-16 Muneyuki Noguchi <nogu.dev@gmail.com>

    * helper/eggtrayicon.c
      - (egg_tray_icon_expose): Support GTK+3 as egg_tray_icon_draw().
      - (egg_tray_icon_set_colormap): Add GTK+3 version.
      - (egg_tray_icon_realize):
        Don't comment out egg_tray_icon_set_colormap().

2011-02-15 Muneyuki Noguchi <nogu.dev@gmail.com>

    * helper/eggtrayicon.c
      - (egg_tray_icon_send_manager_message, egg_tray_icon_send_message):
        Use gdk_error_trap_pop_ignored() instead of gdk_error_trap_pop()
        in GTK+3.

2011-02-14 Muneyuki Noguchi <nogu.dev@gmail.com>

    * gtk3/toolbar/toolbar-applet-gnome3.c
      - (uim_menu_actions): Remove "..." from label.
        The GNOME Panel applets "Clock" and "Show Desktop" have a menu
        named "About", not "About ...".
    * helper/toolbar-applet-gnome.c
      - (uim_menu_xml): Ditto.

2011-02-14 Muneyuki Noguchi <nogu.dev@gmail.com>

    * helper/eggtrayicon.h
      - Include gtk/gtkx.h in GTK+3 because GtkPlug is used.

2011-02-14 Muneyuki Noguchi <nogu.dev@gmail.com>

    * helper/toolbar-common-gtk.c
      - (uim_launch_helper_application): New function.
      - (right_click_menu_activated): Use uim_launch_helper_application().
    * gtk3/toolbar/toolbar-applet-gnome3.c
      - (exec_switcher, exec_pref, exec_dic, exec_pad, exec_hand, exec_help):
        Use uim_launch_helper_application() instead of system(3).
    * helper/toolbar-applet-gnome.c
      - Ditto.

2011-02-14 Muneyuki Noguchi <nogu.dev@gmail.com>

    * gtk/caret-state-indicator.c
      - (caret_state_indicator_paint_window)
        * Change function prototype in GTK+3.
        * Change 2nd argument of gtk_render_frame() in GTK+3.
      - (caret_state_indicator_new):
        Connect to draw signal instead of expose_event.

2011-02-13 Muneyuki Noguchi <nogu.dev@gmail.com>

    * helper/toolbar-standalone-gtk.c
      - (button_press_event_cb): Call size_request_cb() directly in GTK+3.
      - (main): Don't connect to removed size-request signal in GTK+3.

2011-02-13 Muneyuki Noguchi <nogu.dev@gmail.com>

    * helper/toolbar-standalone-gtk.c
      - (handle_draw_cb): New function.
      - (handle_expose_event_cb): Remove codes for GTK+3.
      - (main): Call handle_draw_cb() in GTK+3.

2011-02-13 Muneyuki Noguchi <nogu.dev@gmail.com>

    * gtk3/toolbar/toolbar-applet-gnome3.c
      - Lunch GTK+3 helper applications from GTK+3 toolbar.
    * helper/toolbar-common-gtk.c
      - Ditto.

2011-02-13 Muneyuki Noguchi <nogu.dev@gmail.com>

    * gtk3/toolbar/toolbar-applet-gnome3.c
      - (register_icons): Cosmetic change.

2011-02-13 Muneyuki Noguchi <nogu.dev@gmail.com>

    * gtk3/toolbar/toolbar-applet-gnome3.c
      - (register_icons): New function.
      - (uim_applet_new): Call register_icons to register uim icons.

2011-02-13 Muneyuki Noguchi <nogu.dev@gmail.com>

    * gtk3/toolbar/toolbar-applet-gnome3.c
      - (uim_applet_new): Call g_object_unref().

2011-02-13 Muneyuki Noguchi <nogu.dev@gmail.com>

    * gtk3/toolbar/toolbar-applet-gnome3.c
      - (uim_applet_new): Translate menus.

2011-02-13 Muneyuki Noguchi <nogu.dev@gmail.com>

    * gtk3/toolbar/Makefile.am
      - Add support for translation.
    * gtk3/toolbar/UimApplet.panel-applet.in
      - Rename to UimApplet.panel-applet.in.in.
    * gtk3/toolbar/UimApplet.panel-applet.in.in
      - Rename from UimApplet.panel-applet.in.

2011-02-13 Muneyuki Noguchi <nogu.dev@gmail.com>

    * gtk3/toolbar/Makefile.am
      - Add uim-toolbar-gtk3-systray.
    * helper/eggtrayicon.c
      - Don't include gdkconfig.h in GTK+3.
      - (egg_tray_icon_class_init): Don't set expose_event in GTK+3.
      - (egg_tray_icon_clear_manager_window):
        Replace gdk_window_lookup_for_display()
        with gdk_x11_window_lookup_for_display()
      - (egg_tray_icon_expose)
        * Don't use expose_event in GTK+3.
        * Call gtk_render_focus() instead of gtk_paint_focus() in GTK+3.
      - (egg_tray_icon_get_visual_property):
        Use gdk_visual_get_{red,blue,green}_pixel_details()
        and gdk_visual_get_depth()
      - (egg_tray_icon_set_colormap): Comment out this function in GTK+3.
      - (egg_tray_icon_realize): Replace gdk_window_set_back_pixmap()
        with gdk_window_set_background_pattern().
    * helper/toolbar-systray-gtk.c
      - (main): Don't call gtk_set_locale().

2011-02-13 Muneyuki Noguchi <nogu.dev@gmail.com>

    * gtk3/toolbar/Makefile.am
      - Add two files for gnome-panel.
    * gtk3/toolbar/UimApplet.panel-applet.in
      - New file.
    * gtk3/toolbar/org.gnome.panel.applet.UimAppletFactory.service.in
      - New file.

2011-02-13 Muneyuki Noguchi <nogu.dev@gmail.com>

    * configure.ac
      - Add "--enable-gnome3-applet".
    * gtk3/toolbar/Makefile.am
      - Add GNOME applet without bonobo.
    * gtk3/toolbar/toolbar-applet-gnome3.c
      - New file.

2011-02-13 Muneyuki Noguchi <nogu.dev@gmail.com>

    * configure.ac
      - Take GTK+3 into account when disabling dict.

2011-02-12 Muneyuki Noguchi <nogu.dev@gmail.com>

    * gtk3/immodule/Makefile.am
      - (moduledir): Replace GTK_BINARY_VERSION with GTK3_BINARY_VERSION.

2011-02-12 Muneyuki Noguchi <nogu.dev@gmail.com>

    * helper/candwin-gtk.c
      - (uim_cand_win_gtk_layout_sub_window): Cosmetic changes.

2011-02-12 Muneyuki Noguchi <nogu.dev@gmail.com>

    * configure.ac
      - (AC_CONFIG_FILES): Add gtk3/immodule/Makefile.
    * gtk/gtk-im-uim.c
      - (layout_candwin): Follow change of  gdk_window_get_geometry() in GTK+3.
      - (handle_key_on_toplevel):
        Comment out codes where need_im_reset is set directly in GTK+3.
    * gtk/uim-cand-win-gtk.c
      - (uim_cand_win_gtk_create_sub_window):
        Follow change of  gdk_window_get_geometry() in GTK+3.
    * gtk3/Makefile.am
      - (SUBDIRS): Add immodule.
    * gtk3/immodule/Makefile.am
      - New file.

2011-02-12 Muneyuki Noguchi <nogu.dev@gmail.com>

    * configure.ac
      - (AC_CONFIG_FILES): Add gtk3/test/Makefilea.
    * gtk/test/entry.c
      - (entry_toggle_editable):
        * Replace deprecated function
          gtk_entry_set_editable() with gtk_editable_set_editable().
        * Use gtk_toggle_button_get_active().
      - (entry_toggle_visibility): Use gtk_toggle_button_get_active().
      - (main)
        * Don't call gtk_set_locale().
        * Replace deprecated function gtk_widget_set_usize()
          with gtk_widget_set_size_request().
        * Replace deprecated macro gtk_signal_connect()
          with g_signal_connect().
        * Replace gtk_entry_new_with_max_length()
          with gtk_entry_new() and gtk_entry_set_max_length().
        * Replace deprecated function gtk_entry_append_text()
          with gtk_editable_insert_text().
        * Replace gtk_entry_select_region() with gtk_editable_select_region().
        * Replace deprecated macro GTK_WIDGET_SET_FLAGS()
          with gtk_widget_set_can_default().
    * gtk3/Makefile.am
      - (SUBDIRS): Add test.
    * gtk3/test/Makefile.am
      - New file.

2011-02-12 Muneyuki Noguchi <nogu.dev@gmail.com>

    * configure.ac
      - (AC_CONFIG_FILES): Add gtk3/candwin/Makefile gtk3/dict/Makefile.
    * gtk/caret-state-indicator.c
      - (caret_state_indicator_paint_window): Replace gtk_paint_flat_box()
        with gtk_render_frame() in GTK+3.
    * gtk3/Makefile.am
      - (SUBDIRS): Add candwin dict.
    * gtk3/candwin/Makefile.am
      - New file.
    * gtk3/dict/Makefile.am
      - New file.
    * helper/candwin-gtk.c
      - (str_parse): Replace gtk_widget_hide() with gtk_widget_hide_all().
      - (main): Don't call gtk_set_locale().
      - (uim_cand_win_gtk_layout_sub_window):
        Follow change of gdk_window_get_geometry() in GTK+3.
    * helper/candwin-tbl-gtk.c
      - (str_parse): Replace gtk_widget_hide() with gtk_widget_hide_all().
      - (main): Don't call gtk_set_locale().
    * helper/dict-main-gtk.c
      - (main): Don't call gtk_set_locale().
    * helper/dict-word-list-view-gtk.c
      - (word_list_view_class_init, word_list_view_destroy):
        Replace GtkObject with GtkWidget in GTK+3.
      - (word_list_view_init): Replace deprecated macro GTK_WIDGET_SET_FLAGS
        with gtk_widget_set_can_focus() and gtk_widget_set_receives_default().
    * helper/dict-word-list-view-gtk.h
      - Don't include gtk/gtkscrolledwindow.h, gtk/gtktreemodel.h
        or gtk/gtktreeview.h directly.
    * helper/dict-word-list-win-gtk.c
      - (word_list_window_init): Use gtk_bin_get_child().
      - (activate_url, help_about_action_cb): Don't call unneeded
        gtk_about_dialog_set_url_hook().
    * helper/dict-word-win-gtk.c
      - (word_window_init): Use gtk_dialog_get_action_area().
      - (word_window_necessary_create):
        * Replace gtk_combo_box_new_text() with gtk_combo_box_text_new().
        * Replace gtk_combo_box_append_text()
          with gtk_combo_box_text_append_text().

2011-02-12 Muneyuki Noguchi <nogu.dev@gmail.com>

    * configure.ac
      - (AC_CONFIG_FILES): Add gtk3/pref/Makefile.
    * gtk/key-util-gtk.c
      - include gdk/gdkkeysyms-compat.h instead of gdk/gdkkeysyms.h in GTK+3.
    * gtk3/Makefile.am
      - (SUBDIRS): Add pref.
    * gtk3/pref/Makefile.am
      - New file.
    * helper/pref-gtk-custom-widgets.c
      - (sync_value_choice): Use gtk_combo_box_text_append_text() instead of
        gtk_combo_box_append_text().
      - (add_custom_type_choice): Use gtk_combo_box_text_new() instead of
        gtk_combo_box_new_text().
    * helper/pref-gtk.c
      - (main)
        * Don't call gtk_set_locale()
          because gtk_init() automatically does what gtk_set_locale() does.
        * Replace GtkFunction with GSourceFunc in g_idle_add().

2011-02-12 Muneyuki Noguchi <nogu.dev@gmail.com>

    * Makefile.am
      - (SUBDIRS): Add gtk3.
    * configure.ac
      - Add "--with-gtk3".
    * gtk3/Makefile.am
    * gtk3/pad/Makefile.am
    * gtk3/switcher/Makefile.am
    * gtk3/toolbar/Makefile.am
      - New file.
    *  helper/im-switcher-gtk.c
      - (main): Don't call gtk_set_locale()
        because gtk_init() automatically does what gtk_set_locale() does.
    *  helper/input-pad-ja.c
      - (main): Ditto.
    * helper/toolbar-standalone-gtk.c
      - (main): Ditto.
      - (helper_win_set_position, motion_notify_event_cb,
         handle_expose_event_cb):
        Use gdk_window_get_width() and gdk_window_get_height()
        instead of gdk_drawable_get_size() in GTK+3.
    * helper/toolbar-common-gtk.c
      - (calc_menu_position): Use gdk_window_get_height()
        instead of gdk_drawable_get_size() in GTK+3.

2011-02-09 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/toolbar/standalone-qt4.cpp
      - (UimStandaloneToolbar::UimStandaloneToolbar):
        Enable users to set position of toolbar with "-geometry" option
        (e.g. "uim-toolbar-qt4 -geometry +10+10") as uim-toolbar-qt.

2011-02-05 Muneyuki Noguchi <nogu.dev@gmail.com>

    * helper/toolbar-applet-gnome.c
      - (display_about_dialog): Set icon to about dialog.

2011-02-05 Muneyuki Noguchi <nogu.dev@gmail.com>

    * helper/toolbar-applet-gnome.c
      - Remove commented-out code.

2011-02-04 Muneyuki Noguchi <nogu.dev@gmail.com>

    * helper/toolbar-applet-gnome.c
      - (display_about_dialog): Remove unused variable.

2011-02-04 Muneyuki Noguchi <nogu.dev@gmail.com>

    * configure.ac
      - Don't check for the presence of libgnomeui-2.0
        because uim-toolbar-applet no longer depends on it.

2011-02-04 Muneyuki Noguchi <nogu.dev@gmail.com>

    * helper/toolbar-applet-gnome.c
      - (display_about_dialog): Replace deprecated function gnome_about_new()
        with gtk_show_about_dialog().

2011-02-04 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/toolbar/common-quimhelpertoolbar.cpp
      - Avoid global static objects.

2011-02-01 Etsushi Kato <ek.kato@gmail.com>

    * qt4/common.pro.in: Make link with -luim-x-util conditional.
    * qt4/immodule/quiminputcontextplugin.pro.in : Make compiling
      quiminputcontext_compose.o conditional.

2011-01-29 KIHARA Hideto <deton@m1.interq.or.jp>

    * Add postfix mazegaki conversion.
    * scm/tutcode.scm
      - (tutcode-context-rec-spec): Add postfix-yomi-len.
      - (tutcode-commit-with-auto-help):
        Add call of delete-text for postfix mazegaki commit.
      - (tutcode-begin-conversion):
        Change to return whether candidate was found for relimit yomi.
      - (tutcode-begin-conversion-with-relimit-right): New.
      - (tutcode-stroke-help-update-alist-with-rule):
        Add label for postfix mazegaki start sequences.
      - (tutcode-commit-editor-context):
        Add call of delete-text for postfix mazegaki commit.
      - (tutcode-proc-state-on):
        Add reset of postfix-yomi-len for prefix conversion.
        Add call of tutcode-begin-postfix-mazegaki-conversion
        for postfix mazegaki start sequences.
      - (tutcode-begin-postfix-mazegaki-conversion): New.
      - (tutcode-back-to-yomi-state):
        Change to set state proc-on when postfix mazegaki conversion.
      - (tutcode-proc-state-converting):
        Add relimit of yomi and reconversion while postfix mazegaki conversion.
        Add call of delete-text for postfix mazegaki commit.
      - (tutcode-key-press-handler):
        Add update of preedit when recursive learning is canceled
        from postfix mazegaki.
      - (tutcode-custom-set-mazegaki/bushu-start-sequence!):
        Add rules for postfix mazegaki start sequence.
    * scm/tutcode-custom.scm
      - (tutcode-mazegaki-yomi-max): New custom.
    * scm/tutcode-key-custom.scm
      - (tutcode-postfix-mazegaki-start-sequence,
         tutcode-postfix-mazegaki-1-start-sequence,
         tutcode-postfix-mazegaki-2-start-sequence,
         tutcode-postfix-mazegaki-3-start-sequence,
         tutcode-postfix-mazegaki-4-start-sequence,
         tutcode-postfix-mazegaki-5-start-sequence,
         tutcode-postfix-mazegaki-6-start-sequence,
         tutcode-postfix-mazegaki-7-start-sequence,
         tutcode-postfix-mazegaki-8-start-sequence,
         tutcode-postfix-mazegaki-9-start-sequence,
         tutcode-postfix-mazegaki-relimit-left-key,
         tutcode-postfix-mazegaki-relimit-right-key): New custom key.

2011-01-22 IWATA Ray <iwata@quasiquote.org>

    * scm/predict-google-suggest.scm (predict-google-suggest):
      - Bind as variable.

2011-01-22 IWATA Ray <iwata@quasiquote.org>

    scm/predict-google-suggest.scm:
      - Change copyright.

2011-01-22 IWATA Ray <iwata@quasiquote.org>

    * scm/predict-google-suggest.scm: New file.
    * scm/generic-predict.scm (try-load, predict-make-meta-search):
      - Add google suggest.
    * scm/predict-custom.scm (predict-google-suggest)
      (predict-custom-google-suggest-candidates-max)
      (predict-custom-google-suggest-language)
      (predict-custom-google-suggest-use-ssl):
      - Ditto.
    * scm/Makefile.am (SCM_FILES):
      - Ditto.

2011-01-22 KIHARA Hideto <deton@m1.interq.or.jp>

    * uim/skk.c
      - (is_okuri): Fix SEGV on illegal line " //".

2011-01-22 KIHARA Hideto <deton@m1.interq.or.jp>

    * scm/tutcode.scm
      - (tutcode-begin-interactive-bushu-conversion):
        Fix division by zero error on remainder in tutcode-get-candidate-handler
        when interactive bushu conversion has no candidate.

2011-01-16 KIHARA Hideto <deton@m1.interq.or.jp>

    * scm/tutcode.scm
      - (tutcode-begin-postfix-bushu-conversion): Fix to work in tutcode-editor.
      - (tutcode-postfix-acquire-text, tutcode-postfix-delete-text): New.

2011-01-14 KIHARA Hideto <deton@m1.interq.or.jp>

    * scm/tutcode.scm
      - (tutcode-proc-state-on): Add postfix bushu conversion.
      - (tutcode-begin-postfix-bushu-conversion): New.

2011-01-14 KIHARA Hideto <deton@m1.interq.or.jp>

    * uim/uim-func.c
      - (im_acquire_text): Fix error on reverse in ustr-new
        by passing list instead of string (regressed at r4396).

2011-01-14 KIHARA Hideto <deton@m1.interq.or.jp>

    * scm/tutcode.scm
    * scm/tutcode-bushu.scm
      - Update comment.

2011-01-09 KIHARA Hideto <deton@m1.interq.or.jp>

    * po/ja.po
      - Add missed "[TUT-Code]" in translated message.

2011-01-07 Etsushi Kato <ek.kato@gmail.com>

    * RELNOTE : Fix typo.

2011-01-07 Etsushi Kato <ek.kato@gmail.com>

    * scm/im-switcher.scm (imsw-iconic-label-alist) : Add chewing and
      modify a label for canna.

2011-01-07 Etsushi Kato <ek.kato@gmail.com>

    * Update copyright by svn ls -R | egrep -v '/$' | xargs perl -i -pe 's/\b(20\d\d)([,-\s]+20\d\d)*\s+uim\b/\1-2011 uim/'

2011-01-07 Etsushi Kato <ek.kato@gmail.com>

    * test/test-db.scm : Rename to broken-test-db.scm.
    * test/broken-test-db.scm : Renamed from test-db.scm.
    * test/test-lazy-load.scm : Follow the removal of hangul and tcode
      modules.
    * test/test-plugin.scm : Ditto.
    * test/test-im.scm : Ditto.

2011-01-05 Etsushi Kato <ek.kato@gmail.com>

    * scm/plugin.scm
      - (try-require-with-force-reload) : Move to lazy-load.scm.
      - (require-module) : Revert r6898.
      - (module-load) : Ditto.
    * scm/lazy-load.scm
      - (try-require-with-force-reload) : Moved from plugin.scm.
      - (require-module-with-force-reload) : New. Copy require-module
        from plugin.scm, and use try-require-with-force-reload and
        module-load-with-force-reload instead.
      - (module-load-with-force-reload) : New. Copy module-load from
        plugin.scm, and use try-require-with-force-reload instead of
        try-require.

2011-01-05 Etsushi Kato <ek.kato@gmail.com>

    * NEWS: Update.

2011-01-05 Etsushi Kato <ek.kato@gmail.com>

    * scm/plugin.scm
      - (try-require-with-force-reload) : New.
      - (require-module) : Reload scm file even the file is already
        loaded.  This prevents using stub init-handler incorrectly
        when switch to an IM of the re-enabled module by uim-pref.
      - (module_load) : Ditto.

2011-01-05 Etsushi Kato <ek.kato@gmail.com>

    * scm/m17nlib.scm (m17nlib-update-candidate) : Close candwin when
      candlist is null.  Use meaningful variable name.

2011-01-04 KIHARA Hideto <deton@m1.interq.or.jp>

    * scm/tutcode-bushu.scm
      - (tutcode-bushu-weak-compose-set):
        Fix bug that some bushu conversion does not work (ex. ?\027$B%&6x?\027(B -> ?\027$B6w?\027(B).
        Change to do nothing for only one char (like tc-2.3.1-22.5).

2011-01-03 Etsushi Kato <ek.kato@gmail.com>

    * uim/curl.c (uim_curl_url_unescape_internal) : Bug fix.

2011-01-03 Etsushi Kato <ek.kato@gmail.com>

    * Update.

2011-01-03 Etsushi Kato <ek.kato@gmail.com>

    * RELNOTE: Update.

2011-01-03 Muneyuki Noguchi <nogu.dev@gmail.com>

    * m4/xft.m4
      - (AC_ARG_WITH): Fix typo.

2011-01-03 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/common.pro.in
      - Specify QMAKE_LINK for cross-compiling.

2011-01-03 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/candwin/uim-candwin-qt4.pro.in
    * qt4/pref/uim-pref-qt4.pro.in
    * qt4/switcher/uim-im-switcher-qt4.pro.in
    * qt4/toolbar/uim-toolbar-qt4.pro.in
      - Add comment for INCLUDEPATH.

2011-01-03 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/edittest/edittest.pro
      - Remove meaningless header.

2011-01-03 Muneyuki Noguchi <nogu.dev@gmail.com>

    * configure.ac
      - (AC_CONFIG_FILES): Add qt4/common.pro.
    * qt4/Makefile.am
      - (EXTRA_DIST): Add common.pro.in.
    * qt4/common.pro.in
      - New file.
    * qt4/candwin/uim-candwin-qt4.pro.in
    * qt4/chardict/uim-chardict-qt4.pro.in
    * qt4/immodule/quiminputcontextplugin.pro.in
    * qt4/pref/uim-pref-qt4.pro.in
    * qt4/switcher/uim-im-switcher-qt4.pro.in
    * qt4/toolbar/uim-toolbar-qt4.pro.in
      - Include qt4/common.pro.in.

2011-01-01 Etsushi Kato <ek.kato@gmail.com>

    * gtk/compose.c (parse_compose_line) : Modified to set "" when
      conversion failed.

2011-01-01 Muneyuki Noguchi <nogu.dev@gmail.com>

    * gtk/compose.c
      - (parse_compose_line): Check return value of g_locale_to_utf8().
         If a compose file contains a character which isn't in the current
         locale, g_locale_to_utf8() returns NULL. Note that strdup(NULL)
         segfaults (Debian bug #599837).

2010-12-30 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/candidatewindow.cpp
      - (CandidateWindow::updateView): Clear annotation list.

2010-12-30 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/candidatewindow.cpp
      - (CandidateWindow::updateView): Replace
        QTableWidget::clearSelection() with QTableWidget::clearContents().
        QTableWidget::clearContents() also removes all selections.

2010-12-30 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/candidatewindow.cpp
      - (CandidateWindow::updateView): Clear selected item
        before new items are set. This commit makes sure that all the items are
        deselected when an input prediction window is shown.

2010-12-28 KIHARA Hideto <deton@m1.interq.or.jp>

    * scm/tutcode-kigou-rule.scm
      - (tutcode-kigou-rule): Add tutcode-interactive-bushu-start,
        tutcode-postfix-bushu-start and tutcode-auto-help-redisplay.

2010-12-28 KIHARA Hideto <deton@m1.interq.or.jp>

    * scm/tutcode-bushudic.scm
      - Fix typo in comment.

2010-12-28 Etsushi Kato <ek.kato@gmail.com>

    * make-dist.sh : Use libgcroots-0.2.3.

2010-12-28 Etsushi Kato <ek.kato@gmail.com>

    * NEWS : Update.

2010-12-28 Etsushi Kato <ek.kato@gmail.com>

    * NEWS : Update.

2010-12-28 Etsushi Kato <ek.kato@gmail.com>

    * NEWS : Update.

2010-12-28 Etsushi Kato <ek.kato@gmail.com>

    * uim/skk.c (okuri_in_bracket) : Plug leak.

2010-12-28 Etsushi Kato <ek.kato@gmail.com>

    * qt4/toolbar/common-quimhelpertoolbar.cpp
      - Revert change in 6833.  Using _() is required so that the
        string is recognized by gettext.
    * qt4/qtgettext.h
      - Add macro _() for DISABLE_NLS to use QString rather than const
        char *.

2010-12-27 KIHARA Hideto <deton@m1.interq.or.jp>

    * scm/tutcode-bushu.scm
      - Update comments.

2010-12-27 KIHARA Hideto <deton@m1.interq.or.jp>

    * po/ko.po
      - Remove fuzzy.
    * po/ja.po
      - Add translation about tutcode.

2010-12-27 KIHARA Hideto <deton@m1.interq.or.jp>

    * po/fr.po
    * po/ko.po
    * po/ja.po
      - make update-po

2010-12-27 KIHARA Hideto <deton@m1.interq.or.jp>

    * scm/tutcode.scm
      - (tutcode-proc-state-yomi):
        Add feature to commit as katakana in yomi of mazegaki.
    * scm/tutcode-key-custom.scm
      - (tutcode-katakana-commit-key): New custom.

2010-12-27 KIHARA Hideto <deton@m1.interq.or.jp>

    * Add postfix bushu conversion in yomi of mazegaki.
    * NEWS
      - Add news.
    * scm/tutcode-key-custom.scm
      - (tutcode-postfix-bushu-start-sequence): New custom.
    * scm/tutcode.scm
      - (tutcode-stroke-help-update-alist-with-rule):
        Add mark for postfix bushu conversion.
      - (tutcode-proc-state-on):
        Rewrite to remove dependency on addition of new sequence.
      - (tutcode-proc-state-yomi):
        Change to use head variable.
        Add postfix bushu conversion.
      - (tutcode-proc-state-bushu, tutcode-proc-state-interactive-bushu):
        Rewrite to remove dependency on addition of new sequence.
      - (tutcode-custom-set-mazegaki/bushu-start-sequence!):
        Simplify.
        Add tutcode-postfix-bushu-start-sequence.

2010-12-27 KIHARA Hideto <deton@m1.interq.or.jp>

    * Add interactive bushu conversion for tutcode.
    * NEWS
      - Add news.
    * scm/tutcode-bushu.scm
      - New file.
    * scm/Makefile.am
      - (SCM_FILES): Add tutcode-bushu.scm.
    * scm/tutcode-custom.scm
      - (tutcode-bushu): New custom group.
      - (tutcode-use-interactive-bushu-conversion?): New custom.
      - (tutcode-bushu-index2-filename,
         tutcode-bushu-expand-filename): New custom and activity hook.
    * scm/tutcode-key-custom.scm
      - (tutcode-interactive-bushu-start-sequence): New custom.
    * scm/tutcode.scm
      - (tutcode-context-rec-spec):
        Change default value of prediction index to 0.
      - (tutcode-context-new):
        Add initialization for interactive bushu conversion.
      - (tutcode-commit-by-label-key-for-prediction):
        Change for interactive bushu conversion.
      - (tutcode-do-commit-prediction-for-interactive-bushu): New function.
      - (tutcode-stroke-help-update-alist-with-rule):
        Add mark for interactive bushu conversion.
      - (tutcode-do-update-preedit):
        Add preedit for interactive bushu conversion.
      - (tutcode-proc-state-on):
        Change to enter interactive bushu conversion.
      - (tutcode-proc-state-yomi, tutcode-proc-state-bushu):
        Change to ignore start sequence of interactive bushu conversion.
      - (tutcode-proc-state-interactive-bushu,
        tutcode-begin-interactive-bushu-conversion): New function.
      - (tutcode-change-prediction-index):
        New function extracted from tutcode-change-prediction-page.
      - (tutcode-change-prediction-page):
        Change to use tutcode-change-prediction-index.
      - (tutcode-state-has-preedit?): Add tutcode-state-interactive-bushu.
      - (tutcode-key-press-handler, tutcode-get-candidate-handler,
         tutcode-set-candidate-index-handler):
        Change for interactive bushu conversion.
      - (tutcode-custom-set-mazegaki/bushu-start-sequence!):
        Add interactive-bushu-start-sequence.

2010-12-27 KIHARA Hideto <deton@m1.interq.or.jp>

    * Add two stroke kigou mode like "KI" for tutcode.
    * NEWS
      - Add news.
    * scm/tutcode-kigou-rule.scm
      - New file.
    * scm/Makefile.am
      - (SCM_FILES): Add tutcode-kigou-rule.scm.
    * scm/tutcode-key-custom.scm
      - (tutcode-kigou2-toggle-key): New custom.
    * scm/tutcode-custom.scm
      - (tutcode-use-kigou2-mode?): New custom.
    * scm/tutcode.scm
      - (tutcode-input-mode-actions): Add action_tutcode_kigou2.
      - (tutcode-kigou-rule, tutcode-reverse-kigou-rule-alist,
         tutcode-use-stroke-help-window-another?): New variable.
      - (action_tutcode_hiragana,
         action_tutcode_katakana): Change to support kigou2-mode.
      - (action_tutcode_kigou2): New action.
      - (tutcode-context-rec-spec): Add rk-context-another for kigou2-mode.
      - (tutcode-guide-set-candidates, tutcode-guide-set-candidates-for-bushu):
        Follow the parameter change of tutcode-reverse-find-seq.
      - (tutcode-kigou2-mode?, tutcode-toggle-kigou2-mode): New function.
      - (tutcode-context-new): Add initialization for kigou2-mode.
      - (tutcode-check-stroke-help-window-begin):
        Change to use rk-context-rule instead of tutcode-rule.
        Change to return tutcode-kigou-rule-stroke-help-top-page-alist
        for kigou2-mode.
      - (tutcode-toggle-stroke-help): Remove needless begin.
      - (tutcode-auto-help-update-stroke-alist-with-kanji,
         tutcode-auto-help-update-stroke-alist-normal-with-kanji):
        Follow the parameter change of tutcode-reverse-find-seq.
      - (tutcode-proc-state-on):
        Add check of tutcode-kigou2-toggle-key?.
        Change to skip check of tutcode-kana-toggle-key? in kigou2-mode
        because rule of kigou2-mode may contain tutcode-kana-toggle-key.
      - (tutcode-proc-state-kigou, tutcode-proc-state-yomi,
         tutcode-proc-state-bushu): Add check of tutcode-kigou2-toggle-key?.
      - (tutcode-auto-help-bushu-decompose, tutcode-auto-help-get-stroke,
         tutcode-auto-help-bushu-decompose-by-subtraction,
         tutcode-auto-help-get-stroke-list-by-subtraction,
         tutcode-auto-help-get-stroke-list-with-right-part,
         tutcode-auto-help-get-stroke-list-with-left-part):
        Add parameter rule to follow the parameter change
        of tutcode-reverse-find-seq.
      - (tutcode-reverse-find-seq):
        Add parameter rule for kigou2-mode.
        Change for tutcode-kigou-rule of kigou2-mode.
      - (tutcode-rule-translate):
        New function extracted from old tutcode-rule-qwerty-to-dvorak.
        Change to use original key if key is not found in alist.
      - (tutcode-rule-qwerty-to-dvorak): Change to use tutcode-rule-translate.
      - (tutcode-rule-qwerty-jis-to-qwerty-us): New function.
      - (tutcode-rule-qwerty-jis-to-qwerty-us-alist):
        New variable to translate tutcode-kigou-rule of kigou2-mode.
      - (tutcode-rule-qwerty-to-dvorak-alist):
        Add symbols to translate tutcode-kigou-rule of kigou2-mode.
        Remove same key from alist for performance.

2010-12-27 KIHARA Hideto <deton@m1.interq.or.jp>

    * scm/tutcode.scm
      - Cosmetic change: move context related functions
        just after tutcode-context-rec-spec.

2010-12-27 Etsushi Kato <ek.kato@gmail.com>

    * uim/skk.c
      - (okuri_in_bracket) : Return NULL if the bracket is not used
        for skk-henkan-strict-okuri-precedence.
      - (compose_line_parts) : Add error check for handling the
        bracket.

2010-12-23 KIHARA Hideto <deton@m1.interq.or.jp>

    * uim/look.c (uim_look_look_internal):
      - Increase buf size for long SKK-JISYO.L line.

2010-12-20 IWATA Ray <iwata@quasiquote.org>

    * scm/input-parse.scm (string-concatenate-reverse):
      - Add string-concatenate-reverse (SRFI-13) from
        http://okmij.org/ftp/Scheme/lib/srfi-13-local.scm

2010-12-18 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/toolbar/common-quimhelpertoolbar.cpp
      - (QUimHelperToolbar::QUimHelperToolbar): Simplify.
        Don't covert to QImage.
    * qt4/toolbar/common-uimstateindicator.cpp
      - (UimStateIndicator::UimStateIndicator,
         UimStateIndicator::propListUpdate,
         QHelperPopupMenu::insertHelperItem):
        Ditto.

2010-12-18 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/toolbar/common-quimhelpertoolbar.cpp
      - (launchHelperApplication): Use mygettext() instead of _()
        to avoid compile error when NLS is disabled with `--disable-nls'.

2010-12-06 Etsushi Kato <ek.kato@gmail.com>

    * uim/uim-scm-sigscheme.c (uim_scm_make_char_internal) : Fix
      prototype.

2010-12-04 KIHARA Hideto <deton@m1.interq.or.jp>

    * scm/tutcode.scm
      - (tutcode-proc-state-yomi):
        Fix latin-conv to start conversion by space key
        even if rk-rule has sequence which starts with space(" ") like trycode.
        Fix latin-conv to be able to input kana-toggle-key(').

2010-11-30 KIHARA Hideto <deton@m1.interq.or.jp>

    * scm/tutcode.scm
      - Update comments.

2010-11-27 KIHARA Hideto <deton@m1.interq.or.jp>

    * po/ja.po
      - Add translation about tutcode.

2010-11-27 Etsushi Kato <ek.kato@gmail.com>

    * scm/Makefile.am (module_names) : Exclude tcode, trycode,
      and hangul ([uim-en 365]).

2010-11-27 Etsushi Kato <ek.kato@gmail.com>

    * po/fr.po
    * po/ko.po
    * po/ja.po
      - Remove fuzzy.

2010-11-27 Etsushi Kato <ek.kato@gmail.com>

    * po/fr.po
    * po/ko.po
    * po/ja.po
      - make update-po

2010-11-23 KIHARA Hideto <deton@m1.interq.or.jp>

    * Add input prediction in bushu conversion.
    * NEWS
      - Add news.
    * scm/tutcode-custom.scm
      - (tutcode-use-bushu-prediction?): New custom.
    * scm/tutcode.scm
      - (tutcode-context-rec-spec): Add variables for bushu prediction.
      - (tutcode-commit-by-label-key-for-prediction):
        Change parameter completion? to mode to support bushu prediction.
      - (tutcode-proc-state-on):
        Follow change of tutcode-commit-by-label-key-for-prediction.
      - (tutcode-proc-state-yomi): Ditto.
      - (tutcode-proc-state-bushu): Change for bushu prediction.
      - (tutcode-begin-bushu-conversion, tutcode-bushu-commit):
        Extract from tutcode-proc-state-bushu to use from
        tutcode-do-commit-prediction-for-bushu.
      - (tutcode-get-candidate-handler): Change for bushu prediction.
      - (tutcode-lib-set-bushu-prediction,
         tutcode-guide-set-candidates-for-bushu,
         tutcode-do-commit-prediction-for-bushu,
         tutcode-check-bushu-prediction,
         tutcode-bushu-prediction-show-page,
         tutcode-change-bushu-prediction-page,
         tutcode-bushu-predict): New function.

2010-11-19 KIHARA Hideto <deton@m1.interq.or.jp>

    * scm/tutcode.scm
      - (tutcode-proc-state-yomi): Remove duplicated {next,prev}-page-key check.

2010-11-18 KIHARA Hideto <deton@m1.interq.or.jp>

    * NEWS
      - Add news about tutcode.

2010-11-14 KIHARA Hideto <deton@m1.interq.or.jp>

    * Change usage of guide variable not to mix
      for completion/prediction and stroke help.
    * scm/tutcode.scm
      - (tutcode-context-rec-spec): Add guide-chars variable
        for guide on stroke-help (split from guide variable).
      - (tutcode-guide-set-candidates):
        Follow the change of tutcode-guide-update-alist.
      - (tutcode-guide-update-alist):
        Change content of argument.
        Change to use tutcode-auto-help-update-stroke-alist-with-key
        instead of tutcode-guide-update-alist-with-stroke.
      - (tutcode-guide-update-alist-with-stroke): Remove.
      - (tutcode-check-stroke-help-window-begin): Rewrite to use guide-chars.
      - (tutcode-stroke-help-guide-add-kanji): Rewrite to use guide-chars.
      - (tutcode-stroke-help-guide-update-alist,
         tutcode-stroke-help-guide-update-alist-with-rule): New function.
      - (tutcode-check-auto-help-window-begin): Change to use guide-chars.
      - (tutcode-auto-help-update-stroke-alist-with-kanji):
        Change to update guide-chars if tutcode-use-stroke-help-window? is #f
        to show guide when stroke help is enabled after some keys typed.
      - (tutcode-auto-help-update-stroke-alist-normal-with-kanji): Ditto.
      - (tutcode-get-candidate-handler):
        Follow the structure change of guide variable.

2010-11-14 KIHARA Hideto <deton@m1.interq.or.jp>

    * Change of kanji combination guide to check Yomi in prediction mode.
    * scm/tutcode.scm
      - (tutcode-lib-set-prediction-src-string):
        Change to return all yomi returned from predict search.
      - (tutcode-guide-set-candidates):
        Add argument all-yomi.
        Add check of all-yomi for guide in prediction mode.
      - (tutcode-check-completion):
        Follow the change of tutcode-guide-set-candidates.
      - (tutcode-check-prediction):
        Change to pass all-yomi returned from
        tutcode-lib-set-prediction-src-string to tutcode-guide-set-candidates.

2010-11-13 KIHARA Hideto <deton@m1.interq.or.jp>

    * Change to show virtual keyboard (stroke help window)
      when no key is typed or no other candidate window is displayed
      (completion/prediction or auto help has no candidate).
    * scm/tutcode.scm
      - (tutcode-stroke-help-top-page-alist,
         tutcode-stroke-help-top-page-katakana-alist): New variable.
      - (tutcode-check-stroke-help-window-begin):
        Move check of tutcode-use-stroke-help-window?
        to tutcode-key-press-handler.
        Change to use cache for top page of stroke help.
      - (tutcode-stroke-help-update-alist):
        New function extracted from tutcode-check-stroke-help-window-begin
        and rewrite using recursion.
      - (tutcode-stroke-help-update-alist-with-rule):
        New function extracted from tutcode-check-stroke-help-window-begin.
      - (tutcode-toggle-stroke-help):
        Remove call of tutcode-check-stroke-help-window-begin.
      - (tutcode-proc-state-on): Ditto.
      - (tutcode-proc-state-yomi): Ditto.
      - (tutcode-proc-state-bushu): Ditto.
      - (tutcode-key-press-handler):
        Add call of tutcode-check-stroke-help-window-begin.

2010-11-12 KIHARA Hideto <deton@m1.interq.or.jp>

    * scm/tcode.scm
      - (tcode-rule): Comment out unassigned sequences.
    * scm/trycode.scm
      - (trycode-rule): Ditto.

2010-11-12 KIHARA Hideto <deton@m1.interq.or.jp>

    * scm/tutcode.scm
      - (tutcode-hint-mark): New variable.
      - (tutcode-check-stroke-help-window-begin):
        Change to show hint kanji instead of white box for intermediate sequence.
      - (tutcode-rule-commit-sequences!):
        Change to append new sequences to last of tutcode-rule (instead of first)
        to avoid showing mazegaki-start-sequence as hint kanji.

2010-11-11 Etsushi Kato <ek.kato@gmail.com>

    * emacs/uim.el (uim-init-buffer) : Fix for emacs24 by Kan-Ru Chen
      (#31539).
      - Use make-local-hook only for XEmacs.
      - Explicitly put 'local for add-hook.

2010-11-10 KIHARA Hideto <deton@m1.interq.or.jp>

    * Add function to redisplay last auto-help window.
    * scm/tutcode.scm
      - Update comments.
      - (tutcode-context-rec-spec): Add auto-help variable.
      - (tutcode-check-stroke-help-window-begin): Add auto-help-redisplay label.
      - (tutcode-check-auto-help-window-begin):
        Change to use variable auto-help instead of stroke-help
        to hold auto-help contents.
      - (tutcode-auto-help-redisplay): New function.
      - (tutcode-proc-state-on):
        Add check of tutcode-auto-help-redisplay stroke.
      - (tutcode-proc-state-yomi): Ditto.
      - (tutcode-proc-state-bushu): Ditto.
      - (tutcode-get-candidate-handler):
        Split auto-help from stroke-help.
      - (tutcode-custom-set-mazegaki/bushu-start-sequence!):
        Add auto-help-redisplay-sequence.
    * scm/tutcode-key-custom.scm
      - (tutcode-auto-help-redisplay-sequence): New custom.

2010-11-09 KIHARA Hideto <deton@m1.interq.or.jp>

    * scm/tutcode.scm
      - (tutcode-check-stroke-help-window-begin):
        Change to show guide mark on stroke-help after auto-help.
      - (tutcode-guide-add-kanji): New function.
      - (tutcode-check-auto-help-window-begin):
        Add clear of guide before calling tutcode-guide-add-kanji.
      - (tutcode-auto-help-update-stroke-alist):
        Add pc argument to call tutcode-guide-add-kanji.
      - (tutcode-auto-help-update-stroke-alist-normal): Ditto.
      - (tutcode-auto-help-update-stroke-alist-with-kanji):
        Add call of tutcode-guide-add-kanji for auto-help kanji.
      - (tutcode-auto-help-update-stroke-alist-normal-with-kanji): Ditto.

2010-11-09 KIHARA Hideto <deton@m1.interq.or.jp>

    * scm/tutcode.scm
      - (tutcode-auto-help-update-stroke-alist-normal-with-kanji
        Change to show kanji on auto-help for with-real-keys setting.

2010-11-08 Etsushi Kato <ek.kato@gmail.com>

    * uim/bsdlook.c
      - (uim_look_finish) : Cast return value of mmap to uintptr_t.
      - (uim_look_open_dict) : Set front0 and front zero upon
        MAP_FAILED.

2010-11-08 KIHARA Hideto <deton@m1.interq.or.jp>

    * scm/tutcode.scm
      - (tutcode-auto-help-update-stroke-alist-with-kanji):
        Change to show kanji on auto-help.

2010-11-08 Etsushi Kato <ek.kato@gmail.com>

    * uim/bsdlook.c (uim_look_finish) : Suppress compiler warning.

2010-11-08 Etsushi Kato <ek.kato@gmail.com>

    * Fix libuim-skk.so to support multiple dic_info instances.
    
    * uim/skk.c
      - (skk_dic) : Removed.
      - (merge_base_candidates_to_array)
      - (reorder_candidate)
      - (push_purged_word)
      - (remove_canddate_from_array)
      - (remove_purged_words_from_dst_cand_array)
      - (merge_purged_cands)
      - (merge_purged_cand_to_dst_array)
      - (merge_real_candidate_array)
      - (purge_candidate)
      - (learn_word_to_cand_array)
      - (compare_and_merge_skk_line)
      - (cache_line_diffs)
      - (update_personal_dictionary_cache_with_file)
        - Take dic_info * as a first argument.
      - (skk_get_entry)
      - (skk_get_nth_candidate)
      - (skk_get_nr_candidates)
      - (find_cand_array_lisp)
      - (find_comp_array_lisp)
      - (skk_get_completion)
      - (skk_get_nth_completion)
      - (skk_get_nr_completions)
      - (skk_get_dcomp_word)
      - (skk_commit_candidate)
      - (skk_purge_candidate)
      - (skk_learn_word)
      - (skk_read_personal_dictionary)
      - (skk_save_personal_dictionary)
        - Take uim_lisp skk_dic_ as a first argument.
      - (skk_dic_open) : Change to return pointer object.
      - (skk_free_dic) : New.
      - (free_skk_dic) : New.
      - (skk_look_close) : New.
      - (uim_plugin_instance_init)
        - Change number of arguments of
          skk-lib-read-personal-dictionary,
          skk-lib-save-personal-dictionary,
          skk-lib-get-entry, skk-lib-get-nr-candidates,
          skk-lib-get-completion, skk-lib-get-nth-completion,
          skk-lib-get-nr-completions, skk-lib-get-dcomp-word.
        - Add skk-lib-look-close.
      - (uim_plugin_instance_quit) : Do nothing here.
    * scm/tutcode.scm
      - (tutcode-dic-init) : Removed.
      - (tutcode-dic) : New.
      - (tutcode-context-list) : New.
      - (tutcode-context-new) : Set tutcode-dic here.
      - (tutcode-read-personal-dictionary) : Follow the change in
        skk.c.
      - (tutcode-save-personal-dictionary) : Ditto.
      - (tutcode-get-nth-candidate) : Ditto.
      - (tutcode-prepare-commit-string) : Ditto.
      - (tutcode-purge-candidate) : Ditto.
      - (tutcode-begin-conversion) : Ditto.
      - (tutcode-init-handler) : Update context-list.
      - (tutcode-release-handler) : Update context-list.  Free
        mazegaki dictionary when all context is released.
    * scm/tutcode-editor.scm
      - (tutcode-editor-commit-raw) : Follow the change in skk.c.
    * scm/skk-editor.scm
      - (skk-editor-commit-raw) : Ditto.
    * scm/skk.scm
      - (skk-dic-init) : Removed.
      - (skk-dic) : New.
      - (skk-context-list) : New.
      - (skk-read-personal-dictionary) : Follow the change in skk.c.
      - (skk-save-personal-dictionary) : Ditto.
      - (skk-context-new) : Set skk-dic here.
      - (skk-get-nth-candidate) : Follow the change in skk.c.
      - (skk-get-nth-completion) : Ditto.
      - (skk-prepare-commit-string) : Ditto.
      - (skk-purge-candidate) : Ditto.
      - (skk-append-string) : Ditto.
      - (skk-begin-conversion) : Ditto.
      - (skk-begin-completion) : Ditto.
      - (skk-commit-with-conv-completion) : Ditto.
      - (skk-proc-state-kanji) : Ditto.
      - (skk-check-candidate-window-begin) : Ditto.
      - (skk-change-completion-index) : Ditto.
      - (skk-proc-state-completion) : Ditto.
      - (skk-init-hanler) : Update skk-context-list.
      - (skk-release-handler) : Update skk-context-list.  Free skk-dic
        when all context is released.

2010-11-08 Etsushi Kato <ek.kato@gmail.com>

    * fep/udsock.c (usersockname)
    * fep/uim-fep.c (main)
      - Don't exit the program when the config directory cannot be
        created.

2010-11-08 Etsushi Kato <ek.kato@gmail.com>

    * COPYING : Update supplementary notes.

2010-11-08 Etsushi Kato <ek.kato@gmail.com>

    * doc/DOT-UIM : Update.

2010-11-08 Etsushi Kato <ek.kato@gmail.com>

    * emacs/uim-helper.el (uim-helper-process-sentinel) : Use
      "uim-helper.el" string for the error message.

2010-11-06 KIHARA Hideto <deton@m1.interq.or.jp>

    * scm/tutcode.scm: Update setting comment for T-Code table.

2010-11-06 KIHARA Hideto <deton@m1.interq.or.jp>

    * scm/predict-look.scm (predict-look search)
      - Change dictionary order option of look to #f
        to search non-ascii Kanji string.

2010-11-06 KIHARA Hideto <deton@m1.interq.or.jp>

    * uim/bsdlook.c (uim_look):
      - Fix bug which ignores 0xfe (used in EUC-JP Kanji) in search string.

2010-11-06 KIHARA Hideto <deton@m1.interq.or.jp>

    * Add completion, input prediction for mazegaki conversion
      and kanji combination guide for tutcode.
    * scm/tutcode.scm
      - (generic-predict.scm): New require.
      - (tutcode-heading-label-char-list-for-prediction-qwerty,
         tutcode-heading-label-char-list-for-prediction-dvorak,
         tutcode-heading-label-char-list-for-prediction,
         tutcode-guide-mark,
         tutcode-guide-end-mark): New variable.
      - (tutcode-context-rec-spec): Add some variables.
      - (tutcode-context-new): Add initialization for prediction and
        tutcode-heading-label-char-list-for-prediction.
      - (tutcode-commit-raw, tutcode-commit):
        Add call of tutcode-append-commit-string for completion.
      - (tutcode-check-stroke-help-window-begin):
        Add modification of candidates for kanji combination guide.
        Remove obsoleted comment.
      - (tutcode-auto-help-update-stroke-alist-with-key):
        Change argument type to car of list for recursion style.
      - (tutcode-auto-help-update-stroke-alist-with-stroke):
        Follow change of tutcode-auto-help-update-stroke-alist-with-key.
      - (tutcode-proc-state-on): Modify for completion.
      - (tutcode-proc-state-yomi): Modify for prediction.
      - (tutcode-reset-candidate-window): Add reset of predicting state.
      - (tutcode-get-candidate-handler):
        Add return of completion or prediction candidates.
        Add adjustment of tutcode-nr-candidate-max-for-{prediction,guide}.
      - (tutcode-set-candidate-index-handler):
        Modify for completion or prediction.
      - (tutcode-predict,
         tutcode-lib-set-prediction-src-string,
         tutcode-lib-get-nr-predictions,
         tutcode-lib-get-nth-word,
         tutcode-lib-get-nth-prediction,
         tutcode-lib-get-nth-appendix,
         tutcode-lib-commit-nth-prediction,
         tutcode-guide-set-candidates,
         tutcode-guide-update-alist,
         tutcode-guide-update-alist-with-stroke,
         tutcode-commit-by-label-key-for-prediction,
         tutcode-get-prediction-string,
         tutcode-learn-prediction-string,
         tutcode-do-commit-prediction,
         tutcode-append-commit-string,
         tutcode-check-completion,
         tutcode-check-prediction,
         tutcode-prediction-calc-window-param,
         tutcode-change-prediction-page,
         tutcode-heading-label-char-for-prediction?): New function.
    * scm/tutcode-key-custom.scm
      - (tutcode-begin-completion-key): New custom.
    * scm/tutcode-custom.scm
      - (tutcode-prediction): New custom group.
      - (tutcode-nr-candidate-max-for-prediction,
         tutcode-nr-candidate-max-for-guide,
         tutcode-use-completion?,
         tutcode-completion-chars-min,
         tutcode-completion-chars-max,
         tutcode-use-prediction?,
         tutcode-prediction-start-char-count,
         tutcode-use-kanji-combination-guide?): New custom.
      - (tutcode-nr-candidate-max-for-prediction,
         tutcode-nr-candidate-max-for-guide): New custom hook.
      - (tutcode-use-table-style-candidate-window?): Add set-value for
        tutcode-nr-candidate-max-for-prediction and
        tutcode-nr-candidate-max-for-guide.

2010-11-05 Etsushi Kato <ek.kato@gmail.com>

    * gtk/gtk-im-uim.c
      - (remove_cur_toplevel) : Support GTK+-2.16 again.
      - (update_cur_toplevel) : Ditto.

2010-11-05 Etsushi Kato <ek.kato@gmail.com>

    * scm/tutucode.scm : Add comment on the
      tutcode-latin-conv-start-sequence setting for T-Code table.

2010-11-05 Etsushi Kato <ek.kato@gmail.com>

    * helper/toolbar-standalone-gtk.c
      - (button_press_event_cb) : Support GTK+-2.16 again.
      - (handle_expose_event_cb) : Ditto.
    * helper/toolbar-common-gtk.c
      - (calc_menu_position) : Ditto.
    * helper/eggtrayicon.c
      - (egg_tray_icon_expose) : Ditto.

2010-11-05 Etsushi Kato <ek.kato@gmail.com>

    * m4/openssl.m4 : Remove redundant brackets.

2010-11-05 Etsushi Kato <ek.kato@gmail.com>

    * uim/skk.c (struct dic_info) : Simplify using typedef.

2010-11-01 Etsushi Kato <ek.kato@gmail.com>

    * uim/skk.c (is_okuri) : Check okuri-ari entry strictly.

2010-09-29 Etsushi Kato <ek.kato@gmail.com>

    * m4/openssl.m4 (openssl-dir) : Don't set use_openssl="no" when
      ACTION-IF-NOT-GIVEN.

2010-09-18 Muneyuki Noguchi <nogu.dev@gmail.com>

    * m4/openssl.m4
      - Don't disable OpenSSL feature when `--enable-openssl' is set
        and `--with-openssl-dir' is specified (bug #30249).

2010-09-13 Etsushi Kato <ek.kato@gmail.com>

    * helper/toolbar-standalone-gtk.c
      - Add check for gtk version for gtk_widget_get_mapped.
    * helper/eggtrayicon.c
      - Add check for gtk version for gtk_widget_get_realized.

2010-09-12 Muneyuki Noguchi <nogu.dev@gmail.com>

    * helper/pref-gtk-custom-widgets.c
      - (choose_key_clicked_cb): Prevent uim-pref-gtk from segfaulting
        when right-clicking on GtkEntry widget.
        We can use no input method on this widget
        because this widget isn't editable.

2010-09-12 Muneyuki Noguchi <nogu.dev@gmail.com>

    * gtk/gtk-im-uim.c
      - (on_client_widget_grab_notify):
        Use gtk_window_group_get_current_grab() for GTK+3.

2010-09-12 Muneyuki Noguchi <nogu.dev@gmail.com>

    * gtk/gtk-im-uim.c
      - (on_client_widget_grab_notify, handle_key_on_toplevel):
        Add comments on GSEAL_ENABLE.
    * helper/pref-gtk-custom-widgets.c
      - (choose_key_clicked_cb): Ditto.

2010-09-12 Muneyuki Noguchi <nogu.dev@gmail.com>

    * gtk/text-util.c
      - (im_uim_acquire_selection_text, delete_text_in_gtk_entry):
         Use gtk_editable_get_position() for GTK+3.

2010-09-12 Muneyuki Noguchi <nogu.dev@gmail.com>

    * helper/dict-cclass-dialog.c
      - (cclass_dialog): Use gtk_dialog_get_content_area() for GTK+3.
    * helper/dict-word-list-win-gtk.c
      - (help_about_action_cb): Ditto.
    * helper/dict-word-win-gtk.c
      - (word_window_init): Ditto.
    * helper/pref-gtk-custom-widgets.c
      - (choose_olist_clicked_cb, choose_key_clicked_cb): Ditto.

2010-09-12 Muneyuki Noguchi <nogu.dev@gmail.com>

    * helper/pref-gtk-custom-widgets.c
      - (sync_value_int): Use gtk_adjustment_get_upper() for GTK+3.

2010-09-12 Muneyuki Noguchi <nogu.dev@gmail.com>

    * helper/pref-gtk-custom-widgets.c
      - (sync_value_int): Use gtk_adjustment_get_lower() for GTK+3.

2010-09-12 Muneyuki Noguchi <nogu.dev@gmail.com>

    * helper/pref-gtk-custom-widgets.c
      - (sync_value_int, sync_value_string, sync_value_choice,
         sync_value_olist, sync_value_key):
        Use gtk_widget_get_parent() for GTK+3.

2010-09-12 Muneyuki Noguchi <nogu.dev@gmail.com>

    * helper/eggtrayicon.c
      - (egg_tray_icon_expose): Use gtk_container_get_border_width() for GTK+3.

2010-09-12 Muneyuki Noguchi <nogu.dev@gmail.com>

    * helper/eggtrayicon.c
      - (egg_tray_icon_expose): Use gtk_container_get_focus_child() for GTK+3.

2010-09-12 Muneyuki Noguchi <nogu.dev@gmail.com>

    * helper/eggtrayicon.c
      - (egg_tray_icon_expose): Use gtk_widget_get_allocation() for GTK+3.
    * helper/toolbar-common-gtk.c
      - (calc_menu_position): Ditto.
    * helper/toolbar-standalone-gtk.c
      - (handle_expose_event_cb): Ditto.

2010-09-12 Muneyuki Noguchi <nogu.dev@gmail.com>

    * gtk/test/entry.c
      - (main): Use gtk_entry_get_text_length() for GTK+3.
    * gtk/text-util.c
      - (delete_text_in_gtk_entry): Ditto.

2010-09-12 Muneyuki Noguchi <nogu.dev@gmail.com>

    * gtk/text-util.c
      - (acquire_text_in_gtk_text_view, im_uim_acquire_selection_text,
         delete_text_in_gtk_text_view): Use gtk_text_view_get_buffer() for GTK+.

2010-09-12 Muneyuki Noguchi <nogu.dev@gmail.com>

    * gtk/text-util.c
      - (delete_text_in_gtk_text_view, delete_selection_in_gtk_text_view):
        Use gtk_text_view_get_editable() for GTK+3.

2010-09-12 Muneyuki Noguchi <nogu.dev@gmail.com>

    * gtk/text-util.c
      - (delete_text_in_gtk_text_view, delete_selection_in_gtk_text_view):
        Use gtk_text_view_get_editable() for GTK+3.

2010-09-12 Muneyuki Noguchi <nogu.dev@gmail.com>

    * gtk/gtk-im-uim.c
      - (handle_key_on_toplevel): Use gtk_editable_get_editable() for GTK+3.

2010-09-12 Muneyuki Noguchi <nogu.dev@gmail.com>

    * gtk/gtk-im-uim.c
      - (on_client_widget_grab_notify): Use gtk_window_get_group() for GTK+3.

2010-09-12 Muneyuki Noguchi <nogu.dev@gmail.com>

    * gtk/caret-state-indicator.c
      - (caret_state_indicator_timeout): Use gtk_widget_get_style() for GTK+3.
    * helper/eggtrayicon.c
      - (egg_tray_icon_expose): Ditto.
    * helper/toolbar-standalone-gtk.c
      - (handle_expose_event_cb): Ditto.

2010-09-12 Muneyuki Noguchi <nogu.dev@gmail.com>

    * gtk/caret-state-indicator.c
      - (caret_state_indicator_timeout): Use gtk_widget_get_window() for GTK+3.
    * gtk/uim-cand-win-gtk.c
      - (uim_cand_win_gtk_layout_sub_window): Ditto.
    * helper/candwin-gtk.c
      - (uim_cand_win_gtk_layout_sub_window): Ditto.
    * helper/eggtrayicon.c
      - (egg_tray_icon_expose, egg_tray_icon_send_manager_message,
         egg_tray_icon_realize): Ditto.
    * helper/pref-gtk-custom-widgets.c
      - (choose_key_button_clicked_cb): Ditto.
    * helper/toolbar-common-gtk.c
      - (calc_menu_position): Ditto.
    * helper/toolbar-standalone-gtk.c
      - (button_press_event_cb, helper_win_set_position,
         motion_notify_event_cb, handle_expose_event_cb): Ditto.

2010-09-11 Muneyuki Noguchi <nogu.dev@gmail.com>

    * gtk/gtk-im-uim.c
    * gtk/gtk-im-uim.h
    * helper/eggtrayicon.c
    * helper/eggtrayicon.h
      - Don't include individual headers for GTK+3.

2010-09-11 Muneyuki Noguchi <nogu.dev@gmail.com>

    * gtk/gtk-im-uim.c
      - (show_preedit, update_cur_toplevel): gtk_widget_is_toplevel()
        instead of deprecated GTK_WIDGET_TOPLEVEL.

2010-09-11 Muneyuki Noguchi <nogu.dev@gmail.com>

    * helper/dict-word-win-gtk.c
      - (word_window_additional_create): Use gtk_editable_set_editable()
        instead of deprecated gtk_editable_set_editable().
    * helper/pref-gtk-custom-widgets.c
      - (add_custom_type_orderedlist, choose_key_clicked_cb,
         add_custom_type_key): Ditto.

2010-09-11 Muneyuki Noguchi <nogu.dev@gmail.com>

    * helper/dict-word-win-gtk.c
      - (word_window_add, word_window_response, message_dialog_response_cb):
        Use g_idle_add() instead of deprecated gtk_idle_add().
    * helper/pref-gtk.c
      - (main): Ditto.

2010-09-11 Muneyuki Noguchi <nogu.dev@gmail.com>

    * helper/eggtrayicon.c
      - (egg_tray_icon_expose): Use gtk_widget_get_state()
        instead of deprecated GTK_WIDGET_STATE.

2010-09-11 Muneyuki Noguchi <nogu.dev@gmail.com>

    * helper/eggtrayicon.c
      - (egg_tray_icon_expose): Use gtk_widget_has_focus()
        instead of deprecated GTK_WIDGET_HAS_FOCUS.

2010-09-11 Muneyuki Noguchi <nogu.dev@gmail.com>

    * helper/eggtrayicon.c
      - (egg_tray_icon_update_manager_window): Use gtk_widget_get_realized()
        instead of deprecated GTK_WIDGET_REALIZED.

2010-09-11 Muneyuki Noguchi <nogu.dev@gmail.com>

    * helper/toolbar-standalone-gtk.c
      - (button_press_event_cb): Use gdk_cursor_unref()
        instead of deprecated gdk_cursor_destroy().

2010-09-11 Muneyuki Noguchi <nogu.dev@gmail.com>

    * helper/toolbar-standalone-gtk.c
      - (button_press_event_cb): Use gtk_widget_get_visible()
        instead of deprecated GTK_WIDGET_VISIBLE.

2010-09-11 Muneyuki Noguchi <nogu.dev@gmail.com>

    * helper/toolbar-standalone-gtk.c
      - (size_allocate_cb, size_request_cb):
        Use gtk_widget_get_mapped() instead of deprecated GTK_WIDGET_MAPPED.

2010-09-11 Muneyuki Noguchi <nogu.dev@gmail.com>

    * helper/toolbar-standalone-gtk.c
      - (helper_win_set_position, motion_notify_event_cb):
        Use gdk_drawable_get_size() instead of deprecated gdk_window_get_size().

2010-09-11 Muneyuki Noguchi <nogu.dev@gmail.com>

    * helper/toolbar-common-gtk.c
      - (calc_menu_position): Don't use deprecated macro GTK_WIDGET_NO_WINDOW.

2010-09-11 Muneyuki Noguchi <nogu.dev@gmail.com>

    * helper/toolbar-common-gtk.c
      - (destroy_tooltips): Remove.
      - (popup_prop_menu, prop_button_create, helper_toolbar_prop_list_update):
        Don't use deprecated GtkTooltips.
      - (prop_data_flush, prop_button_destroy): Don't call removed function.
    * helper/pref-gtk.c
      - (create_setting_button_box): Don't use deprecated GtkTooltips.

2010-09-09 Muneyuki Noguchi <nogu.dev@gmail.com>

    * configure.ac
      - (LIBEDIT_LIBS): Take ncurses into account and check if curses or ncurses
        is installed.

2010-09-08 Etsushi Kato <ek.kato@gmail.com>

    * uim/uim-helper.c (uim_helper_get_pathname) : Don't call
      uim_fatal_error even when the directory cannot be prepared.

2010-09-08 Etsushi Kato <ek.kato@gmail.com>

    * scm/custom-rk.scm
      - (custom-file-path)
        - Use get-config-path instead of get-config-path!.
    * scm/dynlib.scm
      - (uim-dynlib-load-path)
        - Ditto.
    * scm/plugin.scm
      - (uim-plugin-scm-load-path)
      - (load-module-conf)
      - (load-enabled-modules)
        - Ditto.

2010-09-08 Etsushi Kato <ek.kato@gmail.com>

    * uim/uim-posix.c
      - (uim_get_config_path_internal)
        - Make sure to return "" as a path when failed.
      - (c_get_config_path)
        - Remove a check for the path.

2010-09-08 Etsushi Kato <ek.kato@gmail.com>

    * uim/uim-posix.c
      - (uim_check_dir_internal)
        - New.
        - Moved from uim_check_dir mostly.
        - Add check for whether to create the path.
      - (uim_check_dir)
        - Call uim_check_dir_internal.
        - Should rename this function later.
      - (c_prepare_dir)
        -  Rename from c_check_dir.
      - (c_check_dir)
        -  Rename to c_prepare_dir.
      - (uim_get_config_path_internal)
        - New.
        - Moved from uim_get_config_path.
        - Use uim_check_dir_internal.
      - (uim_get_config_path)
        - Call uim_get_config_path_internal.
      - (c_prepare_config_path)
        -  New.
      - (c_get_config_path)
        - Use uim_get_config_path_internal.
        - Change to not to create the dir when the path isn't existed.
      - (uim_init_posix_subrs)
        - Add "get-config-path" procedure for scheme side.
        - Follow the rename of c_check_dir and c_get_config_path.

2010-09-07 Etsushi Kato <ek.kato@gmail.com>

    * scm/plguin.scm
      - (uim-plugin-scm-load-path)
      - (load-module-conf)
      - (load-enabled-modules)
    * scm/dynlib.scm
      - (uim-dynlib-load-path)
        - Don't assume the config-path in home directory is always
          writable.  This fixes build problem of uim-1.6.0
          on chrooted environment using user nobody.

2010-08-28 KIHARA Hideto <deton@m1.interq.or.jp>

    * scm/tutcode.scm
      - Update comments.

2010-08-15 Jae-hyeon Park <jhyeon@gmail.com>

    * po/ko.po
      - changed a translation

2010-08-14 KIHARA Hideto <deton@m1.interq.or.jp>

    * helper/pref-gtk.c
      - (check_dot_uim_file): Suppress ~/.uim check and warning dialog
      if uim-pref-suppress-dot-uim-warning-dialog? is #t.

2010-08-13 Etsushi Kato <ek.kato@gmail.com>

    * configure.ac
    * uim/uim.h
      - Post release version bump

2010-08-11 IWATA Ray <iwata@quasiquote.org>

    * scm/Makefile.am:
      - Split targets to avoid forking two uim-module-manager jobs when gmake -j N.

2010-08-11 Etsushi Kato <ek.kato@gmail.com>

    * make-dist.sh : Update.

2010-08-11 Etsushi Kato <ek.kato@gmail.com>

    * RELNOTE : Update.

2010-08-10 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/switcher/qt4.cpp
      - (UimImSwitcher::createGUI): Add apply button.
        We sort the three buttons in the KDE style.
      - (UimImSwitcher::slotChangeInputMethodAndQuit): New function.
      - (UimImSwitcher::slotChangeInputMethod): Don't quit in this function.
    * qt4/switcher/qt4.h
      - (UimImSwitcher): Add UimImSwitcher::slotChangeInputMethodAndQuit()
        and remove UimImSwitcher::okButton and UimImSwitcher::cancelButton.

2010-08-10 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/switcher/qt4.cpp
      - (UimImSwitcher::createGUI): Adjust button width
        by not setting size policy explicitly.

2010-08-10 Etsushi Kato <ek.kato@gmail.com>

    * po/fr.po
    * po/ko.po
    * po/ja.po
      - Update.

2010-08-10 Etsushi Kato <ek.kato@gmail.com>

    * pixmaps/tcode_dark_background.svg
    * pixmaps/tutcode_dark_background.svg
      - New.
    * pixmaps/Makefile.am
      - (SVGS) : Added.
      - (GENERAGED_SVGS) : Add trycode_dark_background.svg.
      - (SVG_PNGS) : Added.
      - (trycode_dark_background.svg) : Generate from
        tcode_dark_background.svg.

2010-08-10 Etsushi Kato <ek.kato@gmail.com>

    * pixmaps/LIST : Update.
    * pixmaps/skk_dark_background.svg : New.
    * pixmaps/Makefile.am (SVGS, SVG_PNGS) : Added.

2010-08-10 Etsushi Kato <ek.kato@gmail.com>

    * NEWS : Update.

2010-08-10 Etsushi Kato <ek.kato@gmail.com>

    * scm/im-custom.scm
      - (toolbar-icon) : New subgroup.
      - (toolbar-icon-for-dark-background?) : New setting.
    * qt/toolbar-common-uimstateindicator.cpp
      - (UimStateIndicator::parseHelperStr) : Reload config.
      - (UimStateIndicator::propListUpdate) : Use icon for dark
        background if requested.
      - (QHelperPopupMenu::insertHelperItem) : Ditto.
    * qt4/toolbar/common-uimstateindicator.cpp
      - Likewise.
    * helper/toolbar-common-gtk.c
      - (helper_toolbar_check_custom) : Add check for icon.
      - (helper_toolbar_parse_helper_str) : Reset icon when custom
        changes.
      - (register_icon) : Use icon for dark background if requested.
      - (reset_icon) : New.
      - (toolbar_new) : Check custom before setting icon.

2010-08-10 Etsushi Kato <ek.kato@gmail.com>

    * pixmaps/ja_kana_dark_background.svg
    * pixmaps/ja_katakana_dark_background.svg
    * pixmaps/ko_hangulword_dark_background.svg
    * pixmaps/prime_mode_application_dark_background.svg
    * pixmaps/ko_hangulchar_dark_background.svg
    * pixmaps/ja_direct_dark_background.svg
    * pixmaps/ja_hiragana_dark_background.svg
    * pixmaps/zm_dark_background.svg
    * pixmaps/off_dark_background.svg
    * pixmaps/on_dark_background.svg
    * pixmaps/ja_kzik_dark_background.svg
    * pixmaps/ja_fullwidth_alnum_dark_background.svg
    * pixmaps/direct_dark_background.svg
    * pixmaps/ja_halfkana_dark_background.svg
    * pixmaps/ja_act_dark_background.svg
    * pixmaps/wb86_dark_background.svg
    * pixmaps/direct_input_dark_background.svg
    * pixmaps/ja_romaji_dark_background.svg
    * pixmaps/unknown_dark_background.svg
    * pixmaps/ko_direct_dark_background.svg
    * pixmaps/ja_azik_dark_background.svg
    * pixmaps/ja_halfwidth_alnum_dark_background.svg
      - New icons for toolbar with dark background.
    * pixmaps/Makefile.am
      - (SVGS)
      - (SVG_PNGS)
        - Added new icons.

2010-08-10 Etsushi Kato <ek.kato@gmail.com>

    * scm/im-custom.scm (toolbar-widget)
      - New subgroup to prevent saving duplicate items in 'toolbar'
        main group.
    * scm/ajax-ime-custom.scm
    * scm/mana-custom.scm
    * scm/anthy-custom.scm
    * scm/canna-custom.scm
    * scm/prime-custom.scm
    * scm/skk-custom.scm
    * scm/wnn-custom.scm
    * scm/yahoo-jp-custom.scm
    * scm/sj3-custom.scm
    * scm/social-ime-custom.scm
    * scm/anthy-utf8-custom.scm
      - Use 'toolbar-widget' subgroup.

2010-08-09 Etsushi Kato <ek.kato@gmail.com>

    * NEWS : Update.

2010-08-08 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/chardict/bushuviewwidget.cpp
      - (BushuViewWidget::setFont): Rename to setCharFont()
        to fix bug in font settings.
    * qt4/chardict/bushuviewwidget.h
      - Ditto.
    * qt4/chardict/chargridview.cpp
      - (CharGridView::setFont)
        * Rename to setCharFont().
        * Call QWidget::setFont().
    * qt4/chardict/chargridview.h
      - (CharGridView::setFont): Rename to setCharFont().
    * qt4/chardict/qt4.cpp
      - (KUimCharDict::setCharDictFont): Follow change of function name.
    * qt4/chardict/qt4.h
      - (CharDictViewBase::setFont)
        * Rename to setCharFont().
        * Don't override non-virtual function QWidget::setFont().
    * qt4/chardict/unicodeviewwidget.cpp
      - (UnicodeViewWidget::setFont): Rename to setCharFont().
    * qt4/chardict/unicodeviewwidget.h
      - Ditto.

2010-08-08 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/chardict/qt4.cpp
    * qt4/pref/qt4.cpp
      - (main): Set organization name and application name
        because QSettings class is used.

2010-08-08 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/candwin/uim-candwin-qt4.pro.in
    * qt4/chardict/uim-chardict-qt4.pro.in
    * qt4/immodule/quiminputcontextplugin.pro.in
    * qt4/pref/uim-pref-qt4.pro.in
    * qt4/switcher/uim-im-switcher-qt4.pro.in
    * qt4/toolbar/uim-toolbar-qt4.pro.in
      - Make ccache work.
      - (QMAKE_CC): Specify C compiler by CC.
      - (QMAKE_CXX): Specify C++ compiler by CXX.

2010-08-07 Muneyuki Noguchi <nogu.dev@gmail.com>

    * po/fr.po
    * po/ja.po
    * po/ko.po
      - Update.
    * qt4/pref/keyeditformbase.ui
    * qt4/pref/olisteditformbase.ui
      - Change title of dialog.

2010-08-07 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/candwin/uim-candwin-qt4.pro.in
    * qt4/chardict/uim-chardict-qt4.pro.in
    * qt4/edittest/edittest.pro
    * qt4/immodule/quiminputcontextplugin.pro.in
    * qt4/pref/uim-pref-qt4.pro.in
    * qt4/switcher/uim-im-switcher-qt4.pro.in
    * qt4/toolbar/uim-toolbar-qt4.pro.in
      - Prevent executables from being stripped.

2010-08-06 Etsushi Kato <ek.kato@gmail.com>

    * NEWS : Update.

2010-08-06 Etsushi Kato <ek.kato@gmail.com>

    * doc/COMPATIBILITY : Modify a sentence in r6604.

2010-08-06 Etsushi Kato <ek.kato@gmail.com>

    * doc/PLUGIN : Update.

2010-08-06 Etsushi Kato <ek.kato@gmail.com>

    * scm/plugin.scm (load-module-conf) : Remove duplicate in the
      enabled-im-list when user-conf-file is load.

2010-08-05 Etsushi Kato <ek.kato@gmail.com>

    * po/POTFILES.in
      - Add qt4/pref/ui_{ui_keyeditformbase,olisteditformbase}.h
    * po/Makevars (XGETTEXT_OPTIONS)
      - Add UIC_ keyword.
    * po/fr.po
    * po/ko.po
    * po/ja.po
      - Update.

2010-08-05 Etsushi Kato <ek.kato@gmail.com>

    * scm/util.scm (try-load)
      - Return #t if succeeded instead of #<undef>.
    * test/utiltest-misc.scm
      - (test-try-load)
      - (test-try-require)
        - New test.

2010-08-05 Etsushi Kato <ek.kato@gmail.com>

    * scm/util.scm
      - (try-load)
      - (try-require)
        - Fix bug which was introduced in r6603.

2010-08-05 Etsushi Kato <ek.kato@gmail.com>

    * scm/wnn-custom.scm (wnn-use-remote-server?)
    * scm/sj3-custom.scm (sj3-use-remote-server?)
      - Fix descriptions.
    * po/fr.po
    * po/ko.po
    * po/ja.po
      - Follow the changes.

2010-08-05 Etsushi Kato <ek.kato@gmail.com>

    * RELNOTE : Update.

2010-08-04 Etsushi Kato <ek.kato@gmail.com>

    * scm/uim-help.scm (toolbar-help-url-locale-alist) : Use uim-doc-ja.

2010-08-04 Etsushi Kato <ek.kato@gmail.com>

    * NEWS : Update.

2010-08-04 Etsushi Kato <ek.kato@gmail.com>

    * scm/look.scm
      - (look-look) : Fix crash when file is not found in
        look-lib-look.
    * scm/ct.scm
      - (ct-lib-find-seq)
      - (ct-lib-find-partial-seq)
      - (ct-find-cands-incl-minimal-partial)
        - Ditto.

2010-08-04 Etsushi Kato <ek.kato@gmail.com>

    * NEWS : Update.

2010-08-04 Etsushi Kato <ek.kato@gmail.com>

    * replace/daemon.c
      - Define _PATH_DEVNULL if not defined.
    * helper/eggtrayicon.c
      - Fix compilation with older GTK+.
    * uim/lolevel.c
      - s/u_int16_t/uint16_t/, s/u_int32_t/uint32_t/,
        s/u_int8_t/uint8_t/.
    * uim/socket.c
      - Use PF_UNIX if PF_LOCAL is not defined.
      - Don't use variable named 'sun'.

2010-08-04 Etsushi Kato <ek.kato@gmail.com>

    * AUTHORS
    * doc/PACKAGING
    * doc/ENV
    * doc/UNIT-TEST
    * doc/DOT-UIM
      - Update.

2010-08-03 Etsushi Kato <ek.kato@gmail.com>

    * scm/fileio.scm (file-ready?) : Don't show timeout message.

2010-08-03 Etsushi Kato <ek.kato@gmail.com>

    * scm/skk-custom.scm (skk-use-look?) : Add custom set hook.
    * uim/skk.c (skk_look_open) : Return #f is uim_look_init() fails.

2010-08-03 Etsushi Kato <ek.kato@gmail.com>

    * NEWS : Update.

2010-08-03 Etsushi Kato <ek.kato@gmail.com>

    * NEWS : Update.

2010-08-03 Etsushi Kato <ek.kato@gmail.com>

    * po/fr.po
    * po/ko.po
    * po/ja.po
      - Update.

2010-08-03 Etsushi Kato <ek.kato@gmail.com>

    * scm/prime-custom.scm (prime-command-path) : New.
    * scm/prime.scm
      - (prime-open-with-unix-domain-socket)
      - (prime-connection-init)
        - Use prime-command-path.

2010-08-03 Etsushi Kato <ek.kato@gmail.com>

    *  po/fr.po
    *  po/ko.po
    *  po/ja.po
       - make update-po

2010-08-03 Etsushi Kato <ek.kato@gmail.com>

    * scm/process.scm
      - Use srfi-2 for and-let*.
      - (process-exec-failed)
      - (process-dup2-failed)
      - (process-fork-failed)
        - New variable.
      - (process-io)
        - Report error to parent from child.
        - Make parent returns #f when child fails.
    * scm/prime.scm
      - (prime-connection-init) : Set fds #f when
        prime-server-setting? is unknown.
    * scm/annotation-filter.scm
      - (annotation-filter-open-unix-domain-socket) : Rename to
        annotation-filter-open-with-unix-domain-socket.
      - (annotation-filter-open-with-unix-domain-socket) : Renamed
        from annotation-filter-open-unix-domain-socket.
      - (annotation-filter-init) : Add check for fds.
      - (annotation-filter-read-message) : Add check for return value
        of file-read-line.
    * scm/im-custom.scm (http-timeout)
      - User friendly description.

2010-08-03 KIHARA Hideto <deton@m1.interq.or.jp>

    * scm/tutcode-key-custom.scm
      - (tutcode-purge-candidate-key):
        Change default key to avoid conflict with
        tutcode-uim-heading-label-char-list.

2010-08-01 KIHARA Hideto <deton@m1.interq.or.jp>

    * scm/tutcode.scm
      - (tutcode-set-candidate-index-handler):
        Fix to be able to use commit by mouse click on recursive learning.

2010-08-01 KIHARA Hideto <deton@m1.interq.or.jp>

    * Change to be able to purge mazegaki entry which is only one candidate.
    * scm/tutcode.scm
      - (tutcode-begin-conversion): Add arguments.
      - (tutcode-proc-state-yomi): Add check of tutcode-purge-candidate-key?
        Follow the argument change of tutcode-begin-conversion.

2010-07-31 Etsushi Kato <ek.kato@gmail.com>

    * scm/process.scm
      - (process-io)
      - (process-with-daemon)
        - Show message when proces-execute fails.

2010-07-31 Etsushi Kato <ek.kato@gmail.com>

    * scm/prime.scm
      - (prime-open-with-unix-domain-socket) : Use the same timeout
        value used in 1.5.7.
      - (prime-connection-init) : Add check for error.
      - (prime-send-command) : Check eof for file-read-line.
      - (prime-send-command) : Add check for error.

2010-07-31 Etsushi Kato <ek.kato@gmail.com>

    * configure.ac (kde4-applet) : Set no as default.

2010-07-31 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/pref/uim-pref-qt4.pro.in
      - Don't hardcode file name.

2010-07-30 KIHARA Hideto <deton@m1.interq.or.jp>

    * scm/tutcode.scm
      - (tutcode-key-press-handler):
        Fix to update preedit on cancel of recursive learning
        whose mode is tutcode-state-off.

2010-07-30 KIHARA Hideto <deton@m1.interq.or.jp>

    * scm/tutcode.scm
      - (tutcode-rule-commit-sequences!):
        Fix not to show auto help sequences which are overridden
        by tutcode-rule-set-sequences! (revert change in r4608).

2010-07-30 Etsushi Kato <ek.kato@gmail.com>

    * RELNOTE : Update.

2010-07-30 Etsushi Kato <ek.kato@gmail.com>

    * NEWS
    * RELNOTE
      - Update.

2010-07-30 Etsushi Kato <ek.kato@gmail.com>

    * helper/toolbar-common-gtk.c (tool_button_clicked_cb)
      - Follow r6587 to fix clicking tool buttons.

2010-07-30 Etsushi Kato <ek.kato@gmail.com>

    * configure.ac
    * test/Makefile.am
      - Revise r6628 and r6630.  No functionality is changed.

2010-07-30 Etsushi Kato <ek.kato@gmail.com>

    * RELNOTE : Update.

2010-07-30 Etsushi Kato <ek.kato@gmail.com>

    * NEWS : Update.

2010-07-30 Etsushi Kato <ek.kato@gmail.com>

    * scm/generic.scm
      - (generic-update-input-state-cands)
      - (generic-update-multi-cand-state-cands)
        - Fix for generic-show-prediction-candidates? #f.

2010-07-30 Etsushi Kato <ek.kato@gmail.com>

    * test/Makefile.am : Run test only when --enable-debug is set.

2010-07-30 Etsushi Kato <ek.kato@gmail.com>

    * configure.ac : Add tests for Gauche ant GaUnit.
    * test/Makefile.am (TESTS) : Make conditional.

2010-07-28 Etsushi Kato <ek.kato@gmail.com>

    * tables/Makefile.am (.scm.table) : Make sure to build libreplace.la.

2010-07-28 Etsushi Kato <ek.kato@gmail.com>

    * test/uim-test-utils-new.scm (uim-sh-read-block)
      - Cope with slower machines.

2010-07-28 Etsushi Kato <ek.kato@gmail.com>

    * RELNOTE
    * NEWS
      - Update.

2010-07-28 Etsushi Kato <ek.kato@gmail.com>

    * qt4/chardict/Makefile.am : One more fix for distclean.

2010-07-28 Etsushi Kato <ek.kato@gmail.com>

    * NEWS : Update.

2010-07-28 Etsushi Kato <ek.kato@gmail.com>

    * uim/uim-scm-sigscheme.c : Require sigscheme 0.8.5.

2010-07-28 Etsushi Kato <ek.kato@gmail.com>

    * qt4/chardict/Makefile.am
    * qt4/toolbar/Makefile.am
      - Fix distclean.

2010-07-28 Etsushi Kato <ek.kato@gmail.com>

    * xim/uim-xim.1 : Fix format ([uim-ja 239]).

2010-07-28 Etsushi Kato <ek.kato@gmail.com>

    * configure.ac : Don't use rpath for kde4 applet ([uim-ja 239]).

2010-07-28 Etsushi Kato <ek.kato@gmail.com>

    * make-dist.sh : Update.

2010-07-28 Etsushi Kato <ek.kato@gmail.com>

    * test/i18n/test-language.scm
    * test/i18n/test-base.scm
    * test/test-anthy.scm
    * test/key/test-translator.scm
    * test/key/test-base.scm
    * test/key/test-predicate.scm
    * test/test-ng-key.scm
    * test/test-example.scm
    * test/test-lazy-load.scm
    * test/test-ustr.scm
    * test/test-custom-rt.scm
    * test/test-plugin.scm
    * test/test-uim-test-utils.scm
    * test/test-im.scm
    * test/test-intl.scm
    * test/test-custom.scm
    * test/test-action.scm
    * test/test-iconv.scm
    * test/util/test-srfi.scm
    * test/util/test-string.scm
    * test/util/test-character-predicate.scm
    * test/util/test-uim.scm
    * test/util/test-multi-segment.scm
    * test/util/test-list.scm
    * test/util/test-misc.scm
    * test/util/test-r5rs.scm
    * test/util/test-rk.scm
    * test/util/test-record.scm
    * test/util/test-character-conversion.scm
      - Update passed revision record.

2010-07-28 Etsushi Kato <ek.kato@gmail.com>

    * test/test-language.scm (uim-test-with-environment-variables)
      - Disabled.

2010-07-28 Etsushi Kato <ek.kato@gmail.com>

    * test/test-im.scm : Add a comment.

2010-07-28 Etsushi Kato <ek.kato@gmail.com>

    * doc/COMPATIBILITY : Update.

2010-07-28 Etsushi Kato <ek.kato@gmail.com>

    * scm/plugin.scm (uim-plugin-scm-load-path) : Support multiple
      paths by LIBUIM_SCM_FILES.
    * scm/util.scm
      - (make-scm-pathname) : Change to return list of paths.
      - (try-load) : Follow the change.
      - (try-require) : Ditto.
    * test/uim-test-utils.scm : Fix for sourcedir != builddir.
    * test/uim-test-utils-new.scm : Ditto.
    * test/util/test-uim.scm : Follow the change in make-scm-pathname.

2010-07-27 Etsushi Kato <ek.kato@gmail.com>

    * test/test-lazy-load.scm
      - (setup) : Set enable-lazy-loading? #t not to use
        require-module in loader.scm.
      - (test-stub-im-generate-stub-im-list) : Set
        installed-im-module-list first.

2010-07-27 Etsushi Kato <ek.kato@gmail.com>

    * test/test-plugin.scm (setup) : Don't invoke load-enabled-modules
      because these tests are worked with enable-lazy-loading? #f,
      which will cause calling require-module for all modules when
      load-enabled-modules is called.  Instead, require-module needs
      to be called after setting im-list as a null list to test these.

2010-07-26 Etsushi Kato <ek.kato@gmail.com>

    * test/test-action.scm : Follow the change in r6545.

2010-07-26 KIHARA Hideto <deton@m1.interq.or.jp>

    * NEWS
      - Add news about tutcode.
      - Fix typo: Canan to Canna.

2010-07-26 KIHARA Hideto <deton@m1.interq.or.jp>

    * po/ja.po
      - Add translation about tutcode.

2010-07-26 Etsushi Kato <ek.kato@gmail.com>

    * tools/gnuify-changelog.pl : Bug fix.

2010-07-26 Etsushi Kato <ek.kato@gmail.com>

    * tools/gnuify-changelog.pl : Update.

2010-07-26 Etsushi Kato <ek.kato@gmail.com>

    * configure.ac (libedit_path) : Bug fix.

2010-07-26 Etsushi Kato <ek.kato@gmail.com>

    * tools/gnuify-changelog.pl : Update.

2010-07-26 Etsushi Kato <ek.kato@gmail.com>

    * tables/Makefile.am : Update for make-dist.

2010-07-26 Etsushi Kato <ek.kato@gmail.com>

    * qt4/immodule/Makefile.am : Update.

2010-07-26 Etsushi Kato <ek.kato@gmail.com>

    * test/test-im.scm ("testcase im im-management")
      - Exclude zm and wb86 for testing zh_CN.

2010-07-26 Etsushi Kato <ek.kato@gmail.com>

    * NEWS : Update.

2010-07-25 Muneyuki Noguchi <nogu.dev@gmail.com>

    * helper/toolbar-common-gtk.c
      - (right_click_menu_activated):
        Use g_spawn_command_line_async() instead of system()
        and check return value.
    * qt4/toolbar/common-quimhelpertoolbar.cpp
      - (launchHelperApplication): New function.
      - (QUimHelperToolbar::slotExecImSwitcher): Use launchHelperApplication().
      - (QUimHelperToolbar::slotExecPref): Ditto.
      - (QUimHelperToolbar::slotExecDict): Ditto.
      - (QUimHelperToolbar::slotExecInputPad): Ditto.
      - (QUimHelperToolbar::slotExecHelp): Ditto.

2010-07-25 Etsushi Kato <ek.kato@gmail.com>

    * po/ja.po : Update.

2010-07-25 Etsushi Kato <ek.kato@gmail.com>

    * po/fr.po
    * po/ko.po
    * po/ja.po
     - Update.

2010-07-25 Etsushi Kato <ek.kato@gmail.com>

    * scm/japanese-custom.scm
      (composing-rule) : New subgroup.
      (ja-rk-rule-keep-consonant?) : Use composing-rule subgroup.

2010-07-25 Etsushi Kato <ek.kato@gmail.com>

    * po/ja.po : Update.

2010-07-25 Etsushi Kato <ek.kato@gmail.com>

    * po/POTFILES.in : Add scm/japanese-custom.scm
    * po/fr.po : Update
    * po/ko.po : Ditto.
    * po/ja.po : Ditto.

2010-07-25 Etsushi Kato <ek.kato@gmail.com>

    * po/fr.po
    * po/ko.po
    * po/ja.po
      - Clear fuzzy.

2010-07-25 Etsushi Kato <ek.kato@gmail.com>

    * po/fr.po
    * po/ko.po
    * po/ja.po
      - Make update-po

2010-07-25 KIHARA Hideto <deton@m1.interq.or.jp>

    * scm/tutcode.scm
      - (tutcode-context-new, tutcode-begin-conversion):
        Fix error when libuim-skk.so is not available.

2010-07-24 KIHARA Hideto <deton@m1.interq.or.jp>

    * Add custom to set use of table style candidate window.
    * scm/tutcode-custom.scm
      - (tutcode-use-table-style-candidate-window?):
        New custom variable and set hooks.
      - (tutcode-candidate-window-table-layout):
        New custom variable and activity hooks.
    * scm/tutcode.scm
      - (uim-candwin-prog, uim-candwin-prog-layout):
        New variable for table style candidate window.
      - (uim-candwin-prog-layout-qwerty-jis,
         uim-candwin-prog-layout-qwerty-us,
         uim-candwin-prog-layout-dvorak): Ditto.
      - (tutcode-table-heading-label-char-list-qwerty-jis,
         tutcode-table-heading-label-char-list-qwerty-us,
         tutcode-table-heading-label-char-list-dvorak): Ditto.
      - (tutcode-table-heading-label-char-list-for-kigou-mode):
        Change to make from uim-candwin-prog-layout.
      - (tutcode-context-new):
        Change to use new custom tutcode-use-table-style-candidate-window?
    * xim/canddisp.cpp
      - (candwin_command): Fix to ignore empty uim-candwin-prog.

2010-07-24 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/toolbar/common-quimhelpertoolbar.cpp
      - (QUimHelperToolbar::QUimHelperToolbar):
        * Adjust layout margin.
        * Adjust spacing between widgets.
    * qt4/toolbar/common-uimstateindicator.cpp
      - (UimStateIndicator::UimStateIndicator):
        Adjust spacing between widgets.
    * qt4/toolbar/standalone-qt4.cpp
      - (UimStandaloneToolbar::UimStandaloneToolbar):
        Ditto.

2010-07-24 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/toolbar/standalone-qt4.cpp
      - (UimStandaloneToolbar::slotToolbarDoubleClicked):
        Fix bug in toolbar size.

2010-07-24 Etsushi Kato <ek.kato@gmail.com>

    * scm/skk.scm
      - (skk-ja-rk-rule) : New.  Non consonant-keeping ja-rk-rule
        for SKK.
      - (skk-set-rule) : Use non consonant-keeping ja-rk-rule for
        skk-input-rule-roma.
      - (skk-context-new) : Ditto.

2010-07-24 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/toolbar/standalone-qt4.h
      - (UimStandaloneToolbar::slotToolbarDoubleClicked): Adjust size.
      - (UimToolbarDraggingHandler::sizeHint): Remove.
      - (UimToolbarDraggingHandler::drawContents): Remove.
        QFrame::drawContents() doesn't exist.
      - (UimToolbarDraggingHandler::paintEvent):
        Draw line as uim-toolbar-qt does.
    * qt4/toolbar/standalone-qt4.cpp
      - (UimToolbarDraggingHandler)
        * Remove drawContents().
        * Remove sizeHint()
        * Add paintEvent().

2010-07-24 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/pref/keyeditformbase.ui
      - Include qtgettext.h.
    * qt4/pref/olisteditformbase.ui
      - Ditto.
    * qt4/pref/uim-pref-qt4.pro.in
      - Define QMAKE_UIC.
    * qt4/qtgettext.h
      - Define UIC_.
      - Remove extra parentheses.
    * qt4/toolbar/common-uimstateindicator.cpp
      - (qstring_): New function.
      - (UimStateIndicator::propListUpdate): Translate labels.

2010-07-23 KIHARA Hideto <deton@m1.interq.or.jp>

    * scm/tutcode.scm
      - (tutcode-custom-set-mazegaki/bushu-start-sequence!):
        Fix error when tutcode-XXX-start-sequence is empty.

2010-07-23 Etsushi Kato <ek.kato@gmail.com>

    * scm/japanese.scm (ja-consonant-syllable-table) : Update.

2010-07-23 Etsushi Kato <ek.kato@gmail.com>

    * scm/skk.scm
      - (skk-proc-state-direct)
      - (skk-proc-state-kanji)
        - Remove n1 hack because rk.scm has been fixed in r6564.
    * scm/anthy-utf8.scm (anthy-utf8-proc-input-state-with-preedit)
      - Ditto.
    * scm/wnn.scm
    * scm/social-ime.scm
    * scm/canna.scm
    * scm/ajax-ime.scm
    * scm/anthy.scm
    * scm/yahoo-jp.scm
    * scm/mana.scm
    * scm/sj3.scm
      - Port the change from anthy-utf8.scm.

2010-07-23 Etsushi Kato <ek.kato@gmail.com>

    * scm/wnn.scm
    * scm/social-ime.scm
    * scm/canna.scm
    * scm/ajax-ime.scm
    * scm/yahoo-jp.scm
    * scm/sj3.scm
      - Fix typo in r6566. s/sylable/syllable/.

2010-07-23 Etsushi Kato <ek.kato@gmail.com>

    * scm/Makefile.am (SCM_FILES) : Add japanese-custom.scm.

2010-07-23 Etsushi Kato <ek.kato@gmail.com>

    * scm/japanese-custom.scm : New file.
      - (ja-rk-rule) : New custom group.
      - (ja-rk-rule-keep-consonant?) : New custom.  Default is #f.
    * scm/japanese.scm
      - Require japanese-custom.scm.
      - (ja-rk-rule-basic) : Add qa, qi, qu, qe, qo.
      - (ja-consonant-syllable-table) : Add ry.
      - (ja-rk-rule-consonant-to-keep) : New table.
      - (ja-rk-rule-update) : Set ja-rk-rule depending on
        ja-rk-rule-keep-consonant?.

2010-07-23 Etsushi Kato <ek.kato@gmail.com>

    * scm/wnn.scm
    * scm/social-ime.scm
    * scm/canna.scm
    * scm/ajax-ime.scm
    * scm/anthy.scm
    * scm/yahoo-jp.scm
    * scm/mana.scm
      - Port changes of anthy-utf8.scm in r6565.

2010-07-23 Etsushi Kato <ek.kato@gmail.com>

    * scm/anthy-utf8.scm
      - (anthy-utf8-proc-input-state-with-preedit)
      - (anthy-utf8-get-raw-str-seq)
        - Make sure to fit raw-str with preconv-str as possible.
      - (anthy-utf8-get-raw-candidate)
        - Don't crash even if the length of preconv and raw-str
          differs.

2010-07-23 Etsushi Kato <ek.kato@gmail.com>

    * scm/rk.scm (rk-proc-tail) : Properly merge two sequences.

2010-07-23 Etsushi Kato <ek.kato@gmail.com>

    * scm/anthy-utf8.scm (anthy-utf8-get-commit-string) : Bug fix.

2010-07-23 Etsushi Kato <ek.kato@gmail.com>

    * scm/im-custom.scm : Rename preedit subgroup properly.

2010-07-23 Etsushi Kato <ek.kato@gmail.com>

    * Revert r6560.

2010-07-23 Etsushi Kato <ek.kato@gmail.com>

    * scm/im-custom.scm : Rename preedit subgroup as xim-preedit.

2010-07-23 Etsushi Kato <ek.kato@gmail.com>

    * scm/im-custom.scm : Just reorder group definitions.

2010-07-21 Etsushi Kato <ek.kato@gmail.com>

    * scm/anthy-utf8.scm
      - (anthy-utf8-make-whole-string)
      - (anthy-utf8-proc-input-state-with-preedit)
      - (anthy-utf8-context-confirm-kana!)
        - Support residual-kana with more than one character.
    * scm/skk.scm (skk-proc-state-kanji) : Ditto.
    * scm/wnn.scm
    * scm/social-ime.scm
    * scm/canna.scm
    * scm/ajax-ime.scm
    * scm/anthy.scm
    * scm/yahoo-jp.scm
    * scm/mana.scm
    * scm/sj3.scm
      - Port changes from anthy-utf8.scm.

2010-07-21 Etsushi Kato <ek.kato@gmail.com>

    * qt/switcher-qt.h
    * qt/switcher-qt.cpp
      - (UimImSwitcher::saveDefaultIm) : New.
      - (UimImSwitcher::UimImSwitcher) : Enable uim_custom.
      - (UimImSwitcher::slotChangeInputMethod) : Save default IM upon
        ID_CHANGE_WHOLE_DESKTOP.
    * qt/Makefile.am (uim_im_switcher_qt_LDADD) : Add libuim-custom.
    * qt4/switcher/qt4.h
    * qt4/switcher/qt4.cpp
    * qt4/switcher/uim-im-switcher-qt4.pro.in
      - Likewise.

2010-07-20 Etsushi Kato <ek.kato@gmail.com>

    * scm/im-custom.scm : Revise r6546.

2010-07-20 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/candidatetablewindow.cpp
      - (CandidateTableWindow::updateView): Follow change of function name.
      - (CandidateTableWindow::getPosition): Rename to getButtonPosition().
    * qt4/immodule/candidatetablewindow.h
      - Ditto.

2010-07-20 Muneyuki Noguchi <nogu.dev@gmail.com>

    * configure.ac
      - Unmark Qt4 helper applications as experimental.
        We've fixed lots of bugs in them since 1.5.7.

2010-07-20 KIHARA Hideto <deton@m1.interq.or.jp>

    * scm/tutcode.scm
      - (tutcode-context-new):
        Add setup for table style candidate window.
      - (tutcode-table-heading-label-char-list): New.
      - (tutcode-uim-heading-label-char-list):
        Rename from tutcode-heading-label-char-list.
      - (tutcode-heading-label-char-list): Change to () as default.
      - (tutcode-table-heading-label-char-list-for-kigou-mode): New.
      - (tutcode-uim-heading-label-char-list-for-kigou-mode):
        Rename from tutcode-heading-label-char-list-for-kigou-mode.
      - (tutcode-heading-label-char-list-for-kigou-mode): Change to () as default.

2010-07-20 IWATA Ray <iwata@quasiquote.org>

    * scm/sj3v2-socket.scm (sj3-lib-get-string-with-terminate)
      (sj3-lib-ph2knj-euc, sj3-lib-cl2knj-all-euc):
      - Replace with (file-read-string-with-terminate).

2010-07-20 KIHARA Hideto <deton@m1.interq.or.jp>

    * scm/tutcode.scm
      - (tutcode-check-candidate-window-begin):
        Revert change in r6528 to solve regression.

2010-07-20 IWATA Ray <iwata@quasiquote.org>

    * uim/fileio.c (c_file_position_whence, c_file_position_set):
    * scm/fileio.scm (file-position):
      - New function.
    * uim/fileio.c (uim_plugin_instance_init, uim_plugin_instance_quit):
      - Add scheme function (file-position-set!) and (file-position-whence?).

2010-07-20 Etsushi Kato <ek.kato@gmail.com>

    * scm/japanese-act.scm : Add copyright header.
    * scm/japanese-kzik.scm : Modify copyright header.

2010-07-20 Etsushi Kato <ek.kato@gmail.com>

    * NEWS : Update.

2010-07-20 Etsushi Kato <ek.kato@gmail.com>

    * helper/toolbar-common-gtk.c (toolbar_new) : Add a comment.

2010-07-20 Etsushi Kato <ek.kato@gmail.com>

    * scm/im-custom.scm (annotation-eb-dic-path)
      - Fix duplicate custom-activity-hooks.

2010-07-20 Etsushi Kato <ek.kato@gmail.com>

    * Support ACT and KZIK Japanese rules (Haruhiro Yoshimoto, Ohashi
      Hideya [uim-ja 181]).
    
    * pixmaps/ja_kzik.svg
    * pixmaps/ja_act.svg
      - New icons.
    * pixmaps/AUTHORS
    * pixmaps/Makefile.am (SVGS, SVG_PNGS)
      - Update for new icons.
    * scm/ajax-ime-custom.scm
    * scm/mana-custom.scm
    * scm/anthy-custom.scm
    * scm/canna-custom.scm
    * scm/skk-custom.scm
    * scm/wnn-custom.scm
    * scm/yahoo-jp-custom.scm
    * scm/sj3-custom.scm
    * scm/social-ime.custom.scm
    * scm/anthy-utf8-custom.scm
      - (*-kana-input-method-indication-alist) : Support new
        tables.
    * scm/anthy-utf8.scm : Don't load additional tables implicitly.
      - (anthy-input-rule-act) : New.
      - (anthy-input-rule-kzik) : Ditto.
      - (action_anthy_utf8_kana) : Require rule table conditionally.
      - (action_anthy_utf8_kzik) : New.
      - (action_anthy_utf8_act) : Ditto.
      - (anthy-utf8-context-new) : Remove obsolete code.
      - (anthy-utf8-proc-input-state-no-preedit) : Support new table.
    * scm/mana.scm
    * scn/wnn.scm
    * scm/canna.scm
    * scm/ajax-ime.scm
    * scm/anthy.scm
    * scm/yahoo-jp.scm
    * scm/mana.scm
    * scm/sj3.scm
      - Likewise.
    * scm/skk.scm
      - (skk-okuri-char-alist)
      - (skk-downcase-alist)
      - (skk-set-henkan-point-key)
      - (skk-ichar-downcase)
      - (skk-ichar-upper-case?)
      - (skk-context-set-okuri-head-using-alist!)
      - (skk-input-rule-act)
      - (skk-input-rule-kzik)
      - (action_skk_act)
      - (action_skk_kzik)
        - New.
      - (skk-set-rule!)
        - Set input rule, skk-okuri-char-alist, skk-downcase-alist,
          and skk-set-henkan-point-key conditionally.
      - (skk-proc-state-direct) : Use skk-ichar-downcase and
        skk-ichar-upper-case?
      - (skk-proc-state-kanji) : Ditto.  And use
        skk-context-set-okuri-head-using-alist!,
        skk-set-henkan-point-key.
      - (skk-proc-state-okuri) : Use skk-ichar-downcase and
        skk-context-set-okuri-head-using-alist!.
    * scm/japanese-azik.scm
      - (ja-azik-skk-okuri-char-alist)
      - (ja-azik-skk-downcase-alist)
      - (ja-azik-skk-set-henkan-point-key)
        - New.
    * scm/japanese-act.scm
      - New file.
      - (ja-act-rule-basic)
      - (ja-act-rule)
      - (ja-act-skk-okuri-char-alist)
      - (ja-act-skk-downcase-alist)
      - (ja-act-skk-set-henkan-point-key)
        - New.
    * scm/japanese-kzik.scm
      - New file.
      - (ja-kzik-rule-basic)
      - (ja-rk-rule-basic-kzik-changeset)
      - (ja-rk-kzik-apply-changeset)
      - (ja-kzik-rule)
        - New.
    * scm/japanese.scm
      - (using-kana-table?)
      - (load-kana-table)
      - (load-azik-table)
        - Remove obsolete codes.
    * scm/Makefile.am (SCM_FILES)
      - Update.
    * scm/ichar.scm (alist->icharlist)
      - New.

2010-07-19 KIHARA Hideto <deton@m1.interq.or.jp>

    * po/ja.po
      - Add translation about tutcode.

2010-07-19 Jae-hyeon Park <jhyeon@gmail.com>

    * NEWS
      - added news on uim-elatin

2010-07-19 Etsushi Kato <ek.kato@gmail.com>

    * po/ja.po : Clear fuzzy.  Please translate these.

2010-07-19 Etsushi Kato <ek.kato@gmail.com>

    * po/fr.po : Clear fuzzy.

2010-07-19 Etsushi Kato <ek.kato@gmail.com>

    * po/fr.po
    * po/ko.po
    * po/ja.po
      - do make update-po.

2010-07-19 Etsushi Kato <ek.kato@gmail.com>

    * qt4/chardict/Makefile.am : Fix typo.

2010-07-19 KIHARA Hideto <deton@m1.interq.or.jp>

    * scm/tutcode.scm
      - (tutcode-context-new):
        Change not to reload tutcode-rule file for child context.

2010-07-19 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/candidatetablewindow.cpp
      - (CandidateTableWindow::sizeHint): Simplify.
        Don't take the size of spacers into account.

2010-07-19 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/candidatetablewindow.cpp
      - (CandidateTableWindow::CandidateTableWindow): Add lLayout and rLayout
        to member variables of CandidateTableWindow.
      - (CandidateTableWindow::sizeHint): New function.
      - (CandidateTableWindow::slotCandidateClicked): Adjust size.
    * qt4/immodule/candidatetablewindow.h
      - (CandidateTableWindow): Declare CandidateTableWindow::sizeHint().

2010-07-19 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/candidatetablewindow.cpp
      - (CandidateTableWindow::updateView): Optimize.

2010-07-19 KIHARA Hideto <deton@m1.interq.or.jp>

    * scm/tutcode-custom.scm
      - (tutcode-auto-help-with-real-keys?): New variable and hook.
    * scm/tutcode.scm
      - (tutcode-check-auto-help-window-begin):
        Add support for normal candidate window.
      - (tutcode-auto-help-update-stroke-alist-normal,
        tutcode-auto-help-update-stroke-alist-normal-with-kanji,
        tutcode-auto-help-update-stroke-alist-normal-with-stroke): New.

2010-07-19 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/candidatetablewindow.cpp
      - (CandidateTableWindow::updateSize): Show blockAS
        when both blockA and blockLRS aren't empty.

2010-07-19 KIHARA Hideto <deton@m1.interq.or.jp>

    * Add latin conversion (SKK abbrev conversion) to tutcode.
    * scm/tutcode-key-custom.scm
      - (tutcode-latin-conv-start-sequence): New.
    * scm/tutcode.scm
      - (tutcode-context-rec-spec): Add latin-conv flag.
      - (tutcode-flush): Add reset of latin-conv flag.
      - (tutcode-check-stroke-help-window-begin): Add mark for latin-conv.
      - (tutcode-proc-state-on):
        Add check of tutcode-latin-conv-start key sequence.
      - (tutcode-proc-state-yomi): Change to support latin conversion.
      - (tutcode-proc-state-bushu): Ditto.
      - (tutcode-custom-set-mazegaki/bushu-start-sequence!):
        Add tutcode-latin-conv-start key sequence.

2010-07-18 Jae-hyeon Park <jhyeon@gmail.com>

    * po/ko.po
      - more translations

2010-07-18 Jae-hyeon Park <jhyeon@gmail.com>

    * scm/elatin.scm
      - (elatin-find-partial-matches): rewritten using C-lib procedures
        rk-lib-find-partial-seqs and rk-lib-find-seq

2010-07-18 KIHARA Hideto <deton@m1.interq.or.jp>

    * scm/tutcode-editor.scm
      - New file.
    * scm/tutcode-dialog.scm
      - New file.

2010-07-18 KIHARA Hideto <deton@m1.interq.or.jp>

    * Add function to register or purge entry in mazegaki dictionary.
    * scm/Makefile.am
      - (SCM_FILES): Add tutcode-editor.scm and tutcode-dialog.scm
    * scm/tutcode-key-custom.scm
      - (tutcode-register-candidate-key, tutcode-purge-candidate-key): New.
    * scm/tutcode-custom.scm
      - (tutcode-use-recursive-learning?): New.
    * scm/tutcode.scm
      - (action_tutcode_direct, action_tutcode_hiragana, action_tutcode_katakana,
        action_tutcode_kigou): Change to support child context.
      - (tutcode-context-rec-spec): Add child-context, child-type,
        parent-context, editor and dialog.
      - (tutcode-context-new): Add initialization for editor and dialog.
      - (tutcode-find-root-context, tutcode-find-descendant-context): New.
      - (tutcode-save-personal-dictionary): Add parameter force?.
      - (tutcode-flush): Change to support child context.
      - (tutcode-prepare-commit-string):
        Follow parameter addition of tutcode-save-personal-dictionary.
      - (tutcode-commit-raw, tutcode-commit): New.
      - (tutcode-commit-with-auto-help):
        Change to call tutcode-commit instead of im-commit for editor.
      - (tutcode-commit-by-label-key-for-kigou-mode): Ditto.
      - (tutcode-purge-candidate): New.
      - (tutcode-begin-conversion): Add editor start.
      - (tutcode-setup-child-context): New.
      - (tutcode-check-candidate-window-begin): Simplify condition check.
      - (tutcode-do-update-preedit): New.
      - (tutcode-update-preedit): Change to support child context.
      - (tutcode-commit-editor-context): New.
      - (tutcode-proc-state-on, tutcode-proc-state-off, tutcode-proc-state-kigou,
        tutcode-proc-state-yomi, tutcode-proc-state-bushu,
        tutcode-proc-state-converting):
        Change to support child context.
      - (tutcode-change-candidate-index):
        Change to support editor context.
      - (tutcode-back-to-converting-state): New.
      - (tutcode-state-has-preedit?): Change to support child context.
      - (tutcode-key-press-handler): Ditto.
      - (tutcode-release-handler):
        Follow parameter addition of tutcode-save-personal-dictionary.
      - (tutcode-focus-out-handler, tutcode-get-candidate-handler,
        tutcode-get-candidate-handler, tutcode-set-candidate-index-handler):
        Change to support child context.

2010-07-18 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/chardict/po/ja.po
      - Correct mistake.

2010-07-18 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/chardict/po/ja.po
      - Update.
    * qt4/chardict/qt4.cpp
      - (KUimCharDict::setupWidgets): Add clear button.

2010-07-18 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/candidatetablewindow.cpp
      - (CandidateTableWindow::updateView): Optimize.

2010-07-18 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/candidatetablewindow.cpp
      - (CandidateTableWindow::updateView): Fix bug in button state.

2010-07-18 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/candidatetablewindow.cpp
      - (CandidateTableWindow::CandidateTableWindow): Call initTable()
        before createLayout().
      - (CandidateTableWindow::createLayout): Hide button in this function.
      - (CandidateTableWindow::updateView): Don't hide button in this function.

2010-07-18 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/candidatetablewindow.cpp
      - (CandidateTableWindow::createLayout): Adjust layout by adding spacer.

2010-07-18 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/candidatetablewindow.cpp
      - (CandidateTableWindow::updateView):
        Disable button only when text is empty.

2010-07-18 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/candidatetablewindow.cpp
      - (CandidateTableWindow::getPosition): Optimize.

2010-07-18 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/candidatetablewindow.cpp
      - (CandidateTableWindow::updateView): Fix position of buttons.
      - (CandidateTableWindow::getPosition): New function.
    * qt4/immodule/candidatetablewindow.h
      - (CandidateTableWindow::getPosition): New function.

2010-07-17 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/candidatetablewindow.cpp
      - (CandidateTableWindow::setBlockVisible): Don't show flat button.
      - (CandidateTableWindow::updateView): set button flat
        when corresponding value in table is '\0'.

2010-07-17 Konosuke Watanabe <sasugaanija@gmail.com>

    * emacs/uim-util.el
      - (uim-goto-char): Fix bug
         When two or more windows display a common buffer in the
         single frame (ex. type C-x 2) and uim.el shows candidates
         in one of the window, other windows scroll automatically
         and display the region same to the current focused buffer.
         This bug only appears under Emacs-23.x (probably, it's caused
         by strange behavior of get-buffer-window function).

2010-07-17 KIHARA Hideto <deton@m1.interq.or.jp>

    * scm/tutcode.scm
      - (tutcode-auto-help-cand-str-list):
        Change each list up to three strings to avoid confusion
        if complicated bushu conversion which uses three or more bushu is supported
      - (tutcode-auto-help-update-stroke-alist-with-stroke):
        Follow the change of tutcode-auto-help-cand-str-list

2010-07-17 KIHARA Hideto <deton@m1.interq.or.jp>

    * Change to show bushu conversion candidate which has shorter stroke length
      on auto help window
    * Change for performance on auto help
    * scm/tutcode.scm
      - (tutcode-reverse-rule-alist, tutcode-reverse-bushudic-alist): New
      - (tutcode-bushu-decompose):
        Change to make and use tutcode-reverse-bushudic-alist for performance
      - (tutcode-auto-help-bushu-decompose):
        Follow the change of tutcode-reverse-find-seq.
        Follow the change of tutcode-auto-help-bushu-decompose-by-subtraction.
        Follow the change of tutcode-auto-help-bushu-decompose-with-part.
      - (tutcode-auto-help-bushu-decompose-looking-bushudic): New
      - (tutcode-auto-help-bushu-decompose-by-subtraction):
        Change to call tutcode-auto-help-bushu-decompose-looking-bushudic
      - (tutcode-auto-help-count-stroke-length): New
      - (tutcode-auto-help-get-stroke-list-by-subtraction):
        Change to check stroke length before bushu conversion for performance
      - (tutcode-auto-help-bushu-decompose-with-part): Remove
      - (tutcode-auto-help-get-stroke-list-with-right-part,
         tutcode-auto-help-get-stroke-list-with-left-part):
        Split from tutcode-auto-help-get-stroke-list-with-part
      - (tutcode-auto-help-get-stroke-list-with-part):
        Split to tutcode-auto-help-get-stroke-list-with-right-part and
        tutcode-auto-help-get-stroke-list-with-left-part
      - (tutcode-reverse-find-seq):
        Change to make and use tutcode-reverse-rule-alist for performance
      - (tutcode-auto-help-update-stroke-alist-with-kanji):
        Follow the change of tutcode-reverse-find-seq
      - (tutcode-auto-help-get-stroke): Ditto

2010-07-16 Etsushi Kato <ek.kato@gmail.com>

    * gtk/uim-cand-win-gtk.c
    * helper/candwin-gtk.c
    * helper/pref-gtk-custom-widgets.c
    * helper/im-switcher-gtk.c
    * helper/pref-gtk.c*
      - Revise r6513.  Attributes name of va_arg is const gchar *.

2010-07-15 IWATA Ray <iwata@quasiquote.org>

    * helper/pref-gtk.c (create_pref_treeview):
    * helper/pref-gtk-custom-widgets.c (custom_pathname_button_clicked_cb)
      (choose_olist_clicked_cb, choose_key_clicked_cb):
    * helper/im-switcher-gtk.c (create_switcher_treeview):
    * helper/candwin-gtk.c (candidate_window_init):
    * gtk/uim-cand-win-gtk.c (uim_cand_win_gtk_init):
      - Cast to pointer, Don't set a null pointer constant.

2010-07-15 Etsushi Kato <ek.kato@gmail.com>

    * make-dist.sh (SSCM_URL) : Update.

2010-07-15 Etsushi Kato <ek.kato@gmail.com>

    * helper/toolbar-common-gtk.c (toolbar_new) : Disable uim-custom
      for now.

2010-07-15 Etsushi Kato <ek.kato@gmail.com>

    * uim/libtool-version.mk (libuim_custom_version) : An interface
      has been added.

2010-07-15 Etsushi Kato <ek.kato@gmail.com>

    * doc/COMPATIBILITY : Update.

2010-07-15 Etsushi Kato <ek.kato@gmail.com>

    * uim/uim-custom.h : Add new API uim_custom_save_custom().
    * uim/uim-custom.c
      - (uim_custom_save) : Fix indent.
      - (uim_custom_save_custom) : New.  Save a primary group file of
        which custom variable belongs.
      - (uim_custom_get_primary_group_by_custom) : New.
    
    * helper/toolbar-common-gtk.c : Save default IM upon IM switch if
      system-global coverage is set.
      - (save_default_im) : New.
      - (is_msg_imsw) : Ditto.
      - (is_imsw_coverage_system_global) : Ditto.
      - (get_imsw_im) : Ditto.
      - (prop_menu_activate) : Save selected IM as a default IM when
        system global coverage is set.
      - (toolbar_new) : Call uim_custom_enable().
    * helper/im-switcher-gtk.c : Save default IM upon IM switch if
      system global coverage is selected.  Add apply button.
      - (save_default_im) : New.
      - (change_input_method) : Save IM upon im_change_whole_desktop.
      - (change_input_method_and_quit) : New.
      - (create_switcher) : Add apply button.
      - (main) : Call uim_init() and uim_custom_enable().
    * helper/Makefile.am
      - (uim_toolbar_applet_LDADD)
      - (uim_toolbar_gtk_LDADD)
      - (uim_toolbar_gtk_systray_LDADD)
      - (uim_im_switcher_gtk_LDADD)
        - Link appropriately.

2010-07-15 Etsushi Kato <ek.kato@gmail.com>

    * helper/pref-gtk.c : Cosmetic changes.

2010-07-15 Etsushi Kato <ek.kato@gmail.com>

    * xim/uim-xim.1 : s/UIM/uim/

2010-07-15 Etsushi Kato <ek.kato@gmail.com>

    * qt4/chardict/Makefile.am (distclean) : distclean SUBDIRS (apply
      from  Debian's 14_distclean_qt4.dpatch).

2010-07-15 Etsushi Kato <ek.kato@gmail.com>

    * Apply patch to handle EOF or I/O error conditions (Debian bug
      #566791 by Jun Inoue)
    
    * emacs/uim-el-helper-agent.c
      - Include errno.h.
      - (read_command) : Change return type and check EOF or error.
      - (main) : Exit if read_command() failed.
    * emacs/uim-el-helper-agent.h
      - Update return type of read_command().
    * emacs/uim-el-agent.c (main)
      - Include errno.h.
      - (main) : Check EOF or error.

2010-07-15 Etsushi Kato <ek.kato@gmail.com>

    * helper/eggtrayicon.c : Support glib-2 <= 2.13.0.

2010-07-14 Etsushi Kato <ek.kato@gmail.com>

    * helper/eggtrayicon.c
    * helper/eggtrayicon.h
      - Support transparent and pixmap background with recent
        gnome-panel by using code from gtktrayicon-x11.c (bug #28999).

2010-07-12 KIHARA Hideto <deton@m1.interq.or.jp>

    * scm/tutcode.scm
      - (tutcode-auto-help-update-stroke-alist-with-kanji):
        Move call of tutcode-auto-help-bushu-decompose-by-subtraction
        to tutcode-auto-help-bushu-decompose
      - (tutcode-auto-help-bushu-decompose):
        Add decomposition of bushu1 and kanji which has bushu2
      - (tutcode-auto-help-get-stroke):
        Change return list structure
      - (tutcode-auto-help-get-stroke-list-by-subtraction):
        Follow change of tutcode-auto-help-get-stroke
      - (tutcode-auto-help-bushu-decompose-with-part,
         tutcode-auto-help-get-stroke-list-with-part): New
      - (tutcode-reverse-find-seq): Add comment

2010-07-11 KIHARA Hideto <deton@m1.interq.or.jp>

    * scm/tutcode-key-custom.scm
      - (tutcode-stroke-help-toggle-key): New
    * scm/tutcode.scm
      - (tutcode-toggle-stroke-help): New function to temporarily toggle
        use of stroke help window
      - (tutcode-proc-state-on, tutcode-proc-state-yomi,
         tutcode-proc-state-bushu): Add check of tutcode-stroke-help-toggle-key

2010-07-08 Etsushi Kato <ek.kato@gmail.com>

    * po/ja.po : Update.

2010-07-07 Etsushi Kato <ek.kato@gmail.com>

    * po/fr.po
    * po/ko.po
    * po/ja.po
      - Update.

2010-07-07 Etsushi Kato <ek.kato@gmail.com>

    * helper/dict-word-list-view-gtk.c
    * scm/dict-socket.scm
      - Fix typo.

2010-07-06 Etsushi Kato <ek.kato@gmail.com>

    * po/fr.po
    * po/ko.po
      - Remove fuzzy.

2010-07-06 Etsushi Kato <ek.kato@gmail.com>

    * po/ja.po : Fix fuzzy.

2010-07-06 Etsushi Kato <ek.kato@gmail.com>

    * po/fr.po
    * po/ko.po
    * po/ja.po
      - Update.

2010-07-06 Etsushi Kato <ek.kato@gmail.com>

    * po/POTFILES.in
    * po/fr.po
    * po/ko.po
    * po/ja.po
      - Update.

2010-07-05 Etsushi Kato <ek.kato@gmail.com>

    * helper/candwin-gtk.c
    * gtk/uim-cand-win-gtk.c
      - (uim_cand_win_gtk_create_sub_window) : Set limit of y
        position.

2010-07-05 Etsushi Kato <ek.kato@gmail.com>

    * helper/candwin-gtk.c
      - (UIM_ANNOTATION_WIN_HEIGHT) : Modified.
      - (uim_cand_win_gtk_create_sub_window) : Fix typo.
      - (uim_cand_win_gtk_layout_sub_window) : Set window y position
        at the selected row.
    * gtk/uim-cand-win-gtk.c
      - (UIM_ANNOTATION_WIN_HEIGHT) : Modified.
      - (uim_cand_win_gtk_layout_sub_window) : Set window y position
        at the selected row.

2010-07-04 KIHARA Hideto <deton@m1.interq.or.jp>

    * scm/tutcode.scm
      - (tutcode-check-auto-help-window-begin,
         tutcode-auto-help-update-stroke-alist): Rewrite using recursive call
      - (tutcode-auto-help-update-stroke-alist-with-kanji,
         tutcode-auto-help-update-stroke-alist-with-stroke,
         tutcode-auto-help-update-stroke-alist-with-key): New function

2010-07-04 KIHARA Hideto <deton@m1.interq.or.jp>

    * scm/tutcode.scm
      - (tutcode-auto-help-cand-str-list): Add list for bushu
      - (tutcode-check-auto-help-window-begin):
        Extract help-one to tutcode-auto-help-update-stroke-alist
      - (tutcode-auto-help-update-stroke-alist):
        New function extracted from tutcode-check-auto-help-window-begin.
        Change to show bushu conversion candidates
      - (tutcode-auto-help-bushu-decompose,
         tutcode-auto-help-get-stroke
         tutcode-auto-help-bushu-decompose-by-subtraction,
         tutcode-auto-help-get-stroke-list-by-subtraction):
        New function to show bushu conversion candidates on auto help

2010-07-03 IWATA Ray <iwata@quasiquote.org>

    * scm/ajax-ime.scm (ajax-ime-init-handler, ajax-ime-url-alist):
    * scm/ajax-ime-custom.scm (ajax-ime-url):
      - Drop ChaIME.

2010-07-03 KIHARA Hideto <deton@m1.interq.or.jp>

    * gtk/gtk-im-uim.c
      - (cand_activate_cb): Change value of accel_enumeration_hint
        for table style candidate window workaround (r6443)
        to avoid assertion failure in uim_get_candidate()
    * xim/canddisp.cpp
      - (Canddisp::adjust_display_limit): Ditto
    * scm/tutcode.scm
      - (tutcode-get-candidate-handler): Ditto

2010-07-02 Etsushi Kato <ek.kato@gmail.com>

    * scm/im-custom.scm (annotation-agent) : Update description.

2010-06-27 KIHARA Hideto <deton@m1.interq.or.jp>

    * scm/tutcode.scm
      - Update some comments
      - (tutcode-check-stroke-help-window-begin):
        Change to skip needless candidates

2010-06-27 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/abstractcandidatewindow.cpp
      - (AbstractCandidateWindow::setCandidates): Cosmetic change.
      - (AbstractCandidateWindow::setPage): Move from CandidateWindow
        and CandidateTableWindow.
    * qt4/immodule/abstractcandidatewindow.h
      - (AbstractCandidateWindow): Add updateView() and updateSize().
    * qt4/immodule/candidatetablewindow.cpp
      - (CandidateTableWindow::setTable): Rename to updateSize().
      - (CandidateTableWindow::setPage): Move to AbstractCandidateWindow.
      - (CandidateTableWindow::updateView): New function.
    * qt4/immodule/candidatetablewindow.h
      - Ditto.
    * qt4/immodule/candidatewindow.cpp
      - (CandidateWindow::setPage): Move to AbstractCandidateWindow.
      - (CandidateWindow::updateView, CandidateWindow::updateSize):
        New function.
    * qt4/immodule/candidatewindow.h
      - Ditto.

2010-06-27 IWATA Ray <iwata@quasiquote.org>

    * configure.ac:
      - Skip pkg-config checking for remote-prime-server-only environment.

2010-06-27 KIHARA Hideto <deton@m1.interq.or.jp>

    * scm/tutcode.scm
      - (tutcode-check-stroke-help-window-begin):
        Fix for multiple candidates of same sequence.
        Change candidate order for normal candwin

2010-06-27 KIHARA Hideto <deton@m1.interq.or.jp>

    * scm/tutcode.scm
      - (tutcode-check-stroke-help-window-begin):
        Fix to use tutcode-nr-candidate-max-for-kigou-mode for normal candwin
      - (tutcode-check-auto-help-window-begin): Ditto

2010-06-27 KIHARA Hideto <deton@m1.interq.or.jp>

    * scm/tutcode.scm
      - (tutcode-heading-label-char-list-for-stroke-help): Remove
      - (tutcode-check-stroke-help-window-begin):
        Rewrite to use rk-lib-find-partial-seqs
      - (tutcode-check-auto-help-window-begin):
        Add null check of label-cands-alist before map

2010-06-26 KIHARA Hideto <deton@m1.interq.or.jp>

    * Add auto help for tutcode
    * scm/tutcode-custom.scm
      - (tutcode-use-auto-help-window?): New
    * scm/tutcode.scm
      - (tutcode-auto-help-cand-str-list): New variable
      - (tutcode-commit-with-auto-help): New function
      - (tutcode-check-auto-help-window-begin): New function
      - (tutcode-commit-by-label-key): Change to use tutcode-commit-with-auto-help
      - (tutcode-proc-state-converting): Ditto
      - (tutcode-set-candidate-index-handler): Ditto
      - (tutcode-begin-conversion): Change to use tutcode-commit-with-auto-help.
        Follow the value type change of candidate-window
      - (tutcode-proc-state-bushu):
        Add call of tutcode-check-auto-help-window-begin.
        Follow the value type change of candidate-window
      - (tutcode-get-candidate-handler): Add check of tutcode-use-auto-help-window?
    
      - (tutcode-bushu-decompose): Change to call tutcode-reverse-find-seq
      - (tutcode-reverse-find-seq): New function
    
      - (candidate-window): Change value type from boolean to symbol
      - (tutcode-begin-kigou-mode):
        Follow the value type change of candidate-window
      - (tutcode-check-candidate-window-begin): Ditto
      - (tutcode-check-stroke-help-window-begin): Ditto
      - (tutcode-proc-state-kigou): Ditto
      - (tutcode-change-candidate-index): Ditto
      - (tutcode-reset-candidate-window): Ditto

2010-06-23 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/candidatetablewindow.cpp
      - (CandidateTableWindow::setIndex):
        Override AbstractCandidateWindow::setIndex().
        Call updateLabel() inside this function.
    * qt4/immodule/candidatetablewindow.h
      - (CandidateTableWindow): Ditto.

2010-06-23 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/candidatetablewindow.cpp
      - Sort position of function definitions.
    * qt4/immodule/candidatetablewindow.h
      - Sort position of function declarations.

2010-06-22 IWATA Ray <iwata@quasiquote.org>

    * scm/annotation-filter.scm (annotation-filter-open-unix-domain-socket)
      (annotation-filter-open-with-tcp-socket)
      (annotation-filter-open-with-pipe):
      - New function.
      (annotation-filter-init):
      - Check server type.
      (annotation-filter-release):
      - Close ports.
    * scm/im-custom.scm (annotation-filter-server-setting?)
      (annotation-filter-unix-domain-socket-path)
      (annotation-filter-tcpserver-name)
      (annotation-filter-tcpserver-port):
      - Add new custom variables.

2010-06-22 IWATA Ray <iwata@quasiquote.org>

    * scm/socket.scm (tcp-connect):
      - Return #f when connect failed, not list.

2010-06-21 IWATA Ray <iwata@quasiquote.org>

    * scm/annotation-filter.scm:
      - New file.
    * scm/Makefile.am (SCM_FILES):
      - Add annotation-filter.scm
    * scm/im-custom.scm (annotation-filter-command):
      - Add custom value.

2010-06-21 IWATA Ray <iwata@quasiquote.org>

    * scm/annotation.scm (annotation-load):
      - Add annotation- prefix.
    * scm/im-custom.scm (eb-enable-for-annotation?)
      (annotation-dict-server, annotation-dict-servname)
      (annotation-dict-database, annotation-dict-cache-words):
    * scm/annotation-eb.scm (annotation-eb-init)
      (annotation-eb-get-text, annotation-eb-release):
    * scm/annotation-dict.scm (annotation-dict-get-text-from-server)
      (annotation-dict-get-text-with-cache, annotation-dict-get-text)
      (annotation-dict-release):
      - Ditto.

2010-06-21 IWATA Ray <iwata@quasiquote.org>

    * scm/dict-socket.scm:
    * scm/annotation-dict.scm:
      - New file.
    * scm/Makefile.am (SCM_FILES):
      - Add dict-socket.scm and annotation-dict.scm.
    * scm/im-custom.scm (annotation-agent):
      - Add dict.
      (dict-server, dict-servname, dict-database, dict-cache-words):
      - Add custom value.
    
      Add supporting rfc2229 dict protocol.

2010-06-21 IWATA Ray <iwata@quasiquote.org>

    * scm/look.scm (look-context-new, look-release-handler):
      - Change calling eb function to annotate one.
      (look-format-annotation):
      - Rename.
      (look-update-preedit):
      - Sync.
    * scm/look-custom.scm (look-use-annotation?)
      (look-annotation-show-lines):
      - Rename "-eb-" to "-annotation-".
      (look-eb-dict-path):
      - Remove.
    
      Change to use annotation framework.

2010-06-21 Etsushi Kato <ek.kato@gmail.com>

    * uim/uim-eb.c (uim_eb_destroy) : Finalize book.

2010-06-21 Etsushi Kato <ek.kato@gmail.com>

    * scm/im-scm (get-candidate) : Fix to use IM encoding to retrieve
      annotation text.
    * scm/annotation.scm
      - (annotation-get-text) : Use encoding argument.
      - (annotation-agent-reset) : Ditto.
    * uim/eb.c
      - (c_uim_eb_search_text) : Use encoding argument.
      - (uim_plugin_instance_init) : Follow the change.
    * uim/uim-eb.c
      - (go_text_eb) : Use encoding.
      - (uim_eb_search_text) : Ditto.
    * uim/uim-eb.h : Update declaration of uim_eb_search_text.
    * scm/look.scm (look-format-eb) : Follow the change in
      eb-search-text.
    * scm/annotation-eb.scm (eb-get-text) : Ditto.

2010-06-21 IWATA Ray <iwata@quasiquote.org>

    * uim/uim-eb.c (uim_eb_close):
      - Oops.

2010-06-21 IWATA Ray <iwata@quasiquote.org>

    * uim/uim-eb.c (uim_eb_init, uim_eb_finalize):
      - New functions.
    * uim/uim-eb.h:
      - Add prototypes.
    * uim/uim-eb.c (uim_eb_new):
    * uim/uim-eb.c (uim_eb_destroy):
      - Remove init/finalize().
    * uim/eb.c (uim_plugin_instance_init):
    * uim/eb.c (uim_plugin_instance_quit):
      - Add init/finalize().
    
     eb_initialize_library/eb_finalize_library() are called only once.

2010-06-20 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/candidatetablewindow.cpp
      - (CandidateTableWindow::CandidateTableWindow): Cosmetic change.
      - (initTableInternal): Use uim_scm_c_str to convert list to array.

2010-06-20 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/candidatetablewindow.cpp
      - Add TABLE_NR_CELLS.
      - (CandidateTableWindow::~CandidateTableWindow):
        New destructor to free table.
      - (initTableInternal): New function.
      - (CandidateTableWindow::initTable): Call initTableInternal
        to add support for "uim-candwin-prog-layout".
    * qt4/immodule/candidatetablewindow.h
      - (CandidateTableWindow): Add destructor.

2010-06-20 KIHARA Hideto <deton@m1.interq.or.jp>

    * scm/tutcode.scm
      - (tutcode-check-stroke-help-window-begin): Fix assertion `len' failure
        in uim_cand_win_tbl_gtk_set_page when type key which is
        not in tutcode-heading-label-char-list-for-stroke-help

2010-06-20 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/Makefile.am
      - (EXTRA_DIST): Add candidatetablewindow.h and candidatetablewindow.cpp.
    * qt4/immodule/candidatetablewindow.cpp
      - New file.
    * qt4/immodule/candidatetablewindow.h
      - New file.
    * qt4/immodule/quiminputcontext.cpp
      - (QUimInputContext::createCandidateWindow):
        Use CandidateTableWindow when the value of "uim-candwin-prog"
        is "uim-candwin-tbl".
    * qt4/immodule/quiminputcontextplugin.pro.in
      - (HEADERS): Add candidatetablewindow.h.
      - (SOURCES): Add candidatetablewindow.cpp.

2010-06-20 Muneyuki Noguchi <nogu.dev@gmail.com>

    * gtk/uim-cand-win-tbl-gtk.c
      - (uim_cand_win_tbl_gtk_dispose):
        Remove redundant NULL check before g_free().
    * fep/callbacks.c
      - (commit_cb, free_preedit): Remove redundant NULL check before free().
    * fep/draw.c
      - (erase_preedit, set_line2width): Ditto.
    * gtk/compose.c
      - (parse_compose_line): Ditto.
    * gtk/gtk-im-uim.c
      - (im_uim_create_cand_win_gtk): Ditto.
    * gtk/uim-cand-win-tbl-gtk.c
      - (init_labelchar_table): Ditto.
    * helper/dict-word.c
      - (word_append): Ditto.
    * qt/immodule-quiminputcontext_compose.cpp
      - (QUimInputContext::parse_compose_line): Ditto.
    * qt4/immodule/quiminputcontext_compose.cpp
      - (QUimInputContext::parse_compose_line): Ditto.
    * replace/bsd-poll.c
      - (poll): Ditto.
    * xim/compose.cpp
      - (XimIM::parse_compose_line): Ditto.
    * xim/convdisp.cpp
      - (ConvdispOs::compose_preedit_array): Ditto.
    * xim/ximic.cpp
      - (icxatr::getSize): Ditto.
    * xim/ximim.cpp
      - (XimIM_impl::changeContext, XimIM::FreeComposeTree,
        XimIM::get_encoding): Ditto.
    * xim/ximserver.cpp
      - (XimServer::getIMLang): Ditto.

2010-06-19 KIHARA Hideto <deton@m1.interq.or.jp>

    * Add feature to show candidate table on next key for tutcode
    
    * scm/tutcode-custom.scm
      - (tutcode-use-stroke-help-window?): New custom variable
    
    * scm/tutcode.scm
      - (tutcode-heading-label-char-list-for-stroke-help): New variable
      - (tutcode-context-rec-spec): Add stroke-help
      - (tutcode-check-stroke-help-window-begin): New function
      - (tutcode-proc-state-on): Add call of tutcode-check-stroke-help-window-begin
      - (tutcode-proc-state-yomi): Ditto
      - (tutcode-proc-state-bushu): Ditto
      - (tutcode-get-candidate-handler): Add return of stroke-help

2010-06-19 KIHARA Hideto <deton@m1.interq.or.jp>

    * Replace labelchar_table with tbl_cell2label,
      LABELCHAR_NR_COLUMNS with TABLE_NR_COLUMNS,
      LABELCHAR_NR_ROWS with TABLE_NR_ROWS,
      LABELCHAR_NR_CELLS with TABLE_NR_CELLS,
      INDEX with CELLINDEX
    
    * gtk/uim-cand-win-tbl-gtk.h
      - (_UIMCandWinTblGtk): Rename labelchar_table to tbl_cell2label
    * gtk/uim-cand-win-tbl-gtk.c
      - (LISTSTORE_NR_COLUMNS): Rename from NR_COLUMNS
      - (TABLE_NR_COLUMNS): Rename from LABELCHAR_NR_COLUMNS
      - (TABLE_NR_ROWS): Rename from LABELCHAR_NR_ROWS
      - (TABLE_NR_CELLS): Rename from LABELCHAR_NR_CELLS
      - (CELLINDEX): Rename from INDEX
      - (default_tbl_cell2label): Rename from default_labelchar_table
      - (init_tbl_cell2label): Rename from init_labelchar_table
    
    * helper/candwin-tbl-gtk.c
      - (_UIMCandidateWindow): Rename labelchar_table to tbl_cell2label
      - (LISTSTORE_NR_COLUMNS): Rename from NR_COLUMNS
      - (TABLE_NR_COLUMNS): Rename from LABELCHAR_NR_COLUMNS
      - (TABLE_NR_ROWS): Rename from LABELCHAR_NR_ROWS
      - (TABLE_NR_CELLS): Rename from LABELCHAR_NR_CELLS
      - (CELLINDEX): Rename from INDEX
      - (default_tbl_cell2label): Rename from default_labelchar_table
      - (init_tbl_cell2label): Rename from init_labelchar_table

2010-06-19 KIHARA Hideto <deton@m1.interq.or.jp>

    * helper/candwin-tbl-gtk.c
      - (clear_all_buttons): Fix not to skip clearing unused buttons,
        otherwise button becomes too thin on candwin-tbl-gtk

2010-06-19 KIHARA Hideto <deton@m1.interq.or.jp>

    * gtk/uim-cand-win-tbl-gtk.c
      - (button_clicked): Fix not to use relief to check whether button has cand
      - (is_empty_block): Ditto
    * helper/candwin-tbl-gtk.c
      - (button_clicked): Ditto
      - (is_empty_block): Ditto

2010-06-19 KIHARA Hideto <deton@m1.interq.or.jp>

    * gtk/uim-cand-win-tbl-gtk.c
      - (init_labelchar_table): Add uim_scm_strp() check before uim_scm_c_str()
    * helper/candwin-tbl-gtk.c
      - (init_labelchar_table): Add commented out uim_scm_strp() check
        for investigation (instead of ignoreing silently in uim-cand-win-tbl-gtk.c)

2010-06-18 KIHARA Hideto <deton@m1.interq.or.jp>

    * Change to skip needless button clearing for already cleaned buttons,
      because many buttons are not used on some heading label char list.
    
    * gtk/uim-cand-win-tbl-gtk.c
      - (uim_cand_win_tbl_gtk_init): Change to call clear_button on button init
      - (clear_button): New function split from clear_buttons
      - (clear_all_buttons): Rename from clear_buttons.
        Change to call clear_button
      - (assign_cellbutton): Change labelchar_table argument to const.
        Change argument buttons to first argument
      - (update_table_button): Change labelchar_table argument to const.
        Follow the change of clear_buttons rename.
        Follow the change of argument order of assign_cellbutton
    
    * helper/candwin-tbl-gtk.c
      - (candidate_window_init): Change to call clear_button on button init
      - (clear_button): New function split from clear_buttons
      - (clear_all_buttons): Rename from clear_buttons.
        Change to call clear_button
      - (assign_cellbutton): Change labelchar_table argument to const.
        Change argument buttons to first argument
      - (update_table_button): Change labelchar_table argument to const.
        Follow the change of clear_buttons rename.
        Follow the change of argument order of assign_cellbutton

2010-06-17 KIHARA Hideto <deton@m1.interq.or.jp>

    * Fix the table style candidate window to place candidates
      which have empty or duplicate heading label on free cell [uim-ja 236]
    
    * gtk/uim-cand-win-tbl-gtk.c
      - (BLOCK_LR_NR_CELLS): New
      - (BLOCK_LRS_NR_CELLS): New
      - (assign_cellbutton): Rename from get_row_column()
        and add function to find free cell
        if specified heading label is empty, not found or already used
      - (update_table_button): Add argument display_limit for assign_cellbutton().
        Move update of cand_index_in_page to assign_cellbutton().
        Change to update button only needed.
        Rename hasNext to has_next.
      - (uim_cand_win_tbl_gtk_set_page): Follow the change of argument addition
        to update_table_button
    
    * helper/candwin-tbl-gtk.c
      - (BLOCK_LR_NR_CELLS): New
      - (BLOCK_LRS_NR_CELLS): New
      - (assign_cellbutton): Rename from get_row_column()
        and add function to find free cell
        if specified heading label is empty, not found or already used
      - (update_table_button): Add argument display_limit for assign_cellbutton().
        Move update of cand_index_in_page to assign_cellbutton().
        Change to update button only needed.
        Rename hasNext to has_next.
      - (uim_cand_win_gtk_set_page): Follow the change of argument addition
        to update_table_button

2010-06-16 KIHARA Hideto <deton@m1.interq.or.jp>

    * Change usage of GtkListStore in uim-cand-win-tbl-gtk.c/candwin-tbl-gtk.c
      to same as uim-cand-win-gtk.c/candwin-gtk.c
      to reduce override functions and to remember candidate index in page.
    
    * gtk/uim-cand-win-gtk.h
      - (_UIMCandWinGtkClass): Remove set_candidates and set_page_candidates
        to make non-virtual
    * gtk/uim-cand-win-gtk.c
      - (uim_cand_win_gtk_real_set_candidates): Remove
      - (uim_cand_win_gtk_real_set_page_candidates): Remove
      - (uim_cand_win_gtk_class_init): Remove override
        of set_candidates and set_page_candidates
    * gtk/uim-cand-win-tbl-gtk.h
      - (uim_cand_win_tbl_gtk_set_candidates): Remove
      - (uim_cand_win_tbl_gtk_set_page_candidates): Remove
    * gtk/uim-cand-win-tbl-gtk.c
      - (uim_cand_win_tbl_gtk_class_init): Remove override
        of set_candidates and set_page_candidates
      - (set_candidate): Remove
      - (uim_cand_win_tbl_gtk_set_candidates): Remove
      - (uim_cand_win_tbl_gtk_set_page_candidates): Remove
      - (clear_buttons): New function
      - (update_table_button): Follow the change of GtkListStore usage
    
    * helper/candwin-tbl-gtk.c
      - (set_candidate): Remove
      - (candwin_activate): Change usage of GtkListStore
      - (uim_cand_win_gtk_set_page_candidates): Ditto
      - (clear_buttons): New function
      - (update_table_button): Follow the change of GtkListStore usage

2010-06-16 Etsushi Kato <ek.kato@gmail.com>

    * pixmaps/zm.svg : Update.

2010-06-16 Etsushi Kato <ek.kato@gmail.com>

    * scm/generic.scm
      - (generic-update-preedit) : Show partial rk when only partial
        candidates are found.
      - (generic-commit) : Don't commit partial candidate unless
        selected.
      - (generic-proc-input-state-with-preedit) : Ditto.
      - (generic-proc-specific-multi-cand-input-state) : Ditto.
      - (generic-update-input-state-cands) : Don't select candidate
        unless exact matched one is found.
      - (generic-update-multi-cand-state-cands) : Ditto.
      - (generic-proc-multi-cand-input-state) : Change behavior upon
        rk-push-key! is not #f.
      - (generic-focus-out-handler) : Use generic-commit.

2010-06-14 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/Makefile.am
      - (EXTRA_DIST):
        Add abstractcandidatewindow.h and abstractcandidatewindow.cpp.

2010-06-14 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/abstractcandidatewindow.cpp
      - New file.
    * qt4/immodule/abstractcandidatewindow.h
      - New file.
    * qt4/immodule/candidatewindow.cpp
      - (CandidateWindow): Inherit AbstractCandidateWindow.
    * qt4/immodule/candidatewindow.h
      - Ditto.
    * qt4/immodule/quiminputcontext.cpp
      - (QUimInputContext::QUimInputContext, QUimInputContext::savePreedit):
        Use QUimInputContext::createCandidateWindow().
      - (QUimInputContext::createCandidateWindow): New function.
    * qt4/immodule/quiminputcontext.h
      - (QUimInputContext::createCandidateWindow): New function.
    * qt4/immodule/quiminputcontextplugin.pro.in
      - Add abstractcandidatewindow.h and abstractcandidatewindow.cpp.

2010-06-14 Etsushi Kato <ek.kato@gmail.com>

    * qt/immodule-quiminputcontext_compose.cpp
      - (QUimInputContext::get_mb_string) : Fix to use a right
        unicode character for keysym.
    * qt4/immodule/quiminputcontext_compose.cpp
      - (KeySymToUcs4) : Revert r6439.
      - (QUimInputContext::get_mb_string) : Fix to use a right
        unicode character for keysym.
      - (keysym_to_unicode_680_6ff) : Revert r6439.
      - (keysym_to_unicode_7a1_7f9) : Ditto.
      - (keysym_to_unicode_12a1_12fe) : Ditto.
      - (keysym_to_unicode_14a1_14ff) : Ditto.
      - (keysym_to_unicode_15d0_15f6) : Ditto.
      - (keysym_to_unicode_16a0_16f6) : Ditto.

2010-06-14 Etsushi Kato <ek.kato@gmail.com>

    * scm/ct.scm : Fix typo in comment.

2010-06-13 KIHARA Hideto <deton@m1.interq.or.jp>

    * Change to be able to commit a candidate by clicking a button
      on table style candidate window
    
    * gtk/uim-cand-win-tbl-gtk.c
      - (struct index_button): New struct
      - (button_clicked): New function which emits "index-changed" signal
      - (uim_cand_win_tbl_gtk_init): Add initialization of index_button.
        Add "clicked" signal connection for each button
      - (uim_cand_win_tbl_gtk_dispose): Add free of index_button
    
      - (set_candidate): Add parameter idx.
        Add update of cand_index_in_page of index_button
      - (uim_cand_win_tbl_gtk_set_candidates): Follow the parameter addition
        of set_candidate()
      - (uim_cand_win_tbl_gtk_set_page_candidates): Ditto
    
      - (get_button): New function
      - (update_table_button): Change to use get_button()
      - (is_empty_block): Ditto
      - (show_table): Ditto
    
    * helper/candwin-tbl-gtk.c
      - (struct index_button): New struct
      - (button_clicked): Add implementation to emit "index-changed" signal
      - (cb_table_view_destroy): Add free of index_button
      - (candidate_window_init): Add initialization of index_button
    
      - (set_candidate): Add parameter idx.
        Add update of cand_index_in_page of index_button
      - (candwin_activate): Follow the parameter addition
        of set_candidate()
      - (uim_cand_win_gtk_set_page_candidates): Ditto
    
      - (get_button): New function
      - (update_table_button): Change to use get_button()
      - (is_empty_block): Ditto
      - (show_table): Ditto
    
    * scm/tutcode.scm
      - (tutcode-set-candidate-index-handler): Change to commit candidate

2010-06-13 KIHARA Hideto <deton@m1.interq.or.jp>

    * Add workaround to adjust display_limit for table style candidate window
      [uim-ja 236]
    * scm/tutcode.scm
      - (tutcode-get-candidate-handler): Add adjustment of tutcode-nr-candidate-max
        for table style candidate window
    * gtk/gtk-im-uim.c
      - (cand_activate_cb): Add adjustment of display_limit for UIMCandWinTblGtk
    * xim/ximserver.cpp
      - (InputContext::candidate_activate): Add adjustment of display_limit
        for uim-candwin-tbl-gtk
    * xim/canddisp.cpp
      - (Canddisp::adjust_display_limit): New function
    * xim/canddisp.h
      - (Canddisp): Add adjust_display_limit()

2010-06-13 KIHARA Hideto <deton@m1.interq.or.jp>

    * Add new table style candidate window for GTK+ immodule [uim-ja 234]
    * gtk/uim-cand-win-tbl-gtk.c
      - New file. Add UIMCandWinTblGtk which inherits from UIMCandWinGtk
    * gtk/uim-cand-win-tbl-gtk.h
      - New file
    * gtk/gtk-im-uim.c
      - (im_uim_create_cand_win_gtk): New function
    * gtk/uim-cand-win-gtk.h
      - (_UIMCandWinGtkClass): Add member functions
        to override in UIMCandWinTblGtkClass
    * gtk/uim-cand-win-gtk.c
      - (set_candidates, set_page_candidates, set_index, set_page):
        Change to virtual member functions to override in UIMCandWinTblGtk
      - (uim_cand_win_gtk_update_label): Rename from update_label
        to use in uim-cand-win-tbl-gtk.c
    * gtk/Makefile.am
      - (IM_UIM_SOURCES): Add uim-cand-win-tbl-gtk.c uim-cand-win-tbl-gtk.h

2010-06-13 KIHARA Hideto <deton@m1.interq.or.jp>

    * Add new table style candidate window for uim-xim [uim-ja 234]
    * helper/candwin-tbl-gtk.c
      - New file
    * helper/Makefile.am
      - (libexec_PROGRAMS): Add uim-candwin-tbl-gtk

2010-06-13 KIHARA Hideto <deton@m1.interq.or.jp>

    * scm/tutcode-kigoudic.scm
      - (tutcode-kigoudic): Add kanji

2010-06-13 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/quiminputcontext_compose.cpp
      - (KeySymToUcs4): Remove.
      - (Compose::handle_qkey, Compose::handleKey, nexttoken, modmask,
         QUimInputContext::TransFileName, QUimInputContext::get_encoding,
         QUimInputContext::get_lang_region,
         QUimInputContext::ParseComposeStringFile,
         QUimInputContext::parse_compose_line,
         QUimInputContext::create_compose_tree,
         QUimInputContext::get_compose_filename):
        Postpone variable definitions as long as possible.
      - (keysym_to_unicode_680_6ff, keysym_to_unicode_12a1_12fe,
         keysym_to_unicode_14a1_14ff, keysym_to_unicode_15d0_15f6,
         keysym_to_unicode_16a0_16f6): Remove.

2010-06-13 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/chardict/qt4.cpp
      - (KUimCharDict::slotCharSelected):
        Replace double quote with single one for efficiency.

2010-06-11 Etsushi Kato <ek.kato@gmail.com>

    * scm/generic.scm
      - (generic-update-multi-cand-state-cands) : Bug fix.

2010-06-11 Etsushi Kato <ek.kato@gmail.com>

    - Enable showing prediction candidates in generic IM.
    
    * uim/rk.c
      - (rk_find_partial_seqs) : New.  Return all partially matching
        sequences.
      - (uim_init_rk_subrs) : Export rk-lib-find-partial-seqs.
    * scm/rk.scm
      * Mostly indentation fix.
      * Add expect-seq, expect-key-for-seq?
        find-cands-incl-minimal-partial into the context.
      * Update comments.
      - (rk-context) : Add new members,
        find-cands-incl-minimal-partial, expect-seq,
        expect-key-for-seq?.
      - (rk-context-new) : Set find-cands-incl-minimal-partial,
        expect-seq, expect-key-for-seq? here depending on the rule or
        table.
      - (rk-find-longest-back-match) : Fix indentation.
      - (rk-find-longest-head) : Ditto.
      - (rk-check-back-commit) : Ditto.
      - (rk-partial?) : Ditto.
      - (rk-current-seq) : Ditto.
      - (rk-backspace) : Ditto.
      - (rk-delete) : Ditto.
      - (rk-merge-seqs) : Ditto.
      - (rk-proc-tail) : Ditto.
      - (rk-proc-end-seq) : Ditto.
      - (rk-expect) : Use expect-seq member.  Fix indent.
      - (rk-expect-key?) : Use expect-key-for-seq? member.  Fix
        indent.
      - (rk-push-key-back-match) : Fix indent.
      - (rk-push-key-front-match) : Ditto.
      - (rk-peek-terminal-match) : Ditto.
      - (rk-push-key-last!) : Ditto.
      - (rk-push-key!) : Ditto.
      - (rk-pending) : Ditto.
      - (rk-cands-with-minimal-partial) : New API.
      - (rk-find-cands-incl-minimal-partial) : New.
    * scm/ct.scm
      - (ct-find-cands-incl-minimal-partial) : New.
    * scm/generic.scm
      * Show predicion candidates when
        generic-show-prediction-candidates? is #t.
      * Merge converting-state into multi-cand-input and/or
        input-state.
      * Use generic-context-cands record as a list of pairs which
        consisted from candidate word and expected key when prediction
        is used.
      - (generic-context-rec-spec)
        - Remove converting record.
      - (generic-context-flush) : Follow the change.
      - (generic-update-preedit) : Ditto.
      - (generic-commit) : Ditto.
      - (generic-commit-by-numkey) : Ditto.
      - (generic-proc-input-state-with-preedit) : Ditto.
      - (generic-proc-multi-cand-input-state) : Ditto.
      - (generic-proc-specific-multi-cand-input-state)
        - Ditto.
        - Check whether numeric key is expected for
          generic-commit-candidate-by-numeral-key?.
      - (generic-proc-converting-state) : Rename to
        generic-handle-convert-key
      - (generic-handle-convert-key)
        - Renamed from generic-proc-converting-state.
        - Follow the removal of generic-context-converting.
        - Check whether numeric key is expected for rk while checking
          generic-commit-candidate-by-numeral-key?
        - Remove redundant code.
      - (generic-key-press-handler) : Follow the removal of
        generic-context-converting.
      - (generic-focus-out-handler) Follow the change of
        generic-context-cands.
      - (generic-get-candidate-handler) : Ditto.  If cands contains
        prediction candidates, show expected key in addition to the
        candidate.
      - (generic-flatten) : New.
      - (generic-update-input-state-cands) : Show partially matching
        candidates if requested.
      - (generic-update-multi-cand-state-cands) : Ditto.  Remove
        unused code.
    * scm/generic-custom.scm (generic-show-prediction-candidates?) :
      New custom variable.  #t by default.

2010-06-10 Etsushi Kato <ek.kato@gmail.com>

    * fep/callbacks.c (set_candidate) : Add sanity check.

2010-06-10 Etsushi Kato <ek.kato@gmail.com>

    * fep/callbacks.c (callbacks_winch) : Bug fix.

2010-06-10 Etsushi Kato <ek.kato@gmail.com>

    * scm/ct.scm
      - (ct-lib-expect-key-for-seq?) : New.  Implements equivalent
        function in rk.c.
      - (ct-lib-expect-seq) : Ditto.

2010-06-10 Etsushi Kato <ek.kato@gmail.com>

    * scm/ct.scm
      - (ct-lib-find-partial-seq) : Bug fix.  This doesn't affect any
        result though.
      - Update comments about this file.

2010-06-10 Etsushi Kato <ek.kato@gmail.com>

    * scm/ipa-x-sampa.scm :  Use front match.  Fix in r716 was bogus.
      And was fixed in rk sometime long ago from then to now.

2010-06-09 Etsushi Kato <ek.kato@gmail.com>

    * scm/rk.scm (rk-push-key-front-match) : Simplify.

2010-06-08 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/quiminputcontext.h
      - Cosmetic changes.
      - (PreeditSegment): Define as struct because all members are public.
      - (PreeditSegment::PreeditSegment): Use "this" keyword.

2010-06-08 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/quiminputcontext.cpp
      - (QUimInputContext::QUimInputContext): Remove parentheses.
        This is just a cosmetic change.

2010-06-06 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/toolbar/common-uimstateindicator.cpp
      - (QHelperToolbarButton::mousePressEvent):
        Call QToolButton::mousePressEvent() when menu() returns 0.
        This enables a button without a menu to work properly.

2010-06-05 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/plugin.cpp
      - (UimInputContextPlugin::displayName):
        Remove language name from display name.
        languages( key ) [ 0 ] always returns "ja"
        even when the current IM is a Chinese one
        and it is not so useful to display the language of the current IM.

2010-06-05 Muneyuki Noguchi <nogu.dev@gmail.com>

    * NEWS
      - Add bug fix (#13910).
    * configure.ac
      - Unmark Qt4 immodule as experimental
        because both bug #13910 and #13911 were fixed.

2010-06-05 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/quiminputcontext.cpp
      - (QUimInputContext::QUimInputContext): Remove m_imname.
      - (QUimInputContext::createUimContext): Ditto.
      - (QUimInputContext::savePreedit):
        Use uim_get_current_im_name() instead of m_imname
        because m_imname is always the same value.
    * qt4/immodule/quiminputcontext.h
      - (QUimInputContext): Remove m_imname.

2010-06-05 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/quiminputcontext.cpp
      - (QUimInputContext::reloadUim): Remove this unused function.
    * qt4/immodule/quiminputcontext.h
      - Ditto.

2010-06-05 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/quiminfomanager.h
      - (UimInputContextPlugin::create): Follow change in QUimInputContext.
    * qt4/immodule/quiminfomanager.cpp
      - (QUimInfoManager::getUimInfo): Mark this getter as const.
      - (QUimInfoManager::imLang):
        * Mark this function as const.
        * Make "i" and "n" loop variables.
    * qt4/immodule/quiminfomanager.h
      - (QUimInfoManager::getUimInfo): Mark this getter as const.
      - (QUimInfoManager::imLang): Mark this function as const.
    * qt4/immodule/quiminputcontext.cpp
      - (QUimInputContext::QUimInputContext):
        * Remove 2nd argument "lang".
        * Sort variables in list.
      - (QUimInputContext::~QUimInputContext): Delete contents of hashes.
      - (QUimInputContext::setFocus): Restore preedit text if it exists.
      - (QUimInputContext::unsetFocus): Don't call reset().
        reset() is always called on focus out.
      - (QUimInputContext::reset): Keep preedit text
        when preedit text exists and isPreeditPreservationEnabled() is true.
      - (QUimInputContext::language): Return language of input method.
        Without this change, this function always returns "ja"
        and isPreeditPreservationEnabled() always returns true.
      - (QUimInputContext::savePreedit): New function.
      - (QUimInputContext::restorePreedit): New function.
    * qt4/immodule/quiminputcontext.h
      - Define WORKAROUND_BROKEN_RESET_IN_QT4 to enable hack to fix bug #13910.
      - (QUimInputContext):
        * Remove 2nd argument "lang" in constructor.
        * Add savePreedit() and restorePreedit().

2010-06-04 IWATA Ray <iwata@quasiquote.org>

    * tables/Makefile.am:
      - Use LN_S.

2010-06-03 Etsushi Kato <ek.kato@gmail.com>

    - Enable per-page candidates handling in uim-fep.
    
    * fep/callbacks.c
      - (end_callbacks) : Add sanity check.
      - (activate_cb) : Just setup candidate array and first page.
      - (select_cb) : Update candidate array when new page is
        selected.
      - (shift_page_cb) : Ditto.
      - (init_candidate) : New.  Initialize candidate array here.
      - (make_page_strs) : Now just setup one page instead of total
        pages.

2010-06-03 Etsushi Kato <ek.kato@gmail.com>

    * scm/Makefile.am : Don't install wb86.scm and zm.scm.

2010-06-02 Etsushi Kato <ek.kato@gmail.com>

    - Enable generic IM to use composing text tables generated from
      scm file.
    
    * configure.ac (AC_CONFIG_FILES) : Add table/Makefile
    * tables/Makefile.am : New.
    * scm/rk.scm
      - (rk-context) : Add find-seq and find-partial-seq member.
      - (rk-context-new) : Set find-seq and find-partial-seq according
        to rule type to enable use of composing table.
      - (rk-find-longest-back-match) : Follow the change.
      - (rk-find-longest-head) : Ditto.
      - (rk-check-back-commit) : Ditto.
      - (rk-partial-seq?) : Ditto.
      - (rk-current-seq) : Ditto.
      - (rk-proc-tail) : Ditto.
      - (rk-push-key-front-match) : Ditto.
      - (rk-push-key-last!) : Ditto.
    * scm/Makefile.am (SCM_FILES) : Add ct.scm.
    * scm/ct.scm : New.  Provide rk-lib-find-seq and
      rk-lib-find-partial-seq equivalent functions using uim-look.
    * scm/xmload.scm
      - (zm-init-handler) : Use generated composing table.
      - (wb86-init-handler) : Ditto.
    * Makefile.am (SUBDIRS) : Add tables directory.

2010-06-02 Etsushi Kato <ek.kato@gmail.com>

    * scm/plugin.scm (find-module-lib-path) : Removed.  Obsoleted
      by r6371.

2010-06-01 Etsushi Kato <ek.kato@gmail.com>

    * scm/im-switcher.scm (imsw-iconic-label-alist) : Update.

2010-06-01 Etsushi Kato <ek.kato@gmail.com>

    * scm/im-switcher (imsw-iconic-label-alist) : Add wb86 and zm.

2010-06-01 Etsushi Kato <ek.kato@gmail.com>

    * pixmaps/AUTHORS
    * pixmaps/LIST
    * pixmaps/Makefile.am
    * pixmaps/wb86.svg
    * pixmaps/zm.svg
      - Add tentative wb86 and zm icons.

2010-06-01 Etsushi Kato <ek.kato@gmail.com>

    - Add wubi input methods [uim-en 323].
    
    * scm/Makefile.am
      - (SCM_FILES) : Add xmload.scm wb86.scm zm.scm.
      - (module_names) : Add xmload.
    * scm/zm.scm : New table.  ZhengMa input method by 余钰炜.
    * scm/wb86.scm : New table.  WuBi86 input method by 余钰炜.
    * xmload.scm : New.  Load zm.scm and wb86.scm.

2010-05-31 Etsushi Kato <ek.kato@gmail.com>

    * emacs/candidate.c (set_page_candidate) : Make static.

2010-05-31 Etsushi Kato <ek.kato@gmail.com>

    * emacs/uim-types.h
      - Define UIM_EL_USE_NEWPAGE_HANDLING.
      - (candidate) : Add page_index member.
    * emacs/candidate.c
      - (set_page_candidates) : New.
      - (new_candidate) : Set only the first page.
      - (select_candidate) : New.
      - (shift_candidate_page) : Set candidates when page is shifted.
    * emacs/candidate.h : Add select_candidate().
    * emacs/callback.c (candidate_select_cb) : Call select_candidate().

2010-05-30 KIHARA Hideto <deton@m1.interq.or.jp>

    * scm/tutcode-custom.scm
      - Add a hook for tutcode-nr-candidate-max-for-kigou-mode.

2010-05-28 Etsushi Kato <ek.kato@gmail.com>

    * helper/candwin-gtk.c (uim_cand_win_gtk_create_sub_window) : Fix.
      Forgot to commit at r6389...

2010-05-28 Etsushi Kato <ek.kato@gmail.com>

    * scm/im-switcher.scm (imsw-iconic-label-alist) : Add mozc.

2010-05-28 Etsushi Kato <ek.kato@gmail.com>

    * uim/Makefile.am (libuim_scm_la_CFLAGS) : New.  Workaround for
      the problem with GCC 4.4 ([uim-ja 216]).

2010-05-26 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/pref/customwidgets.cpp
      - Apply patch by Felix Geyer (#28250). This patch fixes a compile error
        with Qt 4.7.

2010-05-25 Etsushi Kato <ek.kato@gmail.com>

    * configure.ac : Add check for cmsgcred (Debian bug #494344).

2010-05-23 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/candidatewindow.cpp
      - (CandidateWindow::activateCandwin): Don't hide annotation window
        manually.
      - (CandidateWindow::hideEvent): New function. Always hide
        annotation window on hide of this window.
    * qt4/immodule/candidatewindow.h
      - Ditto.

2010-05-23 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/candidatewindow.cpp
      - (CandidateWindow::~CandidateWindow): Check if cand is 0
        before calling uim_candidate_free() with cand.

2010-05-22 KIHARA Hideto <deton@m1.interq.or.jp>

    * scm/tutcode.scm
      - (tutcode-check-candidate-window-begin, tutcode-proc-state-kigou):
        Change to use tutcode-nr-candidate-max-for-kigou-mode for kigou mode.
    
    * scm/tutcode-custom.scm
      - (tutcode-nr-candidate-max-for-kigou-mode): New custom variable

2010-05-19 Etsushi Kato <ek.kato@gmail.com>

    * gtk/uim-cand-win-gtk.c (uim_cand_win_gtk_create_sub_window) : Fix
      size restriction.

2010-05-15 Muneyuki Noguchi <nogu.dev@gmail.com>

    * configure.ac
      - Add qt4_immodule_option to define QT4_IMMODULE.
      - Expand tab to spaces.
    * qt4/pref/customwidgets.cpp
      - (KeyGrabDialog::setKeyStr): Replace QT_IMMODULE with QT4_IMMODULE.
        Some keys are wrongly disabled due to this typo.

2010-05-15 Muneyuki Noguchi <nogu.dev@gmail.com>

    * configure.ac
      - (option): Rename to qt4_qt3support_option to prevent name conflict.

2010-05-08 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/switcher/qt4.cpp
    * qt4/toolbar/standalone-qt4.cpp
      - Use QApplication::instance() instead of qApp.

2010-05-07 Etsushi Kato <ek.kato@gmail.com>

    * helper/candwin-gtk.c (uim_cand_win_gtk_create_sub_window)
    * gtk/uim-cand-win-gtk.c (uim_cand_win_gtk_create_sub_window)
      - Set max size of sub window.

2010-05-07 Etsushi Kato <ek.kato@gmail.com>

    * helper/candwin-gtk.c (uim_cand_win_gtk_create_sub_window)
    * gtk/uim-cand-win-gtk.c (uim_cand_win_gtk_create_sub_window)
      - Set frame for sub_window.

2010-05-07 Etsushi Kato <ek.kato@gmail.com>

    * scm/tutcode.scm : Remove obsolete commment.

2010-05-07 Etsushi Kato <ek.kato@gmail.com>

    * doc/PLUGIN : Update.

2010-05-07 Etsushi Kato <ek.kato@gmail.com>

    * scm/plugin.scm
      - (require-module) : Enable scheme only personal module.
      - (module-load) : Don't return #t when loading scheme file is
        invalid.

2010-05-07 Etsushi Kato <ek.kato@gmail.com>

    * scm/look.scm : Fix bug in r6374.

2010-05-07 Etsushi Kato <ek.kato@gmail.com>

    * scm/dynlib.scm
      - (require-dynlib) : Fix to provide module name if succedded.
      - (unload-dynlib) : Add comment.
    * scm/annotation-eb.scm : Follow the change.

2010-05-07 Etsushi Kato <ek.kato@gmail.com>

    * doc/COMPATIBILITY : Update.

2010-05-07 Etsushi Kato <ek.kato@gmail.com>

    * doc/COMPATIBILITY : Update.

2010-05-07 Etsushi Kato <ek.kato@gmail.com>

    * uim/uim-custom.c (uim_custom_enable)
    * scm/annotation-eb.scm
    * scm/look.scm
      - Use require-dynlib instead of module-load.

2010-05-06 Etsushi Kato <ek.kato@gmail.com>

    * scm/predict-look-skk.scm
    * scm/predict-look.scm
    * scm/yahoo-jp.scm
    * scm/uim-pref-http.scm
      - s/module-load/require-dynlib/

2010-05-06 Etsushi Kato <ek.kato@gmail.com>

    * doc/COMPATIBILITY : Update.

2010-05-06 Etsushi Kato <ek.kato@gmail.com>

    - Separate dynlib handling from module system of plugin.scm.
    
    * scm/Makefile.am (SCM_FILES) : Add dynlib.scm.
    * scm/plugin.scm
      - Require dynlib.scm.
      - (uim-plugin-lib-load-path) : Move to dynlib.scm and renamed with
        s/plubin-lib/dynlib/.
      - (plug-alist) : Move to dynlib.scm and renamed with
        s/plugin/dynlib/.
      - (plugin-func-alist) : Removed.
      - (plugin-entry) : Move to dynlib.scm and renamed with
        s/plugin/dynlib/.
      - (plugin-list-append) : Ditto.
      - (plugin-list-query) : Ditto.
      - (plugin-list-query-library) : Ditto.
      - (plugin-list-query-instance-init) : Ditto.
      - (plugin-list-query-instance-quit) : Ditto.
      - (module-load) : Simplify using require-dynlib.
      - (module-unload) : Move to dynlib.scm and renamed with
        s/module/dynlib/.
      - (module-unload-all) : Ditto.
    * scm/dynlib.scm
      - (uim-dynlib-load-path) : Moved from plugin.scm and renamed.
      - (dynlib-alist) : Ditto.
      - (dynlib-entry) : Ditto.
      - (dynlib-list-append) : Ditto.
      - (dynlib-list-delete) : Ditto.
      - (dynlib-list-query) : Ditto.
      - (dynlib-list-query-library) : Ditto.
      - (dynlib-list-query-instance-init) : Ditto.
      - (dynlib-list-query-instance-quit) : Ditto.
      - (find-dynlib-path) : Ditto.
      - (require-dynlib) : Moved from plugin.scm with renamed and
        simplification.
      - (dynlib-unload) : Moved from plugin.scm and renamed.
      - (dynlib-unload-all) : Ditto.
    * scm/tutcode.scm : Follow the change.
    * scm/fileio.scm : Ditto.
    * scm/lolevel.scm : Ditto.
    * scm/socket.scm : Ditto.
    * scm/process.scm : Ditto.
    * scm/openssl.scm : Ditto.
    * scm/sqlite3.scm : Ditto.
    * uim/uim.c (uim_quit) : Ditto.

2010-05-06 Etsushi Kato <ek.kato@gmail.com>

    * scm/plugin.scm (module-unload-all) : Fix missing code in r6325.

2010-05-06 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/switcher/qt4.cpp
      - (UimImSwitcher::parseHelperStrImList): Adjust height of row.

2010-05-06 Etsushi Kato <ek.kato@gmail.com>

    * helper/im-switcher-gtk.c (main) : Reorder code to avoid flicker.

2010-05-06 Etsushi Kato <ek.kato@gmail.com>

    * chardict/uim-chardict-qt4.pro.in : Link with X11_LIBS.

2010-05-06 Muneyuki Noguchi <nogu.dev@gmail.com>

    * doc/COMPATIBILITY
      - Add section "New helper protocol messages for uim-im-switcher".

2010-05-06 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt/switcher-qt.cpp
      - (UimImSwitcher::UimImSwitcher): Check if another uim-im-switcher exists
        by trying to contact one.
        If one exists, this process exits.
      - (UimImSwitcher::slotStdinActivated): Parse "im_switcher_{start,quit}".

2010-05-06 Muneyuki Noguchi <nogu.dev@gmail.com>

    * doc/HELPER-PROTOCOL
      - Add im_switcher_start and im_switcher_quit to fix bug #2112.
    * helper/im-switcher-gtk.c
      - (parse_helper_str): Parse "im_switcher_{start,quit}".
      - (main): Check if another uim-im-switcher exists by trying
        to contact one. If one exists, this process exits.
    * qt4/switcher/qt4.cpp
      - (UimImSwitcher::UimImSwitcher): Check if another uim-im-switcher exists
        by trying to contact one.
        If one exists, this process exits.
      - (UimImSwitcher::slotStdinActivated): Parse "im_switcher_{start,quit}".

2010-05-04 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/chardict/qt4.cpp
      - (KUimCharDict::KUimCharDict, KUimCharDict::~KUimCharDict,
         KUimCharDict::slotCharSelected): Commit characters
        when they are selected. To commit them to an editing widget,
        we don't allow a window to receive input focus.
        We call XSetWMHints() to implement this behavior
        because Qt4 don't have a function similar to
        gtk_window_set_accept_focus() in GTK+ for now
        though Qt 4.7, which hasn't been released yet,
        will have QWidget::setAttribute(Qt::WA_X11DoNotAcceptFocus).

2010-05-03 Muneyuki Noguchi <nogu.dev@gmail.com>

    * helper/input-pad-ja.c
      - (input_pad_create): Don't allow window to receive input focus
        to work with Qt4 applications.

2010-05-02 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/qtextutil.cpp
      - (QUimTextUtil::acquireSelectionTextInQTextEdit,
         QUimTextUtil::deleteSelectionTextInQTextEdit):
        Don't call Qt3 support member functions if possible.
        * Replace QString::find() with QString::indexOf().
        * Replace QString::findRev() with QString::lastIndexOf().

2010-05-02 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/qtextutil.cpp
      - (QUimTextUtil::acquirePrimaryText, QUimTextUtil::acquireSelectionText,
         QUimTextUtil::deletePrimaryText, QUimTextUtil::deleteSelectionText):
        Don't use deprecated Qt3 idiom to cast a type.

2010-05-02 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/pref/customwidgets.cpp
      - (KeyEditForm::slotAddClicked, KeyEditForm::slotEditClicked):
        Fix crashy code. See also: http://www.kdedevelopers.org/node/3919

2010-05-02 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/candwin/qt4.cpp
    * qt4/chardict/kseparator.cpp
    * qt4/chardict/kseparator.h
    * qt4/immodule/candidatewindow.cpp
    * qt4/immodule/subwindow.cpp
    * qt4/pref/kseparator.cpp
    * qt4/pref/kseparator.h
      - Replace WFlags with WindowFlags. WindowFlags was introduced in Qt4.

2010-05-02 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/subwindow.cpp
      - (SubWindow::SubWindow): Call adjustSize() to correct position.

2010-05-02 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/candidatewindow.cpp
      - (CandidateWindow::eventFilter):
        Move position of moveEvent's declaration.

2010-05-02 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/subwindow.cpp
    * qt4/immodule/subwindow.h
      - (SubWindow::hookPopup): Use reference for performance.

2010-05-02 Muneyuki Noguchi <nogu.dev@gmail.com>

    * NEWS
      - Update. Add uim-annotation.

2010-05-02 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/candidatewindow.cpp
      - (CandidateWindow::setPage): Set flags to a cell
        even if no annotation text is available.

2010-04-30 Etsushi Kato <ek.kato@gmail.com>

    * notify/uim-growl.m (uim_growl_notify) : Fix warning for
      non-MacUIM environment.

2010-04-29 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/candidatewindow.cpp
      - (CandidateWindow::layoutWindow): Change parameters.
      - (CandidateWindow::eventFilter):
        Follow change of CandidateWindow::layoutWindow().
    * qt4/immodule/candidatewindow.h
      - Change parameters of CandidateWindow::layoutWindow().
    * qt4/immodule/quiminputcontext.cpp
      - (QUimInputContext::setMicroFocus): Remove.
        QInputContext::setMicroFocus() no longer exists in Qt4.
      - (QUimInputContext::update):
        Call CandidateWindow::layoutWindow() directly.
    * qt4/immodule/quiminputcontext.h
      - (QUimInputContext::setMicroFocus): Remove.

2010-04-29 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/candidatewindow.cpp
      - Fix position of candidate window on window move.

2010-04-28 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/candidatewindow.cpp
      - (CandidateWindow::setPage):
        * Save annotation data to list.
        * Set column text to "..." if there are annotation data.
      - (CandidateWindow::slotHookSubwindow): Get data from list.
      - (CandidateListView::sizeHint):
        Don't check size of column for annotation.
    * qt4/immodule/candidatewindow.h
      - Add list to save annotation data.

2010-04-28 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/candidatewindow.cpp
      - (CandidateWindow::slotHookSubwindow):
        Follow change of SubWindow::hookPopup().
    * qt4/immodule/subwindow.cpp
      - (SubWindow::SubWindow, SubWindow::hookPopup): Remove m_titleLabel.
    * qt4/immodule/subwindow.h
      - Ditto.

2010-04-28 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/candidatewindow.cpp
      - (CandidateWindow::moveEvent, CandidateWindow::resizeEvent):
        Follow change of SubWindow::layoutWindow().
      - (CandidateWindow::slotHookSubwindow): Call SubWindow::layoutWindow().
    * qt4/immodule/subwindow.cpp
      - (SubWindow::layoutWindow): Fix position of SubWindow.
      - (SubWindow::forceInside): Remove.
    * qt4/immodule/subwindow.h
      - Change SubWindow::layoutWindow().
      - Remove SubWindow::forceInside().

2010-04-28 KIHARA Hideto <deton@m1.interq.or.jp>

    * scm/trycode.scm
      - (trycode-rule): update to 2010-04-27 version: add Shin Jouyo Kanji.

2010-04-28 Etsushi Kato <ek.kato@gmail.com>

    * scm/prime.scm (prime-convert-cancel) : Fix for uim-fep.

2010-04-28 Etsushi Kato <ek.kato@gmail.com>

    * scm/annotation.scm
      - (annotation-load) : Init agent at loading time.
      - (annotation-unload) : New.
      - (annotation-agent-reset) : Ditto.
    * scm/annotation-eb.scm
      - (eb-init) : Fix leak.
      - (eb-release) : Ditto.
    * scm/im-custom.scm
      - (annotation-agent)
        * Add 'im choice to use annotation of input method
          exclusively.
        * Add custom-set-hooks.
    * scm/im.scm
      - (create-context) : Fix leak of annotation.
      - (release-context) : Ditto.
      - (get-candidate) : Check enable-annotation? here.
    * uim/uim.c (uim_quit) : Unload annotation agent.

2010-04-27 Etsushi Kato <ek.kato@gmail.com>

    * scm/prime-custom.scm
      - (prime-custom-display-usage?)
      - (prime-custom-display-comment?)
      - (prime-custom-display-form?)
        - Add custom-activity-hooks on enable-annotation?
    * scm/prime.scm
      - (prime-get-candidate-handler) : Set candidate string and
        annotation string separately.
      - (prime-candidate-combine-string) : Removed.
      - (prime-candidate-combine-annotation) : New.

2010-04-27 Etsushi Kato <ek.kato@gmail.com>

    * helper/candwin-gtk.c (tree_selection_changed)
      - Remove ad-hoc annotation code using eb.
    * gtk/uim-cand-win-gtk.c
      - (tree_selection_changed) : Ditto.
      - (uim_cand_win_gtk_set_candidates) : Get annotation string
        here.
      - (uim_cand_win_gtk_set_page_candidates) : Ditto.
    * gtk/Makefile.am : Follow the removal of eb.
    * helper/Makefile.am : Ditto.

2010-04-26 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/candidatewindow.cpp
      - (CandidateWindow::CandidateWindow):
        See value of "enable-annotation?"
        instead of "eb-enable-for-annotation?".
      - (CandidateWindow::setPage): Uncomment lines.
      - (CandidateListView::sizeHint): Adjust size.
    * scm/Makefile.am
      - (SCM_FILES): Add annotation.scm and annotation-eb.scm.
    * scm/annotation.scm
      - New file.
    * scm/annotation-eb.scm
      - New file.
    * scm/im-custom.scm
      - Add "enable-annotation?" and "annotation-agent".
    * scm/im.scm
      - (create-context): Call annotation-init for annotation support.
      - (release-context): Call annotation-release for annotation support.
      - (get-candidate): Call annotation-get-text for annotation support.
    * scm/init.scm
      - Load annotation-related file.

2010-04-26 Etsushi Kato <ek.kato@gmail.com>

    * doc/COMPATIBILITY : Update.

2010-04-26 Etsushi Kato <ek.kato@gmail.com>

    * doc/HELPER-CANDWIN : Change specification of the separator of
      sending message.
    * xim/canddisp.cpp : Follow the change.
    * helper/candwin-gtk.c : Ditto.
    * qt/candwin-qt.cpp : Ditto.
    * qt4/candwin/qt4.cpp : Ditto.

2010-04-25 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/README.en
    * qt4/immodule/README.ja
      - Remove obsolete documents.

2010-04-24 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/chardict
    * qt4/chardict/po
    * qt4/toolbar
    * qt4/candwin
    * qt4/edittest
    * qt4/switcher
    * qt4/immodule
    * qt4/pref
      - Ignore generated files.

2010-04-23 Etsushi Kato <ek.kato@gmail.com>

    * doc/COMPATIBILITY : Update.

2010-04-23 Etsushi Kato <ek.kato@gmail.com>

    * scm/rk.scm
      - (rk-expect-key) : Rename to rk-expect-key?
      - (rk-expect-key?) : Renamed from rk-expect-key.
    * scm/anthy-utf8.scm
    * scm/wnn.scm
    * scm/tutcode.scm
    * scm/social-ime.scm
    * scm/latin.scm
    * scm/canna.scm
    * scm/ajax-ime.scm
    * scm/anthy.scm
    * scm/yahoo-jp.scm
    * scm/skk.scm
    * scm/mana.scm
    * scm/sj3.scm
      - Follow the change.
    * uim/rk.c
      - (uim_init_rk_subrs) : Change to export rk_expect_key_for_seq
        as rk-lib-expect-key-for-seq?

2010-04-22 Etsushi Kato <ek.kato@gmail.com>

    * helper/candwin-gtk.c : Fix compilation when eb is not set.

2010-04-22 Etsushi Kato <ek.kato@gmail.com>

    * doc/COMPATIBILITY : Update.

2010-04-22 Etsushi Kato <ek.kato@gmail.com>

    * uim/rk.c
      - (rk_expect_key_for_seq) : New.
      - (uim_init_rk_subrs) : Export rk_expect_key_for_seq as
        rk-lib-expect-key-for-seq.
    * scm/rk.scm (rk-expect-key) : New.  Added for better response with
      tutucode.scm.
    * scm/tutcode.scm : Use rk-expect-key instead of rk-expect for the
      efficiency.
    * scm/anthy-utf8.scm : Ditto.
    * scm/wnn.scm : Ditto.
    * scm/social-ime.scm : Ditto.
    * scm/latin.scm : Ditto.
    * scm/canna.scm : Ditto.
    * scm/ajax-ime.scm : Ditto.
    * scm/anthy.scm : Ditto.
    * scm/yahoo-jp.scm : Ditto.
    * scm/skk.scm : Ditto.
    * scm/mana.scm : Ditto.
    * scm/sj3.scm : Ditto.

2010-04-20 Etsushi Kato <ek.kato@gmail.com>

    - Support annotation with uim-xim.  This should be revised
      after the discussion of uim-en.  Sub-window with qt is not
      ported yet.
    
    * doc/HELPER-CANDWIN : Update specification of activate and
      set_page_candidates.
    * xim/ximserver.cpp
      - (InputContext::candidate_activate) : Follow the change.
      - (InputContext::prepare_page_candidates) : Ditto.
    * qt/candwin-qt.cpp
      - (CandidateWindow::activateCand) : Ditto.
      - (CandidateWindow::setPageCandidates) : Ditto.
    * helper/candwin-gtk.c
      - Ditto.
      - Port sub-window from uim-gtk.
    * Helper/Makefile.am : Support eb.

2010-04-20 Etsushi Kato <ek.kato@gmail.com>

    * uim/socket.c (c_getaddrinfo) : Return #f if fails to avoid
      crash.
    * scm/socket.scm (call-with-getaddrinfo) : Follow the change.

2010-04-20 Etsushi Kato <ek.kato@gmail.com>

    * scm/ajax-ime.scm (ajax-ime-parse) : Spell fix.

2010-04-20 Etsushi Kato <ek.kato@gmail.com>

    * scm/ajax-ime.scm
      - (ajax-ime-parse) : Return #f when not receiving meaningful
        result.
      - (ajax-ime-conversion) : Return list of original string when
        conversion fails.

2010-04-19 Etsushi Kato <ek.kato@gmail.com>

    * qt4/candwin/qt4.cpp (CandidateWindow::CandidateWindow) : Adjust
      initial size of the label.

2010-04-19 Etsushi Kato <ek.kato@gmail.com>

    * scm/ajax-ime.scm (ajax-ime-context-new) : Fix a bug in r6152.

2010-04-14 Etsushi Kato <ek.kato@gmail.com>

    * uim/dynlib.c
      - (dynlib_unbind_all) : New.
      - (dynlib_unbind_all_internal) : New.  Call dlclose(3)
        collectively at the end of this function to avoid GC problem.
      - (uim_init_dynlib) : Add %%dynlib-unbind-all.
    * scm/plugin.scm (module-unload-all) : Use %%dynlib-unbind-all.

2010-04-13 Etsushi Kato <ek.kato@gmail.com>

    * scm/wnn.scm (wnn-context)
    * scm/social-ime.scm (social-ime-context)
    * scm/canna.scm (canna-context)
    * scm/ajax-ime.scm (ajax-ime-context)
    * scm/yahoo-jp.scm (yahoo-jp-context)
      - Fix to initialize prediction-ctx with '().

2010-04-13 Etsushi Kato <ek.kato@gmail.com>

    * uim/eb.c
    * scm/cannav3-socket.scm
    * scm/lolevel.scm
    * scm/sj3v2-socket.scm
      - Update copyright.

2010-04-13 Etsushi Kato <ek.kato@gmail.com>

    * configure.ac
      - (with-canna) : Don't check libcanna.
      - (with-sj3) : New.
      - (with-skk) : New.
      - (enable-dict) : Check -lcanna here.
    * helper/Makefile.am : Follow the change.
    * scm/Makefile.am : Ditto.

2010-04-12 Etsushi Kato <ek.kato@gmail.com>

    * scm/sj3v2-socket.scm (sj3-lib-connect) : Use singed int for the
      return value.
    * uim/lolevel.c
      - (c_u32_to_s32) : New.
      - (uim_plugin_instance_init) : Add u32->s32.

2010-04-12 Etsushi Kato <ek.kato@gmail.com>

    * scm/sj3v2-socket.scm (sj3-lib-connect) : Revert using 4294967294.

2010-04-11 Etsushi Kato <ek.kato@gmail.com>

    * scm/sj3v2-socket.scm
      - (sj3-lib-connect) : Workaround for environment with
        SCM_USE_LONG_FIXNUM.
      - (sj3-lib-open) : Don't crash even when server is not working
        and just show message instead.
      - (sj3-lib-opened?) : New.
      - (sj3-lib-getkan) : Add check for the connection.  Return #f
        when not connected.
      - (sj3-lib-douoncnt) : Ditto.  Return 0 when not connected.
    * scm/sj3.scm
      - (sj3-lib-init) : Don't use sj3-lib-funcall which would try to
        connect infinitely when server is not working.
      - (sj3-lib-begin-conversion) : Support disconnected situation.
      - (sj3-lib-commit-segment) : Ditto.
      - (sj3-lib-commit-segments) : Ditto.
      - (sj3-context-rec-spec) : Fix to initialize prediction-ctx with
        '().

2010-04-11 Etsushi Kato <ek.kato@gmail.com>

    * scm/predict-look-skk.scm (predict-look-skk search)
    * scm/predict-look.scm (predict-look search)
      - Don't crash when a dictionary file is not found.

2010-04-11 Etsushi Kato <ek.kato@gmail.com>

    * uim/look.c : Fix typo.

2010-04-10 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/caretstateindicator.cpp
      - (CaretStateIndicator::setup): Rename to update().
    * qt4/immodule/caretstateindicator.h
      - Ditto.
    * qt4/immodule/qhelpermanager.cpp
      - (QUimHelperManager::update_prop_list_cb):
        Use QUimInputContext::updateIndicator().
    * qt4/immodule/quiminputcontext.cpp
      - (QUimInputContext::setupIndicator): Rename to updateIndicator().
    * qt4/immodule/quiminputcontext.h
      - Ditto.

2010-04-10 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/caretstateindicator.cpp
    * qt4/immodule/caretstateindicator.h
      - (CaretStateIndicator::update): Rename to updateLabels()

2010-04-09 Etsushi Kato <ek.kato@gmail.com>

    * scm/Makefile.am (SCM_FILES) : Add missing sj3v2-socket.scm.

2010-04-09 Etsushi Kato <ek.kato@gmail.com>

    * scm/tutcode.scm : Use tutcode-im-name-label and
      tutcode-im-short-desc for register-im.

2010-04-07 Etsushi Kato <ek.kato@gmail.com>

    * test/test-im.scm (testcase im im-management) : Revise
      test-im-disabled-im-list.

2010-04-07 Etsushi Kato <ek.kato@gmail.com>

    * test/uim-test-utils-new.scm (uim-sh-read-block) : Cope with
      slower machines.

2010-04-07 Etsushi Kato <ek.kato@gmail.com>

    * test/run-test.scm : Modify load path.
    * doc/UNIT-TEST : Update.

2010-04-07 Etsushi Kato <ek.kato@gmail.com>

    * test/test-im.scm (testcase im im-management) : Revise
      test-im-disabled-im-list.

2010-04-07 Etsushi Kato <ek.kato@gmail.com>

    * test/test-intl.scm
    * test/i18n/test-language.scm
      - Revert r6307.

2010-04-07 Etsushi Kato <ek.kato@gmail.com>

    * uim/intl.c
      - (intl_textdomain) : Avoid crash when --disable-nls.
      - (intl_bindtextdomain) : Ditto.
    * test/test-intl.scm (test-gettext) : Support --disable-nls.
    * test/i18n/test-language.scm : Ditto.

2010-04-06 Etsushi Kato <ek.kato@gmail.com>

    * test/uim-test-utils.scm
      - Use uim-test-source-path for LIBUIM_SYSTEM_SCM_FILES and
        LIBUIM_SCM_FILES.
    * test/run-test.scm
      - (uim-test-build-path) : Bug fix when builddir != srcdir..
      - (uim-test-source-path) : New.
      - (%add-top-path-to-load-path) : Use uim-test-source-path.
      - (main) : Ditto.
    * test/uim-test-utils-new.scm
      - (uim-test-source-path) : New.
      - Use uim-test-source-path for LIBUIM_SYSTEM_SCM_FILES and
        LIBUIM_SCM_FILES.

2010-04-05 Etsushi Kato <ek.kato@gmail.com>

    * scm/romaja.scm
    * scm/trec-composer.scm
    * uim/expat.c
    * uim/wnnlib.c
    * uim/wnnlib.h
    * uim/curl.c
      - Replace http://uim.freedesktop.org/ with
        http://code.google.com/p/uim/ in the copyrights

2010-04-05 Etsushi Kato <ek.kato@gmail.com>

    * COPYING
    * emacs/COPYING
    * emacs/README
    * emacs/README.ja
    * emacs/callback.c
    * emacs/callback.h
    * emacs/candidate.c
    * emacs/candidate.h
    * emacs/commit.c
    * emacs/commit.h
    * emacs/context.c
    * emacs/context.h
    * emacs/debug.c
    * emacs/debug.h
    * emacs/encoding.c
    * emacs/encoding.h
    * emacs/helper-message.c
    * emacs/helper-message.h
    * emacs/helper-server.c
    * emacs/helper-server.h
    * emacs/helper.c
    * emacs/helper.h
    * emacs/im.c
    * emacs/im.h
    * emacs/key.c
    * emacs/key.h
    * emacs/output.c
    * emacs/output.h
    * emacs/preedit.c
    * emacs/preedit.h
    * emacs/prop.c
    * emacs/prop.h
    * emacs/uim-candidate.el
    * emacs/uim-debug.el
    * emacs/uim-el-agent.c
    * emacs/uim-el-agent.h
    * emacs/uim-el-helper-agent.c
    * emacs/uim-el-helper-agent.h
    * emacs/uim-el-types.h
    * emacs/uim-helper.el
    * emacs/uim-key.el
    * emacs/uim-keymap.el
    * emacs/uim-leim.el
    * emacs/uim-preedit.el
    * emacs/uim-util.el
    * emacs/uim-var.el
    * emacs/uim-version.el.in
    * emacs/uim.el
    * examples/uim-custom/uim-custom-dump.c
    * examples/uim-custom/uim-custom-update.c
    * examples/uim-custom/uim-custom-variable.c
    * fep/COPYING
    * fep/callbacks.c
    * fep/callbacks.h
    * fep/draw.c
    * fep/draw.h
    * fep/escseq.c
    * fep/escseq.h
    * fep/helper.c
    * fep/helper.h
    * fep/key.c
    * fep/key.h
    * fep/read.c
    * fep/read.h
    * fep/str.c
    * fep/str.h
    * fep/udsock.c
    * fep/udsock.h
    * fep/uim-fep-tick.c
    * fep/uim-fep.c
    * fep/uim-fep.h
    * gtk/caret-state-indicator.c
    * gtk/caret-state-indicator.h
    * gtk/compose.c
    * gtk/compose.h
    * gtk/gtk-im-uim.c
    * gtk/gtk-im-uim.h
    * gtk/gtk-rc-get-immodule-file.c
    * gtk/key-util-gtk.c
    * gtk/key-util-gtk.h
    * gtk/test/entry.c
    * gtk/text-util.c
    * gtk/text-util.h
    * gtk/uim-cand-win-gtk.c
    * gtk/uim-cand-win-gtk.h
    * helper/candwin-gtk.c
    * helper/dict-anthy.c
    * helper/dict-anthy.h
    * helper/dict-canna-cclass.c
    * helper/dict-canna-cclass.h
    * helper/dict-canna.c
    * helper/dict-canna.h
    * helper/dict-cclass-dialog.c
    * helper/dict-cclass-dialog.h
    * helper/dict-dict.c
    * helper/dict-dict.h
    * helper/dict-main-gtk.c
    * helper/dict-util.c
    * helper/dict-util.h
    * helper/dict-word-list-view-gtk.c
    * helper/dict-word-list-view-gtk.h
    * helper/dict-word-list-win-gtk.c
    * helper/dict-word-list-win-gtk.h
    * helper/dict-word-win-gtk.c
    * helper/dict-word-win-gtk.h
    * helper/dict-word.c
    * helper/dict-word.h
    * helper/im-switcher-gtk.c
    * helper/input-pad-ja.c
    * helper/pref-gtk-custom-widgets.c
    * helper/pref-gtk-custom-widgets.h
    * helper/pref-gtk-keytab.h
    * helper/pref-gtk.c
    * helper/toolbar-applet-gnome.c
    * helper/toolbar-common-gtk.c
    * helper/toolbar-standalone-gtk.c
    * helper/toolbar-systray-gtk.c
    * helper/uim-dict-ui.xml.in
    * notify/uim-growl.m
    * notify/uim-knotify3.cc
    * notify/uim-libnotify.c
    * pixmaps/uim-m17nlib-relink-icons.in
    * po/fr.po
    * po/ja.po
    * po/ko.po
    * qt/candwin-qt.cpp
    * qt/candwin-qt.h
    * qt/chardict/chardict-bushuviewwidget.cpp
    * qt/chardict/chardict-bushuviewwidget.h
    * qt/chardict/chardict-chargridview.cpp
    * qt/chardict/chardict-chargridview.h
    * qt/chardict/chardict-qt.cpp
    * qt/chardict/chardict-qt.h
    * qt/chardict/chardict-unicodeviewwidget.cpp
    * qt/chardict/chardict-unicodeviewwidget.h
    * qt/chardict/po/ja.po
    * qt/chardict/qtgettext.h
    * qt/immodule-candidatewindow.cpp
    * qt/immodule-candidatewindow.h
    * qt/immodule-plugin.cpp
    * qt/immodule-plugin.h
    * qt/immodule-qhelpermanager.cpp
    * qt/immodule-qhelpermanager.h
    * qt/immodule-qtextutil.cpp
    * qt/immodule-qtextutil.h
    * qt/immodule-quiminfomanager.cpp
    * qt/immodule-quiminfomanager.h
    * qt/immodule-quiminputcontext.cpp
    * qt/immodule-quiminputcontext.h
    * qt/immodule-quiminputcontext_compose.cpp
    * qt/immodule-quiminputcontext_compose.h
    * qt/immodule-quiminputcontext_with_slave.cpp
    * qt/immodule-quiminputcontext_with_slave.h
    * qt/immodule-subwindow.cpp
    * qt/immodule-subwindow.h
    * qt/pref-customwidgets.cpp
    * qt/pref-customwidgets.h
    * qt/pref-qt.cpp
    * qt/pref-qt.h
    * qt/qtgettext.h
    * qt/switcher-qt.cpp
    * qt/switcher-qt.h
    * qt/test/qedittest.cpp
    * qt/toolbar-applet-kde.cpp
    * qt/toolbar-applet-kde.h
    * qt/toolbar-common-quimhelpertoolbar.cpp
    * qt/toolbar-common-quimhelpertoolbar.h
    * qt/toolbar-common-uimstateindicator.cpp
    * qt/toolbar-common-uimstateindicator.h
    * qt/toolbar-standalone-qt.cpp
    * qt/toolbar-standalone-qt.h
    * qt4/candwin/qt4.cpp
    * qt4/candwin/qt4.h
    * qt4/chardict/bushuviewwidget.cpp
    * qt4/chardict/bushuviewwidget.h
    * qt4/chardict/chargridview.cpp
    * qt4/chardict/chargridview.h
    * qt4/chardict/po/ja.po
    * qt4/chardict/qt4.cpp
    * qt4/chardict/qt4.h
    * qt4/chardict/qtgettext.h
    * qt4/chardict/unicodeviewwidget.cpp
    * qt4/chardict/unicodeviewwidget.h
    * qt4/edittest/main.cpp
    * qt4/immodule/candidatewindow.cpp
    * qt4/immodule/candidatewindow.h
    * qt4/immodule/plugin.cpp
    * qt4/immodule/plugin.h
    * qt4/immodule/qhelpermanager.cpp
    * qt4/immodule/qhelpermanager.h
    * qt4/immodule/qtextutil.cpp
    * qt4/immodule/qtextutil.h
    * qt4/immodule/quiminfomanager.cpp
    * qt4/immodule/quiminfomanager.h
    * qt4/immodule/quiminputcontext.cpp
    * qt4/immodule/quiminputcontext.h
    * qt4/immodule/quiminputcontext_compose.cpp
    * qt4/immodule/quiminputcontext_compose.h
    * qt4/immodule/quiminputcontext_with_slave.cpp
    * qt4/immodule/quiminputcontext_with_slave.h
    * qt4/immodule/subwindow.cpp
    * qt4/immodule/subwindow.h
    * qt4/pref/customwidgets.cpp
    * qt4/pref/customwidgets.h
    * qt4/pref/qt4.cpp
    * qt4/pref/qt4.h
    * qt4/qtgettext.h
    * qt4/switcher/qt4.cpp
    * qt4/switcher/qt4.h
    * qt4/toolbar/applet-kde4.cpp
    * qt4/toolbar/applet-kde4.h
    * qt4/toolbar/common-quimhelpertoolbar.cpp
    * qt4/toolbar/common-quimhelpertoolbar.h
    * qt4/toolbar/common-uimstateindicator.cpp
    * qt4/toolbar/common-uimstateindicator.h
    * qt4/toolbar/standalone-qt4.cpp
    * qt4/toolbar/standalone-qt4.h
    * replace/os_dep.h
    * scm/action.scm
    * scm/ajax-ime-custom.scm
    * scm/ajax-ime-key-custom.scm
    * scm/ajax-ime.scm
    * scm/anthy-custom.scm
    * scm/anthy-key-custom.scm
    * scm/anthy-utf8-custom.scm
    * scm/anthy-utf8.scm
    * scm/anthy.scm
    * scm/byeoru-custom.scm
    * scm/byeoru-dic.scm
    * scm/byeoru-key-custom.scm
    * scm/byeoru-symbols.scm
    * scm/byeoru.scm
    * scm/canna-custom.scm
    * scm/canna-key-custom.scm
    * scm/canna.scm
    * scm/composer.scm
    * scm/custom-rt.scm
    * scm/custom.scm
    * scm/deprecated-util.scm
    * scm/direct.scm
    * scm/editline.scm
    * scm/elatin-custom.scm
    * scm/elatin-rules.scm
    * scm/elatin.scm
    * scm/event.scm
    * scm/fileio.scm
    * scm/generic-custom.scm
    * scm/generic-key-custom.scm
    * scm/generic-predict.scm
    * scm/generic.scm
    * scm/hangul.scm
    * scm/hangul2.scm
    * scm/hangul3.scm
    * scm/http-client.scm
    * scm/i18n.scm
    * scm/ichar.scm
    * scm/im-custom.scm
    * scm/im-switcher.scm
    * scm/im.scm
    * scm/init.scm
    * scm/ipa-x-sampa.scm
    * scm/iso-639-1.scm
    * scm/japanese-azik.scm
    * scm/japanese-kana.scm
    * scm/japanese.scm
    * scm/key.scm
    * scm/latin.scm
    * scm/lazy-load.scm
    * scm/light-record.scm
    * scm/load-action.scm
    * scm/look-custom.scm
    * scm/look.scm
    * scm/m17nlib.scm
    * scm/mana-custom.scm
    * scm/mana-key-custom.scm
    * scm/mana.scm
    * scm/ng-action.scm
    * scm/ng-key.scm
    * scm/openssl.scm
    * scm/pinyin-big5.scm
    * scm/plugin.scm
    * scm/predict-custom.scm
    * scm/predict-look-skk.scm
    * scm/predict-look.scm
    * scm/predict-sqlite3.scm
    * scm/prime-custom.scm
    * scm/prime-key-custom.scm
    * scm/prime.scm
    * scm/process.scm
    * scm/pyload.scm
    * scm/pyunihan.scm
    * scm/rk.scm
    * scm/romaja.scm
    * scm/scim.scm
    * scm/sj3-custom.scm
    * scm/sj3-key-custom.scm
    * scm/sj3.scm
    * scm/skk-custom.scm
    * scm/skk-dialog.scm
    * scm/skk-editor.scm
    * scm/skk-key-custom.scm
    * scm/skk.scm
    * scm/social-ime-custom.scm
    * scm/social-ime-key-custom.scm
    * scm/social-ime.scm
    * scm/socket.scm
    * scm/spellcheck-custom.scm
    * scm/spellcheck.scm
    * scm/sqlite3.scm
    * scm/tcode.scm
    * scm/trec-composer.scm
    * scm/trec.scm
    * scm/trycode.scm
    * scm/tutcode-bushudic.scm
    * scm/tutcode-custom.scm
    * scm/tutcode-key-custom.scm
    * scm/tutcode-kigoudic.scm
    * scm/tutcode-rule.scm
    * scm/tutcode.scm
    * scm/uim-db.scm
    * scm/uim-help.scm
    * scm/uim-module-manager.scm
    * scm/uim-sh.scm
    * scm/ustr.scm
    * scm/util.scm
    * scm/viqr.scm
    * scm/wlos.scm
    * scm/wnn-custom.scm
    * scm/wnn-key-custom.scm
    * scm/wnn.scm
    * scm/yahoo-jp-custom.scm
    * scm/yahoo-jp-key-custom.scm
    * scm/yahoo-jp.scm
    * scm/zaurus.scm
    * test/i18n/test-base.scm
    * test/i18n/test-language.scm
    * test/key/test-base.scm
    * test/key/test-predicate.scm
    * test/key/test-translator.scm
    * test/run-test.scm
    * test/template.scm
    * test/test-action.scm
    * test/test-anthy.scm
    * test/test-custom-rt.scm
    * test/test-custom.scm
    * test/test-db.scm
    * test/test-example.scm
    * test/test-iconv.scm
    * test/test-im.scm
    * test/test-intl.scm
    * test/test-lazy-load.scm
    * test/test-ng-key.scm
    * test/test-plugin.scm
    * test/test-uim-test-utils.scm
    * test/test-ustr.scm
    * test/uim-assertions.scm
    * test/uim-test-utils-new.scm
    * test/uim-test-utils.scm
    * test/uim-test.scm
    * test/util/test-character-conversion.scm
    * test/util/test-character-predicate.scm
    * test/util/test-list.scm
    * test/util/test-misc.scm
    * test/util/test-multi-segment.scm
    * test/util/test-r5rs.scm
    * test/util/test-record.scm
    * test/util/test-rk.scm
    * test/util/test-srfi.scm
    * test/util/test-string.scm
    * test/util/test-uim.scm
    * test2/test-composer.scm
    * test2/test-fail.scm
    * test2/test-light-record.scm
    * test2/test-template.scm
    * test2/test-trec.scm
    * test2/test-wlos.scm
    * uim/agent.c
    * uim/anthy-utf8.c
    * uim/anthy.c
    * uim/bsdlook.h
    * uim/counted-init.c
    * uim/counted-init.h
    * uim/curl.c
    * uim/dynlib.c
    * uim/dynlib.h
    * uim/editline.c
    * uim/encoding-table.c
    * uim/expat.c
    * uim/ffi.c
    * uim/fileio.c
    * uim/iconv.c
    * uim/intl.c
    * uim/lolevel.c
    * uim/look.c
    * uim/m17nlib.c
    * uim/mana.c
    * uim/openssl.c
    * uim/process.c
    * uim/rk.c
    * uim/scim.cpp
    * uim/skk.c
    * uim/socket.c
    * uim/spellcheck.c
    * uim/sqlite3.c
    * uim/test-gc.c
    * uim/uim-custom-enabler.c
    * uim/uim-custom.c
    * uim/uim-custom.h
    * uim/uim-eb.c
    * uim/uim-eb.h
    * uim/uim-error.c
    * uim/uim-func.c
    * uim/uim-help.c
    * uim/uim-helper-client.c
    * uim/uim-helper-server.c
    * uim/uim-helper.c
    * uim/uim-helper.h
    * uim/uim-iconv.h
    * uim/uim-im-switcher.h
    * uim/uim-internal.h
    * uim/uim-ipc.c
    * uim/uim-key.c
    * uim/uim-module-manager.c
    * uim/uim-notify.c
    * uim/uim-notify.h
    * uim/uim-posix.c
    * uim/uim-posix.h
    * uim/uim-scm-abbrev.h
    * uim/uim-scm-sigscheme.c
    * uim/uim-scm.h
    * uim/uim-sh.c
    * uim/uim-util.c
    * uim/uim-util.h
    * uim/uim-x-kana-input-hack.c
    * uim/uim-x-util.h
    * uim/uim.c
    * uim/uim.h
    * uim/wnnlib.c
    * uim/wnnlib.h
    * xim/canddisp.cpp
    * xim/canddisp.h
    * xim/compose.cpp
    * xim/compose.h
    * xim/connection.cpp
    * xim/connection.h
    * xim/convdisp.cpp
    * xim/convdisp.h
    * xim/helper.cpp
    * xim/helper.h
    * xim/locale.cpp
    * xim/main.cpp
    * xim/util.cpp
    * xim/util.h
    * xim/xdispatch.h
    * xim/xim.h
    * xim/ximic.cpp
    * xim/ximim.cpp
    * xim/ximpacket.cpp
    * xim/ximpn.h
    * xim/ximserver.cpp
    * xim/ximserver.h
    * xim/ximtrans.cpp
      - Update copyright by svn ls -R | egrep -v '/$' | xargs perl -i -pe 's/\b(200\d)([,-\s]+200\d)*\s+uim\b/\1-2010 uim/'

2010-04-03 Etsushi Kato <ek.kato@gmail.com>

    * helper/dict-canna-cclass.c
      - (find_desc_from_code_with_type) : Plug leak.
      - (find_code_from_desc) : Ditto.

2010-04-03 Muneyuki Noguchi <nogu.dev@gmail.com>

    * NEWS
      - Update.

2010-03-30 Etsushi Kato <ek.kato@gmail.com>

    * m4/ax_path_qmake4.m4 : Suppress warning.

2010-03-30 Etsushi Kato <ek.kato@gmail.com>

    * qt4/chardict/Makefile.am
    * qt4/toolbar/Makefile.am
    * qt4/candwin/Makefile.am
    * qt4/edittest/Makefile.am
    * qt4/switcher/Makefile.am
    * qt4/immodule/Makefile.am
    * qt4/pref/Makefile.am
      - Fix warnings ([uim-ja 191], Kiwamu Okabe).

2010-03-28 Jae-hyeon Park <jhyeon@gmail.com>

    * scm/elatin.scm
      - (elatin-key-release-handler): commit every key release event even
        when composition is turned on; this enables query prediction on
        www.google.de

2010-03-28 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/caretstateindicator.cpp
      - (CaretStateIndicator::update): Adjust size and center text.
        See also gtk/caret-state-indicator.c.

2010-03-28 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/quiminputcontext.cpp
      - (QUimInputContext::clearPreedit): Simplify and optimize.

2010-03-25 Etsushi Kato <ek.kato@gmail.com>

    * test/test-im.scm (define-uim-test-case) : Fix to set
      enabled-im-list.

2010-03-25 Etsushi Kato <ek.kato@gmail.com>

    * scm/look.scm : Use "" for lang.

2010-03-25 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/quiminputcontext.cpp
      - (QUimInputContext::x11FilterEvent): Use Q_UNUSED macro for `event'
        only if UIM_QT_USE_JAPANESE_KANA_KEYBOARD_HACK isn't defined.
        The `event' parameter is used when UIM_QT_USE_JAPANESE_KANA_KEYBOARD_HACK
        is defined.
    * qt4/immodule/quiminputcontext.h
      - Use Q_WS_X11 macro after Qt4 header file is included.
        The macro is defined in a Qt4 header file.

2010-03-25 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/quiminputcontextplugin.pro.in
      - (CONFIG): Don't add qt thread. We don't have to add `qt'
        and this plugin isn't multi-threaded.

2010-03-25 Etsushi Kato <ek.kato@gmail.com>

    * test/uim-test-utils-new.scm (uim-sh-read-block) : Workaround not
      to get incorrect results.

2010-03-25 Etsushi Kato <ek.kato@gmail.com>

    * helper/dict-word-list-win-gtk.c
    * helper/pref-gtk-custom-widgets.c
    * helper/dict-word-win-gtk.c
    * helper/pref-gtk.c
      - Fix fifth argument for gtk_message_dialog_new().
    * helper/eggtrayicon.c (egg_tray_icon_manager_filter) : Suppress
      warning.

2010-03-24 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/candidatewindow.cpp
      - (CandidateWindow::CandidateWindow): Reorder member variables.
    * qt4/immodule/candidatewindow.h
      - Ditto.

2010-03-24 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/candidatewindow.cpp
      - Remove unused function CandidateWindow::setIndexInPage().
    * qt4/immodule/candidatewindow.h
      - Ditto.

2010-03-24 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/candidatewindow.h
      - Make public functions protected.

2010-03-24 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/candidatewindow.cpp
      - (CandidateWindow::~CandidateWindow,
         CandidateWindow::clearCandidates): Simplify. Maybe optimize.

2010-03-24 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/quiminputcontext.cpp
      - (QUimInputContext::candidateActivate,
         QUimInputContext::candidateSelect,
         QUimInputContext::candidateShiftPage,
         QUimInputContext::candidateDeactivate): Remove.
      - (QUimInputContext::cand_activate_cb,
         QUimInputContext::cand_select_cb,
         QUimInputContext::cand_shift_page_cb,
         QUimInputContext::cand_deactivate_cb):
        Call CandidateWindow's member functions directly.
    * qt4/immodule/quiminputcontext.h
      - Remove CandidateWindow-related functions.

2010-03-24 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/candidatewindow.cpp
      - (CandidateWindow::preparePageCandidates,
         CandidateWindow::candidateActivate,
         CandidateWindow::candidateSelect,
         CandidateWindow::candidateShiftPage):
        New functions. Move from the QUimInputContext class.
    * qt4/immodule/candidatewindow.h
      - Ditto.
      - (CandidateWindow): Make nrCandidates, displayLimit, candidateIndex
        and pageIndex protected again.
       - (CandidateWindow): Add pageFilled and nrPages.
    * qt4/immodule/quiminputcontext.cpp
       - (QUimInputContext::prepare_page_candidates): Remove.
       - (QUimInputContext::candidateActivate,
          QUimInputContext::candidateSelect,
          QUimInputContext::candidateShiftPage)
         Delegate to CandidateWindow.
    * qt4/immodule/quiminputcontext.h
       - Remove QUimInputContext::prepare_page_candidates().
       - Remove pageFilled and nrPages.

2010-03-24 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/Makefile.am
      - Remove debug.h to make it easy to debug functions.
    * qt4/immodule/quiminputcontextplugin.pro.in
      - Ditto.
    * qt4/immodule/debug.h
      - Remove.
    * qt4/immodule/candidatewindow.cpp
      - Use ENABLE_DEBUG macro.
    * qt4/immodule/plugin.cpp
      - Ditto.
    * qt4/immodule/quiminputcontext.cpp
      - Ditto.

2010-03-24 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/quiminputcontext.cpp
      - (QUimInputContext::clearPreedit,
         QUimInputContext::pushbackPreeditString,
         QUimInputContext::getPreeditString,
         QUimInputContext::getPreeditCursorPosition,
         QUimInputContext::getPreeditSelectionLength,
         QUimInputContext::getPreeditAttrs):
      - Change psegs from QList<PreeditSegment*> to QList<PreeditSegment>
        for efficiency.
    * qt4/immodule/quiminputcontext.h
      - Ditto.

2010-03-24 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/quiminputcontext.cpp
      - (QUimInputContext::QUimInputContext):
        Remove meaningless code. psegs is initialized by default.
      - (QUimInputContext::clearPreedit): Remove meaningless code.
        After all elements are removed, we don't have to call clear() any more.

2010-03-22 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/caretstateindicator.cpp
      - (CaretStateIndicator::setup): New function.
      - (CaretStateIndicator::update):
        Call setVisible(true) not inside update() but inside setup().
    * qt4/immodule/caretstateindicator.h
      - Add CaretStateIndicator::setup().
      - Make CaretStateIndicator::update() and CaretStateIndicator::setTimeout()
        private.
    * qt4/immodule/quiminputcontext.cpp
      - (QUimInputContext::setupIndicator):
        Move its operation to CaretStateIndicator::setup().

2010-03-22 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/quiminputcontext.cpp
      - (QUimInputContext::isPreeditRelocationEnabled):
        Remove this unused function.
    * qt4/immodule/quiminputcontext.h
      - Ditto.

2010-03-22 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/qhelpermanager.cpp
      - (QUimHelperManager::checkHelperConnection,
         QUimHelperManager::slotStdinActivated):
        Remove unused argument from slot.
    * qt4/immodule/qhelpermanager.h
      - Ditto.
    * qt4/switcher/qt4.cpp
      - (UimImSwitcher::checkHelperConnection,
         UimImSwitcher::slotStdinActivated): Ditto.
    * qt4/switcher/qt4.h
      - Ditto.
    * qt4/toolbar/common-uimstateindicator.cpp
      - (UimStateIndicator::checkHelperConnection,
         UimStateIndicator::slotStdinActivated): Ditto.
    * qt4/toolbar/common-uimstateindicator.h
      - Ditto.

2010-03-22 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/quiminputcontext.cpp
      - (QUimInputContext::setMicroFocus):
        Remove last argument. QInputContext::setMicroFocus() no longer exists
        in Qt4 and the last argument isn't used.
    * qt4/immodule/quiminputcontext.h
      - Ditto.

2010-03-22 Muneyuki Noguchi <nogu.dev@gmail.com>

    - qt4/immodule/quiminputcontext.cpp
      * (QUimInputContext::readIMConf): Simplify.

2010-03-22 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/quiminputcontext.h
      - Make isPreeditRelocationEnabled() and isPreeditPreservationEnabled()
        non-virtual. Both are used only in QUimInputContext
        and aren't overridden. For efficiency, we shouldn't make a function
        virtual if not necessary

2010-03-21 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/candidatewindow.cpp
      - Don't compare value of "eb-enable-for-annotation?"
        with UIM_TRUE. See uim/uim.h.

2010-03-21 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/caretstateindicator.cpp
      - Define CaretStateIndicator::SPACING.
      - (CaretStateIndicator::update): Use CaretStateIndicator::SPACING.
    * qt4/immodule/caretstateindicator.h
      - Declare CaretStateIndicator::SPACING.
    * qt4/immodule/quiminputcontext.cpp
      - (QUimInputContext::update): Use CaretStateIndicator::SPACING.

2010-03-21 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/caretstateindicator.cpp
    * qt4/immodule/quiminputcontext.cpp
      - Move indicator 3pt below caret as GTK+ immodule.
        See the last line of caret_state_indicator_update()
        in gtk/caret-state-indicator.c

2010-03-21 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/quiminputcontext.cpp
      - (QUimInputContext::update): Update location of indicator on caret move.

2010-03-21 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/quiminputcontext.cpp
      - (QUimInputContext::unsetFocus): Hide indicator on focus out.

2010-03-21 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/caretstateindicator.cpp
      - (CaretStateIndicator::CaretStateIndicator,
         CaretStateIndicator::update, CaretStateIndicator::eventFilter):
        Rename member variable.
    * qt4/immodule/caretstateindicator.h
      - (CaretStateIndicator): Ditto.

2010-03-21 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/caretstateindicator.h
      - Include QtGui/QWidget instead of QtGui/QLabel.

2010-03-20 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/Makefile.am
      - (EXTRA_DIST): Add caretstateindicator.h and caretstateindicator.cpp.
    * qt4/immodule/caretstateindicator.cpp
      - (CaretStateIndicator): New class.
    * qt4/immodule/caretstateindicator.h
      - (CaretStateIndicator): New class.
    * qt4/immodule/qhelpermanager.cpp
      - (QUimHelperManager::update_prop_list_cb):
        Call QUimInputContext::setupIndicator().
    * qt4/immodule/quiminputcontext.cpp
      - (QUimInputContext::QUimInputContext):
        Construct instance of CaretStateIndicator.
      - (QUimInputContext::setupIndicator): New function.
    * qt4/immodule/quiminputcontext.h
      - (QUimInputContext::setupIndicator): New function.
    * qt4/immodule/quiminputcontextplugin.pro.in
      - (HEADERS): Add caretstateindicator.h.
      - (SOURCES): Add caretstateindicator.cpp.

2010-03-20 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/quiminputcontext.cpp
      - Change include order.

2010-03-20 Jae-hyeon Park <jhyeon@gmail.com>

    * scm/byeoru.scm
      - a candidate can be selected by a numeral key
      - replaced nth by list-ref, truncate-list by take, digit->string by
        number->string
      - other minor alterations
    * scm/byeoru-custom.scm
      - replaced nth by list-ref

2010-03-19 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/chardict/bushuviewwidget.cpp
    * qt4/chardict/qt4.cpp
    * qt4/chardict/unicodeviewwidget.cpp
    * qt4/pref/customwidgets.cpp
    * qt4/pref/qt4.cpp
        Adjust margins. Compared to the Qt3 version, the current margins are
        too wide. This issue is obvious especially with the Plastique style.
        This commit addresses this issue by setting the layout's margins to 0.

2010-03-19 IWATA Ray <iwata@quasiquote.org>

    * scm/pregexp.scm:
      - New file.
    * COPYING:
      - Add copyright.
    * scm/Makefile.am (SCM_FILES):
      - Add pregexp.scm.
    
      Import Dorai Sitaram's portable regular expression library.
      http://evalwhen.com/pregexp/index.html

2010-03-17 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/quiminputcontext.cpp
      - (QUimInputContext::cand_shift_page_cb): Don't use C-style cast.

2010-03-17 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/Makefile.am
      - (EXTRA_DIST): Sort file list alphabetically.
    * qt4/immodule/quiminputcontextplugin.pro.in
      - (HEADERS, SOURCES): Ditto.

2010-03-14 Jae-hyeon Park <jhyeon@gmail.com>

    * scm/byeoru.scm
      - cosmetic changes only
      - definitions of the following layouts have been simplified:
        byeoru-layout-hangul2hanterm, byeoru-layout-hangul2,
        byeoru-layout-strict3final, byeoru-layout-generous3final,
        byeoru-layout-strict390, byeoru-layout-generous390,
        byeoru-layout-no-shift, byeoru-romaja-rule
      - (byeoru-look-up-dic): changed to (byeoru-lookup-word)

2010-03-14 Jae-hyeon Park <jhyeon@gmail.com>

    * scm/elatin-custom.scm
      - elatin-use-completion?: amended the short description since
        "TeX input" may sound like input of a real TeX file

2010-03-13 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/qhelpermanager.cpp
    * qt4/immodule/qtextutil.cpp
    * qt4/immodule/quiminputcontext.cpp
    * qt4/immodule/quiminputcontext_compose.cpp
    * qt4/immodule/quiminputcontext_compose.h
    * qt4/pref/customwidgets.h
    * qt4/pref/qt4.cpp
      - Use static_cast instead of C style casts. Using static_cast is safer
        because it can't convert between incompatible types and can't cast
        away constness. In fact, one of the C style casts in the codes had
        removed constness.

2010-03-13 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/plugin.cpp
    * qt4/immodule/qhelpermanager.cpp
    * qt4/immodule/qtextutil.cpp
    * qt4/immodule/quiminputcontext.cpp
    * qt4/immodule/quiminputcontext_compose.cpp
    * qt4/pref/customwidgets.cpp
    * qt4/qtgettext.h
    * qt4/switcher/qt4.cpp
      - Don't use QByteArray::operator const char *() const.
        Use QByteArray::data(). This commit also removes many C style casts,
        which should be avoided in C++.

2010-03-11 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/quiminputcontext.cpp
      - (QUimInputContext::getPreeditAttrs):
        Honor reversed-separator-background, separator-background,
        reversed-separator-foreground, and separator-foreground settings.

2010-03-11 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/quiminputcontext.cpp
      - (getUserDefinedColor): New function.
      - (QUimInputContext::getPreeditAttrs):
        Honor reversed-preedit-foreground and reversed-preedit-background
        settings.

2010-03-11 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/quiminputcontext.cpp
      - (QUimInputContext::prepare_page_candidates,
         QUimInputContext::candidateActivate):
        Don't call QList::clear() just after empty list is constructed.
        It's meaningless.

2010-03-11 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/quiminputcontext_compose.cpp
      - (Compose::handle_qkey): Remove redundant code.

2010-03-11 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/quiminputcontext.cpp
      - Fix typo.

2010-03-11 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/qtextutil.cpp
      - (QUimTextUtil::acquirePrimaryText, QUimTextUtil::acquireSelectionText,
         QUimTextUtil::deletePrimaryText, QUimTextUtil::deleteSelectionText):
        Replace QInputContext::focusWidget() with QApplication::focusWidget().
        There is no description of QInputContext::focusWidget() in the Qt 4.5
        documentation. We shouldn't call undocumented functions.
    * qt4/immodule/quiminputcontext.cpp
      - (QUimInputContext::setFocus, QUimInputContext::unsetFocus,
         QUimInputContext::update): Ditto.
    * qt4/immodule/quiminputcontext_with_slave.cpp
      - (QUimInputContextWithSlave::setFocus,
         QUimInputContextWithSlave::destroyInputContext): Ditto.

2010-03-11 Etsushi Kato <ek.kato@gmail.com>

    * helper/Makefile.am
    * gtk/Makefile.am
      - Remove redundant and non-universal -Wall.

2010-03-11 Etsushi Kato <ek.kato@gmail.com>

    * replace/Makefile.am (strtonum.lo) : Add -std=c99 into CFLAGS for
      darwin.

2010-03-08 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/candidatewindow.cpp
      - (CandidateWindow::CandidateWindow, CandidateWindow::popup,
         CandidateWindow::eventFilter): Add event filter to fix bug #13911.
        A candidate window follows the move of a main window with this commit.
    * qt4/immodule/candidatewindow.h
      - Ditto.

2010-03-06 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/toolbar/applet-kde4.cpp
      - (UimApplet::UimApplet): Prevent plasmoid from shrinking horizontally.
        When a panel is full of widgets, the current KDE4 plasmoid shrinks,
        which is an unwanted behaviour. This commit fixes the behaviour
        by setting the size policy to QSizePolicy::Fixed.

2010-03-06 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/candwin/qt4.cpp
      - (CandidateWindow::CandidateWindow, CandidateWindow::strParse,
         CandidateWindow::setIndex): Disable auto scroll in table widget.
        This commit is a true fix for a bug in selecting a cell
        and also removes the workaround added in r6217 and r6225.
    * qt4/immodule/candidatewindow.cpp
      - (CandidateWindow::CandidateWindow, CandidateWindow::setIndex,
         CandidateWindow::setIndexInPage, CandidateWindow::shiftPage): Ditto.

2010-03-06 Jae-hyeon Park <jhyeon@gmail.com>

    A major revision of elatin for incorporating TeX style rules (which
    used to be omitted of rules from the Emacs quail packages).
    Thanks to Vincent Gross for the suggestion.
    [see http://www.mail-archive.com/uim-en@googlegroups.com/msg00196.html]
    To ease input of long sequences, elatin now offers preedit completion,
    initiated on the tab key by default.
    
    * scm/elatin.scm
    
      - many changes for preedit completion
      - multiple translations (appearing in the British rule) can also be
        navigated by arrow keys etc.
      - (elatin-update-preedit): less frequently calls (im-update-preedit);
        this eliminates glitches in the form completion interface of
        firefox for example
      - (elatin-context-new): checks if the custom variable elatin-rules
        has a valid value since some rule are no longer available
      - (elatin-focus-out-handler): now handles focus-out events
      - other minor cleanups
    
    * scm/elatin-rules.scm
    
      - rules synced to those in GNU Emacs 23.1
      - this means that the following rules are no longer included:
        danish-alt-postfix, esperanto-alt-postfix, finnish-alt-postfix,
        german-alt-postfix, icelandic-alt-postfix, norwegian-alt-postfix,
        scandinavian-alt-postfix, spanish-alt-postfix,
        swedish-alt-postfix; they were identical to the non-alt versions;
        also deleted are: turkish-latin-3-postfix,
        turkish-latin-3-alt-postfix, which were identical to the
        non-latin-3 versions
      - added elatin-rules-TeX
      - rules are expanded by a macro so that the source file becomes
        smaller
    
    * scm/elatin-custom.scm
    
      - added new custom variables for preedit completion
      - updated list of choices for elatin-rules

2010-03-05 Muneyuki Noguchi <nogu.dev@gmail.com>

    * xim/ximserver.cpp
      - (init_modifier_keys): Add cast to suppress warning.

2010-03-05 Muneyuki Noguchi <nogu.dev@gmail.com>

    * xim/canddisp.cpp
    * xim/compose.cpp
    * xim/connection.cpp
    * xim/convdisp.cpp
    * xim/helper.cpp
    * xim/locale.cpp
    * xim/main.cpp
    * xim/util.cpp
    * xim/util.h
    * xim/xim.h
    * xim/ximic.cpp
    * xim/ximim.cpp
    * xim/ximpacket.cpp
    * xim/ximserver.cpp
    * xim/ximtrans.cpp
      - Don't include header files such as <stdio.h>, <stdlib.h> and <string.h>.
        They are deprecated in C++ (ISO/IEC 14882:2003).

2010-03-05 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/candidatewindow.cpp
      - (CandidateWindow::CandidateWindow, CandidateWindow::setPage,
         CandidateWindow::updateLabel):
        Add column for annotation only when eb-enable-for-annotation is #t.
    * qt4/immodule/candidatewindow.h
      - Add CandidateWindow::hasAnnotation.

2010-03-05 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/candwin/qt4.cpp
      - (CandidateWindow::CandidateWindow):
        Call hide() after setLayout() is called.
    * qt4/immodule/subwindow.cpp
      - (SubWindow::SubWindow): Ditto.

2010-03-05 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/candidatewindow.cpp
      - (CandidateWindow::CandidateWindow): Use initialization list.
    * qt4/candwin/qt4.cpp
      - (CandidateWindow::CandidateWindow): Ditto.

2010-03-05 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/candidatewindow.cpp
      - (CandidateWindow::CandidateWindow):
        Don't call QList::clear() in constructor. It's meaningless.

2010-03-05 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/candidatewindow.cpp
      - (CandidateWindow::setIndex, CandidateWindow::shiftPage):
        Fix bug in selecting cell. Currently, cells in the 1st column are
        hidden when a cell in the 3rd or 4th column is selected by a click.
        This commit is a workaround for this issue.
    
    * qt4/candwin/qt4.cpp
      - (CandidateWindow::setIndex): Ditto.

2010-03-05 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/candidatewindow.cpp
      - (CandidateListView::sizeHint): Add comment.
    * qt4/immodule/candidatewindow.cpp
      - (CandidateListView::sizeHint): Ditto.

2010-03-04 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/candwin/qt4.cpp
      - (CandidateWindow::CandidateWindow,
         CandidateWindow::adjustCandidateWindowSize):
        Add dummy column to adjust size.
    * qt4/immodule/candidatewindow.cpp
      - (CandidateWindow::CandidateWindow, CandidateListView::sizeHint):
        Ditto.

2010-03-04 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/candwin/qt4.cpp
      - (CandidateWindow::CandidateWindow,
         CandidateWindow::adjustCandidateWindowSize):
        Use setMinimumWidth.
    * qt4/immodule/candidatewindow.cpp
      - (CandidateWindow::CandidateWindow, CandidateListView::sizeHint):
        Ditto.

2010-03-03 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/candidatewindow.cpp
      - (CandidateWindow::setPage, CandidateWindow::slotHookSubwindow):
        Don't use magic numbers

2010-03-03 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/candidatewindow.cpp
      - (CandidateWindow::CandidateWindow, CandidateWindow::slotHookSubwindow):
        Add column for annotation.

2010-03-03 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/subwindow.cpp
      - (SubWindow::SubWindow): Correct margin.

2010-03-03 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/candwin/qt4.cpp
      - (CandidateWindow::setIndex):
        Call selectRow() instead of calling setSelected() twice.
    * qt4/immodule/candidatewindow.cpp
      - (CandidateWindow::setIndex, CandidateWindow::shiftPage): Ditto.

2010-03-03 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/candwin/qt4.cpp
      - Fix bug in selecting row partially.
    * qt4/immodule/candidatewindow.cpp
      - Ditto.

2010-03-03 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/candwin/qt4.cpp
      - (CandidateWindow::CandidateWindow,
        CandidateWindow::slotCandidateSelected):
        Use cellClicked instead of itemClicked.
    * qt4/candwin/qt4.h
      - Ditto.
    * qt4/immodule/candidatewindow.cpp
      - (CandidateWindow::CandidateWindow, CandidateWindow::setIndex,
        CandidateWindow::slotCandidateSelected): Ditto.
    * qt4/immodule/candidatewindow.h
      - Ditto.

2010-03-03 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/candwin/qt4.cpp
      - (CandidateWindow::setPage): Optimize.
    * qt4/immodule/candidatewindow.cpp
      - (CandidateWindow::setPage): Ditto.

2010-03-03 Etsushi Kato <ek.kato@gmail.com>

    * qt4/candwin/uim-candwin-qt4.pro.in
    * qt4/chardict/uim-chardict-qt4.pro.in
    * qt4/pref/uim-pref-qt4.pro.in
    * qt4/switcher/uim-im-switcher-qt4.pro.in
    * qt4/toolbar/uim-toolbar-qt4.pro.in
      - (LIBS) : Add @LIBINTL@.

2010-03-02 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/candwin/qt4.cpp
      - (CandidateWindow::adjustCandidateWindowSize): Fix column size.
    * qt4/immodule/candidatewindow.cpp
      - (CandidateWindow::sizeHint, CandidateListView::sizeHint): Ditto.

2010-03-02 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/chardict/chargridview.cpp
      - (CharGridView::resizeEvent): Use Q_UNUSED macro to suppress warning.
    * qt4/immodule/candidatewindow.cpp
      - (CandidateWindow::layoutWindow): Ditto.
    * qt4/immodule/qhelpermanager.cpp
      - (QUimHelperManager::slotStdinActivated): Ditto.
    * qt4/immodule/quiminputcontext.cpp
      - (QUimInputContext::x11FilterEvent, QUimInputContext::reloadUim): Ditto.
    * qt4/pref/customwidgets.cpp
      - (KeyGrabDialog::keyReleaseEvent): Ditto.
    * qt4/switcher/qt4.cpp
      - (UimImSwitcher::selectedImName): Ditto.
    * qt4/toolbar/common-uimstateindicator.cpp
      - (UimStateIndicator::slotStdinActivated): Ditto.
    * qt4/toolbar/standalone-qt4.cpp
      - (UimToolbarDraggingHandler::mousePressEvent,
        UimToolbarDraggingHandler::mouseReleaseEvent,
        UimToolbarDraggingHandler::mouseMoveEvent,
        UimToolbarDraggingHandler::mouseDoubleClickEvent): Ditto.

2010-03-02 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/candidatewindow.cpp
      - (CandidateWindow::setPage, CandidateWindow::setIndex):
        Remove unneeded casts.

2010-03-02 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/candwin/qt4.cpp
      - (CandidateWindow::adjustCandidateWindowSize): Fix column width.

2010-03-01 Muneyuki Noguchi <nogu.dev@gmail.com>

    * configure.ac
      - Expand tab to spaces.

2010-03-01 Etsushi Kato <ek.kato@gmail.com>

    * qt4/immodule/quiminputcontextplugin.pro.in (LIBS): Added @X11_LIBS@.

2010-03-01 Etsushi Kato <ek.kato@gmail.com>

    * configure.ac (UIM_LIBEXECDIR) : Set for AC_SUBST.
    * qt4/candwin/uim-candwin-qt4.pro.in (target.path) : Use
      UIM_LIBEXECDIR instead of libexecdir to fix r6127.

2010-02-28 Muneyuki Noguchi <nogu.dev@gmail.com>

    * configure.ac
      - Add `--enable-qt4-qt3support' option. With this option, you can
        enable or disable the support for the Qt3Support module in Qt4.
        What this option actually does is switching the support for Q3TextEdit
        in Qt4 immodule (see also the ENABLE_QT4_QT3SUPPORT macro
        in qt4/immodule/qtextutil.cpp).
        Q3TextEdit is in the Qt3Support module and, as the other classes
        in the Qt3Support, is obsolete and exists for compatibility.
        This option is for users who have Qt4 with Qt3Support disabled
        on their *nix boxes.

2010-02-28 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/candidatewindow.cpp
    * qt4/immodule/qhelpermanager.cpp
    * qt4/immodule/qtextutil.cpp
    * qt4/immodule/quiminputcontext.cpp
    * qt4/immodule/quiminputcontext_compose.cpp
    * qt4/immodule/quiminputcontextplugin.pro.in
    * qt4/immodule/subwindow.cpp
      - Remove dependency on Qt3Support module.

2010-02-28 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/candidatewindow.cpp
    * qt4/immodule/candidatewindow.h
    * qt4/immodule/plugin.cpp
    * qt4/immodule/plugin.h
    * qt4/immodule/qhelpermanager.cpp
    * qt4/immodule/qhelpermanager.h
    * qt4/immodule/qtextutil.cpp
    * qt4/immodule/qtextutil.h
    * qt4/immodule/quiminfomanager.cpp
    * qt4/immodule/quiminputcontext.cpp
    * qt4/immodule/quiminputcontext.h
    * qt4/immodule/quiminputcontext_compose.cpp
    * qt4/immodule/quiminputcontext_compose.h
    * qt4/immodule/subwindow.cpp
      - Change include order.

2010-02-28 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/qtextutil.cpp
    * qt4/immodule/quiminputcontext.cpp
    * qt4/immodule/quiminputcontext_compose.cpp
      - Don't include deprecated header files.

2010-02-28 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/candidatewindow.cpp
    * qt4/immodule/debug.h
    * qt4/immodule/plugin.cpp
    * qt4/immodule/plugin.h
    * qt4/immodule/qhelpermanager.cpp
    * qt4/immodule/qhelpermanager.h
    * qt4/immodule/qtextutil.cpp
    * qt4/immodule/qtextutil.h
    * qt4/immodule/quiminputcontext.cpp
    * qt4/immodule/quiminputcontext.h
    * qt4/immodule/quiminputcontext_compose.cpp
    * qt4/immodule/quiminputcontext_with_slave.cpp
    * qt4/immodule/subwindow.cpp
    * qt4/immodule/subwindow.h
      - Switch to new Qt4 include syntax.

2010-02-28 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/plugin.cpp
      - (UimInputContextPlugin::languages,
        UimInputContextPlugin::createLanguageList):
        Replace double quote with single quote for efficiency.
    * qt4/immodule/qhelpermanager.cpp
      - (QUimHelperManager::parseHelperStr): Ditto.

2010-02-28 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/plugin.cpp
      - (UimInputContextPlugin::create): Use Latin1String for efficiency.
    * qt4/immodule/qhelpermanager.cpp
      - (QUimHelperManager::parseHelperStr,
        QUimHelperManager::parseHelperStrImChange): Ditto.

2010-02-28 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/plugin.h
      - Add include guard.

2010-02-28 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/candidatewindow.h
    * qt4/immodule/qhelpermanager.h
    * qt4/immodule/qtextutil.h
    * qt4/immodule/quiminputcontext.h
    * qt4/immodule/quiminputcontext_with_slave.h
    * qt4/immodule/subwindow.h
      - Use "explicit" for constructors.

2010-02-28 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/quiminputcontext.cpp
    * qt4/immodule/quiminputcontext_compose.cpp
      - Avoid using #define if possible.

2010-02-28 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/candidatewindow.cpp
    * qt4/immodule/plugin.cpp
    * qt4/immodule/qhelpermanager.cpp
    * qt4/immodule/qtextutil.cpp
    * qt4/immodule/quiminfomanager.cpp
    * qt4/immodule/quiminputcontext.cpp
    * qt4/immodule/quiminputcontext_compose.cpp
    * qt4/immodule/quiminputcontext_with_slave.cpp
      - Replace NULL with 0.

2010-02-28 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/candidatewindow.cpp
    * qt4/immodule/candidatewindow.h
    * qt4/immodule/quiminputcontext_compose.h
      - Replace Q3ListView with QTableWidget.

2010-02-28 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/candidatewindow.cpp
    * qt4/immodule/candidatewindow.h
      - Replace Q3VBox with QFrame.

2010-02-28 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/qtextutil.cpp
      - Introduce ENABLE_QT4_QT3SUPPORT macro.

2010-02-28 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/subwindow.cpp
    * qt4/immodule/subwindow.h
      - Replace Q3VBox with QFrame.

2010-02-28 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/candidatewindow.cpp
      - (CandidateWindow::setCandidates, CandidateWindow::setPageCandidates):
        Replace Q3ValueList with QList.
    * qt4/immodule/candidatewindow.h
      - Ditto.
    * qt4/immodule/qhelpermanager.cpp
      - (QUimHelperManager::sendImList): Ditto.
    * qt4/immodule/quiminfomanager.cpp
      - (QUimInfoManager::getUimInfo): Ditto.
    * qt4/immodule/quiminfomanager.h
      - Ditto.

2010-02-28 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/candidatewindow.cpp
      - (CandidateWindow::CandidateWindow): Remove "QObject::".
        Because the connect() function isn't overridden, it's meaningless.
    * qt4/immodule/qhelpermanager.cpp
      - (QUimHelperManager::checkHelperConnection): Ditto.
    * qt4/immodule/quiminputcontext_with_slave.cpp
      - (QUimInputContextWithSlave::QUimInputContextWithSlave): Ditto.

2010-02-28 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/qhelpermanager.cpp
      - Don't include <Q3PtrList>. The Q3PrtList class isn't used.

2010-02-28 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/candidatewindow.cpp
      - (CandidateWindow::setPageCandidates): Make scope of variables narrower.
    * qt4/immodule/qtextutil.cpp
      - (QUimTextUtil::acquirePrimaryTextInQTextEdit,
        QUimTextUtil::deletePrimaryTextInQTextEdit,
        QUimTextUtil::deleteSelectionTextInQTextEdit): Ditto.
    * qt4/immodule/quiminputcontext_compose.cpp
      - (nexttoken, modmask, QUimInputContext::parse_compose_line): Ditto.

2010-02-28 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/candidatewindow.cpp
      - (CandidateWindow::~CandidateWindow, CandidateWindow::clearCandidates):
        Fix typos. "Data" is plural.
    * qt4/immodule/candidatewindow.h
      - Fix typo.

2010-02-28 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/subwindow.cpp
      - (SubWindow::forceInside): Don't use obsolete QMIN/QMAX macros.

2010-02-28 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/candidatewindow.cpp
      - (CandidateWindow::layoutWindow): Don't Assign QString::null to QString.
    * qt4/immodule/plugin.cpp
      - (UimInputContextPlugin::keys): Don't Assign QString::null to QString.
    * qt4/immodule/qhelpermanager.cpp
      - (QUimHelperManager::parseHelperStr): Ditto.

2010-02-28 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/quiminputcontext.cpp
      - (QUimInputContext::x11FilterEvent, QUimInputContext::filterEvent,
        QUimInputContext::reset, QUimInputContext::getPreeditAttrs):
        Don't use obsolete TRUE/FALSE macros.
    * qt4/immodule/subwindow.cpp
      - (SubWindow::hookPopup): Ditto.

2010-02-28 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/immodule/candidatewindow.cpp
    * qt4/immodule/plugin.cpp
    * qt4/immodule/qhelpermanager.cpp
    * qt4/immodule/qtextutil.h
    * qt4/immodule/quiminputcontext.cpp
    * qt4/immodule/quiminputcontext_compose.cpp
    * qt4/immodule/quiminputcontext_compose.h
      - Expand tabs to spaces.

2010-02-28 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/candwin/qt4.cpp
      - (CandidateWindow::setPage): Make items higher.

2010-02-27 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/candwin/qt4.cpp
    * qt4/candwin/uim-candwin-qt4.pro.in
      - Remove dependency on Qt3Support module.

2010-02-27 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/candwin/qt4.cpp
      - (CandidateWindow::setIndex): Remove unneeded cast.

2010-02-27 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/candwin/qt4.h
      - (CandidateWindow): Use "explicit" for constructor.

2010-02-27 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/candwin/qt4.cpp
      - Switch to new Qt4 include syntax.
      - Change include order.

2010-02-27 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/candwin/qt4.cpp
      - (CandidateWindow::activateCand, CandidateWindow::setPageCandidates):
        Use QLatin1String for efficiency.

2010-02-27 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/candwin/qt4.cpp
    * qt4/candwin/qt4.h
      - Replace CandidateListView with QTableWidget.
        CandidateListView inherits Q3ListView.
        This commit contains a big change.
        Because this changes the appearance of uim-candwin-qt4,
        you shouldn't merge this into the 1.5 branch.

2010-02-27 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/candwin/qt4.h
      - Remove forward declaration. QPoint isn't used in qt4.h

2010-02-27 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/candwin/qt4.cpp
    * qt4/candwin/qt4.h
      - Replace Q3VBox with QFrame.

2010-02-27 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/candwin/qt4.h
      - Replace Q3ValueList with QList.

2010-02-27 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/candwin/qt4.cpp
    * qt4/candwin/qt4.h
      - Don't include <uim/uim.h> and <uim/uim-helper.h> in qt4.h

2010-02-27 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/candwin/qt4.cpp
      - Replace NULL with 0.

2010-02-27 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/candwin/qt4.cpp
      - (CandidateWindow::CandidateWindow): Remove "QObject::".
        Because the connect() function isn't overridden, it's meaningless.

2010-02-25 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/candwin/qt4.cpp
    * qt4/candwin/qt4.h
      - Fix typos.

2010-02-25 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/candwin/qt4.cpp
      - (CandidateWindow::selectCand): Don't use obsolete TRUE/FALSE macros.

2010-02-25 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/candwin/qt4.cpp
      - (CandidateWindow::updateLabel): Assigning QString::null to QString is
        meaningless in Qt4.

2010-02-25 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/candwin/qt4.cpp
      - Don't include deprecated header files. <locale.h>, <stdio.h>,
        <stdlib.h> and <string.h> are deprecated in C++ (ISO/IEC 14882:2003).

2010-02-25 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/candwin/qt4.cpp
      - Expand tabs to spaces.

2010-02-25 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/edittest/edittest.pro
      - Remove dependency on Qt3Support module.
    * qt4/edittest/main.cpp
      - (main): Don't call QApplication::setMainWidget().
        It is in Qt3Support members and meaningless.

2010-02-25 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/edittest/main.cpp
      - Switch to new Qt4 include syntax.

2010-02-25 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/edittest/main.cpp
      - (main): Don't use Q3VBox, which is in Qt3Support module.

2010-02-25 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/toolbar/common-uimstateindicator.cpp
    * qt4/toolbar/standalone-qt4.cpp
    * qt4/toolbar/standalone-qt4.h
      - Qt4 toolbar should shrink when left edge is double-clicked

2010-02-25 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/candwin/qt4.cpp
      - (CandidateWindow::adjustCandidateWindowSize): Suppress warning.
        Don't compare between signed and unsigned integer expressions.

2010-02-25 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt/uimapplet.desktop.in
      - Remove space after "[Desktop Entry]" (desktop-file-validate).
      - Remove deprecated key "Encoding" (ditto).
      - Remove empty line (ditto).

2010-02-25 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/chardict/kseparator.h
      - Update documentation. The parameters "name" don't exist in Qt4 version.

2010-02-25 Muneyuki Noguchi <nogu.dev@gmail.com>

    * uim.desktop.in.in
      - Remove deprecated key "Encoding" (desktop-file-validate).

2010-02-25 Muneyuki Noguchi <nogu.dev@gmail.com>

    * qt4/toolbar/plasma-applet-uim.desktop.in
      - Remove empty line (desktop-file-validate).

2010-02-19 Etsushi Kato <ek.kato@gmail.com>

    * gtk/Makefile.am
      - (im_uim_la_CPPFLAGS) : Enclose EBCONF_* things.
      - (im_uim_la_CFLAGS) : Ditto.
      - (im_uim_la_LDFLAGS) : Ditto.
      - (im_uim_la_LIBADD) : Ditto.

2010-02-18 Etsushi Kato <ek.kato@gmail.com>

    * configure.ac
    * qt4/toolbar/common-quimhelpertoolbar.cpp
      - Use Oxygen icons for KDE4 ([uim-en 297], Muneyuki Noguchi)

2010-02-05 IWATA Ray <iwata@quasiquote.org>

    * scm/ajax-ime.scm (ajax-ime-context-new):
    * scm/canna.scm (canna-context-new):
    * scm/sj3.scm (sj3-context-new):
    * scm/social-ime.scm (social-ime-context-new):
    * scm/wnn.scm (wnn-context-new):
    * scm/yahoo-jp.scm (yahoo-jp-context-new):
      - Init prediction engine while *-use-prediction?

2010-02-05 IWATA Ray <iwata@quasiquote.org>

    * scm/yahoo-jp-custom.scm (yahoo-jp-prediction-type):
      - Add custom value.
    * scm/yahoo-jp.scm (yahoo-jp-lib-set-prediction-src-string):
      (yahoo-jp-lib-commit-nth-prediction, yahoo-jp-context-new):
      - Add local prediction.
      (yahoo-jp-lib-get-nth-word, yahoo-jp-lib-get-nth-appendix):
      - New function.

2010-02-05 IWATA Ray <iwata@quasiquote.org>

    * scm/social-ime-custom.scm (social-ime-prediction-type):
      - Add custom value.
    * scm/social-ime.scm (social-ime-lib-set-prediction-src-string):
      (social-ime-lib-commit-nth-predictionm, social-ime-context-new):
      - Add local prediction.
      (social-ime-lib-get-nth-word, social-ime-lib-get-nth-appendix):
      - New function.

2010-02-02 IWATA Ray <iwata@quasiquote.org>

    * m4/expat.m4:
      - Bracket.

2010-01-24 Etsushi Kato <ek.kato@gmail.com>

    * helper/Makefile.am
      - (uim_toolbar_gtk_systray_LDADD) : Add dependent libX11.
    * uim/Makefile.am
      - (libuim_x_util_la_LIBADD) : Ditto.
      - (libuim_x_util_la_CFLAGS) : Use @X11_CFLAGS@ instead of
        @X_CFLAGS@.

2010-01-24 IWATA Ray <iwata@quasiquote.org>

    * uim/look.c (uim_look_look_interal):
      - New function.
      (uim_look_look_interal):
      - Call gc-guarded uim_look_look_interal().

2010-01-24 IWATA Ray <iwata@quasiquote.org>

    * uim/uim-notify.c (notify_get_plugins_internal):
      - Rename from notify_get_plugins().
      (notify_get_plugins):
      - Call gc-guarded notify_get_plugins_internal().

2010-01-24 IWATA Ray <iwata@quasiquote.org>

    * uim/lolevel.c (c_pointer_to_Xlist):
      - Call gc-guarded function.

2010-01-24 IWATA Ray <iwata@quasiquote.org>

    * uim/expat.c (xml_start_element_handler_internal):
      - New function.
      (xml_start_element_handler):
      - Call gc-guarded xml_start_element_handler_internal().

2010-01-24 IWATA Ray <iwata@quasiquote.org>

    * uim/openssl.c (c_SSL_read_internal):
      - New function.
      (c_SSL_read):
      - Call gc-guarded c_SSL_read_internal().

2010-01-24 IWATA Ray <iwata@quasiquote.org>

    * uim/fileio.c (c_file_poll_internal):
      - New function.
      (c_file_poll):
      - Call gc-guarded c_file_poll_internal().

2010-01-24 IWATA Ray <iwata@quasiquote.org>

    * uim/fileio.c (c_file_read_internal): New function.
      (c_file_read):
      - Call gc-guarded c_file_read_internal().

2010-01-18 IWATA Ray <iwata@quasiquote.org>

    * scm/sj3v2-socket.scm (sj3-lib-open):
      - Switch to exception based error handling.

2010-01-18 IWATA Ray <iwata@quasiquote.org>

    * scm/sj3v2-socket.scm (sj3-lib-open):
    * scm/sj3.scm (sj3-lib-init, sj3-lib-funcall, sj3-connect-retry):
      - Switch to exception based error handling.

2010-01-18 IWATA Ray <iwata@quasiquote.org>

    * scm/sj3v2-socket.scm (sj3-lib-error-str-alist):
      - Extend error strings.

2010-01-11 IWATA Ray <iwata@quasiquote.org>

    * scm/sj3.scm (sj3-lib-get-nth-candidate):
      - Check underflow of nth (recorrected r6120).

2010-01-06 Etsushi Kato <ek.kato@gmail.com>

    * uim/uim-x-kana-input-hack.c
      - (uim_x_kana_input_hack_init) : Bug fix ([uim-en 290]).

2010-01-05 IWATA Ray <iwata@quasiquote.org>

    * uim/lolevel.c (mmap_flags):
      - MAP_COPY is not POSIX compatible.

2010-01-01 IWATA Ray <iwata@quasiquote.org>

    * scm/http-client.scm:
      - Fix comment.

2009-12-31 IWATA Ray <iwata@quasiquote.org>

    * scm/uim-pref-http.scm:
      - Add require files.

2009-12-31 IWATA Ray <iwata@quasiquote.org>

    * scm/uim-pref-http.scm:
      - New file.
      - This module has not work yet (get only).

2009-12-31 IWATA Ray <iwata@quasiquote.org>

    * scm/sxpathlib.scm:
    * scm/sxml-tools.scm:
      - New files.
      - Note that sxml of attribute symbol is using '%.
        That is not the same as original version that attribute symbol is '@,
        because sigscheme's (read) doesn't allow (quote @).
    * scm/Makefile.am (SCM_FILES):
      - Add sxpathlib.scm and sxml-tools.scm.

2009-12-31 IWATA Ray <iwata@quasiquote.org>

    * scm/http-server.scm:
      - New file.
    * scm/Makefile.am (SCM_FILES):
      - Add http-server.scm.

2009-12-28 Etsushi Kato <ek.kato@gmail.com>

    * uim-candwin-qt4.pro.in (target.path) : Use @libexecdir@.

2009-12-25 IWATA Ray <iwata@quasiquote.org>

    * scm/sj3.scm (sj3-lib-get-nth-candidate-without-muhenkan):
      - Check underflow of nth.

2009-12-25 IWATA Ray <iwata@quasiquote.org>

    * uim/openssl.c (c_SSL_connect):
      - Check random seed.

2009-12-22 Etsushi Kato <ek.kato@gmail.com>

    * qt4/toolbar/common-uimstateindicator.cpp
    * qt4/toolbar/applet-kde4.h
    * qt4/toolbar/common-uimstateindicator.h
    * qt4/toolbar/common-quimhelpertoolbar.cpp
    * qt4/toolbar/common-quimhelpertoolbar.h
    * qt4/toolbar/applet-kde4.cpp
    * qt4/toolbar/CMakeLists.txt
      - Fix menu position of KDE4 applet (#32216, Muneyuki Noguchi).

2009-12-22 Etsushi Kato <ek.kato@gmail.com>

    * configure.ac (enable_kde4_applet) : Fix typo ([uim-en 282]).

2009-12-14 IWATA Ray <iwata@quasiquote.org>

    * scm/sj3.scm (sj3-lib-get-nth-candidate):
      - Check underflow of nth.

2009-12-11 IWATA Ray <iwata@quasiquote.org>

    * scm/lolevel.scm (call-jit):
      - New function.

2009-12-11 IWATA Ray <iwata@quasiquote.org>

    * uim/lolevel.c (c_mmap_prot_flags, c_mmap_flags, c_mmap):
      - New functions.
      (c_pointer_offset):
      - Add (mmap-prot-flags?), (mmap-flags?), (mmap) ,(munmap).
      (c_pointer_offset):
      - Unprotect values.

2009-12-08 IWATA Ray <iwata@quasiquote.org>

    * scm/look.scm (look-format-eb):
      - Trim newline and append lines.
    * scm/look-custom.scm (look-eb-show-lines):
      - New variable.

2009-12-08 IWATA Ray <iwata@quasiquote.org>

    * uim/Makefile.am (noinst_LTLIBRARIES):
      - Build libuim-eb-static.la.
    * gtk/Makefile.am (im_uim_la_LIBADD):
      - Use it.

2009-12-08 IWATA Ray <iwata@quasiquote.org>

    * gtk/Makefile.am (im_uim_la_LIBADD):
      - Link uim-eb.lo when EB is enabled.

2009-12-08 IWATA Ray <iwata@quasiquote.org>

    * scm/look.scm (look-format-eb):
      (look-update-preedit):
      (look-context-new):
      (look-release-handler):
      - Add support annotating from eb.
    * scm/look-custom.scm (look-use-eb?, look-eb-dict-path):
      - New variable.

2009-12-08 IWATA Ray <iwata@quasiquote.org>

    * uim/Makefile.am (libuim_eb_la_LIBADD):
      - Revert. libuim-scm.la and libuim.la are required.

2009-12-08 IWATA Ray <iwata@quasiquote.org>

    * uim/eb.c (c_uim_eb_search_text):
      - Check return value.
      - Use direct string.

2009-12-08 IWATA Ray <iwata@quasiquote.org>

    * uim-scm-eb.c:
    * uim-eb.c:
    * uim-eb.h:
      - Oops, forgot them.

2009-12-08 IWATA Ray <iwata@quasiquote.org>

    * uim/Makefile.am:
      - Add libuim_eb.
    * gtk/uim-eb.c:
    * gtk/uim-eb.h:
      - Move to ../uim.
    * gtk/uim-scm-eb.c:
      - Move to ../uim/eb.c.
    * gtk/Makefile.am:
      - Link ../uim/uim-eb.c
      - Remove libuim_eb.

2009-12-08 IWATA Ray <iwata@quasiquote.org>

    * gtk/Makefile.am:
      - Add libuim_eb.
    * gtk/uim-scm-eb.c:
      - New file.

2009-12-08 IWATA Ray <iwata@quasiquote.org>

    * gtk/uim-eb.c:
      (uim_eb_strappend):
      - New function.
      (uim_eb_new):
      - Use uim_malloc and uim_notify.
      (uim_eb_search_text):
      - Change API.
      - Use uim_notify and uim_iconv.
      (go_text_eb):
      - Change API.
      - Use uim_notify and uim_iconv.
    * gtk/uim-eb.h:
      - Remove <gtk.h>
      - Sync API.
    * gtk/uim-cand-win-gtk.c (tree_selection_changed):
      - Sync API. g_free() vs free().

2009-12-07 IWATA Ray <iwata@quasiquote.org>

    * scm/socket.scm (tcp-listen, tcp-accept, make-tcp-server):
      - New function.

2009-12-07 IWATA Ray <iwata@quasiquote.org>

    * scm/sj3.scm:
      - Use sj3v2-socket.scm.
    * scm/sj3v2-socket.scm:
      - New file.
    * scm/sj3-custom.scm (sj3-unix-domain-socket-path):
      - Add sj3-unix-domain-socket-path.
    * scm/Makefile.am (SCM_FILES):
      - Add sj3v2-socket.scm.
      (module_names):
      - Set to default.
    * configure.ac:
      - Remove SJ3.
    * uim/Makefile.am:
      - Ditto.
    * uim/sj3.c:
      - Bye bye.

2009-11-28 IWATA Ray <iwata@quasiquote.org>

    * scm/lolevel.scm (u8list-unpack):
      - Use receive.

2009-11-24 IWATA Ray <iwata@quasiquote.org>

    * scm/lolevel.scm (u8list-unpack):
      - Fix args.

2009-11-22 Etsushi Kato <ek.kato@gmail.com>

    * po/POTFILES.in : Remove canna.c.
    * po/fr.po : make update-po
    * po/ko.po : Ditto.
    * po/ja.po : Ditto.

2009-11-22 Etsushi Kato <ek.kato@gmail.com>

    * po/POTFILES.in : Update.

2009-11-22 Etsushi Kato <ek.kato@gmail.com>

    * uim/libtool-version.mk
      (libuim_version)
      (libuim_scm_version)
      - Update properly.

2009-11-22 Etsushi Kato <ek.kato@gmail.com>

    * RELNOTE
    * NEWS
      - Merge update from 1.5 branch.

2009-11-21 IWATA Ray <iwata@quasiquote.org>

    * scm/cannav3-socket.scm (canna-lib-make-s16-list):
      - Remove unused function.

2009-11-21 Etsushi Kato <ek.kato@gmail.com>

    * gtk/gtk-im-uim.c (cur_toplevel_deleted) : Return FALSE (Debian
      bug #557341).

2009-11-21 IWATA Ray <iwata@quasiquote.org>

    * scm/cannav3-socket.scm (canna-lib-resize-pause):
      - Remove needless binding.

2009-11-21 IWATA Ray <iwata@quasiquote.org>

    * scm/cannav3-socket.scm (canna-lib-resize-pause):
      - Fix parsing of return s16 vector.

2009-11-20 IWATA Ray <iwata@quasiquote.org>

    * scm/canna-custom.scm (canna-user-name):
      - New variable.
      (canna-lib-open-with-server):
      - Check server name.
    * scm/cannav3-socket.scm (canna-lib-init):
      - Use canna-user-name.

2009-11-20 IWATA Ray <iwata@quasiquote.org>

    * scm/cannav3-socket.scm:
      - Set operator to global variable.

2009-11-20 IWATA Ray <iwata@quasiquote.org>

    * scm/cannav3-socket.scm:
      - New file.
    * scm/Makefile.am (SCM_FILES):
      - Add cannav3-socket.scm.
    * scm/canna.scm:
      - Use cannav3-socket.scm.
    * uim/Makefile.am:
      - Remove CANNA.
    * uim/canna.c
      - Bye bye.

2009-11-20 Etsushi Kato <ek.kato@gmail.com>

    * test/Makefile.am (EXTRA_DIST) : Add missing files.

2009-11-20 Etsushi Kato <ek.kato@gmail.com>

    * qt4/chardict/Makefile.am (EXTRA_DIST) : One more missing file.

2009-11-20 Etsushi Kato <ek.kato@gmail.com>

    * qt4/chardict/Makefile.am (EXTRA_DIST) : Bug fix.

2009-11-20 Etsushi Kato <ek.kato@gmail.com>

    * test/Makefile.am : Update.

2009-11-20 Etsushi Kato <ek.kato@gmail.com>

    * test/Makefile.am : Update.

2009-11-20 Etsushi Kato <ek.kato@gmail.com>

    * test/Makefile.am : Update.

2009-11-20 Etsushi Kato <ek.kato@gmail.com>

    * make-dist.sh : Use libgcroots 0.2.2.

2009-11-19 Etsushi Kato <ek.kato@gmail.com>

    * gtk/gtk-im-uim.c : Fix bug #25139.
      - (cur_toplevel_deleted) : New.
      - (update_cur_toplevel) : Connect to "delete_event" of
        cur_toplevel.

2009-11-16 IWATA Ray <iwata@quasiquote.org>

    * scm/lolevel.scm  (u8list-pack):
      - Add format 'u16list.
      (define-string-list->type-list):
      - Delete.

2009-11-15 IWATA Ray <iwata@quasiquote.org>

    * scm/lolevel.scm (u8list-pack):
      - Arg is list. Don't append.

2009-11-12 IWATA Ray <iwata@quasiquote.org>

    * scm/lolevel.scm (define-string-list->s8-list)
      (define-string-list->s16-list):
      - New function.

2009-11-12 IWATA Ray <iwata@quasiquote.org>

    * scm/lolevel.scm:
      - New file.
    * scm/Makefile.am (SCM_FILES):
      - Add lolevel.scm.
    * uim/lolevel.c (c_Xlist_to_pointer, c_htonl, c_ntohs, c_ntohl)
      (c_u16_to_u8list, c_u32_to_u8list, c_string_to_u8list)
      (c_u8list_to_u16, c_u8list_to_u32, c_u8list_to_string):
      - New functions.
      (uim_plugin_instance_init):
      - Add functions.
    * uim/Makefile.am (uim_plugin_LTLIBRARIES):
     - Install lolevel module by default.

2009-11-06 Etsushi Kato <ek.kato@gmail.com>

    * scm/anthy.scm (anthy-proc-input-state-with-preedit) : Bug fix.

2009-11-06 Etsushi Kato <ek.kato@gmail.com>

    * po/fr.po
    * po/ko.po
    * po/ja.po
      - Update.

2009-11-06 Etsushi Kato <ek.kato@gmail.com>

    * scm/predict-custom.scm : Update descriptions.

2009-11-05 Etsushi Kato <ek.kato@gmail.com>

    * po/fr.po
    * po/ko.po
    * po/ja.po
      - Update.

2009-11-05 Etsushi Kato <ek.kato@gmail.com>

    * scm/predict-custom.scm : Update description again.

2009-11-05 Etsushi Kato <ek.kato@gmail.com>

    * po/fr.po
    * po/ko.po
    * po/ja.po
      - Update.

2009-11-05 Etsushi Kato <ek.kato@gmail.com>

    * scm/predict-custom.scm : Update description.

2009-11-05 Etsushi Kato <ek.kato@gmail.com>

    * scm/predict-custom.scm : Reorganize groups and the descriptions.

2009-11-05 Etsushi Kato <ek.kato@gmail.com>

    * po/POTFILES.in : Add scm/predict-custom.scm.

2009-11-05 Etsushi Kato <ek.kato@gmail.com>

    * scm/yahoo-jp.scm (yahoo-jp-proc-input-state-with-preedit)
    * scm/yahoo-jp-custom.scm (yahoo-jp-auto-start-henkan?)
      - Auto conversion with punctuation marks.

2009-11-05 Etsushi Kato <ek.kato@gmail.com>

    * po/fr.po
    * po/ko.po
    * po/ja.po
      - Update po files.

2009-11-04 Etsushi Kato <ek.kato@gmail.com>

    * scm/japanese.scm (japanese-auto-start-henkan-keyword-list)
      - New.  List for character to start auto conversion.
    * scm/ajax-ime-custom.scm (ajax-ime-auto-start-henkan?)
    * scm/anthy-utf8-custom.scm (anthy-auto-start-henkan?)
    * scm/anthy-custom.scm (anthy-auto-start-henkan?)
    * scm/canna-custom.scm (canna-auto-start-henkan?)
    * scm/mana-custom.scm (mana-auto-start-henkan?)
    * scm/sj3-custom.scm (sj3-auto-start-henkan?)
    * scm/social-ime-custom.scm (social-ime-auto-start-henkan?)
      - New.  Default is #f.
    * scm/ajax-ime.scm (ajax-ime-proc-input-state-with-preedit)
    * scm/anthy-utf8.scm (anthy-utf8-proc-input-state-with-preedit)
    * scm/anthy.scm (anthy-proc-input-state-with-preedit)
    * scm/canna.scm (canna-proc-input-state-with-preedit)
    * scm/mana.scm (mana-proc-input-state-with-preedit)
    * scm/sj3.scm (sj3-proc-input-state-with-preedit)
    * scm/social-ime.scm (social-ime-proc-input-state-with-preedit)
      - Start auto conversion with punctuation marks.

2009-10-26 Etsushi Kato <ek.kato@gmail.com>

    * qt4/immodule/quiminputcontextplugin.pro.in
      - Update previous commit.

2009-10-26 Etsushi Kato <ek.kato@gmail.com>

    * qt4/candwin/uim-candwin-qt4.pro.in
    * qt4/chardict/uim-chardict-qt4.pro.in
    * qt4/immodule/quiminputcontextplugin.pro.in
    * qt4/pref/uim-pref-qt4.pro.in
    * qt4/switcher/uim-im-switcher-qt4.pro.in
    * qt4/toolbar/uim-toolbar-qt4.pro.in
      - Fix build outside the source directory.

2009-10-26 Etsushi Kato <ek.kato@gmail.com>

    * configure.ac : Fix to use generated *.pro in builddir with
      qmake4.

2009-10-25 Etsushi Kato <ek.kato@gmail.com>

    * Add KDE4 applet by Muneyuki Noguchi (bug #24620).
    
    * qt4/toolbar/applet-kde4.{h,cpp}
    * qt4/toolbar/plasma-applet-uim.desktop.in
    * qt4/toolbar/CMakeLists.txt
      - New.
    * configure.ac
      - Add check for KDE4 applet.
    * qt4/toolbar/Makefile.am
      - Build KDE4 applet with cmake in build directory.

2009-10-21 Etsushi Kato <ek.kato@gmail.com>

    * qt4/chardict/uim-chardict-qt4.pro.in
    * qt4/toolbar/uim-toolbar-qt4.pro.in
    * qt4/candwin/uim-candwin-qt4.pro.in
    * qt4/switcher/uim-im-switcher-qt4.pro.in
    * qt4/pref/uim-pref-qt4.pro.in
      - (QMAKE_LIBDIR) : Add .libs directories.

2009-10-20 IWATA Ray <iwata@quasiquote.org>

    * uim/fileio.c (c_file_read, c_file_write):
      - Change buffer type (integer list to char list).
      - This change will reduce overhead of useless conversioning.
    * uim/openssl.c (c_SSL_read, c_SSL_write):
     - Ditto.
     - Apply r6031.
    * scm/fileio.scm (string->file-buf, file-buf->string)
      (file-read-char, file-peek-char):
     - Don't remap.

2009-10-13 Etsushi Kato <ek.kato@gmail.com>

    * autogen.sh : Fix typo.

2009-10-13 Etsushi Kato <ek.kato@gmail.com>

    * configure.ac : Fix PACKAGE of ffi detection.

2009-10-12 IWATA Ray <iwata@quasiquote.org>

    * scm/fileio.scm (file-read-char, file-peek-char)
      (file-read-line):
      - Check fail case.
    * uim/fileio.c (c_file_read):
      - Set eof if return value is 0 (on tcp socket, shutdown).
        When error, return #f.

2009-10-12 IWATA Ray <iwata@quasiquote.org>

    * scm/openssl.scm:
      - Remove ssl init functions.
    * uim/openssl.c (uim_plugin_instance_quit):
      - Add ERR_free_strings().
      (c_SSL_load_error_strings, c_SSL_library_init):
      - Move to uim_plugin_instance_init().
      (uim_plugin_instance_init):
      - Init ssl functions.

2009-10-11 IWATA Ray <iwata@quasiquote.org>

    * uim/ffi.c (c_ffi_call):
      - Oops, forgotten break.

2009-10-11 IWATA Ray <iwata@quasiquote.org>

    * uim/ffi.c (c_ffi_call, select_object_type):
      - Add support short, long and float.

2009-10-11 IWATA Ray <iwata@quasiquote.org>

    * uim/ffi.c (c_dlstrerr):
      - Check ffi_strerr_ == NULL case.
      (c_ffi_function, uim_plugin_instance_init):
      - New function.

2009-10-11 IWATA Ray <iwata@quasiquote.org>

    * uim/ffi.c (c_ffi_call): Allow set return and argument value to void.

2009-10-11 IWATA Ray <iwata@quasiquote.org>

    * uim/lolevel.c (c_memory_fill, c_memory_move):
      - Check input object is character or string.

2009-10-11 IWATA Ray <iwata@quasiquote.org>

    * configure.ac:
      - Add check libffi.
    * uim/Makefile.am:
      - Add FFI case to create modle 'ffi' and 'lolevel'.
    * uim/ffi.c:
      - New file. operating libffi.
    * uim/lolevel.c:
      - New file. chicken like low level memory accress utilities.
    
      Add new module for accessing libffi.
      If you want to load DSO without compiling uim module,
      this module may be helpful.
    
    uim> (module-load "ffi")
    uim> (define libm
           (dlopen "libm.so" (assq-cdr '$RTLD_LAZY (dlopen-mode))))
    uim> (define atan (dlsym libm "atan"))
    uim> (ffi-call 'double atan '((double . "1.0"))) ;; => pi/4
    uim> (dlclose libm)

2009-10-09 IWATA Ray <iwata@quasiquote.org>

    * uim/uim-notify.c (uim_notify_load, notify_get_plugins):
      - Check environment variable 'UIM_DISABLE_NOTIFY'.
    * scm/Makefile.am (UIM_DISABLE_NOTIFY):
      - Disable notify.
    
      uim-notify loads all notify plugins on uim_init() every time.
      if existing old uim-notify module which is linking version bumped DSO
      (libnotify, libX11, libc and so on) on installed path, uim-module-manager
      will crash (it executes on build phase).
    
      reported Gentoo BUG #284815
      http://bugs.gentoo.org/show_bug.cgi?id=284815

2009-10-01 Etsushi Kato <ek.kato@gmail.com>

    * qt/candwin-qt.cpp : Fix debug messages.

2009-10-01 Etsushi Kato <ek.kato@gmail.com>

    * qt4/candwin/qt4.cpp : Fix debug messages.

2009-10-01 Etsushi Kato <ek.kato@gmail.com>

    * qt4/candwin/qt4.cpp (CandidateWindow::setPageCandidates)
      - Use QList::count() instead of QList::length().

2009-09-30 Etsushi Kato <ek.kato@gmail.com>

    * NEWS : Update.

2009-09-29 Etsushi Kato <ek.kato@gmail.com>

    * scm/http-client.scm (http:read-header) : Follow changes in
      r6002.

2009-09-28 Etsushi Kato <ek.kato@gmail.com>

    * qt4/toolbar/standalone-qt4.cpp
      -  (UimStandaloneToolbar::UimStandaloneToolbar) : Adjust
         initial position.

2009-09-28 Etsushi Kato <ek.kato@gmail.com>

    * autogen.sh : Fix r6014.

2009-09-28 Etsushi Kato <ek.kato@gmail.com>

    * autogen.sh : Add a workaround for intltool >= 0.40.4 ([uim-ja
      150]).

2009-09-26 Etsushi Kato <ek.kato@gmail.com>

    * configure.ac (default-toolkit) : Add qt4.
    * qt4/pref/Makefile.am : Don't enclose with PREF to avoid
      problem with make clean.

2009-09-26 Etsushi Kato <ek.kato@gmail.com>

    * Makefile.am (SUBDIRS) : Don't enclose qt4.

2009-09-26 Etsushi Kato <ek.kato@gmail.com>

    * configure.ac
      - (default-toolkit) : Add qt4.
      - (use_qt4) : Add target for uim-candwin-qt4.
    * qt4/candwin/uim-candwin-qt4.pro.in : New.
    * qt4/candwin/Makefile.am : Ditto.
    * qt4/candwin/qt4.cpp : Ported from qt3 candwin.
    * qt4/candwin/qt4.h : Ditto.
    * qt4/Makefile.am (SUBDIRS) : Add candwin.
    * xim/canddisp.cpp : Support qt4 candwin.
    * xim/Makefile.am : Ditto.

2009-09-25 Etsushi Kato <ek.kato@gmail.com>

    * qt4/switcher/qt4.cpp (UimImSwitcher::createGUI) : Don't enable
      an input method context for the view.

2009-09-25 Etsushi Kato <ek.kato@gmail.com>

    * configure.ac (KDE_CONFIG) : Check kde4-config, in addition to
      kde-config.

2009-09-25 Etsushi Kato <ek.kato@gmail.com>

    * autogen.sh
    * configure.ac
    * qt4/qtgettext.h
    * qt4/chardict
    * qt4/chardict/qtgettext.h
    * qt4/chardict/uim-chardict-qt4.pro.in
    * qt4/chardict/bushu.t
    * qt4/chardict/qt4.cpp
    * qt4/chardict/kseparator.cpp
    * qt4/chardict/qt4.h
    * qt4/chardict/chargridview.cpp
    * qt4/chardict/kseparator.h
    * qt4/chardict/chargridview.h
    * qt4/chardict/bushuviewwidget.cpp
    * qt4/chardict/unicodeviewwidget.cpp
    * qt4/chardict/Makefile.am
    * qt4/chardict/bushuviewwidget.h
    * qt4/chardict/unicodeviewwidget.h
    * qt4/chardict/po
    * qt4/chardict/po/LINGUAS
    * qt4/chardict/po/remove-potcdate.sin
    * qt4/chardict/po/ja.po
    * qt4/chardict/po/ChangeLog
    * qt4/chardict/po/Makevars
    * qt4/chardict/po/POTFILES.in
    * qt4/chardict/po/uim-chardict-qt.pot
    * qt4/toolbar
    * qt4/toolbar/common-uimstateindicator.cpp
    * qt4/toolbar/standalone-qt4.cpp
    * qt4/toolbar/common-uimstateindicator.h
    * qt4/toolbar/uim-toolbar-qt4.pro.in
    * qt4/toolbar/standalone-qt4.h
    * qt4/toolbar/common-quimhelpertoolbar.cpp
    * qt4/toolbar/Makefile.am
    * qt4/toolbar/common-quimhelpertoolbar.h
    * qt4/switcher
    * qt4/switcher/Makefile.am
    * qt4/switcher/qt4.cpp
    * qt4/switcher/uim-im-switcher-qt4.pro.in
    * qt4/switcher/qt4.h
    * qt4/Makefile.am
    * qt4/pref
    * qt4/pref/kseparator.h
    * qt4/pref/customwidgets.cpp
    * qt4/pref/customwidgets.h
    * qt4/pref/keyeditformbase.ui
    * qt4/pref/qt4.cpp
    * qt4/pref/Makefile.am
    * qt4/pref/olisteditformbase.ui
    * qt4/pref/kseparator.cpp
    * qt4/pref/qt4.h
    * qt4/pref/uim-pref-qt4.pro.in
      - Apply patch to add uim-toolbar-qt4, uim-chardict-qt4,
        uim-im-switcher-qt4, and uim-pref-qt4 ported from qt3
        version by Muneyuki Noguchi <nogu.dev@gmail.com>
        (#24123).

2009-09-24 IWATA Ray <iwata@quasiquote.org>

    * uim/fileio.c (uim_plugin_instance_quit):
    * uim/process.c (uim_plugin_instance_quit):
    * uim/socket.c (uim_plugin_instance_quit):
    * uim/sqlite3.c (uim_plugin_instance_quit):
      - Fix critical bug.
      - All static lisp objects are protected while module are on memory.

2009-09-22 IWATA Ray <iwata@quasiquote.org>

    * scm/fileio.scm (file-write-sexp, %file-partial-read)
      (file-read-sexp):
      - New functions. from editline.c.
      - TODO: %*file-reading* object should be included in port object.

2009-09-22 IWATA Ray <iwata@quasiquote.org>

    * scm/fileio.scm (file-newline)
      - Oops, #\newline is not number.

2009-09-22 IWATA Ray <iwata@quasiquote.org>

    * scm/fileio.scm (file-read-char):
      - Add comment.

2009-09-22 IWATA Ray <iwata@quasiquote.org>

    * scm/fileio.scm (file-newline):
      - Fix args.

2009-09-22 IWATA Ray <iwata@quasiquote.org>

    * scm/fileio.scm (file-read-string):
      - Check eof.
      (file-read-char, file-peek-char, file-read-line):
      - Ditto.
      - Emulate blocking mode, like as (read).
    
    * uim/fileio.c (c_file_read):
      - Return eof-object when read failed. not error.
      (c_make_fileio_eof, c_is_fileio_eof):
      - Backout. remove.

2009-09-17 Etsushi Kato <ek.kato@gmail.com>

    * configure.ac: Don't enable knotify3 when qt4-immodule is enabled
      (bug #19877).

2009-09-12 IWATA Ray <iwata@quasiquote.org>

    * scm/http-client.scm (http:read-header):
    * scm/fileio.scm (file-read-char, file-peek-char)
      (file-read-line):
      - Use eof object.
    * uim/fileio.c (c_make_fileio_eof, c_is_fileio_eof):
      - Teate eof object.

2009-09-12 IWATA Ray <iwata@quasiquote.org>

    * uim/uim-scm.h:
    * uim/uim-scm-sigscheme.c (uim_scm_ptrp, uim_scm_func_ptrp):
      - Add function. ok ekato@
    * uim/libtool-version.mk (libuim_scm_version):
      - Minor bump.

2009-08-30 Konosuke Watanabe <sasugaanija@gmail.com>

    * emacs/uim-key.el
      - Fix bug: Some special keys (such as arrow keys) cannot be used
        when uim.el is enabled on emacs23 with -nw option.

2009-08-30 Konosuke Watanabe <sasugaanija@gmail.com>

    * emacs/uim.el
    * emacs/uim-var.el
    * emacs/uim-candidate.el
      - Fix bug: uim.el doesn't work when linum-mode is
       activated and the inline candidates displaying mode is
       enabled (see uim-en 245)

2009-08-30 IWATA Ray <iwata@quasiquote.org>

    * scm/fileio.scm (file-ready?):
      - Writeout more helpful error message.

2009-08-30 IWATA Ray <iwata@quasiquote.org>

    * uim/uim-posix.c (c_error_string):
      - New function.
      (uim_init_posix_subrs):
      - Add (posix-error-string).

2009-08-30 IWATA Ray <iwata@quasiquote.org>

    * scm/fileio.scm (file-ready?):
      - API change.
      - Take multiple file handlers.
    * scm/http-client.scm (http:get):
      - Sync API.

2009-08-30 IWATA Ray <iwata@quasiquote.org>

    * scm/socket.scm (tcp-connect):
      - Copy from (http:get).
      (unix-domain-socket-connect):
      - Copy from (prime-open-unix-domain-socket).
    * scm/http-client.scm (http:open):
      - Remove.
      (http:get):
      - Use (tcp-connect).
    * scm/prime.scm (prime-open-with-tcp-socket):
      - Use (tcp-connect).
      (prime-connection-init):
      - Use unix-domain-socket-connect.

2009-08-30 IWATA Ray <iwata@quasiquote.org>

    * scm/http-client.scm (http:socket-ready?, http:get):
      - Use (file-ready?).

2009-08-30 IWATA Ray <iwata@quasiquote.org>

    * scm/fileio.scm (file-ready?):
      - Add scheme-side implementation.
    * uim/fileio.c (c_file_ready, uim_plugin_instance_init):
      - Remove (file-ready?).

2009-08-28 IWATA Ray <iwata@quasiquote.org>

    * uim/fileio.c (c_file_poll):
      - Don't use return value of poll(2).
        Return value is non zero'ed value of fds.revents.

2009-08-22 IWATA Ray <iwata@quasiquote.org>

    * scm/predict-custom.scm:
    * scm/sqlite3.scm:
      - Fix copyright.

2009-08-20 Etsushi Kato <ek.kato@gmail.com>

    * scm/generic-predict.scm : Require SRFI 48 for format.

2009-08-18 IWATA Ray <iwata@quasiquote.org>

    * openssl.m4:
      - Fix typo.

2009-08-17 IWATA Ray <iwata@quasiquote.org>

    * scm/wnn.scm (wnn-lib-commit-nth-prediction):
      - Fix typo. sc -> wc.

2009-08-17 IWATA Ray <iwata@quasiquote.org>

    * scm/wnn.scm (wnn-context-rec-spec):
      - Oops, add prediction-appendix.
      (wnn-lib-release-context):
      - Reorder destroy-close.

2009-08-17 IWATA Ray <iwata@quasiquote.org>

    * scm/im-custom.scm:
      - Load "generic-predict.scm".
    * scm/predict-sqlite3.scm:
    * scm/predict-look-skk.scm:
    * scm/predict-look.scm:
    * scm/predict-custom.scm:
    * scm/generic-predict.scm:
      - New files.
    * scm/Makefile.am (SCM_FILES):
      - Add generic-predict.scm and predict-*.scm files.
    * ajax-ime-custom.scm:
    * ajax-ime-key-custom.scm:
    * ajax-ime.scm:
    * canna-custom.scm:
    * canna-key-custom.scm:
    * canna.scm:
    * sj3-custom.scm:
    * sj3-key-custom.scm:
    * sj3.scm:
    * wnn-custom.scm:
    * wnn-key-custom.scm:
    * wnn.scm:
      - Support input prediction.

2009-08-17 IWATA Ray <iwata@quasiquote.org>

    * configure.ac: Add check 'sqlite3'.
    * uim/Makefile.am: Add SQLITE3 case.
    * uim/sqlite3.c: New file.
    * scm/Makefile.am (SCM_FILES): Add sqlite3.scm
    * scm/sqlite3.scm: New file.

2009-08-10 Etsushi Kato <ek.kato@gmail.com>

    * fep/draw.c : Fix to include stdio.h (Thanks to Yamashiro Jun,
      [uim-ja-148]).

2009-07-31 Etsushi Kato <ek.kato@gmail.com>

    * helper/eggtrayicon.c
    * helper/eggtrayicon.h
      - Support transparent background (from fraxbe, issue #8 on
        googlecode).

2009-07-22 Etsushi Kato <ek.kato@gmail.com>

    * helper/dict-canna-cclass.c : Remove a wrong example of T04.

2009-07-13 IWATA Ray <iwata@quasiquote.org>

    * uim/bsdlook.c (compare):
      - Check input string as unsigned characters for multibyte charset.

2009-07-10 IWATA Ray <iwata@quasiquote.org>

    * scm/look.scm (look-internal:qsort!):
      - Remove.
      (look-history-sort):
      - Use srfi-95.

2009-06-24 Etsushi Kato <ek.kato@gmail.com>

    * xim/connection.h
      - (class XConnection)
        - Add size in mBuf.
    * xim/connection.cpp
      - (XConnection::XConnection)
      - (XConnection::readToBuf)
        - Flexible buffer size handling.

2009-06-24 Etsushi Kato <ek.kato@gmail.com>

    * NEWS
    * RELNOTE
      - Merge update from 1.5 branch.

2009-06-23 Etsushi Kato <ek.kato@gmail.com>

    * autogen.sh : Update.* autogen.sh : Update.* autogen.sh : Update.*
    * autogen.sh : Update.* autogen.sh : Update.* autogen.sh : Update.*
    * autogen.sh : Update.* autogen.sh : Update.

2009-06-23 Etsushi Kato <ek.kato@gmail.com>

    * configure.ac : Fix compilation of gnome applet
      (uim-1.5.5-applet.patch from Fedora).
    * qt4/immodule/Makefile.am : Support DESTDIR
      (uim-qt-destdir.patch from Fedora).

2009-06-23 Etsushi Kato <ek.kato@gmail.com>

    * xim/connnection.cpp: Use larger buffer size.
      This fixes the bug in [uim-en 229] and [uim-ja 139].

2009-05-02 Etsushi Kato <ek.kato@gmail.com>

    * m4/lib-link.m4
    * m4/iconv.m4
    * m4/nls.m4
    * m4/lib-prefix.m4
    * m4/lib-ld.m4
    * m4/progtest.m4
    * m4/ChangeLog
    * m4/po.m4
    * m4/gettext.m4
    * config.rpath
      - Updated with with gettext-0.17.  These files should not be in
        the repository and better to use gettexize in the build
        script, however, added to avoid error depending on the
        environment for some reasone (bug #21518).
    * configure.ac : Auto updated with gettextize.

2009-04-30 Etsushi Kato <ek.kato@gmail.com>

    * notify/uim-knotify3.cc
    * notify/uim-libnotify.c
    * notify/uim-growl.m
      - Use gettext.

2009-04-21 Etsushi Kato <ek.kato@gmail.com>

    * scm/social-ime.scm (social-ime-prev-warn-connection-time)
    * scm/ajax-ime.scm (ajax-ime-prev-warn-connection-time)
      - Initialize with "0".

2009-04-21 Etsushi Kato <ek.kato@gmail.com>

    * scm/social-ime.scm
    * scm/ajax-ime.scm
      - (social-ime-prev-warn-connection-time)
      - (social-ime-init-handler)
      - (ajax-ime-prev-warn-connection-time)
      - (ajax-ime-init-handler)
        - Prevent showing warnings at once.

2009-04-10 Etsushi Kato <ek.kato@gmail.com>

    * scm/ajax-ime.scm
    * scm/social-ime.scm
      - Revert r5949 and r5950 as they are too annoying.

2009-04-09 Etsushi Kato <ek.kato@gmail.com>

    * scm/ajax-ime.scm
      - (ajax-ime-init-handler)
      - (ajax-ime-focus-in-handler)
        - Show caveat on focus-in instead of init.

2009-04-09 Etsushi Kato <ek.kato@gmail.com>

    * scm/social-ime.scm
      - (social-ime-init-handler)
      - (social-ime-focus-in-handler)
        - Show caveat on focus-in instead of init.

2009-04-07 Etsushi Kato <ek.kato@gmail.com>

    * po/fr.po
    * po/kr.po
    * po/ja.po
      - make update-po and update Japanese translations.
    * scm/ajax-ime-custom.scm (ajax-ime-warn-connection?)
    * scm/ajax-ime.scm (ajax-ime-init-handler)
    * scm/social-ime-custom.scm (social-ime-warn-connection?)
    * scm/social-ime.scm (social-ime-init-handler)
      - Show caveat (bug #21052).

2009-04-03 IWATA Ray <iwata@quasiquote.org>

    * scm/social-ime-custom.scm (social-ime-user):
      - Set default name to "" for user privacy.

2009-04-02 Etsushi Kato <ek.kato@gmail.com>

    * po/ja.po
    * po.ko.po
    * fr.po
      - make update-po

2009-04-02 Etsushi Kato <ek.kato@gmail.com>

    * scm/im-custom.scm (http-proxy-setting) : Rename setting to avoid
      ambigous translations.

2009-04-02 Etsushi Kato <ek.kato@gmail.com>

    * uim/iconv.c (uim_ext_iconv_code_conv) : Simplify with
      MAKE_STR_DIRECTLY().
    * uim/skk.c
      - (skk_merge_replaced_numeric_str)
      - (skk_replace_numeric)
      - (skk_get_nth_candidate)
      - (restore_numeric)
      - (skk_Remove_annotation)
      - (skk_eval_candidate)
      - (skk_substring)
        - Ditto.
      - (skk_save_personal_dictionary)
        - Check error.

2009-03-27 Etsushi Kato <ek.kato@gmail.com>

    * anthy-custom.scm
    * anthy-utf8-custom.scm
      - (anthy-prediction)
      - (anthy-use-prediction?)
      - (anthy-select-prediction-by-numeral-key?)
      - (anthy-use-implicit-commit-prediction?)
      - (anthy-prediction-start-char-count)
    * anthy-key-custom.scm
      - (anthy-ntext-prediction-key)
      - (anthy-prev-prediction-key)
    * anthy-utf8-custom.scm
      - (anthy-prediction)
      - (anthy-use-prediction?)
    * yahoo-jp-key-custom.scm
      - (yahoo-jp-next-prediction-key)
      - (yahoo-jp-prev-prediction-key)
    * social-ime-key-custom.scm
      - (social-ime-next-prediction-key)
      - (social-ime-prev-prediction-key)
        - Use IM's own prediction groups ([uim-ja 137]).

2009-03-26 Kouhei Sutou <kou@cozmixng.org>

    * test/test-plugin.scm: not executable.

2009-03-26 Kouhei Sutou <kou@cozmixng.org>

    * test/test-plugin.scm: enables TODO marked test.

2009-03-26 Kouhei Sutou <kou@cozmixng.org>

    * test/test-plugin.scm: use assert-uim-* instead of assert-*.

2009-03-26 Kouhei Sutou <kou@cozmixng.org>

    * test/test-plugin.scm: use new style.

2009-03-25 Etsushi Kato <ek.kato@gmail.com>

    * uim/uim-notify.c (NOTIFY_PLUGIN_PATH) : Use PKGLIBDIR.

2009-03-24 IWATA Ray <iwata@quasiquote.org>

    * scm/look-custom.scm (look-candidates-max):
      - Oops, commit it.

2009-03-24 IWATA Ray <iwata@quasiquote.org>

    * scm/look-custom.scm (look-candidates-max):
      - New custom variable.
    * scm/look.scm (look-look):
      - Sync api.
      - Set max candidates are hard wired value.
    * uim/look.c (uim_look_look):
      - Add argument word limit.
      - Change api.

2009-03-24 IWATA Ray <iwata@quasiquote.org>

    * scm/look.scm (look-look):
      - Sync api.
    * uim/look.c (uim_look_look):
      - Add argument case? and dict?.
        There is corresponding to look command line flags '-f' and '-d'.
      - Change api.

2009-03-22 Kouhei Sutou <kou@cozmixng.org>

    * test/test-lazy-load.scm: use assert-uim-* instead of assert-*.

2009-03-22 Kouhei Sutou <kou@cozmixng.org>

    * test/uim-test-utils-new.scm: use uim-eval instead of uim.
    * test/test-lazy-load.scm: use new style.

2009-03-22 Kouhei Sutou <kou@cozmixng.org>

    * test/test-action.scm: use assert-uim-* instead of assert-*.

2009-03-22 Kouhei Sutou <kou@cozmixng.org>

    * test/test-action.scm: update to new style.

2009-03-22 Kouhei Sutou <kou@cozmixng.org>

    * test/uim-test-utils-new.scm: don't switch the current
      output port to conflict GaUnit's output.

2009-03-22 Kouhei Sutou <kou@cozmixng.org>

    * test/key/test-base.scm, test/key/test-predicate.scm,
      test/key/test-translator.scm: use assert-uim-* instead of assert-*.

2009-03-22 Kouhei Sutou <kou@cozmixng.org>

    * test/test-key.scm: split tests in ...
    * test/key/: ... them and update to new style.

2009-03-22 Kouhei Sutou <kou@cozmixng.org>

    * pixmaps/, uim/: update svn:ignore.

2009-03-22 Kouhei Sutou <kou@cozmixng.org>

    * test/uim-assertions.scm (assert-uim-true-value): add.
    * test/test-ng-key.scm: use assert-uim-* instead of assert-*.

2009-03-22 Kouhei Sutou <kou@cozmixng.org>

    * test/test-ng-key.scm: update to new style.

2009-03-22 Kouhei Sutou <kou@cozmixng.org>

    * test/test-i18n.scm: split tests in ...
    * test/i18n/test-base.scm, test/i18n/test-language.scm: ... them.

2009-03-22 Kouhei Sutou <kou@cozmixng.org>

    * test/test-i18n.scm: update to new style.

2009-03-22 Kouhei Sutou <kou@cozmixng.org>

    * test/uim-test-utils-new.scm
      (uim-test-with-environment-variables): add.
    * test/test-intl.scm: use uim-test-with-environment-variables.

2009-03-22 Kouhei Sutou <kou@cozmixng.org>

    * test/test-intl.scm: use assert-uim-* instead of assert-*.

2009-03-22 Kouhei Sutou <kou@cozmixng.org>

    * test/test-intl.scm: use sys-unsetenv for restoring nonexistent
      environment variable value.

2009-03-22 Kouhei Sutou <kou@cozmixng.org>

    * test/uim-test-utils-new.scm: use list for command
      arguments because the current style is deprecated.

2009-03-22 Kouhei Sutou <kou@cozmixng.org>

    * test/test-intl.scm: update to new style.

2009-03-22 Kouhei Sutou <kou@cozmixng.org>

    * test/test-example.scm: update to new style.

2009-03-22 Kouhei Sutou <kou@cozmixng.org>

    * test/template.scm: not executable.

2009-03-22 Kouhei Sutou <kou@cozmixng.org>

    * test/template.scm: update to new style.

2009-03-22 Kouhei Sutou <kou@cozmixng.org>

    * test/test-ustr.scm: not executable.

2009-03-22 Kouhei Sutou <kou@cozmixng.org>

    * test/util/test-rk.scm: use assert-uim-* assertions.

2009-03-22 Kouhei Sutou <kou@cozmixng.org>

    * test/test-uim-util.scm: move rk related tests to ...
    * test/util/test-rk.scm: ... here.

2009-03-22 Kouhei Sutou <kou@cozmixng.org>

    * test/test-uim-util.scm: move nthcdr test to ...
    * test/util/test-list.scm: ... here.

2009-03-22 Kouhei Sutou <kou@cozmixng.org>

    * test/util/test-list.scm: move string related tests to ...
    * test/util/test-string.scm: ... here.

2009-03-22 Kouhei Sutou <kou@cozmixng.org>

    * test/uim-assertions.scm: assert-uim-raw-* -> assert-uim-*-raw.
    * test/util/test-character-conversion.scm,
      test/util/test-misc.scm: follow the above change.

2009-03-22 Kouhei Sutou <kou@cozmixng.org>

    * test/uim-assertions.scm, test/uim-test-utils-new.scm:
      support CES converted uim-sh communication.
    * test/util/test-string.scm: resolve EUC-JP related TODO.

2009-03-22 Kouhei Sutou <kou@cozmixng.org>

    * test/test-uim-util.scm: move string related tests to ...
    * test/util/test-string.scm: ... here.

2009-03-22 Kouhei Sutou <kou@cozmixng.org>

    * test/util/test-string-list.scm: rename to ...
    * test/util/test-string.scm: ... this.

2009-03-22 Kouhei Sutou <kou@cozmixng.org>

    * test/test-uim-util.scm: move getenv, setenv and unsetenv
      tests to ...
    * test/util/test-uim.scm: ... here.

2009-03-22 Kouhei Sutou <kou@cozmixng.org>

    * test/test-ustr.scm: add missing provide.

2009-03-22 Kouhei Sutou <kou@cozmixng.org>

    * test/test-ustr.scm: setup definitions are evaluated in a
      single S expression.

2009-03-22 Kouhei Sutou <kou@cozmixng.org>

    * test/test-ustr.scm: use assert-uim-{true,false} instead of
      assert-{true,false} and uim-bool.

2009-03-22 Kouhei Sutou <kou@cozmixng.org>

    * test/test-ustr.scm: use assert-uim-error instead of
      assert-error and uim.

2009-03-22 Kouhei Sutou <kou@cozmixng.org>

    * test/test-ustr.scm: use assert-uim-equal instead of
      assert-equal and uim.

2009-03-22 Kouhei Sutou <kou@cozmixng.org>

    * test/test-ustr.scm: use '() instead of ().

2009-03-22 Kouhei Sutou <kou@cozmixng.org>

    * test/test-ustr.scm: use uim-eval instead of uim for
      expressions that don't case return value.

2009-03-22 Kouhei Sutou <kou@cozmixng.org>

    * test/test-ustr.scm: use new readable style.

2009-03-17 Etsushi Kato <ek.kato@gmail.com>

    * configure.ac : Growl support for Mac OS X.
    * notify/Makefile.am : Ditto.
    * notify/uim-growl.m : Ditto. New file.

2009-03-16 IWATA Ray <iwata@quasiquote.org>

    * scm/fileio.scm (file-open-flags-number, file-open-mode-number)
      (file-poll-flags-number):
      - Oops. reorder r5894.

2009-03-16 IWATA Ray <iwata@quasiquote.org>

    * scm/fileio.scm:
      - Take 'file-' prefix.
    * scm/http-client.scm (http:socket-ready?):
      - Sync api.

2009-03-16 IWATA Ray <iwata@quasiquote.org>

    * scm/fileio.scm (fileio-set-flag, open-flags-number)
      (open-mode-number, poll-flags-number):
      - New functions.

2009-03-16 IWATA Ray <iwata@quasiquote.org>

    * scm/socket.scm (addrinfo-ai-flags-number):
      (call-with-getaddrinfo-hints):
      - Move calculate flag code to (addrinfo-ai-flags-number).

2009-03-07 IWATA Ray <iwata@quasiquote.org>

    * scm/uim-help.scm (uim-help):
      - Take command line arguments.
      (uim-help-set-branch!):
      - New function.
    * uim/uim-help.c (uim_help_get_current_branch):
      - Use (uim-help-set-branch!).
      (main):
      - Call uim_help_get_current_branch() after loading "uim-help.scm".

2009-03-07 IWATA Ray <iwata@quasiquote.org>

    * scm/im-custom.scm (toolbar-help-browser)
      (toolbar-help-browser-name):
      - New custom variable.
    * scm/Makefile.am (SCM_FILES):
      - Add uim-help.scm.
    * uim/Makefile.am:
      - Add uim-help.
    * scm/uim-help.scm:
    * uim/uim-help.c:
      - New file.
    
      New command 'uim-help'.
      This command is called by 'uim-toolbar-*' and
      it opens web site that corresponds according to the setting.

2009-03-03 Etsushi Kato <ek.kato@gmail.com>

    * scm/anthy.scm
      - (anthy-proc-input-state-with-preedit)
      - (anthy-proc-prediction-state)
    * scm/anthy-utf8.scm
      - (anthy-utf8-proc-input-state-with-preedit)
      - (anthy-utf8-proc-prediction-state)
    * scm/yahoo-jp.scm
      - (yahoo-jp-proc-input-state-with-preedit)
      - (yahoo-jp-proc-prediction-state)
    * scm/social-ime.scm
      - (social-ime-proc-input-state-with-preedit)
      - (social-ime-proc-prediction-state)
        - Revert changes in r5887 and do reset in the prediction-state
          for that purpose.

2009-03-03 Etsushi Kato <ek.kato@gmail.com>

    * m4/openssl.m4 : Check DTLSv1 existence.
    * uim/openssl.c
      - Include <string.h> for strerror().
      - Include "gettext.h".
      - (c_DTLSv1_method)
      - (c_DTLSv1_server_method)
      - (c_DTLSv1_client_method)
        - Check TDLSv1 functions.  Return #f if these are not
          available.
    * scm/http-client.scm (http:make-get-request-string) : Check
      ssl method.
    * po/POTFILES.in : Add openssl.c

2009-03-03 Etsushi Kato <ek.kato@gmail.com>

    * scm/anthy.scm (anthy-utf8-proc-input-state-with-preedit)
    * scm/anthy-utf8.scm (anthy-proc-input-state-with-preedit)
    * scm/social-ime.scm (social-ime-proc-input-state-with-preedit)
    * scm/yahoo-jp.scm (yahoo-jp-proc-input-state-with-preedit)
      - Reset prediction window which might be forced to raise with
        use-prediciton #f.

2009-03-03 IWATA Ray <iwata@quasiquote.org>

    * scm/process.scm (process-io, process-with-daemon):
      - i18n.
    * po/POTFILES.in:
      - Add scm/process.scm.

2009-03-03 IWATA Ray <iwata@quasiquote.org>

    * scm/prime.scm (prime-open-with-unix-domain-socket)
      (prime-socket-path!, prime-connection-init):
      - i18n.
    * po/POTFILES.in:
      - Add scm/prime.scm.

2009-03-03 IWATA Ray <iwata@quasiquote.org>

    * scm/http-client.scm (http:socket-ready?, http:parse-header)
      (http:get):
      - i18n.
    * POTFILES.in:
      - Add scm/http-client.scm.

2009-03-03 IWATA Ray <iwata@quasiquote.org>

    * scm/yahoo-jp.scm
    * scm/yahoo-jp-custom.scm
      - Sync with r5872.

2009-03-02 IWATA Ray <iwata@quasiquote.org>

    * scm/yahoo-jp-custom.scm (yahoo-jp-use-ssl?):
      - Check build with openssl or not.

2009-03-02 IWATA Ray <iwata@quasiquote.org>

    * scm/openssl.scm:
      - Guard module-load.
    * scm/http-client.scm (http:get):
      - Use provided?.

2009-03-02 IWATA Ray <iwata@quasiquote.org>

    * uim/fileio.c (make_arg_cons):
    * uim/process.c (make_arg_cons):
    * uim/socket.c (make_arg_cons):
      - New function.
    * uim/fileio.c (make_arg_list):
    * uim/process.c (make_arg_list):
    * uim/socket.c (make_arg_list):
      - Mark as gc protect.
    * uim/fileio.c (uim_plugin_instance_init):
    * uim/fileio.c (uim_plugin_instance_init):
    * uim/socket.c (uim_plugin_instance_init):
      - Mark as gc protect after all flags are set.

2009-03-02 IWATA Ray <iwata@quasiquote.org>

    * openssl.m4 (saved_saved_LIBS):
      - Fix arg1.

2009-03-02 IWATA Ray <iwata@quasiquote.org>

    * scm/yahoo-jp-custom.scm (yahoo-jp-use-ssl?):
      - New custom variable.
    * scm/yahoo-jp.scm (yahoo-jp-conversion):
      - Check yahoo-jp-use-ssl?.

2009-03-02 IWATA Ray <iwata@quasiquote.org>

    * scm/http-client.scm (make-http-proxy-from-custom):
      - New function.
    * scm/yahoo-jp.scm (yahoo-jp-conversion):
    * scm/ajax-ime.scm (ajax-ime-conversion):
    * scm/social-ime.scm (social-ime-conversion)
      (social-ime-predict-from-server):
      - Use (make-http-proxy-from-custom).

2009-03-02 IWATA Ray <iwata@quasiquote.org>

    * scm/http-client.scm (http-ssl):
      - New record.
      (http:get):
      - Add argument for ssl connection.

2009-03-02 IWATA Ray <iwata@quasiquote.org>

    * uim/openssl.c:
      - New file.
    * uim/Makefile.am:
      - Add libuim-openssl.
    * m4/openssl.m4:
      - Import from openssh-portable/configure.ac
    * configure.ac:
      - Check OpenSSL.
    * scm/Makefile.am (SCM_FILES):
      - Add openssl.scm
    * scm/openssl.scm:
      - New file.
    
      Add new uim module 'uim-openssl' to treat SSL protocol.
      default is `--disable-openssl'.

2009-03-02 IWATA Ray <iwata@quasiquote.org>

    * scm/fileio.scm (file-port):
      - New member context.
      (close-file-port, file-read-char, file-peek-char, file-display)
      (file-newline):
      - Use context.
    
      Clarify fd and context.

2009-03-02 IWATA Ray <iwata@quasiquote.org>

    * scm/fileio.scm (file-port): Add reader and writer.
      (file-read-char, file-peek-char):  Use file-port.read.
      (file-display, file-read-line): Use file-port.write.
    
      Change file-port to modify to r/w function.
      file-port should be rewritten by another object system (wlos?).

2009-03-01 Etsushi Kato <ek.kato@gmail.com>

    * scm/social-ime.scm
      - (social-ime-proc-prediction-state)
      - (social-ime-proc-input-state-with-preedit)
      - (social-ime-check-prediction)
      - (social-ime-proc-input-state)
        - Ported from anthy.scm.
        - Use pending rk to check prediction string.
    * scm/social-ime-custom.scm
      - (social-ime-prediction-start-char-count)
        - Ditto.  Default is set 2.
      - (social-ime-select-prediction-by-numeral-key?)
      - (social-ime-use-implicit-commit-prediction?)
      - (social-ime-prediction-cache-words)
      - (social-ime-prediction-start-char-count)
        - Add custom hook.

2009-03-01 Etsushi Kato <ek.kato@gmail.com>

    * Add custom setting to check pre-converting string length to
      begin input prediction with anthy.
    
    * scm/anthy-custom.scm
    * scm/anthy-utf8-custom.scm
      - (anthy-prediction-start-char-count) : New.  Default is 1.
    * scm/anthy.scm
      - (anthy-proc-input-state-with-preedit) : Examine
        anthy-next-prediction-key? to force to get prediction.
      - (anthy-check-prediction)
        - Add force-check? argument.
        - Check the preedit string length to begin input prediction.
      - (anthy-proc-input-state) : Don't check prediction when the
        state is already changed.

2009-03-01 Etsushi Kato <ek.kato@gmail.com>

    * uim/socket.c (c_getaddrinfo) : Don't crash even when network is
      not connected, and return '() in that case.
    * scm/socket.scm (call-with-getaddrinfo)
    * scm/fileio.scm (call-with-open-file-port)
      - Follow the change in getaddrinfo.

2009-02-27 IWATA Ray <iwata@quasiquote.org>

    * scm/plugin.scm (uim-plugin-lib-load-path)
      (uim-plugin-scm-load-path, load-module-conf)
      (load-enabled-modules):
      - Use (get-config-path!)
      * scm/custom-rt.scm (custom-file-path):
      - Ditto.

2009-02-27 IWATA Ray <iwata@quasiquote.org>

    * scm/social-ime.scm (social-ime-parse-csv):
      - New function.
      (social-ime-conversion, social-ime-predict-from-server):
      - Use (social-ime-parse-csv).

2009-02-27 IWATA Ray <iwata@quasiquote.org>

    * scm/socket.scm (call-with-sockaddr-storage):
      - New function.

2009-02-27 IWATA Ray <iwata@quasiquote.org>

    * scm/yahoo-jp.scm : Support input prediction.
      - (yahoo-jp-internal-context-rec-spec) : Cache prediction
        candidates.
      - (yahoo-jp-predict-memoize!): Cache prediction query.
      - (yahoo-jp-predict) : New.  Query prediction candidates.
      - (yahoo-jp-predict-from-server)
        -  New.  Query prediction candidates from server.
      - (yahoo-jp-lib-alloc-context) : Create interal-context here.
      - (yahoo-jp-lib-begin-conversion) : from here.
      - (yahoo-jp-lib-set-prediction-src-string)
      - (yahoo-jp-lib-get-nr-predictions)
      - (yahoo-jp-lib-get-nth-prediction)
      - (yahoo-jp-lib-commit-nth-prediction)
        - New code to get prediction candidates.
      - (yahoo-jp-context-rec-spec)
      - (yahoo-jp-flush)
      - (yahoo-jp-update-preedit)
      - (yahoo-jp-move-prediction)
      - (yahoo-jp-move-prediction-in-page)
      - (yahoo-jp-prediction-select-non-existing-index?)
      - (yahoo-jp-prediction-keys-handled?)
      - (yahoo-jp-proc-prediction-state)
      - (yahoo-jp-proc-input-state-with-preedit)
      - (yahoo-jp-reset-prediction-window)
      - (yahoo-jp-check-prediction)
      - (yahoo-jp-proc-input-state)
      - (yahoo-jp-predicting-state-preedit)
      - (yahoo-jp-get-prediction-string)
      - (yahoo-jp-learn-prediction-string)
      - (yahoo-jp-do-commit-prediction)
      - (yahoo-jp-press-key-handler)
      - (yahoo-jp-get-candidate-handler)
      - (yahoo-jp-set-candidate-index-handler)
        - Ported from social-ime.scm.
    * scm/yahoo-jp-custom.scm
      - (yahoo-jp-prediction) : New custom group.
      - (yahoo-jp-use-prediction?)
      - (yahoo-jp-select-prediction-by-numeral-key?)
      - (yahoo-jp-use-implicit-commit-prediction?)
        - Ported from social-ime-custom.scm.
    * scm/yahoo-jp-key-custom.scm
      - (yahoo-jp-next-prediction-key)
      - (yahoo-jp-prev-prediction-key)
        - Ported from social-ime-key-custom.scm.

2009-02-26 IWATA Ray <iwata@quasiquote.org>

    * scm/social-ime-custom.scm (social-ime-prediction-cache-words):
      - New custom variable.
    * scm/social-ime.scm (social-ime-predict-memoize!)
      (social-ime-predict):
      - New function.
      (social-ime-predict-from-server):
      - Rename from social-ime-predict.
      (social-ime-lib-set-prediction-src-string):
      - Sync API change.

2009-02-25 Etsushi Kato <ek.kato@gmail.com>

    * scm/social-ime.scm : Support input prediction.
      - (social-ime-internal-context-rec-spec) : Cache prediction
        candidates.
      - (social-ime-predict) : New.  Query prediction candidates.
      - (social-ime-lib-alloc-context) : Create interal-context here.
      - (social-ime-lib-begin-conversion) : from here.
      - (social-ime-lib-set-prediction-src-string)
      - (social-ime-lib-get-nr-predictions)
      - (social-ime-lib-get-nth-prediction)
      - (social-ime-lib-commit-nth-prediction)
        - New code to get prediction candidates.
      - (social-ime-context-rec-spec)
      - (social-ime-flush)
      - (social-ime-update-preedit)
      - (social-ime-move-prediction)
      - (social-ime-move-prediction-in-page)
      - (social-ime-prediction-select-non-existing-index?)
      - (social-ime-prediction-keys-handled?)
      - (social-ime-proc-prediction-state)
      - (social-ime-proc-input-state-with-preedit)
      - (social-ime-reset-prediction-window)
      - (social-ime-check-prediction)
      - (social-ime-proc-input-state)
      - (social-ime-predicting-state-preedit)
      - (social-ime-get-prediction-string)
      - (social-ime-learn-prediction-string)
      - (social-ime-do-commit-prediction)
      - (social-ime-press-key-handler)
      - (social-ime-get-candidate-handler)
      - (social-ime-set-candidate-index-handler)
        - Ported from anthy.scm.
    * scm/social-ime-custom.scm
      - (social-ime-prediction) : New custom group.
      - (social-ime-prediction-api-path) : Prediction API path.
      - (social-ime-use-prediction?)
      - (social-ime-select-prediction-by-numeral-key?)
      - (social-ime-use-implicit-commit-prediction?)
        - Ported from anthy-custom.scm.
    * scm/social-ime-key-custom.scm
      - (social-ime-next-prediction-key)
      - (social-ime-prev-prediction-key)
        - Ported from anthy-key-custom.scm.

2009-02-20 IWATA Ray <iwata@quasiquote.org>

    * scm/ajax-ime.scm (ajax-ime-conversion):
      - Avoid crash with errors of (fetch).

2009-02-20 IWATA Ray <iwata@quasiquote.org>

    * scm/im-custom.scm (http-timeout):
      - New custom variable.
    * scm/http-client.scm (http:socket-ready?):
      - New function.
      (http:get):
      - Check timeout.

2009-02-20 IWATA Ray <iwata@quasiquote.org>

    * uim/fileio.c (c_file_set_nonblocking)
      (uim_plugin_instance_init):
      - Revert r5860. meaningless.

2009-02-20 IWATA Ray <iwata@quasiquote.org>

    * uim/fileio.c (c_file_set_nonblocking):
      - New function.
      (uim_plugin_instance_init):
      - Add (file-nonblocking!).

2009-02-17 IWATA Ray <iwata@quasiquote.org>

    * scm/prime.scm (prime-open-with-tcp-socket):
      - Plug foreign pointer leak.
      (prime-send-command):
      - Check connection.
      (prime-engine-close):
      - New function.
      (prime-release-handler):
      - Close connection.

2009-02-17 IWATA Ray <iwata@quasiquote.org>

    * scm/fileio.scm (close-file-port):
      - New function.

2009-02-17 IWATA Ray <iwata@quasiquote.org>

    * scm/http-client.scm (http:open):
      - Stop to call/cc jump over call-with-*.
        It makes foreign pointer to leak.

2009-02-17 IWATA Ray <iwata@quasiquote.org>

    * scm/socket.scm (shutdown-how-alist):
      - New variable.
    * uim/socket.c (c_shutdown_how_alist, c_shutdown):
      - New functions.
      (uim_plugin_instance_init):
      - Add (shutdown) and (shutdown-how-alist?).

2009-02-16 IWATA Ray <iwata@quasiquote.org>

    * scm/http-client.scm (http:open):
      - Plug file handler leak.
      (http:get):
      - Sync.

2009-02-16 IWATA Ray <iwata@quasiquote.org>

    * scm/prime-custom.scm (prime-server-setting?)
      (prime-tcpserver-name, prime-tcpserver-port):
      - Change to choice.
    * scm/prime.scm (prime-open-with-tcp-socket):
      - New function
      (prime-connection-init):
      - Sync.
    
      Add TCP connection method for prime.

2009-02-15 Etsushi Kato <ek.kato@gmail.com>

    * xim/ximserver.cpp
    * xim/ximserver.h
      - Ported from 1.5 branch.

2009-02-14 IWATA Ray <iwata@quasiquote.org>

    * scm/prime.scm (prime-engine-modify-cursor-internal):
      - Fix args.

2009-02-14 IWATA Ray <iwata@quasiquote.org>

    * po/ja.po:
      - Fix typo.

2009-02-14 IWATA Ray <iwata@quasiquote.org>

    * scm/prime.scm:
      - Use srfi.
    * scm/prime.scm (prime-socket-path!):
      - Fix path. "socket/uim-prime" is not directory.

2009-02-14 IWATA Ray <iwata@quasiquote.org>

    * uim/Makefile.am:
      - Remove libuim_prime_*
    * scm/prime.scm (prime-open-unix-domain-socket)
      (prime-open-with-unix-domain-socket)
      (prime-socket-path!, prime-open-with-pipe)
      (prime-connection-init):
      - New functions.
      (prime-context-initialize!):
      - Use (prime-connection-init).
      (prime-send-command):
      - Use scm-side functions.
    
      uim-prime use "process.scm" and "socket.scm".
      libuim-prime is no longer needed.

2009-02-14 IWATA Ray <iwata@quasiquote.org>

    * scm/prime.scm:
      - All prime-engine-* functions take connection state.
        no functional change.

2009-02-13 IWATA Ray <iwata@quasiquote.org>

    * scm/socket.scm:
      - Add module-load guard.

2009-02-13 IWATA Ray <iwata@quasiquote.org>

    * uim/process.c:
      - New file.
    * uim/Makefile.am (libuim_process_la_CPPFLAGS):
      - Add libuim-process.
    * uim/uim-posix.c (uim_init_posix_subrs):
      - Remove process functions.
    * scm/Makefile.am (SCM_FILES):
      - Add "process.scm".
      - Remove "posix.scm".
    * scm/process.scm:
      - New file from posix.scm.
    * scm/posix.scm:
      - Delete.
    
      Move process functions to module.
      Most modules don't need these functions.

2009-02-13 IWATA Ray <iwata@quasiquote.org>

    * scm/http-client.scm:
      - Don't load "posix.scm".

2009-02-13 IWATA Ray <iwata@quasiquote.org>

    * uim/Makefile.am:
      - Add libuim-fileio.
    * uim/uim-posix.c (uim_init_posix_subrs):
      - Remove fileio functions.
    * uim/fileio.c:
      - New file.
    * scm/Makefile.am (SCM_FILES):
      - Add fileio.scm.
    * scm/posix.scm:
      - Remove fileio functions.
    * scm/fileio.scm:
      - New file.
    * scm/socket.scm:
      - Load "fileio.scm".
    
      Move fileio functions to module.
      Most modules don't need these functions.

2009-02-10 IWATA Ray <iwata@quasiquote.org>

    * scm/match.scm:
      - New file.
      - Remove (*-structure).
    * COPYING:
      - Add copyright.
    * scm/Makefile.am (SCM_FILES):
      - Add match.scm
    
      Import Andrew K. Wright's pattern matching library.

2009-02-10 IWATA Ray <iwata@quasiquote.org>

    * scm/posix.scm (process-with-daemon):
      - New function.

2009-02-09 IWATA Ray <iwata@quasiquote.org>

    * uim/uim-posix.c (c_check_dir, c_get_config_path):
      - Export.
      (c_unlink, c_mkdir, c_chdir):
      - New functions.
      (uim_init_posix_subrs):
      - Add (create/check-directory!), (get-config-path!),
        (unlink), (mkdir), and (chdir).

2009-02-09 IWATA Ray <iwata@quasiquote.org>

    * scm/posix.scm (process-io):
      - New function (process-io).

2009-02-09 IWATA Ray <iwata@quasiquote.org>

    * uim/uim-posix.c (c_setsid):
      - New function.
      (uim_init_posix_subrs):
      - Add (setsid).

2009-02-09 IWATA Ray <iwata@quasiquote.org>

    * scm/posix.scm (file-read-char, file-peek-char, file-read-line):
      - Check eof.

2009-02-09 IWATA Ray <iwata@quasiquote.org>

    * scm/http-client.scm (http:open):
      - Return #f when (connect) failed.

2009-02-09 IWATA Ray <iwata@quasiquote.org>

    * scm/socket.scm (call-with-sockaddr-un):
      - Return from thunk.

2009-02-09 IWATA Ray <iwata@quasiquote.org>

    * uim/uim-posix.c (c_execve):
      - Check evnp == NULL case.

2009-02-09 IWATA Ray <iwata@quasiquote.org>

    * scm/posix.scm (process-execute):
      - New function.
    * uim/uim-posix.c (c_execve, c_execvp):
      - New function.
      (uim_init_posix_subrs):
      - Add (execve), (execvp).

2009-02-09 IWATA Ray <iwata@quasiquote.org>

    * scm/posix.scm (duplicate-fileno):
     - Oops, misused args.

2009-02-09 IWATA Ray <iwata@quasiquote.org>

    * scm/posix.scm (duplicate-fileno):
      - New funtion.
    * uim/uim-posix.c (c_duplicate2_fileno):
      - Rename c_duplicate_fileno to c_duplicate2_fileno.
      (uim_init_posix_subrs):
      - Sync.

2009-02-07 IWATA Ray <iwata@quasiquote.org>

    * uim/uim-posix.c (c_create_pipe):
      - New function.
      (uim_init_posix_subrs):
      - Add (create-pipe).

2009-02-07 IWATA Ray <iwata@quasiquote.org>

    * uim/uim-posix.c (c_duplicate_fileno):
      - Add arg2 to use dup2().
      (uim_init_posix_subrs):
      - (duplicate-fileno) is uim_scm_init_proc2().

2009-02-06 IWATA Ray <iwata@quasiquote.org>

    * scm/http-client.scm (http:open):
      - Check all fds.
      (http:parse-header):
      - Strict.
      (http-proxy):
      - New record.
      (http:make-proxy-request-string):
      - New function.
      (http:get):
      - Add proxy code. API Change.
    * scm/im-custom.scm (http-proxy-setting, http-proxy-address)
      (http-proxy-port):
      - New custom variable.
    * scm/ajax-ime.scm (ajax-ime-conversion):
    * scm/social-ime.scm (social-ime-conversion):
    * scm/yahoo-jp.scm (yahoo-jp-conversion):
      - Check http proxy.

2009-02-06 IWATA Ray <iwata@quasiquote.org>

    * scm/Makefile.am (module_names):
     - Remove uim-curl dependency.
    * scm/yahoo-jp-custom.scm (yahoo-jp-server, yahoo-jp-path):
      - New custom variable.
    * scm/yahoo-jp.scm (yahoo-jp-conversion):
      - Use (http:get).
      - Drop uim-curl.

2009-02-06 IWATA Ray <iwata@quasiquote.org>

    * scm/http-client.scm (http:get):
      - request-alist is optional.

2009-02-06 IWATA Ray <iwata@quasiquote.org>

    * scm/http-client.scm (http:read-chunk)
      (http:header-field-search, http:chunked?, http:content-length?)
      (http:parse-header):
      - New functions.
      (http:make-get-request-string):
      - Fix user agent string (rfc-2616).
      (http:get):
      - Use chunk parser.
    
      Partial support HTTP/1.1.

2009-02-06 IWATA Ray <iwata@quasiquote.org>

    * scm/posix.scm (call-with-open-file-port):
      - New function.

2009-02-06 IWATA Ray <iwata@quasiquote.org>

    * uim/uim-posix.c (open_flags):
      - Add O_WRONLY and O_APPEND.
      - Style.

2009-02-05 IWATA Ray <iwata@quasiquote.org>

    * scm/http-client.scm (http:get):
      - Rename *-socket-* to *-file-*.
    * scm/Makefile.am (SCM_FILES):
      - Add posix.scm.
    * scm/socket.scm:
      - Move file handling functions to posix.scm
    * scm/posix.scm:
      - New file.

2009-02-05 IWATA Ray <iwata@quasiquote.org>

    * scm/Makefile.am (module_names):
      - Remoce uim-curl dependency.
    * scm/social-ime-custom.scm (social-ime-server, social-ime-path):
      - New custom variable.
    * scm/social-ime.scm (social-ime-conversion):
      - Use (http:get).
      - Drop uim-curl.

2009-02-05 IWATA Ray <iwata@quasiquote.org>

    * scm/ajax-ime.scm (ajax-ime-conversion):
      - Oops, remove debug print.

2009-02-05 IWATA Ray <iwata@quasiquote.org>

    * scm/Makefile.am (module_names):
      - Remoce uim-curl dependency.
    * scm/ajax-ime.scm (ajax-ime-conversion):
      - Use (http:get).
      - Drop uim-curl.

2009-02-04 IWATA Ray <iwata@quasiquote.org>

    * uim/socket.c (c_make_sockaddr_storage)
      (c_delete_sockaddr_storage):
      - New function.
      (uim_plugin_instance_init):
      - Add (make-sockaddr-storage) and (delete-sockaddr-storage).
      (c_accept):
      - Fix misused socklen_t.

2009-02-04 IWATA Ray <iwata@quasiquote.org>

    * uim/socket.c (c_getaddrinfo):
      - Check hostname_ == #f case.

2009-02-04 IWATA Ray <iwata@quasiquote.org>

    * uim/socket.c (c_accept):
      - New function.
      (uim_plugin_instance_init):
      - Add (accept).

2009-02-04 IWATA Ray <iwata@quasiquote.org>

    * uim/socket.c (c_getpeereid):
      - New function.
      (uim_plugin_instance_init):
      - New function (getpeereid).

2009-02-04 IWATA Ray <iwata@quasiquote.org>

    * uim/uim-posix.c (c_getuid, c_getgid):
      - New function.
      (uim_init_posix_subrs):
      - Add (getuid), (getgid).

2009-02-04 IWATA Ray <iwata@quasiquote.org>

    * uim/socket.c 	(c_addrinfo_set_ai_flags):
      - Take integer flag.
      (c_addrinfo_ref_ai_flags):
      - Return int.
    * uim/uim-posix.c (c_file_open):
      - Take integer flag.
      (c_file_poll):
      - Return flags as integer value.
    * scm/socket.scm (call-with-getaddrinfo-hints):
      - Use (logior).
      (call-with-getaddrinfo-hints):
      - Fix typo in setting protocol.
        addrinfo-set-ai-socktype! to addrinfo-set-ai-protocol!
    
      Calculate flags on scm side.
      Use (bitwise-*) or (log*).

2009-02-03 IWATA Ray <iwata@quasiquote.org>

    * scm/ajax-ime.scm (ajax-ime:parse):
      - New function.
      - Switch to input-parse parser.

2009-02-03 IWATA Ray <iwata@quasiquote.org>

    * scm/input-parse.scm:
      - New file.
    * COPYING:
      - Add copyright.
    * scm/Makefile.am (SCM_FILES):
      - Add input-parse.scm.
    
      Import Oleg Kiselyov's input parsing library.

2009-02-03 IWATA Ray <iwata@quasiquote.org>

    * scm/util.scm (call-with-output-string)
      (call-with-input-string, call-with-string-io):
      - From Gauche.
      (write-to-string, read-from-string):
      - New function.
    * COPYING (Author):
      - Add copyright.

2009-02-03 IWATA Ray <iwata@quasiquote.org>

    * scm/util.scm (gensym):
      - Remove let-optionals*.

2009-02-03 IWATA Ray <iwata@quasiquote.org>

    * scm/util.scm (gensym):
      - Style.

2009-02-03 IWATA Ray <iwata@quasiquote.org>

    * scm/util.scm (*gensym-counter*):
      - New value.
      (gensym):
      - New function.

2009-02-03 IWATA Ray <iwata@quasiquote.org>

    * replace/daemon.c:
      - Replace include.h to config.h.
      - Disable HAVE_CYGWIN.

2009-02-02 IWATA Ray <iwata@quasiquote.org>

    * uim/uim-posix.c (c_daemon):
      - New function.
     (uim_init_posix_subrs):
      - New function (daemon).
    * replace/Makefile.am (libreplace_la_SOURCES):
      - Add daemon.c
    * configure.ac:
      - Check daemon().
    * replace/os_dep.h:
      - Add macro and declaration.

2009-02-02 IWATA Ray <iwata@quasiquote.org>

    * replace/daemon.c:
      - Import.

2009-02-02 IWATA Ray <iwata@quasiquote.org>

    * uim/socket.c (c_bind, c_listen):
      - New function.
      (uim_plugin_instance_init):
      - New function (bind) and (listen).

2009-02-02 IWATA Ray <iwata@quasiquote.org>

    * uim/uim-posix.c (c_duplicate_fileno):
      - Add Function.
     (uim_init_posix_subrs):
      - Add (duplicate-fileno).

2009-02-02 IWATA Ray <iwata@quasiquote.org>

    * uim/uim-posix.c (waitpid_options, c_process_waitpid_options)
      (c_process_waitpid):
      - Add Functions.
      (uim_init_posix_subrs):
      - Add (process-waitpid), (process-waitpid-options?) and
        process-waitpid-options-alist.

2009-02-02 IWATA Ray <iwata@quasiquote.org>

    * uim/uim-posix.c (poll_flags):
      - Add sentinel.

2009-02-02 IWATA Ray <iwata@quasiquote.org>

    * replace/Makefile.am (libreplace_la_SOURCES):
      - Sort.

2009-02-02 IWATA Ray <iwata@quasiquote.org>

    * replace/bsd-waitpid.c:
      - Replace include.h to config.h
    * replace/Makefile.am (libreplace_la_SOURCES):
      - Add bsd-waitpid.{c,h}
    * configure.ac:
      - Check waitpid(2).
    * replace/os_dep.h:
      - Add macro and declaration.

2009-02-02 IWATA Ray <iwata@quasiquote.org>

    * replace/bsd-waitpid.c, replace/bsd-waitpid.h:
      - Import bsd-waitpid.{c,h}.

2009-02-02 IWATA Ray <iwata@quasiquote.org>

    * uim/uim-posix.c (c_current_process_id, c_parent_process_id)
      (c_process_fork, c__exit):
      - New functions.
      (uim_init_posix_subrs):
      - Add (current-process-id), (parent-process-id),
        (process-fork) and (_exit).

2009-02-02 IWATA Ray <iwata@quasiquote.org>

    * replace/bsd-misc.c:
      - Replace include.h to config.h
      - Disable functions without strdup.
    * uim/uim-error.c (uim_strdup):
      - Remove check HAVE_STRDUP.
    * replace/os_dep.h:
      - Add macro and declaration.

2009-02-02 IWATA Ray <iwata@quasiquote.org>

    * replace/bsd-misc.c:
      - Import bsd-misc.c.

2009-02-02 IWATA Ray <iwata@quasiquote.org>

    * uim/uim-posix.c (c_file_ready):
      - New function.
      (uim_init_posix_subrs):
      - Add file-ready?

2009-02-02 IWATA Ray <iwata@quasiquote.org>

    * uim/uim-posix.c (poll_flags, c_file_poll_flags, c_file_poll):
      - New function.
      (uim_init_posix_subrs):
      - Add (file-poll), (file-poll-flags?) poll-flags-alist.

2009-02-02 IWATA Ray <iwata@quasiquote.org>

    * replace/os_dep.h:
      - Fix checking HAVE_* is undef or not.

2009-02-02 IWATA Ray <iwata@quasiquote.org>

    * configure.ac:
      - Check poll.h, sys/poll.h and poll().
    * replace/Makefile.am (libreplace_la_SOURCES):
      - Add bsd-poll.c and bsd-poll.h
    * replace/bsd-poll.c:
      - Replace include.h to config.h
    * replace/os_dep.h (poll):
      - Add macro and declaration.

2009-02-02 IWATA Ray <iwata@quasiquote.org>

    * replace/bsd-poll.c:
    * replace/bsd-poll.h:
      - Add poll(2) compatible function.

2009-01-27 Etsushi Kato <ek.kato@gmail.com>

    * helper/dict-word-win-gtk.c (word_list_key_press_cb) : Handle
      GDK_BackSpace.

2009-01-27 Etsushi Kato <ek.kato@gmail.com>

    * helper/dict-word-win-gtk.c
      - Cosmetic changes.
      - (word_window_init) : Reorder buttons.

2009-01-26 Etsushi Kato <ek.kato@gmail.com>

    * configure.ac : AC_DEFINE(LIBANTHY_UTF8_CAPABLE) for
      uim-dict-gtk.
    * helper/dict-anthy.c
      - (dict_anthy_init)
      - (dict_anthy_read_priv_dic_list)
      - (uim_dict_anthy_open)
        - Use UTF-8 if LIBANTHY_UTF8_CAPABLE is defined.
    * dict-word-win-gtk.c
      - (word_window_set_word)
      - (word_window_add)
        - Convert cclass_desc appropriately.

2009-01-22 IWATA Ray <iwata@quasiquote.org>

    * xim/ximserver.cpp (InputContext::update_prop_list):
      - Calculate timeout when (eq? bridge-show-with? 'time).

2009-01-22 IWATA Ray <iwata@quasiquote.org>

    * scm/action.scm (context-propagate-prop-list-update):
      - Avoid overwrite custom-value.
      (bridge-show-input-state-with-on?): New value.
    * xim/ximserver.cpp (InputContext::update_prop_list):
    * gtk/gtk-im-uim.c (update_prop_list_cb):
      - Check bridge-show-input-state-mode-on?.

2009-01-21 IWATA Ray <iwata@quasiquote.org>

    * scm/wnn.scm (wnn-lib-alloc-context):
      - Use context to get wnn-buf.
      (wnn-context-rec-spec): Add wnn-buf.
      (wnn-context-new): Init wnn-buf.
      (wnn-init-handler): Remove wnn-init-lib-ok?
      (wnn-lib-release-context): Close wnn-buf.
    
      Move wnn-buf to context.

2009-01-21 Etsushi Kato <ek.kato@gmail.com>

    * RELNOTE : Sync with 1.5.5.

2009-01-21 IWATA Ray <iwata@quasiquote.org>

    * uim/wnnlib.c (uim_wnn_jcKana, uim_wnn_jcMove):
      - Plug mem leak.

2009-01-21 Etsushi Kato <ek.kato@gmail.com>

    * po/ja.po : Update.

2009-01-21 Etsushi Kato <ek.kato@gmail.com>

    * scm/im.scm
    * scm/im-custom.scm
      - enable-im-switch? instead of enable-im-switch

2009-01-21 Etsushi Kato <ek.kato@gmail.com>

    * COPYING
    * emacs/COPYING
    * emacs/README
    * emacs/README.ja
    * emacs/callback.c
    * emacs/callback.h
    * emacs/candidate.c
    * emacs/candidate.h
    * emacs/commit.c
    * emacs/commit.h
    * emacs/context.c
    * emacs/context.h
    * emacs/debug.c
    * emacs/debug.h
    * emacs/encoding.c
    * emacs/encoding.h
    * emacs/helper-message.c
    * emacs/helper-message.h
    * emacs/helper-server.c
    * emacs/helper-server.h
    * emacs/helper.c
    * emacs/helper.h
    * emacs/im.c
    * emacs/im.h
    * emacs/key.c
    * emacs/key.h
    * emacs/output.c
    * emacs/output.h
    * emacs/preedit.c
    * emacs/preedit.h
    * emacs/prop.c
    * emacs/prop.h
    * emacs/uim-candidate.el
    * emacs/uim-debug.el
    * emacs/uim-el-agent.c
    * emacs/uim-el-agent.h
    * emacs/uim-el-helper-agent.c
    * emacs/uim-el-helper-agent.h
    * emacs/uim-el-types.h
    * emacs/uim-helper.el
    * emacs/uim-key.el
    * emacs/uim-keymap.el
    * emacs/uim-leim.el
    * emacs/uim-preedit.el
    * emacs/uim-util.el
    * emacs/uim-var.el
    * emacs/uim-version.el.in
    * emacs/uim.el
    * examples/uim-custom/uim-custom-dump.c
    * examples/uim-custom/uim-custom-update.c
    * examples/uim-custom/uim-custom-variable.c
    * fep/COPYING
    * fep/callbacks.c
    * fep/callbacks.h
    * fep/draw.c
    * fep/draw.h
    * fep/escseq.c
    * fep/escseq.h
    * fep/helper.c
    * fep/helper.h
    * fep/key.c
    * fep/key.h
    * fep/read.c
    * fep/read.h
    * fep/str.c
    * fep/str.h
    * fep/udsock.c
    * fep/udsock.h
    * fep/uim-fep-tick.c
    * fep/uim-fep.c
    * fep/uim-fep.h
    * gtk/caret-state-indicator.c
    * gtk/caret-state-indicator.h
    * gtk/compose.c
    * gtk/compose.h
    * gtk/gtk-im-uim.c
    * gtk/gtk-im-uim.h
    * gtk/gtk-rc-get-immodule-file.c
    * gtk/key-util-gtk.c
    * gtk/key-util-gtk.h
    * gtk/test/entry.c
    * gtk/text-util.c
    * gtk/text-util.h
    * gtk/uim-cand-win-gtk.c
    * gtk/uim-cand-win-gtk.h
    * gtk/uim-eb.c
    * gtk/uim-eb.h
    * helper/candwin-gtk.c
    * helper/dict-anthy.c
    * helper/dict-anthy.h
    * helper/dict-canna-cclass.c
    * helper/dict-canna-cclass.h
    * helper/dict-canna.c
    * helper/dict-canna.h
    * helper/dict-cclass-dialog.c
    * helper/dict-cclass-dialog.h
    * helper/dict-dict.c
    * helper/dict-dict.h
    * helper/dict-main-gtk.c
    * helper/dict-util.c
    * helper/dict-util.h
    * helper/dict-word-list-view-gtk.c
    * helper/dict-word-list-view-gtk.h
    * helper/dict-word-list-win-gtk.c
    * helper/dict-word-list-win-gtk.h
    * helper/dict-word-win-gtk.c
    * helper/dict-word-win-gtk.h
    * helper/dict-word.c
    * helper/dict-word.h
    * helper/im-switcher-gtk.c
    * helper/input-pad-ja.c
    * helper/pref-gtk-custom-widgets.c
    * helper/pref-gtk-custom-widgets.h
    * helper/pref-gtk-keytab.h
    * helper/pref-gtk.c
    * helper/toolbar-applet-gnome.c
    * helper/toolbar-common-gtk.c
    * helper/toolbar-standalone-gtk.c
    * helper/toolbar-systray-gtk.c
    * helper/uim-dict-ui.xml.in
    * notify/uim-knotify3.cc
    * notify/uim-libnotify.c
    * pixmaps/uim-m17nlib-relink-icons.in
    * po/fr.po
    * po/ja.po
    * po/ko.po
    * qt/candwin-qt.cpp
    * qt/candwin-qt.h
    * qt/chardict/chardict-bushuviewwidget.cpp
    * qt/chardict/chardict-bushuviewwidget.h
    * qt/chardict/chardict-chargridview.cpp
    * qt/chardict/chardict-chargridview.h
    * qt/chardict/chardict-qt.cpp
    * qt/chardict/chardict-qt.h
    * qt/chardict/chardict-unicodeviewwidget.cpp
    * qt/chardict/chardict-unicodeviewwidget.h
    * qt/chardict/po/ja.po
    * qt/chardict/qtgettext.h
    * qt/immodule-candidatewindow.cpp
    * qt/immodule-candidatewindow.h
    * qt/immodule-plugin.cpp
    * qt/immodule-plugin.h
    * qt/immodule-qhelpermanager.cpp
    * qt/immodule-qhelpermanager.h
    * qt/immodule-qtextutil.cpp
    * qt/immodule-qtextutil.h
    * qt/immodule-quiminfomanager.cpp
    * qt/immodule-quiminfomanager.h
    * qt/immodule-quiminputcontext.cpp
    * qt/immodule-quiminputcontext.h
    * qt/immodule-quiminputcontext_compose.cpp
    * qt/immodule-quiminputcontext_compose.h
    * qt/immodule-quiminputcontext_with_slave.cpp
    * qt/immodule-quiminputcontext_with_slave.h
    * qt/immodule-subwindow.cpp
    * qt/immodule-subwindow.h
    * qt/pref-customwidgets.cpp
    * qt/pref-customwidgets.h
    * qt/pref-qt.cpp
    * qt/pref-qt.h
    * qt/qtgettext.h
    * qt/switcher-qt.cpp
    * qt/switcher-qt.h
    * qt/test/qedittest.cpp
    * qt/toolbar-applet-kde.cpp
    * qt/toolbar-applet-kde.h
    * qt/toolbar-common-quimhelpertoolbar.cpp
    * qt/toolbar-common-quimhelpertoolbar.h
    * qt/toolbar-common-uimstateindicator.cpp
    * qt/toolbar-common-uimstateindicator.h
    * qt/toolbar-standalone-qt.cpp
    * qt/toolbar-standalone-qt.h
    * qt4/edittest/main.cpp
    * qt4/immodule/candidatewindow.cpp
    * qt4/immodule/candidatewindow.h
    * qt4/immodule/debug.h
    * qt4/immodule/plugin.cpp
    * qt4/immodule/plugin.h
    * qt4/immodule/qhelpermanager.cpp
    * qt4/immodule/qhelpermanager.h
    * qt4/immodule/qtextutil.cpp
    * qt4/immodule/qtextutil.h
    * qt4/immodule/quiminfomanager.cpp
    * qt4/immodule/quiminfomanager.h
    * qt4/immodule/quiminputcontext.cpp
    * qt4/immodule/quiminputcontext.h
    * qt4/immodule/quiminputcontext_compose.cpp
    * qt4/immodule/quiminputcontext_compose.h
    * qt4/immodule/quiminputcontext_with_slave.cpp
    * qt4/immodule/quiminputcontext_with_slave.h
    * qt4/immodule/subwindow.cpp
    * qt4/immodule/subwindow.h
    * replace/os_dep.h
    * scm/action.scm
    * scm/ajax-ime-custom.scm
    * scm/ajax-ime-key-custom.scm
    * scm/ajax-ime.scm
    * scm/anthy-custom.scm
    * scm/anthy-key-custom.scm
    * scm/anthy-utf8-custom.scm
    * scm/anthy-utf8.scm
    * scm/anthy.scm
    * scm/byeoru-custom.scm
    * scm/byeoru-dic.scm
    * scm/byeoru-key-custom.scm
    * scm/byeoru-symbols.scm
    * scm/byeoru.scm
    * scm/canna-custom.scm
    * scm/canna-key-custom.scm
    * scm/canna.scm
    * scm/composer.scm
    * scm/custom-rt.scm
    * scm/custom.scm
    * scm/deprecated-util.scm
    * scm/direct.scm
    * scm/editline.scm
    * scm/elatin-custom.scm
    * scm/elatin-rules.scm
    * scm/elatin.scm
    * scm/event.scm
    * scm/generic-custom.scm
    * scm/generic-key-custom.scm
    * scm/generic.scm
    * scm/hangul.scm
    * scm/hangul2.scm
    * scm/hangul3.scm
    * scm/http-client.scm
    * scm/i18n.scm
    * scm/ichar.scm
    * scm/im-custom.scm
    * scm/im-switcher.scm
    * scm/im.scm
    * scm/init.scm
    * scm/ipa-x-sampa.scm
    * scm/iso-639-1.scm
    * scm/japanese-azik.scm
    * scm/japanese-kana.scm
    * scm/japanese.scm
    * scm/key.scm
    * scm/latin.scm
    * scm/lazy-load.scm
    * scm/light-record.scm
    * scm/load-action.scm
    * scm/look-custom.scm
    * scm/look.scm
    * scm/m17nlib.scm
    * scm/mana-custom.scm
    * scm/mana-key-custom.scm
    * scm/mana.scm
    * scm/ng-action.scm
    * scm/ng-key.scm
    * scm/pinyin-big5.scm
    * scm/plugin.scm
    * scm/prime-custom.scm
    * scm/prime-key-custom.scm
    * scm/prime.scm
    * scm/pyload.scm
    * scm/pyunihan.scm
    * scm/rk.scm
    * scm/romaja.scm
    * scm/scim.scm
    * scm/sj3-custom.scm
    * scm/sj3-key-custom.scm
    * scm/sj3.scm
    * scm/skk-custom.scm
    * scm/skk-dialog.scm
    * scm/skk-editor.scm
    * scm/skk-key-custom.scm
    * scm/skk.scm
    * scm/social-ime-custom.scm
    * scm/social-ime-key-custom.scm
    * scm/social-ime.scm
    * scm/socket.scm
    * scm/spellcheck-custom.scm
    * scm/spellcheck.scm
    * scm/tcode.scm
    * scm/trec-composer.scm
    * scm/trec.scm
    * scm/trycode.scm
    * scm/tutcode-bushudic.scm
    * scm/tutcode-custom.scm
    * scm/tutcode-key-custom.scm
    * scm/tutcode-kigoudic.scm
    * scm/tutcode-rule.scm
    * scm/tutcode.scm
    * scm/uim-db.scm
    * scm/uim-module-manager.scm
    * scm/uim-sh.scm
    * scm/ustr.scm
    * scm/util.scm
    * scm/viqr.scm
    * scm/wlos.scm
    * scm/wnn-custom.scm
    * scm/wnn-key-custom.scm
    * scm/wnn.scm
    * scm/yahoo-jp-custom.scm
    * scm/yahoo-jp-key-custom.scm
    * scm/yahoo-jp.scm
    * scm/zaurus.scm
    * test/run-test.scm
    * test/template.scm
    * test/test-action.scm
    * test/test-anthy.scm
    * test/test-custom-rt.scm
    * test/test-custom.scm
    * test/test-db.scm
    * test/test-example.scm
    * test/test-i18n.scm
    * test/test-iconv.scm
    * test/test-im.scm
    * test/test-intl.scm
    * test/test-key.scm
    * test/test-lazy-load.scm
    * test/test-ng-key.scm
    * test/test-plugin.scm
    * test/test-uim-test-utils.scm
    * test/test-uim-util.scm
    * test/test-ustr.scm
    * test/uim-assertions.scm
    * test/uim-test-utils-new.scm
    * test/uim-test-utils.scm
    * test/uim-test.scm
    * test/util/test-character-conversion.scm
    * test/util/test-character-predicate.scm
    * test/util/test-list.scm
    * test/util/test-misc.scm
    * test/util/test-multi-segment.scm
    * test/util/test-r5rs.scm
    * test/util/test-record.scm
    * test/util/test-srfi.scm
    * test/util/test-string-list.scm
    * test/util/test-uim.scm
    * test2/test-composer.scm
    * test2/test-fail.scm
    * test2/test-light-record.scm
    * test2/test-template.scm
    * test2/test-trec.scm
    * test2/test-wlos.scm
    * uim/agent.c
    * uim/anthy-utf8.c
    * uim/anthy.c
    * uim/bsdlook.h
    * uim/canna.c
    * uim/counted-init.c
    * uim/counted-init.h
    * uim/curl.c
    * uim/dynlib.c
    * uim/dynlib.h
    * uim/editline.c
    * uim/encoding-table.c
    * uim/expat.c
    * uim/iconv.c
    * uim/intl.c
    * uim/look.c
    * uim/m17nlib.c
    * uim/mana.c
    * uim/prime.c
    * uim/rk.c
    * uim/scim.cpp
    * uim/sj3.c
    * uim/skk.c
    * uim/socket.c
    * uim/spellcheck.c
    * uim/test-gc.c
    * uim/uim-custom-enabler.c
    * uim/uim-custom.c
    * uim/uim-custom.h
    * uim/uim-error.c
    * uim/uim-func.c
    * uim/uim-helper-client.c
    * uim/uim-helper-server.c
    * uim/uim-helper.c
    * uim/uim-helper.h
    * uim/uim-iconv.h
    * uim/uim-im-switcher.h
    * uim/uim-internal.h
    * uim/uim-ipc.c
    * uim/uim-key.c
    * uim/uim-module-manager.c
    * uim/uim-notify.c
    * uim/uim-notify.h
    * uim/uim-posix.c
    * uim/uim-posix.h
    * uim/uim-scm-abbrev.h
    * uim/uim-scm-sigscheme.c
    * uim/uim-scm.h
    * uim/uim-sh.c
    * uim/uim-util.c
    * uim/uim-util.h
    * uim/uim-x-kana-input-hack.c
    * uim/uim-x-util.h
    * uim/uim.c
    * uim/uim.h
    * uim/wnnlib.c
    * uim/wnnlib.h
    * xim/canddisp.cpp
    * xim/canddisp.h
    * xim/compose.cpp
    * xim/compose.h
    * xim/connection.cpp
    * xim/connection.h
    * xim/convdisp.cpp
    * xim/convdisp.h
    * xim/helper.cpp
    * xim/helper.h
    * xim/locale.cpp
    * xim/main.cpp
    * xim/util.cpp
    * xim/util.h
    * xim/xdispatch.h
    * xim/xim.h
    * xim/ximic.cpp
    * xim/ximim.cpp
    * xim/ximpacket.cpp
    * xim/ximpn.h
    * xim/ximserver.cpp
    * xim/ximserver.h
    * xim/ximtrans.cpp
      - Update copyright by svn ls -R | egrep -v '/$' | xargs perl -i -pe 's/\b(200\d)([,-\s]+200\d)*\s+uim\b/\1-2009 uim/'

2009-01-21 Etsushi Kato <ek.kato@gmail.com>

    * tools/gnufy-changelog.pl : Update.

2009-01-20 IWATA Ray <iwata@quasiquote.org>

    * scm/Makefile.am (SCM_FILES):
      - Add http-client.scm.
    * scm/socket.scm (socket-read-buffer, socket-get-buffer):
      - Fix copyright.
      - New function.
    * scm/http-client.scm:
      - New file.
    
      Add minimum support http fetch library.
      No SSL, no HTTP/1.1, no proxy, no cookie, no POST method.

2009-01-20 IWATA Ray <iwata@quasiquote.org>

    * scm/socket.scm (file-read-string, file-write-string):
      (call-with-getaddrinfo-hints, call-with-sockaddr-un)
      (open-socket-port, socket-read-char, socket-peek-char)
      (socket-display, socket-read-line):
      - New functions.
      - Add socket port handling.

2009-01-20 IWATA Ray <iwata@quasiquote.org>

    * uim/socket.c (c_make_sockaddr_un, c_delete_sockaddr_un)
      (c_set_sockaddr_un_sun_family, c_ref_sockaddr_un_sun_family)
      (c_set_sockaddr_un_sun_path, c_ref_sockaddr_un_sun_path, c_sun_len):
      - Add unix domain handling functions.
      (uim_plugin_instance_init):
      - Regist.

2009-01-20 IWATA Ray <iwata@quasiquote.org>

    * uim/uim-posix.c (ref_args_or):
      - Remove.
      (c_file_read):
      - Drop garbage buffer.
      - Return buffer only.

2009-01-20 IWATA Ray <iwata@quasiquote.org>

    * uim/uim-posix.c (c_file_read):
      - Mask negative value.

2009-01-19 IWATA Ray <iwata@quasiquote.org>

    * scm/socket.scm:
      - Fix typo.
      - New functions.

2009-01-19 IWATA Ray <iwata@quasiquote.org>

    * uim/uim-posix.c: Remove socket functions.
    * scm/Makefile.am (SCM_FILES): Add socket.uim
    * uim/Makefile.am: Add libuim_socket_*.
    * uim/socket.c:
    * scm/socket.scm:
      - New file.
    
      Make socket library as plugin.

2009-01-19 IWATA Ray <iwata@quasiquote.org>

    * uim/uim-posix.c:
      - Remove alist-ref code.
      - Bind options alist as global.

2009-01-19 IWATA Ray <iwata@quasiquote.org>

    * uim/uim-posix.c (open_flags):
      - Oops, fix ifdef directive error.

2009-01-19 IWATA Ray <iwata@quasiquote.org>

    * uim/uim-posix.c (open_flags):
      - Add ifdef guard of O_EXLOCK and  O_SHLOCK.

2009-01-19 IWATA Ray <iwata@quasiquote.org>

    * uim/uim-posix.c (find_flags_equal, ref_args_or, c_make_addrinfo)
      (c_delete_addrinfo, c_addrinfo_set_ai_flags, c_addrinfo_ref_ai_flags)
      (c_addrinfo_set_ai_family, c_addrinfo_ref_ai_family)
      (c_addrinfo_set_ai_socktype, c_addrinfo_ref_ai_socktype)
      (c_addrinfo_set_ai_protocol, c_addrinfo_ref_ai_protocol)
      (c_addrinfo_ref_ai_addrlen, c_addrinfo_ref_ai_addr, c_getaddrinfo)
      (c_freeaddrinfo, c_socket, c_connect):
      - New functions.
    
      Import low-level socket functions.
      Now, uim-scm will read/write network packet immediately.

2009-01-19 IWATA Ray <iwata@quasiquote.org>

    * uim/uim-posix.c (c_file_write):
      Oops, forgotten cdr-down.

2009-01-19 IWATA Ray <iwata@quasiquote.org>

    * uim/uim-posix.c (make_args_or, c_file_open):
      - Rename make_args_or() to find_args_equal();

2009-01-18 IWATA Ray <iwata@quasiquote.org>

    * uim/uim-posix.c (make_args_or):
      - Add argument to receive error string.
      (c_file_open):
      - Sync args.
      - Return error object.

2009-01-18 IWATA Ray <iwata@quasiquote.org>

    * uim/uim-posix.c:
      - Rename or_args to opt_args.

2009-01-18 IWATA Ray <iwata@quasiquote.org>

    * uim/uim-posix.c (make_args_or)
      (make_arg_list, c_file_open_flags, c_file_open_mode)
      (c_file_open, c_file_close, c_file_read, c_file_write):
      - New function.
      (uim_init_posix_subrs): New init_procs.
    
      low-level I/O functions for uim-scm.
      Note that input/output buffer must be list of integer.

2009-01-17 IWATA Ray <iwata@quasiquote.org>

    * uim/skk.c (search_line_from_server, search_line_from_file)
      (parse_dic_line):
      - Remove alloca().

2009-01-17 IWATA Ray <iwata@quasiquote.org>

    * fep/callbacks.c (make_page_strs):
    * fep/helper.c (send_im_list):
      - Use uim_asprintf().

2009-01-17 IWATA Ray <iwata@quasiquote.org>

    * fep/callbacks.c (prop_list_update_cb):
      - Plug mem leak.

2009-01-17 IWATA Ray <iwata@quasiquote.org>

    * fep/callbacks.c (set_candidate, make_page_strs):
      - Use uim_asprintf().

2009-01-17 IWATA Ray <iwata@quasiquote.org>

    * fep/callbacks.c (pushback_cb, make_page_strs):
    * fep/read.c (unget_stdin):
    * fep/helper.c (send_im_list):
    * fep/draw.c (set_line2width):
    * fep/escseq.c (set_attr):
      - Use uim_realloc().

2009-01-17 IWATA Ray <iwata@quasiquote.org>

    * fep/uim-fep.c (main):
    * fep/escseq.c (init_escseq):
    * fep/draw.c (draw_statusline):
    * fep/callbacks.c
      (init_callbacks, end_callbacks, get_commit_str)
      (get_statusline_str, get_candidate_str, get_index_str)
      (pushback_cb, prop_list_update_cb, dup_preedit)
      (make_page_strs, set_candidate):
      - Use uim_strdup().

2009-01-17 IWATA Ray <iwata@quasiquote.org>

    * fep/callbacks.c (activate_cb, pushback_cb, dup_preedit)
      (make_page_strs, set_candidate):
    * fep/str.c (str2wcstr, byte2width, byte2width2, tab2space):
    * fep/uim-fep.c (main, get_winsize):
    * fep/draw.c (set_line2width, start_preedit, erase_preedit):
    * fep/escseq.c (set_attr, put_erase, cut_padding):
      - Use uim_malloc().

2009-01-17 IWATA Ray <iwata@quasiquote.org>

    * fep/callbacks.c (commit_cb, prop_list_update_cb):
      - use uim_asprintf().

2009-01-17 IWATA Ray <iwata@quasiquote.org>

    * fep/callbacks.c (commit_cb):
      - realloc() + strcat() -> uim_asprintf().

2009-01-17 IWATA Ray <iwata@quasiquote.org>

    * fep/escseq.c (attr2escseq):
      - strcat() -> strlcat().
      - sprintf() -> snprintf & strlcat().

2009-01-17 IWATA Ray <iwata@quasiquote.org>

    * fep/helper.c (send_im_list):
    * fep/callbacks.c (get_mode_str, switch_system_global_im_cb)
      (prop_list_update_cb): Use uim_asprintf().

2009-01-17 Etsushi Kato <ek.kato@gmail.com>

    * NEWS : Update.

2009-01-17 Etsushi Kato <ek.kato@gmail.com>

    * qt/pref-qt.cpp  : Follow recent changes in uim-pref-gtk.
      - (DEFAULT_WINDOW_WIDTH)
      - (DEFULAT_WINDOW_HEIGHT)
        - Set 800x600 window size.
      - (UimPrefDialog::createMainWidgets)
        - Use QScrollView for the right side widget.
        - Don't use QVBoxLayout.
        - Set sizePolicy for the buttonHWidget.
      - (UimPrefDialog::createGroupWidgets) : Setup the first page
        only.
      - (UimPrefDialog::slotSelectionChanged) : Change to create page
        widget on demand.
      - (GroupPageWidget::GroupPageWidget) : Store group symbol name.
      - (GroupPageWidget::setupWidgets) : Use stored symbol name.
      - (main) : Set default window size.
    * qt/pref-customwidgets.cpp (CustomChoiceCombo::CustomChoiceCombo)
      : Use new-style combobox.
    * qt/pref-qt.h
      - Include qsplitter.h
      - (GroupPageWidget)
        - Expose setupWidgets() as public.
        - Add m_group_sym and m_widget_created member.

2009-01-15 IWATA Ray <iwata@quasiquote.org>

    * scm/im-custom.scm (bridge-show-input-state-time-length):
      - Reorder r5711.

2009-01-15 IWATA Ray <iwata@quasiquote.org>

    * scm/im-switcher.scm (imsw-iconic-label-alist):
      - Sort.
      - Add well known ims label.
      - Rename duplicated im name.

2009-01-15 IWATA Ray <iwata@quasiquote.org>

    * helper/dict-main-gtk.c:
      - Remove unused variable.

2009-01-15 IWATA Ray <iwata@quasiquote.org>

    * uim/uim-helper.c (uim_helper_buffer_append):
      - NULL check first.
      - Use uim_realloc().
      (uim_helper_buffer_get_message):
      - NULL check first.

2009-01-15 Etsushi Kato <ek.kato@gmail.com>

    * helper/pref-gtk.c
      - (key_press_cb) : New.  Close pref window by escape key.
      - (create_pref_window) : Handle escape key to close the window.

2009-01-15 Etsushi Kato <ek.kato@gmail.com>

    * helper/pref-gtk.c
      - (pref_tree_selection_changed)
      - (create_pref_treeview)
        - Change to create the group widget on demand to reduce
          startup time.

2009-01-15 Etsushi Kato <ek.kato@gmail.com>

    * uim-helper-client.c (uim_read_buf) : Don't release the
      buffer even the connection is closed since the buffer may be
      shared with other fds.

2009-01-15 Etsushi Kato <ek.kato@gmail.com>

    * uim/uim-helper-client.c (uim_helper_close_client_fd) : Again,
      plug leak.
    * helper/dict-main-gtk.c : Remove meaningless and harmful code
      about uim-helper connection.

2009-01-15 Etsushi Kato <ek.kato@gmail.com>

    * uim/uim-helper-client.c : Revert change in r5698.

2009-01-14 IWATA Ray <iwata@quasiquote.org>

    * scm/im-custom.scm (bridge-show-with?):
    * scm/action.scm (context-propagate-prop-list-update):
    * gtk/gtk-im-uim.c (update_prop_list_cb):
    * xim/ximserver.cpp (InputContext::update_prop_list):
      - Simplify symbol name. 'time and 'mode.

2009-01-14 Etsushi Kato <ek.kato@gmail.com>

    * gtk/gtk-im-uim.c (update_prop_list_cb)
    * xim/ximserver.cpp (InputContext::update_prop_list)
      - Plug leak in r5709.
    * scm/im-custom.scm (bridge-show-with?) : Don't change the default
      behavior for the backward compatibility.

2009-01-13 IWATA Ray <iwata@quasiquote.org>

    * scm/im-custom.scm (bridge-show-with?):
      - Add new knob.
    
    * scm/action.scm (context-propagate-prop-list-update):
      - Add switch bridge-show-input-state? on/off on
        bridge-show-input-state-with-mode.
    
    * gtk/gtk-im-uim.c (update_prop_list_cb):
    * xim/ximserver.cpp (InputContext::update_prop_list):
      - Hide indicator on bridge-show-input-state-with-mode.
    
      Add kinput2 like indicator mode.

2009-01-06 IWATA Ray <iwata@quasiquote.org>

    * emacs/helper.c (helper_send_im_list):
      (helper_send_im_list, helper_send_im_change_whole_desktop):
    * emacs/prop.c (announce_prop_list_update):
      - Use uim_asprintf().

2009-01-06 IWATA Ray <iwata@quasiquote.org>

    * emacs/candidate.c (new_candidate):
    * emacs/context.c (switch_context_im, create_uim_agent_context)
      (update_context_configuration):
    * emacs/encoding.c (new_im_encoding, set_im_encoding):
    * emacs/im.c (update_default_engine):
    * emacs/preedit.c (add_preedit):
    * emacs/prop.c (update_prop_list, show_prop):
      - Use uim_strdup().

2009-01-06 IWATA Ray <iwata@quasiquote.org>

    * emacs/commit.h:
      - Include uim/uim.h
    
    * emacs/commit.c (add_commit_string):
    * emacs/uim-el-helper-agent.c (read_command):
      - Use uim_realloc().

2009-01-06 IWATA Ray <iwata@quasiquote.org>

    * emacs/helper-message.h:
      - Include uim/uim.h
    
    * emacs/candidate.c (create_candidate, new_candidate):
    * emacs/context.c (switch_context_im_all)
      (create_uim_agent_context, new_uim_agent_context):
    * emacs/encoding.c (new_im_encoding):
    * emacs/helper-message.c (helper_message_encode)
      (helper_message_decode):
    * emacs/preedit.c (create_preedit, add_preedit):
    * emacs/prop.c (create_prop):
    * emacs/uim-el-helper-agent.c (main):
      - Use uim_malloc().

2009-01-06 Konosuke Watanabe <sasugaanija@gmail.com>

    * emacs/im.c
    * emacs/encoding.c
    * emacs/prop.c
    * emacs/context.c
     - Remove needless NULL check

2009-01-06 Etsushi Kato <ek.kato@gmail.com>

    * NEWS : Port r5701 from branches/1.5.

2009-01-06 Etsushi Kato <ek.kato@gmail.com>

    * uim/skk.c : Cosmetic change.

2009-01-06 Etsushi Kato <ek.kato@gmail.com>

    * uim/skk.c
      - (free_skk_line) : Plug leak.
      - (uim_plugin_instance_quit) : Plug possible leak.
    * uim/uim-helper-client.c (uim_helper_close_client_fd) : Plug
      leak.

2009-01-06 Etsushi Kato <ek.kato@gmail.com>

    * uim/bsdlook.c (uim_look_finish) : Add check.

2009-01-06 Etsushi Kato <ek.kato@gmail.com>

    * uim/bsdlook.c (uim_look_finish) : Plug leak.

2009-01-06 IWATA Ray <iwata@quasiquote.org>

    * uim/iconv.c (uim_iconv_code_conv):
      - Remove needless NULL check.

2009-01-06 IWATA Ray <iwata@quasiquote.org>

    * uim/uim-error.c (uim_realloc):
      - Plug mem leak in "p = uim_realloc(p, size);" case.

2009-01-05 IWATA Ray <iwata@quasiquote.org>

    * po/fr.po, po/ja.po, po/ko.po: Translate message of yahoo-jp.

2009-01-05 IWATA Ray <iwata@quasiquote.org>

    * po/fr.po, po/ja.po, po/ko.po: Translate message of ajax-ime.

2009-01-05 IWATA Ray <iwata@quasiquote.org>

    * po/fr.po, po/ja.po, po/ko.po: Translate message of social-ime.

2009-01-05 Konosuke Watanabe <sasugaanija@gmail.com>

    * po/fr.po
    * po/ja.po
    * po/ko.po
      - Update

2009-01-04 Konosuke Watanabe <sasugaanija@gmail.com>

    * emacs/context.c
      - (release_uim_agent_context): Plug memory leak

2008-12-30 IWATA Ray <iwata@quasiquote.org>

    * POTFILES.in: Add ajax-ime, social-ime, yahoo-jp.

2008-12-28 IWATA Ray <iwata@quasiquote.org>

    * NEWS: Add uim-yahoo-jp.

2008-12-28 IWATA Ray <iwata@quasiquote.org>

    * NEWS: uim-ajax-ime is single-segment-im.

2008-12-15 Kouhei Sutou <kou@cozmixng.org>

    * test/test-iconv.scm: add a test for iconv bindings.

2008-12-15 Kouhei Sutou <kou@cozmixng.org>

    * test/uim-test-utils-new.scm: add uim-eval and uim-raw-eval
      that don't read evaluated result.
    
    * test/util/test-record.scm: use uim-eval.

2008-12-15 Kouhei Sutou <kou@cozmixng.org>

    * uim/iconv.c: include missing <errno.h>.

2008-12-15 IWATA Ray <iwata@quasiquote.org>

    * uim/iconv.c (uim_iconv_code_conv):
      - Oops, return string when cd == NULL.

2008-12-15 IWATA Ray <iwata@quasiquote.org>

    * uim/iconv.c (uim_iconv_code_conv):
      - Avoid double free.

2008-12-15 IWATA Ray <iwata@quasiquote.org>

    * uim/iconv.c (uim_iconv_code_conv):
      - Check uninitialized case. from -r5277.

2008-12-15 IWATA Ray <iwata@quasiquote.org>

    * xim/compose.cpp (mb_string_to_utf8):
    * xim/locale.cpp (UTF8_Locale::utf8_to_native_str):
      - Replace own conversion code with uim_iconv->convert().
        Does it make sence???

2008-12-15 IWATA Ray <iwata@quasiquote.org>

    * uim/iconv.c (uim_iconv_code_conv):
      - Remove needless comment.

2008-12-15 IWATA Ray <iwata@quasiquote.org>

    * uim/iconv.c (uim_iconv_code_conv):
      - Use MBCHAR_LEN_MAX. from -r5277.

2008-12-15 IWATA Ray <iwata@quasiquote.org>

    * uim/iconv.c (uim_iconv_code_conv):
      - Plug mem leak.

2008-12-14 IWATA Ray <iwata@quasiquote.org>

    * uim/iconv.c (uim_iconv_code_conv):
      - Don't move index value of input string.
        store second buffer and return it.

2008-12-14 IWATA Ray <iwata@quasiquote.org>

    * uim/iconv.c (uim_iconv_code_conv):
      - Check instr == NULL case. enbuged in r5669.

2008-12-14 IWATA Ray <iwata@quasiquote.org>

    * uim/iconv.c (uim_iconv_code_conv):
      - Replace alloca with uim_malloc/uim_realloc.
      - Treate E2BIG.
    
      Inspired by following code,
       - http://www.hi-matic.org/distfiles/citrus/NetBSD/iconv_sample.c

2008-12-12 IWATA Ray <iwata@quasiquote.org>

    * Makefile.am (IM_SUBST_SVGS, IM_SUBST_PNGS):
    * scm/Makefile.am (SCM_FILES, module_names):
    * scm/yahoo-jp.scm:
    * scm/yahoo-jp-key-custom.scm:
    * scm/yahoo-jp-custom.scm:
    
      Add new japanese input method 'yahoo-jp'.
      This im is depend on uim-curl and uim-expat.

2008-12-12 IWATA Ray <iwata@quasiquote.org>

    * uim/expat.c:
      - New file.
    * uim/Makefile.am:
      - Add libuim-expat.
    * m4/expat.m4:
      - Import from libexpat-current.
    * configure.ac:
      - Check libexpat.
    
      Add new uim module 'uim-expat' to parse XML strings.
    
      Note: Callback handlers should be binded,
            because these objects are not gc-protected.

2008-12-12 Kouhei Sutou <kou@cozmixng.org>

    * test/util/test-character-conversion.scm: format.

2008-12-12 Kouhei Sutou <kou@cozmixng.org>

    * test/uim-assertions.scm: add assert-uim-raw-true and assert-uim-raw-false.
    * test/util/test-character-conversion.scm: resolve FIXME:
      write assertions that use escape sequences that aren't
      supported by Gauche.

2008-12-12 Kouhei Sutou <kou@cozmixng.org>

    * test/uim-assertions.scm: don't normalize boolean value in
      assert-uim-true and assert-uim-false.
    * test/util/test-srfi.scm, test/util/test-string-list.scm:
      specify expected value instead of checking 'not false' value.

2008-12-12 Kouhei Sutou <kou@cozmixng.org>

    * test/uim-assertions.scm: don't keep backtrace.
    * test/util/test-*.scm: use assert-uim-*.

2008-12-12 Kouhei Sutou <kou@cozmixng.org>

    * test/uim-assertions.scm: define assertions that is
      specialized to uim tests.
    * test/uim-test.scm: define convenience module.
    * test/util/test-list.scm: use assert-uim-*.

2008-12-12 Kouhei Sutou <kou@cozmixng.org>

    * test/util/test-*.scm: remove needles svn:executable property.

2008-12-12 Kouhei Sutou <kou@cozmixng.org>

    * test/test-util.scm: remove needless test that is converted
      to new style tests and they are in test/util/.

2008-12-12 Kouhei Sutou <kou@cozmixng.org>

    * test/util/test-misc.scm, test/util/test-srfi.scm: fix typos.

2008-12-12 Kouhei Sutou <kou@cozmixng.org>

    * test/util/test-multi-segment.scm: For new test suite.

2008-12-12 Kouhei Sutou <kou@cozmixng.org>

    * test/util/test-record.scm: For new test suite.

2008-12-12 Kouhei Sutou <kou@cozmixng.org>

    * test/util/test-uim.scm: fix typos.

2008-12-12 Kouhei Sutou <kou@cozmixng.org>

    * test/util/test-uim.scm: For new test suite.

2008-12-12 Kouhei Sutou <kou@cozmixng.org>

    * test/util/test-srfi.scm: For new test suite.

2008-12-12 Kouhei Sutou <kou@cozmixng.org>

    * test/util/test-r5rs.scm: For new test suite.

2008-12-12 Kouhei Sutou <kou@cozmixng.org>

    * test/uim-test-utils-new.scm: add uim-raw to run skipped
      tests. They can't be ran because Gauche's write doesn't
      output expected format. e.g. (write "\b") outputs "b" not
      "\b". uim-raw use display instead of write. We need to
      pass a string that represents expected S-expression
      instead of a S-expression.
    * test/util/test-misc.scm: For new test suite.

2008-12-12 Kouhei Sutou <kou@cozmixng.org>

    * pixmaps: update svn:ignore.

2008-12-12 Kouhei Sutou <kou@cozmixng.org>

    * test/util/test-list.scm: For new test suite.

2008-12-12 Etsushi Kato <ek.kato@gmail.com>

    * uim/curl.c (uim_curl_perform) : Fix type used to store return
      value of uim_scm_symbol_value_bool().

2008-12-11 Masahito Omote <omote@utyuuzin.net>

    * uim/curl.c
      - Add checks for size_t overflow. It's not tested completely because of
        no environment for checking 4G over 'in memory' transfers.
      - The first check is taken from jemalloc.c.

2008-12-11 Masahito Omote <omote@utyuuzin.net>

    * uim/curl.c:
      - Remove test codes.
      - Add support for accessing via HTTP proxy without setting 'http_proxy'
        environment variable. Syncing with GNOME or KDE's configuration is not
        planned.

2008-12-10 Etsushi Kato <ek.kato@gmail.com>

    * scm/japanese.scm (ja-rk-rule-additional): Don't use "nwa" "nwi",
      "nwu", "nwe", "nwo" ([uim-ja 128]).

2008-12-07 IWATA Ray <iwata@quasiquote.org>

    * NEWS: Add ajax-ime.

2008-12-07 IWATA Ray <iwata@quasiquote.org>

    * uim/Makefile.am (libuim_la_SOURCES):
      Add uim-iconv.h

2008-12-07 IWATA Ray <iwata@quasiquote.org>

    * pixmaps/Makefile.am (IM_SUBST_SVGS, IM_SUBST_PNGS):
    * scm/Makefile.am (SCM_FILES):
    * scm/ajax-ime-key-custom.scm:
    * scm/ajax-ime-custom.scm:
    * scm/ajax-ime.scm:
    
      Add new input method 'ajax-ime'.

2008-12-07 IWATA Ray <iwata@quasiquote.org>

    * uim/libtool-version.mk (libuim_version)
      Minor crank.

2008-12-07 IWATA Ray <iwata@quasiquote.org>

    * uim/uim.c (uim_init_internal):
      Call uim_init_iconv_subrs().
    * uim/iconv.c (uim_ext_iconv_open, uim_ext_iconv_code_conv)
      (uim_ext_iconv_release, uim_init_iconv_subrs):
      Export iconv-* functions.
    * uim/uim-iconv.h:
      New file.

2008-11-30 Etsushi Kato <ek.kato@gmail.com>

    * anthy.scm : Indentation fix.

2008-11-27 Etsushi Kato <ek.kato@gmail.com>

    * helper/dict-word-win-gtk.c (word_window_necessary_create) : Fix
      page_size setting with gtk_adjustment_new().

2008-11-26 Etsushi Kato <ek.kato@gmail.com>

    * NEWS : Update.

2008-11-26 Etsushi Kato <ek.kato@gmail.com>

    * scm/anthy.scm
      - (anthy-learn-transposing-text) : New.
      - (anthy-proc-transposing-state) : Learn transposing
        hiragana/katakana string upon anthy-commit-key? (bug #18630).
    * scm/anthy-utf8.scm
      - (anthy-utf8-learn-transposing-text)
      - (anthy-utf8-proc-transposing-state)
        - Likewise.

2008-11-19 Kouhei Sutou <kou@cozmixng.org>

    * test/util/test-string-list.scm: For new test suite.

2008-11-19 Kouhei Sutou <kou@cozmixng.org>

    * **/: set svn:ignore.

2008-11-18 Etsushi Kato <ek.kato@gmail.com>

    * test/util/test-character-conversion.scm: For new
      test suite (Kouhei Sutou).

2008-11-12 Etsushi Kato <ek.kato@gmail.com>

    * doc/UNIT-TEST: Update.

2008-11-10 IWATA Ray <iwata@quasiquote.org>

    * scm/social-ime.scm (social-ime-conversion):
      Rewrite csv parser.

2008-11-09 Etsushi Kato <ek.kato@gmail.com>

    * test/run-test.scm : Apply patch on [uim-ja 115]
      (http://www.mail-archive.com/uim-ja@googlegroups.com/msg00098.html)

2008-11-09 IWATA Ray <iwata@quasiquote.org>

    * scm/social-ime.scm
      (social-ime-conversion-make-commit-query):
      (social-ime-send-commit):
      (social-ime-lib-commit-segments): New function.
      (social-ime-lib-commit-segment): Remove.
      (social-ime-commit-string): Use social-ime-lib-commit-segments.
    
      Now, uim-social-ime supports learning mode.

2008-11-09 IWATA Ray <iwata@quasiquote.org>

    * scm/social-ime.scm (social-ime-conversion):
      Encode query string.

2008-11-09 IWATA Ray <iwata@quasiquote.org>

    * scm/social-ime.scm (social-ime-lib-get-unconv-candidate):
      Return value is string (work around).
      Social IME API does not return segment information.

2008-11-09 IWATA Ray <iwata@quasiquote.org>

    * scm/social-ime-custom.scm (social-ime-publicity):
      Remove. publicity mode is not supported.
      from id:nokuno (Social IME developper). thanks.

2008-11-08 Etsushi Kato <ek.kato@gmail.com>

    * test/uim-test-utils-new.scm
    * test/util/test-character-predicate.scm
      - Initial import of new style of the test suite with GaUnit
        0.1.6 by Kouhei Sutou.

2008-11-07 IWATA Ray <iwata@quasiquote.org>

    * scm/social-ime-custom.scm (social-ime-publicity):
    
      Add publicity mode.
      if social-ime-publicity == 'public and commit words are over 10 characters,
      ime server posts these words twitter.com too.
      default value is 'private.
      incomplete this mode yet.

2008-11-07 IWATA Ray <iwata@quasiquote.org>

    * pixmaps/Makefile.am (IM_SUBST_SVGS, IM_SUBST_PNGS):
    * scm/Makefile.am (SCM_FILES):
    * scm/social-ime-custom.scm:
    * scm/social-ime-key-custom.scm:
    * scm/social-ime.scm:
    
      Add new input method 'social-ime'. go ahead ekato@

2008-11-04 Etsushi Kato <ek.kato@gmail.com>

    * test/run-test.scm: Use sys-normalize-pathname (Kouhei Sutou).

2008-10-31 Etsushi Kato <ek.kato@gmail.com>

    * scm/japanese-azik.scm : Add missing entries patched by
      anonymous (http://ekato.wordpress.com/2008/09/07/uim-153/).

2008-10-30 Etsushi Kato <ek.kato@gmail.com>

    * gtk/uim-eb.c (uim_eb_destroy) : Plug leak.
    * gtk/gtk-im-uim.c (im_uim_set_client_window): Ditto.
    * gtk/caret-state-indicator.c
      - (caret_state_indicator_destroy_cb) : New function to plug
        leak.
      - (caret_state_indicator_new) : Connect to
        caret_state_indicator_destroy_cb().

2008-10-29 Etsushi Kato <ek.kato@gmail.com>

    * test/uim-test-utils.scm
      - Require GaUnit 0.1.6.
      - Fix to wait *uim-sh-process*
    * test/run-test.scm
      - Support 'test/run-test.scm test/test-something.scm' kind of
        invocation.
      - Fix file globbing.

2008-10-25 Etsushi Kato <ek.kato@gmail.com>

    * test/uim-test-utils.scm
    * test/run-test.scm
    * test/Makefile.am
    * test/test-util.scm
      - Apply patch from Kouhei Sutou ([uim-ja 99]
        http://www.mail-archive.com/uim-ja@googlegroups.com/msg00082.html).

2008-10-24 Etsushi Kato <ek.kato@gmail.com>

    * qt4/immodule/quiminputcontextplugin.pro.in (QMAKE_LIBDIR): Add
      @abs_top_builddir@/replace to support link with libtool (#18190,
      Yamashiro, Jun).

2008-10-23 Etsushi Kato <ek.kato@gmail.com>

    * NEWS
    * RELNOTE
      - Sync with branches/1.5/

2008-10-20 Etsushi Kato <ek.kato@gmail.com>

    * doc/COMPATIBILITY: Update version information about
      the new helper-candwin protocol.

2008-10-15 Konosuke Watanabe <sasugaanija@gmail.com>

    * emacs/uim.el
      - (uim-process-agent-output): Ignore 'd' command if valid
        uim-default-im-engine is defined.

2008-10-14 Etsushi Kato <ek.kato@gmail.com>

    * helper/pref-gtk-custom-widgets.c (add_custom_type_integer) : Fix
      page_size setting with gtk_adjustment_new().

2008-10-14 Etsushi Kato <ek.kato@gmail.com>

    * emacs/context.c (release_uim_agent_context) : Plug leak.

2008-10-12 KIHARA Hideto <deton@m1.interq.or.jp>

    * scm/tutcode-kigoudic.scm
      - (tutcode-kigoudic): Undo change in r5591 for uim-fep.

2008-10-08 KIHARA Hideto <deton@m1.interq.or.jp>

    * scm/tutcode-kigoudic.scm
      - (tutcode-kigoudic): Add kanji

2008-10-08 Etsushi Kato <ek.kato@gmail.com>

    * helper/candwin-gtk.c
      - (candwin_activate)
      - (candwin_set_page_candidates)
        - Plug leak.

2008-10-08 Etsushi Kato <ek.kato@gmail.com>

    * fep/uim-fep.c (my_forkpty) : Support Solaris's cc.

2008-10-08 Etsushi Kato <ek.kato@gmail.com>

    * xim/ximserver.cpp
      - (InputContext::candidate_activate)
      - (InputContext::prepare_page_candidates)
        - Simplify.

2008-10-07 Etsushi Kato <ek.kato@gmail.com>

    * scm/generic.scm (generic-proc-specific-multi-cand-input-state) :
      Do nothing upon numeric key press if there is no corresponding
      candidate entry.

2008-10-07 Etsushi Kato <ek.kato@gmail.com>

    * doc/HELPER-CANDWIN
    * doc/COMPATIBILITY
      - Update changes in uim-xim with r5584.

2008-10-07 Etsushi Kato <ek.kato@gmail.com>

    * scm/generic-custom.scm (generic-show-candidate-implicitly?) :
      Set #t by default.

2008-10-07 Etsushi Kato <ek.kato@gmail.com>

    * xim/ximserver.h : Define UIM_XIM_USE_NEW_PAGE_HANDLING as in
      r5577.
    * xim/ximserver.cpp
      - (InputContext::InputContext) : Initialize mNumCandidates.
      - (InputContext::candidate_activate)
        - Fix possible leaks.
        - Only set the first page for UIM_XIM_USE_NEW_PAGE_HANDLING.
      - (InputContext::candidate_update) : Only set the current page
        for UIM_XIM_USE_NEW_PAGE_HANDLING.
      - (InputContext::prepare_page_candidates) : New.  Set candidate
        list for the selected page.
      - (InputContext::candidate_select) : Check the candidate list
        for the new page with UIM_XIM_USE_NEW_PAGE_HANDLING.
      - (InputContext::candidate_shift_page) : Ditto.
      - (InputContext::candidate_deactivate) : Use per-page memory
        handling for UIM_XIM_USE_NEW_PAGE_HANDLING.
    * xim/canddisp.h
    * xim/canddisp.cpp
      - (Canddisp::set_nr_candidates)
      - (Canddisp::set_page_candidates)
      - (Canddisp::show_page)
        - New.  New message for helper-candwin with
          UIM_XIM_USE_NEW_PAGE_HANDLING.
    * xim/main.cpp (main) : Modify startup message.
    * helper/candwin-gtk.c
      - Support UIM_XIM_USE_NEW_PAGE_HANDLING.
      - (candwin_set_nr_candidates)
      - (candwin_set_page_candidates)
      - (candwin_show_page)
        - New protocol handler.
      - (cb_tree_view_destroy) : Add sanity check.
      - (candwin_activate) : Ditto.
      - (str_parse) : Handle new messages with
        UIM_XIM_USE_NEW_PAGE_HANDLING.
      - (uim_cand_win_gtk_set_index) : Port r5578 from GTK+ bridge.
      - (uim_cand_win_gtk_set_page) : Port r5577 from GTK+ bridge.
      - (uim_cand_win_gtk_set_page_candidates) : New.  Copied from
        GTK+ bridge.
    * qt/candwin-qt.cpp
    * qt/candwin-qt.h
      - Support UIM_XIM_USE_NEW_PAGE_HANDING.
      - (CandidateWindow::setNrCandidates)
      - (CandidateWindow::setPageCandidates)
      - (CandidateWindow::showPage)
        - New protocol handler.
      - (CandidateWindow::strParse) : Handle new messages with
        UIM_XIM_USE_NEW_PAGE_HANDLING.

2008-10-07 Etsushi Kato <ek.kato@gmail.com>

    * qt/immodule-quiminputcontext.h
    * qt/immodule-candidatewindow.h
    * qt/immodule-quiminputcontext.cpp
    * qt/immodule-candidatewindow.cpp
      - Port qt4 immodule page handling changes in r5581 to qt3
        immodule.

2008-10-07 Etsushi Kato <ek.kato@gmail.com>

    * qt4/immodule/quiminputcontext.h : Define
      UIM_QT_USE_NEW_PAGE_HANDLING for the optimized candidates
      handling as in r5577 for GTK+ bridge.
    * qt4/immodule/quiminputcontext.cpp
      - (QUimInputContext::cand_shift_page_cb) : Use
        candidateShiftPage().
      - (QUimInputContext::prepare_page_candidates) : New.
      - (QUimInputContext::candidateActivate) : Set the first page
        only when UIM_QT_USE_NEW_PAGE_HANDLING is defined.
      - (UimInputContext::candidateSelect) : Add check for the new
        page with UIM_QT_USE_NEW_PAGE_HANDLING.
      - (QUimInputContext::candidateShiftPage) : New.  Add check for
        the new page with UIM_QT_USE_NEW_PAGE_HANDLING.
    * qt4/immodule/candidatewindow.cpp
      - (CandidateWindow::clearCandidates) : Add sanity check.
      - (CandidateWindow::setNrCandidates) : New.
      - (CandidateWindow::setPageCandidates) : Ditto.
    * qt4/immodule/candidatewindow.h
      - (nrCandidates)
      - (displayLimit)
      - (caniddateIndex)
      - (pageIndex)
        - Exposing as a public member variable.

2008-10-07 Etsushi Kato <ek.kato@gmail.com>

    * gtk/gtk-im-uim.c (get_page_candidates) : Minor fix for r5577.

2008-09-27 KIHARA Hideto <deton@m1.interq.or.jp>

    * scm/tutcode-custom.scm
      - (tutcode-nr-candidate-max): Change max value from 20 to 99
        for kigou input mode.

2008-09-26 Etsushi Kato <ek.kato@gmail.com>

    * gtk/uim-cand-win.gtk.c (uim_cand_win_gtk_set_index) : Fix r5577
      to update label on unselect.

2008-09-23 Etsushi Kato <ek.kato@gmail.com>

    * gtk/gtk-im-uim.h : Define IM_UIM_USE_NEW_PAGE_HANDLING for
      optimized candidates handling.
    * gtk/gtk-im.uim.c
      - (get_page_candidates) : New.  Return list of candidates for
        the page.
      - (free_candiadtes) : New.
      - (cand_activate_cb) : Set candidates for the first page for
        IM_UIM_USE_NEW_PAGE_HANDLING.
      - (cand_select_cb) : Set candidates for the updated page for
        IM_UIM_USE_NEW_PAGE_HANDLING.
      - (cand_shift_page_cb) : Ditto.
    * gtk/uim-cand-win-gtk.h
    * gtk/uim-cand-win-gtk.c
      - (uim_cand_win_gtk_dispose) : Add sanity check.
      - (uim_cand_win_gtk_set_nr_candidates) : New.  Initialize
        candidates window condition.
      - (uim_cand_win_gtk_set_candidates) : Add sanity check.
      - (uim_cand_win_gtk_set_page_candidates) : New.  Set caniddates
        for the selected page.
      - (uim_cand_win_gtk_set_page) : Simplify.
      - (uim_cand_win_gtk_query_new_page_by_cand_select) : New.
      - (uim_cand_win_gtk_query_new_page_by_shift_page) : New.

2008-09-21 Etsushi Kato <ek.kato@gmail.com>

    * scm/generic.scm : Implement implicit candidate window mode for
      generic.scm described on [uim-en 175]
      (http://www.mail-archive.com/uim-en@googlegroups.com/msg00150.html).
      - (generic-context-rec-spec) : Add multi-cand-input record.
      - (generic-context-flush) : Reset generic-context-flush.
      - (generic-proc-input-state-with-preedit) : Update candidate
        using generic-update-input-state-cands.
      - (generic-update-input-state-cands) : New.  Set candidates and
        show window if multiple candidates exist with
        generic-show-candidate-implicitly? #t.
      - (generic-proc-input-state) : Use
        generic-update-input-state-cands.
      - (generic-proc-specific-multi-cand-input-state) : New.  Handle
        special keys in multi-cand-input-state.
      - (generic-update-multi-cand-state-cands) : New.
      - (generic-proc-multi-cand-input-state) : Ditto.
      - (generic-proc-converting-state) : Update candidates with
        generic-update-input-state-cands upon backspace key.
      - (generic-key-press-handler) : Add multi-cand-input handler.
    * scm/generic-custom.scm : Add new custom variable
      generic-show-candidate-implicitly?

2008-09-20 Etsushi Kato <ek.kato@gmail.com>

    * scm/skk.scm (skk-proc-state-direct) : Fix handling in
      non-matching upper case character in skk-proc-state-direct.

2008-09-18 Etsushi Kato <ek.kato@gmail.com>

    * scm/generic.scm (generic-proc-input-state-with-preedit) : Follow
      r5573 upon generic-off-key?.

2008-09-18 Etsushi Kato <ek.kato@gmail.com>

    * scm/generic.scm
      - (generic-context-rec-spec) : Add cands record to cache
        candidate list.
      - (generic-context-flush) : Reset cands record.
      - (generic-update-preedit) : Use cands member instead of
        calling rk-current-seq.
      - (generic-commit) : Ditto.
      - (generic-commit-by-numkey) : Ditto.
      - (generic-proc-input-state-without-preedit) : Fix indentation.
        No code changed.
      - (generic-proc-input-state-with-preedit)
        -  Reset cands upon backspace.
      - (generic-proc-input-state)
        - Set cands record and simplify the routine.
      - (generic-proc-converting-state)
       - Use cands record.
       - Cache candidate list size.
       - Fix behavior upon prev/next-candidate-key with single
         candidate.
       - Change behavior upon prev/next-candidate-key with no
         candidate.
       - Fix to check generic-use-candiadte-window? before calling
         im-select-candidate upon prev/next-candidate-key.
       - Fix to check generic-use-candidate-window? before calling
         im-shift-page-candidate upon prev/next-page-key.
       - Reset cands record upon backspace.
      - (generic-proc-off-mode) : Use cands record.
      - (generic-get-candidate-handler) : Ditto.

2008-09-18 Etsushi Kato <ek.kato@gmail.com>

    * scm/rk.scm : Revert r5571 (r5570 is fine, sorry for my
      confusion).

2008-09-17 Etsushi Kato <ek.kato@gmail.com>

    * scm/rk.scm: Oops, fix r5570.

2008-09-17 Etsushi Kato <ek.kato@gmail.com>

    * scm/rk.scm
      - (rk-check-back-commit)
      - (rk-backspace)
      - (rk-delete)
        - Simplify.  No functionality changed.

2008-09-15 KIHARA Hideto <deton@m1.interq.or.jp>

    * This commit add kigou(symbol) input mode for tutcode
    
    * scm/tutcode-key-custom.scm
      - (tutcode-kigou-toggle-key): New custom key definition
    
    * scm/tutcode-kigoudic.scm
      - New file
    
    * scm/tutcode.scm
      - (tutcode-input-mode-actions): Add action_tutcode_kigou
      - (tutcode-heading-label-char-list-for-kigou-mode): New variable
      - (action_tutcode_hiragana, action_tutcode_katakana):
        Change to support kigou mode
      - (action_tutcode_kigou): New action
      - (tutcode-get-nth-candidate-for-kigou-mode,
         tutcode-get-current-candidate-for-kigou-mode,
         tutcode-prepare-commit-string-for-kigou-mode,
         tutcode-commit-by-label-key-for-kigou-mode, tutcode-begin-kigou-mode,
         tutcode-proc-state-kigou, tutcode-heading-label-char-for-kigou-mode?):
        New function
      - (tutcode-update-preedit): Add update for kigou mode
      - (tutcode-proc-state-on): Add check of tutcode-kigou-toggle-key?
      - (tutcode-state-has-preedit?): Add tutcode-state-kigou
      - (tutcode-key-press-handler, tutcode-get-candidate-handler):
        Follow the addition of kigou mode
    
    * scm/Makefile.am
      - (SCM_FILES): Add tutcode-kigoudic.scm

2008-09-07 Etsushi Kato <ek.kato@gmail.com>

    * NEWS
    * RELNOTE
      - Backport from branch 1.5.

2008-09-06 Konosuke Watanabe <sasugaanija@gmail.com>

    Port r5552 from 1.5 branch.

2008-09-05 Etsushi Kato <ek.kato@gmail.com>

    * helper/toolbar-common-gtk.c (uim_toolbar_trayicon_new) : Set
      ythickness 0.

2008-09-05 Etsushi Kato <ek.kato@gmail.com>

    * pref-gtk.c (create_group_widget) : Enable virtical scrolling of
      the setting pane.

2008-09-01 Etsushi Kato <ek.kato@gmail.com>

    * qt4/immodule/candidatewindow.cpp (CandidateListView::sizeHint) :
      Adjust the width (backport from branch 1.5).

2008-08-31 Etsushi Kato <ek.kato@gmail.com>

    * qt4/immodule/candidatewindow.cpp (CandidateWindow::setPage) :
      Adjust cList size.

2008-08-29 Etsushi Kato <ek.kato@gmail.com>

    * qt4/immodule/quiminputcontext.cpp
    (QUimInputContext::filterEvent) : Fix key presses with Shift,
      Control, Alt, and Meta keys.

2008-08-29 Etsushi Kato <ek.kato@gmail.com>

    * qt4/immodule/candidatewindow.cpp
      - (CandidateWindow::CandidateWindow)
      - (CandidateListView::sizeHint)
        - Adjust candidate window size.
    * qt4/immodule/qhelpermanager.cpp
      - (contextList)
      - (QUimHelperManager::parseHelperStr)
      - (QUimHelperManager::parseHelperStrImChange)
        - Fix bug in the usage of contextList, which caused unexpected
          crashes.

2008-08-28 Etsushi Kato <ek.kato@gmail.com>

    * uim/skk.c (open_skkserv) : Show an error message only when the
      connection cannot be established.

2008-08-27 Etsushi Kato <ek.kato@gmail.com>

    * gtk/gtk-im-uim.c (im_uim_set_use_preedit) : Don't realize the
      window immediately.

2008-08-26 Etsushi Kato <ek.kato@gmail.com>

    * qt4/immodule/candidatewindow.cpp
      - (CandidateWindow::CandidateWindow)
      - (CandidateWindow::activateCandwin)
      - (CandidateWindow::deactivateCandwin)
      - (CandidateWindow::slotCandidateSelected)
      - (CandidateWindow::moveEvent)
      - (CandidateWindow::resizeEvent)
        - Delay initialization of subWin (bug #17302).

2008-08-26 Etsushi Kato <ek.kato@gmail.com>

    * xim/ximim.cpp (XimIM_impl::create_ic) : Don't terminate the
      connection when create_ic() fails (bug #17282).

2008-08-17 KIHARA Hideto <deton@m1.interq.or.jp>

    * scm/tutcode.scm
      - (tutcode-commit-by-label-key): Bug fix: out-of-range error
        when candidates are longer than tutcode-heading-label-char-list.

2008-08-14 Etsushi Kato <ek.kato@gmail.com>

    * xim/ximtrans.cpp (Connection::xim_get_im_values) : Fix bug
      #17076.

2008-08-12 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/trec-composer.scm
      - Port from composer branch

2008-08-12 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/light-record.scm
      - (make-record-constructor-name): Simplify

2008-08-12 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * Rewrite with WLOS
    
    * scm/composer.scm
      - Require wlos.scm
      - (record composer, composer-rec-spec, composer-mtbl-rec-spec,
        record composer-mtbl, composer-parent-internal): Removed
      - (class composer):
        * New class
        * Remove reserved opaque[0-3] slots
      - (%composer-undefined-method, composer-%parent): New procedure
      - (composer-set-parent!, composer-finalize!, composer-idname,
        composer-indication, composer-current-locale, composer-children,
        composer-filter-event!, composer-filter-upward-event!,
        composer-text-length, composer-text,
        composer-supply-surrounding-text, composer-held-events,
        composer-action, composer-choosable): Adapt to WLOS
      - (composer-raise-event, composer-surrounding-text): Follow the
        renaming of composer-parent-internal
      - (composer-base-rec-spec, record composer-base,
        composer-base-method-table, composer-base-new-internal,
        composer-base-new, composer-base-parent-internal): Removed
      - (class composer-base):
        * New class
        * Remove reserved opaque0 slot
        * List %actset, %parent-var, %children as var fields
        * No additional methods
      - (%make-vector-based-composer-base.orig,
        %make-list-based-composer-base.orig, %make-make-composer-base,
        make-vector-based-composer-base, make-list-based-composer-base,
        make-composer-base, composer-base-%parent): New procedure
      - (composer-base-initialize!, composer-base-set-parent!,
        composer-base-finalize!, composer-base-idname,
        composer-base-indication, composer-base-current-locale,
        composer-base children, composer-base-filter-event!,
        composer-base-filter-upward-event!, composer-base-text-length,
        composer-base-text, composer-base-supply-surrounding-text,
        composer-base-held-events, composer-base-action,
        composer-base-choosable): Adapt to WLOS
    * test2/test-composer.scm
      - New file
      - Just a placeholder yet
    * test2/Makefile.am
      - (uim_tests): Add test-composer.scm

2008-08-12 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * Prepare WLOS-based rewritings
    
    * scm/composer.scm
      - (composer-delegate-method, composer-base-new,
        composer-base-initialize!): Simplify
      - (composer-base-rec-spec): Rename private fields
      - (composer-base-parent-internal, composer-base-set-parent!,
        composer-base-children, composer-base-set-children!,
        composer-base-filter-event!, composer-base-filter-upward-event!,
        composer-base-action): Follow the renamings

2008-08-12 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit add list-based object support to WLOS. Not tested well yet.
    
    * scm/wlos.scm
      - (%vector-based-wlos-record?, %list-based-wlos-record?,
        %make-vector-based-wlos-record-constructor-name,
        %make-list-based-wlos-record-constructor-name,
        %list->vector-based-wlos-record, %list->list-based-wlos-record,
        %wlos-record->list, %wlos-record-copy, %wlos-record-ref,
        %wlos-record-set!): New procedure
      - (%define-wlos-record): New macro
      - (define-class):
        * Support the list-based object in addition to the vector-based
        * Defines make-vector-based-<class> and make-list-based-<class>
      - (class object): Add new method partial-clone
      - (object-partial-clone): New method
      - (object-equal?, object-copy): Replaced to new implementations
        aware of the list-based objects
      - (object-class): Overwrite with an optimized implementation
    * test2/test-wlos.scm
      - Remove some tests that assume vector-based object

2008-08-11 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/wlos.scm
      - Modify comments

2008-08-03 Etsushi Kato <ek.kato@gmail.com>

    * configure.ac
    * uim/uim.h
      - bump version

2008-08-03 Etsushi Kato <ek.kato@gmail.com>

    * NEWS
    * RELNOTE
      - Update from 1.5 branch.

2008-08-03 Etsushi Kato <ek.kato@gmail.com>

    * po/fr.po: Remove fuzzy.

2008-07-23 Etsushi Kato <ek.kato@gmail.com>

    * uim/canna.c (create_context): Enable reinitialization of
      the connection to the canna server.

2008-07-23 Etsushi Kato <ek.kato@gmail.com>

    * uim/canna.c
      - (release_context)
      - (begin_conversion)
        - Just show messages instead of disabling libuim upon error.

2008-07-20 Etsushi Kato <ek.kato@gmail.com>

    * uim/canna.c
      - (init_canna_lib)
      - (create_context)
        - Don't disable libuim even when canna server is stopped.

2008-07-17 Etsushi Kato <ek.kato@gmail.com>

    * scm/im.scm
      - (next-im) : Use enabled-im-list to for the correct IM
        sequence.
      - (next-im-for-switch-im) : New.
      - (switch-im) : Use next-im-for-switch-im instead of next-im.
    * scm/im-custom.scm
      - (im-switching)
      - (enable-im-switch)
      - (switch-im-key)
        - Re-enable IM-switching by hot key.  See
          http://groups.google.com/group/uim-en/browse_thread/thread/1a64d86493fb1bc
      - (switch-im-skip-direct-im)
       - New.

2008-07-07 Etsushi Kato <ek.kato@gmail.com>

    * xim/ximserver.cpp (keyState::check_key) : Fix misplaced Japanese
      Kana keyboard hack.

2008-07-01 Konosuke Watanabe <sasugaanija@gmail.com>

    * emacs/uim-util.el
     - (uim-get-window-offset): Fix bug; When a right-hand neighbor
       character of the cursor is a horizontal-tab, candidates
       are not displayed.

2008-06-25 IWATA Ray <iwata@quasiquote.org>

    * emacs/uim-el-helper-agent.c (read_command):
      Fix serious bug. read() is running on loop.
      enbuged in r5139, r5140.

2008-06-24 Etsushi Kato <ek.kato@gmail.com>

    * scm/elatin.scm: Fix to include generic-key-custom.scm for
      generic-backspace-key.

2008-06-01 Konosuke Watanabe <sasugaanija@gmail.com>

    Fix serious bug:
    uim.el sometimes breaks minor-mode-map-alist.
    
    * emacs/uim-keymap.el
      - (uim-disable-other-minor-mode-map): New function
      - (uim-enable-other-minor-mode-map): New function
      - (uim-disable-mode-keymap): Removed
      - (uim-get-keymap): New function
      - (uim-set-keymap): New function
      - (uim-enable-mode-keymap): Call uim-set-keymap
      - (uim-disable-keymap): New function
      - (uim-enable-preedit-keymap):
         * Call uim-set-keymap
         * Remove codes which are treating minor-mode-map-alist
      - (uim-disable-preedit-keymap):
         * Remove codes which are treating minor-mode-map-alist
    * emacs/uim-key.el
      - (uim-command-execute):
         * Remove codes which are treating minor-mode-map-alist
    * emacs/uim.el
      - (uim-init-minor-mode): Change initial keymap of uim-mode to nil
      - (uim-focused): Update minor-mode-map-alist or keymap of uim-mode
      - (uim-unfocused): Update minor-mode-map-alist
      - (uim-enter-preedit-mode): Update minor-mode-map-alist
      - (uim-init): Call uim-enable-mode-keymap to initialize the keymap of
                    uim-mode

2008-05-20 Etsushi Kato <ek.kato@gmail.com>

    * scm/prime.scm (prime-configure-app-mode-vi) : Use '() instead of
      #f in prime-custom-app-mode-vi? #f.  This fixes a bug which
      could cause a crash when a input mode is forced to set as
      app-mode even if prime-custom-app-mode-vi? is not set.

2008-05-19 KIHARA Hideto <deton@m1.interq.or.jp>

    * scm/trycode.scm
      - (trycode-rule): update to 2008-04-18 version: add one kanji.

2008-05-17 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * po/POTFILES.in
      - s/plugin.c/dynlib.c/

2008-05-17 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-custom.c
      - (UIM_EVAL_FSTRING1, UIM_EVAL_FSTRING2, UIM_EVAL_FSTRING3,
        UIM_EVAL_FSTRING4, UIM_EVAL_FSTRING5, uim_custom_broadcast):
        Remove redundant and never executed error handlings for uim_asprintf()
    * uim/uim-helper.c
      - (uim_helper_send_message): Ditto
    * uim/mana.c
      - (mana_eval): Ditto
    * uim/prime.c
      - (prime_send_command, prime_lib_init): Ditto
    * uim/skk.c
      - (search_line_from_server): Ditto

2008-05-17 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * NEWS
      - Remove the trunk-only fix

2008-05-17 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * NEWS
      - Update for uim 1.5.1

2008-05-17 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-custom.c
      - (c_list_to_str): Fix unterminated string enbuged in r5453

2008-05-12 Etsushi Kato <ek.kato@gmail.com>

    * uim/counted-init.h
    * uim/counted-init.c
      - (uim_counted_init)
      - (uim_counted_quit)
      - (uim_force_quit_regardless_of_count)
        - New wrapper functions for uim_init() and uim_quit() (bug
          #15853).
    * uim/Makefile.am
      - (noinst_LTLIBRARIES) : Add libuim-counted-init.la.
      - (libuim_counted_init_la_SOURCES) : New.
      - (libuim_counted_init_la_CPPFLAGS) : New.
    * qt/immodule-plugin.cpp
      - (UimInputContextPlugin::uimInit)
      - (UimInputContextPlugin::uimQuit)
        - Use wrapper function of uim_init() and uim_quit() (bug
          #15853).
    * qt/pref-qt.cpp
      - (UimPrefDialog::UimPrefDialog)
      - (UimPrefDialog::~UimPrefDialog)
        - Likewise.
    * qt/immodule-quiminputcontext.h
    * qt/immodule-quiminputcontext.cpp
      - (QUimInputContext::reloadUim) : Remove obsolete function.
    * qt/Makefile.am
      - (libquiminputcontextplugin_la_LIBADD)
      - (uim_pref_qt_LDADD)
        - Use libuim-counted-init.la.

2008-05-12 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * configure.ac
      - Update version number to 1.5.1
    * uim/uim.h
      - (UIM_VERSION_PATCHLEVEL): Update to 1
    * NEWS
    * RELNOTE
      - Update for uim 1.5.1

2008-05-12 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/lazy-load.scm
      - (stub-im-generate-stub-im-list): Fix unescaped name-label
        and short-desc which causes parse error on m17n-vi-han (bug
        #15901)

2008-05-10 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/ng-action.scm
      - (actionset-fetch-action):
        * Fix missing argument of a procedure call
        * Simplify with and-let*
      - (action-status, actionset-handle-event): Simplify with and-let*
    
    * scm/event.scm
      - (define-event):
        * Simplify argument processing
        * Replace cadr with meaningful record-field-spec-default-value
      - (key-event-print-inspected): Replace deprecated procedure
    
    * scm/ng-key.scm
      - (mod_None, mod_Shift_L, mod_Shift_R, mod_Shift,
        mod_Control_L, mod_Control_R, mod_Control, mod_Alt_L,
        mod_Alt_R, mod_Alt, mod_Meta_L, mod_Meta_R, mod_Meta,
        mod_Super_L, mod_Super_R, mod_Super, mod_Hyper_L,
        mod_Hyper_R, mod_Hyper, mod_Caps_Lock, mod_ignore_Shift,
        mod_ignore_Control, mod_ignore_Alt, mod_ignore_Meta,
        mod_ignore_Super, mod_ignore_Hyper): Simplify with hex literal

2008-05-10 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/ng-key.scm
      - Cosmetic changes

2008-05-10 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/Makefile.am
      - (SCM_FILES): Add event.scm, ng-key.scm, ng-action.scm, composer.scm
    * test/Makefile.am
      - (EXTRA_DIST): Add test-ng-key.scm

2008-05-10 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit port some of core files of composer framework from
      the composer branch, and adapt to SigScheme. These codes also need overhaul
    
    * scm/event.scm
      - Update and fix copyright
      - Temporarily disable utext.scm
      - (%HYPHEN-SYM): new variable
      - (define-event):
        * Fix broken field spec preparation
        * Adapt to SigScheme
      - (key-event-inspect): Adapt to SigScheme
    * scm/ng-key.scm
      - Update and fix copyright
      - Temporarily disable key-custom.scm
      - (mod_ignore_Shift, mod_ignore_Control, mod_ignore_Alt,
        mod_ignore_Meta, mod_ignore_Super, mod_ignore_Hyper): Shift
        value assignments to be capable by storage-compact
      - (modifier-shift-mask, modifier-control-mask,
        modifier-alt-mask, modifier-meta-mask, modifier-super-mask,
        modifier-hyper-mask, modifier-aggregate): Replace bitwise-or
        with bitwise-ior
    * scm/ng-action.scm
      - Update copyright
    * scm/composer.scm
      - Update copyright
      - Temporarily disable utext.scm
    * test/test-ng-key.scm
      - Update and fix copyright
      - Replace bitwise-or with bitwise-ior
      - Temporarily disable physical-key.scm

2008-05-10 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit port trec.scm from the composer branch, and make
      core part working. Although the data structure and basic
      search algorithm is still effective for uim, overall code
      organization is over-generalized and complicated to be capable
      of non-core features. It seems needing a design overhaul and
      code simplification. I'll do it for uim 1.6.0.
    
    * scm/trec.scm
      - Port from the composer branch
      - Adapt codes written for SIOD to SigScheme
      - (trec-route-new): Fix broken trec-enable-reroutable-search? handling
      - (trec-parse-ruleset): Fix broken parens
      - (trec-node-insert-branch!): Fix lack of return value
      - (trec-route-last-root, trec-route-keys): Fix logical typo
      - (trec-router-vanilla-advance-new): Fix incomplete implementation
    * scm/Makefile.am
      - (SCM_FILES): Add trec.scm
    * test2/test-trec.scm
      - New file
      - Add various but incomplete tests for trec.scm core
    * test2/Makefile.am
      - (uim_tests): Add test-trec.scm

2008-05-10 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/init.scm
      - Fix light-record.scm requirement position

2008-05-06 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * doc/RELEASING
      - Update

2008-04-29 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/util.scm
      - (number->symbol): Fix undefined procedure error by move to
        after 'compose' definition

2008-04-29 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/util.scm
      - Merge ustr modifications from the composer branch into trunk as
        follows
    
        $ svn merge -r951:HEAD https://uim.googlecode.com/svn/branches/composer/scm/util.scm scm/util.scm
    
      - (take-right): Remove the merged but obsolete one
    
    ----------------
    r951 | yamaken | 2005-07-09 01:01:57 +0900 (Sat, 09 Jul 2005) | 7 lines
    
    * scm/util.scm
      - (sublist, sublist-rel): New procedure generalized from
        utext-subtext and utext-subtext-rel
    
    ----------------
    r968 | yamaken | 2005-07-12 20:26:53 +0900 (Tue, 12 Jul 2005) | 12 lines
    
    * scm/util.scm
      - (sublist-rel): Support -1 for len which means end of original lst
      - (take-right): New SRFI procedure
    
    ----------------
    r1109 | yamaken | 2005-08-03 09:57:13 +0900 (Wed, 03 Aug 2005) | 8 lines
    
    * scm/util.scm
      - (number->symbol, inc, dec, compensate-index): New procedure

2008-04-29 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/ustr.scm
    * test/test-ustr.scm
      - Merge ustr modifications from the composer branch into trunk as
        follows
    
        $ svn merge -r701:HEAD https://uim.googlecode.com/svn/branches/composer/scm/ustr.scm scm/ustr.scm
        $ svn merge -r701:HEAD https://uim.googlecode.com/svn/branches/composer/test/test-ustr.scm test/test-ustr.scm
    
    ----------------
    r1143 | yamaken | 2005-08-06 23:13:53 +0900 (Sat, 06 Aug 2005) | 23 lines
    
    * test/test-ustr.scm
      - (test ustr-new, test ustr-empty?): Follow the recent change of
        internal representation of ustr object
      - All test succeeded
    
    ----------------
    r968 | yamaken | 2005-07-12 20:26:53 +0900 (Tue, 12 Jul 2005) | 12 lines
    
    * scm/ustr.scm
      - (ustr-dup): Fix broken code caused by the change of object
        representation in r961
    
    ----------------
    r961 | yamaken | 2005-07-10 03:53:23 +0900 (Sun, 10 Jul 2005) | 7 lines
    
    * scm/ustr.scm
      - Replace ustr record with single cons to get efficient
      - (ustr-rec-spec, record ustr, ustr-new-internal): Removed
      - (ustr-former, ustr-set-former!, ustr-latter, ustr-set-latter!):
        New procedure
      - (ustr-new): Follow the changes
    
    ----------------
    r760 | yamaken | 2005-03-07 18:29:11 +0900 (Mon, 07 Mar 2005) | 9 lines
    
    * scm/ustr.scm
      - (ustr-dup): New procedure

2008-04-29 Etsushi Kato <ek.kato@gmail.com>

    * NEWS : Fix 1.5.0-beta2 section.

2008-04-29 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * make-dist.sh
      - (RELEASE_SUFFIX): Rewrite to empty for uim 1.5.0
    * RELNOTE
      - Update for uim 1.5.0

2008-04-29 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim.c
      - (uim_init_internal): Fix too late provision of 'uim'
    * doc/COMPATIBILITY
      - Update "Feature provision of 'uim'"
    * NEWS
      - Update

2008-04-29 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/dynlib.c
      - (dynlib_bind_internal): Modify a notification message

2008-04-29 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/wlos.scm
      - Require SRFI-43 for non-uim Scheme implementations
      - Fix light-record.scm requirement
      - Move test codes to test-wlos.scm
    * test2/test-wlos.scm
      - New file
      - Add basic tests for wlos.scm. All tests are passed and the
        WLOS system is basically working although full test is not done yet
    * test2/Makefile.am
      - (uim_tests): Add test-wlos.scm

2008-04-28 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/light-record.scm
      - (define-record): Move to deprecated-util.scm
    * scm/deprecated-util.scm
      - (define-record): Moved from light-record.scm. No code is modified
    * test/test-util.scm
      - Update passed revision record

2008-04-28 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit replace the legacy define-record implementation
      with the light-record based one
    
    * scm/light-record.scm
      - (define-record): Fix broken macro expansion
    * scm/util.scm
      - (define-record): Removed
    * scm/init.scm
      - Require light-record.scm as temporary workaround
    * test/test-util.scm
      - Update passed revision record. All tests including
        define-record are passed

2008-04-28 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/light-record.scm
      - Require SRFI-43 for non-uim Scheme implementations
    
    * test2/test-light-record.scm
      - Disable *test-track-progress*

2008-04-28 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/light-record.scm
      - (%retrieve-record-accessor):
        * Add arg 'key' to fix accessor identification
      - (%make-record-getter, %make-record-setter): Fix accessor
        unification
      - (%define-record-getter, %define-record-setter,
        define-record-generic): Fix broken macro expansion
    * test2/test-light-record.scm
      - New file
      - Add tests for light-record.scm. All tests are passed
    * test2/Makefile.am
      - (uim_tests): Add test-light-record.scm

2008-04-28 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/plugin.h
    * uim/plugin.c
      - Rename to dynlib.*
    * uim/dynlib.h
    * uim/dynlib.c
      - Renamed from plugin.*
    * uim/Makefile.am
      - (pkginclude_HEADERS, libuim_la_SOURCES): Follow the renamings
    * uim/anthy-utf8.c
    * uim/anthy.c
    * uim/canna.c
    * uim/curl.c
    * uim/editline.c
    * uim/look.c
    * uim/m17nlib.c
    * uim/mana.c
    * uim/prime.c
    * uim/sj3.c
    * uim/skk.c
    * uim/uim-custom-enabler.c
    * uim/wnnlib.c
      - Follow the renaming of plugin.h
    * doc/COMPATIBILITY
      - Update "Plugin loding and unloading schemes are changed"

2008-04-28 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit make plugin.c responsible only for bare dynamic library
      loading/unloading. See [uim-en 121] for further information.
    
    * uim/plugin.h
      - (uim_plugin_instance_init, uim_plugin_instance_quit):
        Replaced with the backward compatibility alias macro to
        uim_dynlib_instance_{init,quit}()
      - (uim_dynlib_instance_init, uim_dynlib_instance_quit):
        Renamed from uim_plugin_instance_{init,quit}()
    * uim/plugin.c
      - Exclude no longer needed string.h, dirent.h, unistd.h,
        stdlib.h, sys/types.h, sys/stat.h, sys/param.h, fcntl.h,
        errno.h, pwd.h
      - Exclude inappropriately incldued plugin.h
      - (PLUGIN_PREFIX, PLUGIN_SUFFIX, plugin_load, plugin_unload,
        plugin_unload_internal, uim_quit_plugin_internal): Removed
      - (UIM_VLEVEL_PLUGIN): Rename to UIM_VLEVEL_DYNLIB
      - (UIM_VLEVEL_DYNLIB): Renamed from UIM_VLEVEL_PLUGIN
      - (module_unbind_args, module_unbind, module_unbind_internal,
        module_bind, module_bind_internal): Rename to dynlib_*
      - (dynlib_unbind_args, dynlib_unbind, dynlib_unbind_internal,
        dynlib_bind, dynlib_bind_internal):
        * Renamed from module_*
        * Follow the renamings
      - (uim_init_plugin): Rename to uim_init_dynlib()
      - (uim_init_dynlib):
        * Renamed from uim_init_plugin
        * Remove unneeded error guard (already guarded in uim_init)
        * Remove load-plugin and unload-plugin registration
        * Follow the renaming of module_bind and module_unbind
        * Rename module-bind and module-unbind with %%dynlib-bind
          and %%dynlib-unbind. The %% prefix is prepended to
          indicate that these procedures are implementation-specific
          and should not be used directly
      - (uim_quit_plugin): Rename to uim_quit_dynlib()
      - (uim_quit_dynlib):
        * Renamed from uim_quit_plugin()
        * Remove anything. The module-unload-all call is moved to
          uim_quit() to separate module system responsibility from this
          simple dynamic-library load/unload layer
    * uim/uim-internal.h
      - (uim_init_plugin, uim_quit_plugin): Rename to
        uim_{init,quit}_dynlib()
    * uim/uim.c
      - (uim_init_internal):
        * Follow the renamings
        * Move uim_quit_plugin() call to very end of the quit procedure
        * Moved module-unload-all call from uim_quit_plugin()
    * scm/plugin.scm
      - (module-load, module-unload): Follow the renamings of
        module-{bind,unbind}
    * scm/tutcode.scm
      - Ditto

2008-04-27 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/tutcode.scm
      - s/%%dynlib-bind/module-bind/ to revert my local
        modifications for the module system

2008-04-27 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/tutcode.scm
      - Add temporary workaround on loading libuim-skk.so for the
        module system reorganization

2008-04-27 IWATA Ray <iwata@quasiquote.org>

    * uim/uim-custom.c (c_list_to_str):
      - Use strlcat. Terminating is not needed.

2008-04-27 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * configure.ac
      - Require intltool 0.36.3 or later to resolve 'make check'
        problem ([uim-ja 87])
    * make-dist.sh
      - (SSCM_URL): Update to sigscheme-0.8.3
      - (RELEASE_SUFFIX): Update to beta2
    * NEWS
    * RELNOTE
      - Update for uim 1.5.0-beta2
    
    * doc/RELEASING
      - Fix a directory name

2008-04-24 Masahito Omote <omote@utyuuzin.net>

    * uim/plugin.c
      - (module_bind, module_unbind): Make it GC Safe.
      - (module_bind_internal): New function. Main functionarity is moved here.
      - (module_unbind_internal): Ditto.
      - (uim_quit_plugin): Use "(module-unload-all)".
      - (uim_quit_plugin_internal): Removed.
    * scm/plugin.scm
      - (module-load):
         - Add check for the existance of modules not to overload.
         - Fix a bug not loading scm files. This bug made mismatch between
           loader.scm and installed-modules.scm
      - (module-unload): Add check for the existance of modules.
      - (module-unload-all): New function for the replacement for
                             uim_quit_plugin_internal in uim/plugin.c.

2008-04-23 Masahito Omote <omote@utyuuzin.net>

    * uim/uim-custom.c: Use uim_asprintf.

2008-04-23 Masahito Omote <omote@utyuuzin.net>

    * scm/plugin.scm:
      - (module-load): Fix a bug that (module-load "custom-enabler") always fails.

2008-04-21 Etsushi Kato <ek.kato@gmail.com>

    * qt/immodule-quiminputcontext_compose.cpp
    * gtk/compose.c
    * qt4/immodule/quiminputcontext_compose.cpp
    * xim/compose.cpp
      - Just Cosmetic changes (no code is changed).

2008-04-21 Etsushi Kato <ek.kato@gmail.com>

    * uim/uim-notify.c (notify_get_plugins) : Follow r5142.

2008-04-19 Masahito Omote <omote@utyuuzin.net>

    * uim/curl.c: Make it GC safe.
      - (uim_curl_fetch_simple_internal): New function.
      - (uim_curl_post_internal): New function.
      - (uim_curl_url_escape_internal): New function.
      - (uim_curl_url_unescape_internal): New function.
      - (uim_curl_perform): New function for delegate common code from
                            uim_curl_post and uim_curl_fetch_simple.

2008-04-19 Masahito Omote <omote@utyuuzin.net>

    * test/test.sh.in:
      - Add LIBUIM_SYSTEM_SCM_FILES and fix LIBUIM_SCM_FILES to work correctly.

2008-04-17 Masahito Omote <omote@utyuuzin.net>

    * New API for loding/unloading modules rewritten in C and Scheme. module-load
      and module-unload are the same ones as load-plugin/unload-plugin written in
      Scheme. module-bind/module-unbind are written in C for the purpose of
      binding/unbinding library pointer bounded by dlopen and C function pointers.
      Using module-load/module-unbind are encouraged when you want to load/unload
      modules from Scheme code.
    * uim/plugin.c: Most of the load/unload-plugin are delegated to Scheme.
      (module_bind): New function for the replacement for load-plugin.
      (module_unbind): New function for the replacement for unload-plugin.
    * scm/plugin.scm
      (module-load): New function for the replacement for load-plugin.
      (module-unload): New function for the replacement for unload-plugin.
    * doc/COMPATIBILITY
      - Describe about this commit.
    * uim/uim-custom.c: use module-load instead of load-plugin.

2008-04-17 Etsushi Kato <ek.kato@gmail.com>

    * gtk/compose.c (im_uim_create_compose_tree)
      - Check return value of get_lang_region() properly.
    * qt/immodule-quiminputcontext.h
    * qt/immodule-quiminputcontext_compose.cpp
    * qt4/immodule/quiminputcontext.h
    * qt4/immodule/quiminputcontext_compose.cpp
      - (get_compose_filename)
      - (TransFileName)
      - (get_lang_region)
        - Sync with gtk/compose.c.
    * xim/xim.h
    * xim/compose.cpp
      - (get_compose_filename)
      - (TransFileName)
        - Ditto.

2008-04-17 Etsushi Kato <ek.kato@gmail.com>

    Fix X11 compose input support in Qt4 immodule.
    
    * qt4/immodule/quiminputcontext_compose.cpp
      - (Compose::handle_qkey) : Fix calculation of xkeysym.
      - (UimInputContext::get_encoding) : Don't use
        QTextCodec::codeForLocale()->name().
      - (QUimInputContext::get_compose_filename)
      - (parse_line)
        Check for '\t' explicitly.

2008-04-17 Etsushi Kato <ek.kato@gmail.com>

    * gtk/compose.c (TransFileName) : Fix broken "include" directive
      using %H and %L caused from r5410.

2008-04-16 Konosuke Watanabe <sasugaanija@gmail.com>

    Fix serious bug and a related problem:
    When several buffers on different frames display preedits at the same time
    and user switches the focus from some frame to another frame,
    the buffers are crashed.
    
    * emacs/uim-util.el
      - (uim-point): Remove
    * emacs/uim.el
      - (uim-process-agent-output):
        * Use (point) instead of (uim-point).
        * Remove redundant cursor movement.
    * emacs/uim-el-agent.c
      - (cmd_unfocused): Don't return the error even if uim.el sends
        an UNFOCUSED command to the already unfocused context (for XEmacs).

2008-04-13 IWATA Ray <iwata@quasiquote.org>

    * uim/uim-notify.c (notify_get_plugins):
      - Fix path length. Add length of '/'.
      - Change *str to const. dlerror(3) returns const.

2008-04-13 IWATA Ray <iwata@quasiquote.org>

    * emacs/uim-el-helper-agent.h:
    * emacs/uim-el-agent.h:
    * emacs/prop.h:
    * emacs/preedit.h:
    * emacs/output.h:
    * emacs/key.h:
    * emacs/im.h:
    * emacs/helper.h:
    * emacs/helper-server.h:
    * emacs/helper-message.h:
    * emacs/encoding.h:
    * emacs/debug.h:
    * emacs/context.h:
    * emacs/callback.h:
    * emacs/commit.h:
    * emacs/candidate.h:
    * emacs/callback.h:
     - Apply r5347.

2008-04-13 IWATA Ray <iwata@quasiquote.org>

    * emacs/callback.h, emacs/candidate.h, emacs/commit.h,
      emacs/context.h, emacs/debug.h, emacs/encoding.h,
      emacs/helper-message.h, emacs/helper-server.h,
      emacs/helper.h, emacs/im.h, emacs/key.h, emacs/output.h,
      emacs/preedit.h, emacs/prop.h, emacs/uim-el-agent.h,
      emacs/uim-el-helper-agent.h, emacs/uim-el-types.h
      - Include config.h

2008-04-12 IWATA Ray <iwata@quasiquote.org>

    * emacs/callback.c (commit_cb):
      - Revert to r5414.
    * emacs/commit.c (add_commit_string):
      - Ditto.
    * emacs/commit.h (add_commit_string):
      - Ditto.

2008-04-12 IWATA Ray <iwata@quasiquote.org>

    * emacs/callback.c (commit_cb):
      - Sync API.
    * emacs/commit.c (add_commit_string):
      - API Change. Take length of comstr.
    * emacs/commit.h (add_commit_string):
      - Sync API.
    * emacs/uim-el-agent.c (analyze_keyvector):
      - API Change. Take length of keyname.
    * emacs/uim-el-agent.h (analyze_keyvector):
      - Sync API.
    * emacs/key.c (convert_keyname_a2e):
      - API Change. Take length of keyname.
      - Use strlcpy(3).
    * emacs/key.h (convert_keyname_a2e):
      - Sync.
    * emacs/helper.c (helper_send_im_list):
      - Use asprintf(3).
      (helper_send_im_change_whole_desktop):
      - Ditto.
    * emacs/prop.c (announce_prop_list_update):
      - Ditto.
      (show_prop):
      - Use strdup(3).
    * emacs/preedit.c (add_preedit):
      - Ditto.

2008-04-12 Konosuke Watanabe <sasugaanija@gmail.com>

    * emacs/uim.el
      - (uim-process-agent-output): Improve buffer scrolling.
    * emacs/uim-candidate.el
      - (uim-echo-candidate): Improve candidates displaying when resizing
        of the echo region is limited.
      - (uim-show-candidate):
        * Improve candidates displaying on small window.
        * Improve buffer scrolling.
    * emacs/uim-var.el
      - (uim-el-candidates-buffer-name): New variable.
      - (uim-window-force-scrolled-original): New variable.

2008-04-12 IWATA Ray <iwata@quasiquote.org>

    * uim/uim-helper.c (uim_helper_send_message):
      - Fix error case in uim_asprintf().

2008-04-11 IWATA Ray <iwata@quasiquote.org>

    * scm/wnn.scm
      (wnn-lib-release-context):
      - Turn on save dictionary.
      (wnn-lib-commit-segment):
      - Call wnn-lib-save-dic.

2008-04-11 IWATA Ray <iwata@quasiquote.org>

    * gtk/compose.c
      (TransFileName):
      - Change API.
      - Cleanup parser.
      - Use MAXPATHLEN.
      (get_lang_region):
      - Change API.
      (get_compose_filename):
      - Ditto.

2008-04-11 IWATA Ray <iwata@quasiquote.org>

    * uim/uim-helper.c (uim_helper_send_message):
      - Use uim_asprintf.
    * uim/skk.c (search_line_from_server):
      - Ditto.
    * uim/prime.c (prime_send_command, prime_lib_init):
      - Ditto.
    * uim/mana.c (mana_eval):
      - Ditto.

2008-04-11 IWATA Ray <iwata@quasiquote.org>

    * uim/uim-error.c (uim_asprintf):
      - Fix name 'uim_asprintf'. not uim_asnprintf.

2008-04-11 IWATA Ray <iwata@quasiquote.org>

    * helper/dict-canna.c (dict_canna_get_priv_dic_dir):
      - Change API.
      - Fix misused snprintf.
      - Plug memleak.
      (dict_canna_read_priv_dic_list):
      - Sync API.
      (dict_canna_add_entry_to_priv_dic)
      (dict_canna_delete_entry_from_priv_dic):
       - Use asprintf.

2008-04-11 IWATA Ray <iwata@quasiquote.org>

    * COPYING, uim/uim-error.c, uim/uim.h
      - Bring back r5403.

2008-04-11 IWATA Ray <iwata@quasiquote.org>

    * replace/os_dep.h:
      (uim_getpeereid, uim_setenv, uim_unsetenv, uim_strsep,
       uim_strlcpy, uim_strlcat, uim_vasprintf, uim_asprintf,
       uim_vsnprintf, uim_snprintf, uim_strtoll, uim_strtonum):
      - Rename all macro name of uim_* to uim_internal_*.
        Suggested by ek.kato@.

2008-04-11 IWATA Ray <iwata@quasiquote.org>

    * COPYING, uim/uim-error.c, uim/uim.h
      Revert to r5403. This function name is defined in replace/.
      Pointed by ek.kato@.

2008-04-11 IWATA Ray <iwata@quasiquote.org>

    * uim/uim-error.c (uim_asprintf):
      - New function from openssh/xmalloc.c
        "len = strlen(buf); snprintf(buf, len, ...);"
        is bogus. Please use it.

2008-04-10 KIHARA Hideto <deton@m1.interq.or.jp>

    * configure.ac:
      Fix to define LLONG_MAX and LLONG_MIN on Debian etch and gcc4.
      cf. http://bugs.gentoo.org/show_bug.cgi?id=136300

2008-04-09 Jae-hyeon Park <jhyeon@gmail.com>

    * po/ko.po
      - corrected the name "UIM" to "uim"; see
        http://lists.freedesktop.org/archives/uim/2006-November/001645.html

2008-04-09 Etsushi Kato <ek.kato@gmail.com>

    * uim/skk.c (open_lock) : Bug fix for r5397.

2008-04-08 Etsushi Kato <ek.kato@gmail.com>

    * uim/m17nlib (get_input_method_name) : Remove unused variable.
    * uim/plugin.c
      - Add #include <sys/param.h> for MAXPATHLEN.
      - (plugin_load) : Remove unused variable and fix a bug in r5397.
    * uim/skk.c
      - Add #include <sys/param.h> for MAXPATHLEN.
      - Remove unused <pwd.h> inclusion in r5397.
      - (open_lock) : Remove unused variable.
      - (skk_save_personal_dictionary) : Ditto.

2008-04-08 Jae-hyeon Park <jhyeon@gmail.com>

    * po/ko.po
      - translated the fatal error message in uim/uim-error.c

2008-04-07 IWATA Ray <iwata@quasiquote.org>

    * uim/plugin.c (plugin_load):
      - Fix misused snprintf(3).
    * uim/uim-notify.c (notify_get_plugins):
      - Ditto.
    * uim/m17nlib.c
      (find_im_by_name):
      - Ditto.
      (get_input_method_name):
      - Ditto. Plug memleak.
    * uim/skk.c (open_lock, skk_save_personal_dictionary):
      - Ditto.
    * fep/udsock.c (usersockname):
      - Ditto.

2008-04-07 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * test2/Makefile.am
      - (uim_tests): Add test-fail.scm, test-template.scm
      - (uim_optional_tests): Remove test-template.scm
      - (uim_xfail_tests): Add test-fail.scm
    * test2/test-fail.scm
      - New file

2008-04-07 IWATA Ray <iwata@quasiquote.org>

    * uim/wnnlib.c (uim_wnn_confirm):
      - Send confirm message to stderr.
        uim.el is confused by eating stdout message. pointed by konosuke@.

2008-04-06 IWATA Ray <iwata@quasiquote.org>

    * uim/wnnlib.c (doKantanSConvert):
      - Fix misused arguments of jl_kanji_len().

2008-04-06 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * make-dist.sh
      - Update versions for uim-1.5.0-beta

2008-04-06 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * RELNOTE
    * NEWS
      - Update for uim 1.5.0-beta

2008-04-04 IWATA Ray <iwata@quasiquote.org>

    * fep/draw.c (update_backtick):
      - Use snprintf and strlcpy.

2008-04-02 Masahito Omote <omote@utyuuzin.net>

    * uim/curl.c: Add referer support.

2008-03-31 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * test2/run-singletest.sh.in
      - Fix env vars specification
      - Fix LIBUIM_SCM_FILES dir

2008-03-31 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit add another directory for Scheme unit test
      directly running on uim-sh with the SRFI-64 subset
    
    * test2
      - New directory
    * test2/Makefile.am
    * test2/run-singletest.sh.in
    * test2/test-template.scm
      - New file
    * Makefile.am
      - (SUBDIRS): Add test2
    * configure.ac
      - Add test2/Makefile and test2/run-singletest.sh to AC_CONFIG_FILES

2008-03-31 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/uim-sh.scm
      - (uim-sh): Fix falling into eval loop after script execution

2008-03-30 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/light-record.scm
      - (%define-record-generic): Removed
      - (%define-record-getter, %define-record-setter): New macro
      - (define-record-generic): Merge %define-record-generic
      - (define-vector-record, define-list-record, define-record):
        Follow the changes
    * scm/wlos.scm
      - (make-class-object-name, %define-class): Removed
      - (%define-methods): New macro
      - (define-class): Merge %define-class

2008-03-30 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/light-record.scm
    * scm/wlos.scm
      - New file
    * scm/Makefile.am
      - (SCM_FILES): Add light-record.scm wlos.scm

2008-03-30 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim.c
      - (uim_init_internal): Provide "uim"
    * doc/COMPATIBILITY
      - Add new section "Feature provision of 'uim'"

2008-03-30 Jae-hyeon Park <jhyeon@gmail.com>

    * po/ko.po
      - fixed fuzzy translations

2008-03-30 Masahito Omote <omote@utyuuzin.net>

    * uim/curl.c:
      - (uim_curl_fetch_simple, uim_curl_post): Cosmetic Change
      - (uim_plugin_instance_init): Fix typo

2008-03-30 Masahito Omote <omote@utyuuzin.net>

    * New plugin curl. Just fetching contents by HTTP/FTP/..., you have to
      prepare HTML/XML parser by yourself.
    * uim/curl.c
      - New file.
    * configure.ac
      - Add checking for cURL.
    * uim/Makefile.am
      - Add cURL support.

2008-03-29 IWATA Ray <iwata@quasiquote.org>

    * uim/wnnlib.c (jcOpen2):
      - Check file existence of rcfile.
      - Gettextize.
    * po/POTFILES.in
      - Add uim/wnnlib.c.
    * po/ja.po
      - Translate message about wnnenvrc.
    * po/fr.po, po/ko.po:
      - Regen.

2008-03-29 IWATA Ray <iwata@quasiquote.org>

    * m4/wnn.m4:
      - Set correct place of WNNLIBDIR when --without-wnn-libraries.
      - Fix comment output of config.h.

2008-03-29 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit fix make distcheck failure by uim-version.el
    
    * configure.ac
      - Add emacs/uim-version.el to AC_CONFIG_FILES
    * emacs/Makefile.am
      - Remove uim-version.el generation workaround
    * emacs/uim-version.el.in
      - (uim-el-version): Replace @VERSION@ with @PACKAGE_VERSION@

2008-03-29 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * qt4/immodule/Makefile.am
      - Fix distclean
      - (EXTRA_DIST): Remove unexisting COPYING

2008-03-29 IWATA Ray <iwata@quasiquote.org>

    * notify/Makefile.am (CFLAGS):
      - Add awful workaround of breaking build tree
        with -pedantic option.

2008-03-29 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * configure.ac
      - Fix result message of libedit

2008-03-29 IWATA Ray <iwata@quasiquote.org>

    * notify/uim-libnotify.c (uim_libnotify_notify):
      - Convert message string from locale to utf8.

2008-03-29 KIHARA Hideto <deton@m1.interq.or.jp>

    * po/ja.po
      - Modify messages of uim-tutcode to be consistent with tc2.

2008-03-29 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * po/ja.po
      - Translate uim-tutcode
      - Translate uim-elatin
      - Translate uim-byeoru updates
      - Translate uim-skk updates
      - Translate messages for uim-notify
      - Unfuzzy some translated uim-sj3 entries

2008-03-29 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * po/fr.po
    * po/ja.po
    * po/ko.po
      - make update-po

2008-03-29 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * NEWS
    * RELNOTE
      - Update for uim 1.5.0-alpha

2008-03-29 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * fep/callbacks.h
    * fep/escseq.h
    * fep/helper.h
    * fep/key.h
    * fep/str.h
    * fep/udsock.h
    * gtk/compose.h
    * gtk/key-util-gtk.h
    * gtk/text-util.h
    * gtk/uim-cand-win-gtk.h
    * gtk/uim-eb.h
    * helper/dict-anthy.h
    * helper/dict-canna-cclass.h
    * helper/dict-canna.h
    * helper/dict-cclass-dialog.h
    * helper/dict-dict.h
    * helper/dict-util.h
    * helper/dict-word-list-win-gtk.h
    * helper/dict-word-win-gtk.h
    * helper/dict-word.h
    * helper/eggtrayicon.h
    * qt/immodule-plugin.h
    * qt/immodule-qtextutil.h
    * qt/switcher-qt.h
    * qt/toolbar-applet-kde.h
    * xim/canddisp.h
    * xim/compose.h
    * xim/connection.h
    * xim/convdisp.h
    * xim/helper.h
    * xim/util.h
    * xim/xdispatch.h
    * xim/xim.h
    * xim/ximpn.h
    * xim/ximserver.h
      - Oops, r5347 did not include all changes. Rename include
        guard macros to be having appropriate prefix to avoid
        conflicting with system headers

2008-03-28 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * replace/os_dep.h
    * uim/bsdlook.h
    * gtk/caret-state-indicator.h
    * helper/dict-word-list-view-gtk.h
    * fep/draw.h
    * fep/read.h
    * fep/uim-fep.h
    * qt/candwin-qt.h
    * qt/chardict/chardict-bushuviewwidget.h
    * qt/chardict/chardict-chargridview.h
    * qt/chardict/chardict-qt.h
    * qt/chardict/chardict-unicodeviewwidget.h
    * qt/chardict/qtgettext.h
    * qt/immodule-candidatewindow.h
    * qt/immodule-qhelpermanager.h
    * qt/immodule-quiminfomanager.h
    * qt/immodule-quiminputcontext.h
    * qt/immodule-quiminputcontext_compose.h
    * qt/immodule-quiminputcontext_with_slave.h
    * qt/immodule-subwindow.h
    * qt/pref-customwidgets.h
    * qt/pref-qt.h
    * qt/qtgettext.h
    * qt/toolbar-common-quimhelpertoolbar.h
    * qt/toolbar-common-uimstateindicator.h
    * qt/toolbar-standalone-qt.h
    * qt4/immodule/candidatewindow.h
    * qt4/immodule/debug.h
    * qt4/immodule/qhelpermanager.h
    * qt4/immodule/qtextutil.h
    * qt4/immodule/quiminfomanager.h
    * qt4/immodule/quiminputcontext.h
    * qt4/immodule/quiminputcontext_compose.h
    * qt4/immodule/quiminputcontext_with_slave.h
    * qt4/immodule/subwindow.h
      - Rename include guard macros to be having appropriate prefix
        to avoid conflicting with system headers

2008-03-28 IWATA Ray <iwata@quasiquote.org>

    * po/ja.po:
      - Oops, Add [Look] Tag.

2008-03-28 IWATA Ray <iwata@quasiquote.org>

    * po/ja.po:
      * Translate notify entries.

2008-03-28 IWATA Ray <iwata@quasiquote.org>

    * po/ja.po:
     - Translate look entries.

2008-03-28 IWATA Ray <iwata@quasiquote.org>

    * scm/look-custom.scm (look-fence-left):
      - Fix spaces.

2008-03-28 IWATA Ray <iwata@quasiquote.org>

    * scm/look-custom.scm
      (look-dict, look-personal-dict-filename)
      (look-beginning-character-length, look-prepared-words):
      - Add [Look] Tag.

2008-03-28 IWATA Ray <iwata@quasiquote.org>

    * po/ja.po:
      - Translate wnn entries.

2008-03-28 IWATA Ray <iwata@quasiquote.org>

    * po/ja.po:
      - Translate sj3 entries.

2008-03-27 IWATA Ray <iwata@quasiquote.org>

    * uim/sj3.c:
      - Fix typo.

2008-03-27 IWATA Ray <iwata@quasiquote.org>

    * po/ja.po
      - Sync.

2008-03-24 IWATA Ray <iwata@quasiquote.org>

    * uim/sj3.c
      (uim_sj3_open_with_list):
      Replace with CAR().
      (uim_sj3_douoncnt):
      Replace with MAKE_INT().

2008-03-23 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * make-dist.sh
      - Update version numbers
      - (CONF_FULL): Add --enable-notify --with-wnn --with-sj3
    
    * configure.ac
      - Cosmetic change

2008-03-23 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/scim.cpp
      - Add some comments

2008-03-23 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/PY-old.scm
      - Removed since unused and not distributed since r1219 (uim
        0.5.0/1.0.0). Thanks No.21 of [uim thread 8] for the
        hint. But I couldn't find any mention to LGPL about it
    * COPYING
      - Remove comments about PY-old.scm (GPL)

2008-03-23 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/romaja.scm
      - Resurrect the license header accidentally vanished in r874

2008-03-23 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * doc/COMPATIBILITY
      - Add new section "Responsibility migration of gettext() invocation"
      - Add new section "Experimental user notification facility (uim-notify)"
      - Update "New utility procedures in uim 1.5.0"

2008-03-23 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * emacs/callback.h
    * emacs/candidate.h
    * emacs/commit.h
    * emacs/context.h
    * emacs/debug.h
    * emacs/encoding.h
    * emacs/helper-message.h
    * emacs/helper-server.h
    * emacs/helper.h
    * emacs/im.h
    * emacs/key.h
    * emacs/output.h
    * emacs/preedit.h
    * emacs/prop.h
    * emacs/uim-el-agent.h
    * emacs/uim-el-helper-agent.h
    * emacs/uim-el-types.h
    * gtk/compose.h
    * gtk/key-util-gtk.h
    * gtk/text-util.h
    * gtk/uim-cand-win-gtk.h
    * gtk/uim-eb.h
    * helper/dict-anthy.h
    * helper/dict-canna-cclass.h
    * helper/dict-canna.h
    * helper/dict-cclass-dialog.h
    * helper/dict-dict.h
    * helper/dict-util.h
    * helper/dict-word-list-view-gtk.h
    * helper/dict-word-list-win-gtk.h
    * helper/dict-word-win-gtk.h
    * helper/dict-word.h
    * helper/eggtrayicon.h
    * qt/candwin-qt.h
    * qt/chardict/chardict-bushuviewwidget.h
    * qt/chardict/chardict-chargridview.h
    * qt/chardict/chardict-qt.h
    * qt/chardict/chardict-unicodeviewwidget.h
    * qt/chardict/qtgettext.h
    * qt/immodule-candidatewindow.h
    * qt/immodule-plugin.h
    * qt/immodule-qhelpermanager.h
    * qt/immodule-qtextutil.h
    * qt/immodule-quiminfomanager.h
    * qt/immodule-quiminputcontext.h
    * qt/immodule-quiminputcontext_compose.h
    * qt/immodule-quiminputcontext_with_slave.h
    * qt/immodule-subwindow.h
    * qt/pref-customwidgets.h
    * qt/pref-qt.h
    * qt/qtgettext.h
    * qt/switcher-qt.h
    * qt/toolbar-applet-kde.h
    * qt/toolbar-common-quimhelpertoolbar.h
    * qt/toolbar-common-uimstateindicator.h
    * qt/toolbar-standalone-qt.h
    * qt4/immodule/candidatewindow.h
    * qt4/immodule/debug.h
    * qt4/immodule/qhelpermanager.h
    * qt4/immodule/qtextutil.h
    * qt4/immodule/quiminfomanager.h
    * qt4/immodule/quiminputcontext.h
    * qt4/immodule/quiminputcontext_compose.h
    * qt4/immodule/quiminputcontext_with_slave.h
    * qt4/immodule/subwindow.h
    * replace/os_dep.h
    * uim/plugin.h
    * uim/uim-custom.h
    * uim/uim-helper.h
    * uim/uim-im-switcher.h
    * uim/uim-internal.h
    * uim/uim-notify.h
    * uim/uim-scm-abbrev.h
    * uim/uim-scm.h
    * uim/uim-util.h
    * uim/uim-x-util.h
    * uim/uim.h
    * xim/canddisp.h
    * xim/compose.h
    * xim/connection.h
    * xim/convdisp.h
    * xim/helper.h
    * xim/util.h
    * xim/xdispatch.h
    * xim/xim.h
    * xim/ximpn.h
    * xim/ximserver.h
      - Rename '_uim_h_included_' -style include guard macros to
        'UIM_H' with following scripts, in response to [uim-en
        96]. Some headers imported from foreign projects such as
        fake-rfc2553.h and *-kseparator.h are kept untouched
    
        find . -name '*.h' -exec ruby -i -pe 'gsub!(/\b_+(\w+)(_h)?_included(ed)?_+\b/) { "#{$1.upcase}_H" }' {} \;
        find . -name '*.h' -exec ruby -i -pe 'gsub!(/\b_+(\w+)_H_+\b/i) { "#{$1.upcase}_H" }' {} \;

2008-03-23 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/im.scm
      - (register-im): Rejects symbols that cannot be valid external
        representation such as "scim-Probhat(phonetic)", "3foo", "#foo",
        ... This change made --enable-scim really broken
    * po/POTFILES.in
      - Add im.scm

2008-03-23 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * test/test-action.scm
    * test/test-anthy.scm
    * test/test-custom-rt.scm
    * test/test-custom.scm
    * test/test-example.scm
    * test/test-i18n.scm
    * test/test-im.scm
    * test/test-intl.scm
    * test/test-key.scm
    * test/test-lazy-load.scm
    * test/test-plugin.scm
    * test/test-uim-test-utils.scm
    * test/test-uim-util.scm
    * test/test-ustr.scm
    * test/test-util.scm
      - Update tested revision information. All tests are passed

2008-03-23 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * test/test-im.scm
      - Disable IMs that affects default IM selection.

2008-03-23 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * test/uim-test-utils.scm
      - Remove unused code fragments

2008-03-23 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * test/test-intl.scm
      - Fix gettext(3) failure on "en_US" locale on glibc
        2.6.1-1ubuntu9 on Ubuntu 7.10
      - Add some tests

2008-03-23 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/i18n.scm
      - (locale-new): Fix invalid acception of locale strings such as
        "de_" or "de_de_DE"
    * test/test-i18n.scm
      - Add tests for locale-new

2008-03-23 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/custom-rt.scm
      - (custom-prop-update-custom-handler): Fix requiring the 3rd arg
        string quoted. This also fixed the problem requiring quoted string
        on 3rd arg of uim_prop_update_custom() ([uim-ja 47]). i.e. "skk"
        works. "'skk" is not required.
    * test/test-custom.scm
      - Change the 3rd args for custom-prop-update-custom-handler to
        strings to follow the specification change in r4889
      - Add quoted strings as 3rd args for
        custom-prop-update-custom-handler tests

2008-03-23 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * doc/COMPATIBILITY
      - Add lacked description about string-prefix{,-ci}? changes in r4915
    * test/test-uim-util.scm
      - Follow the specification changes

2008-03-22 Konosuke Watanabe <sasugaanija@gmail.com>

    * emacs/uim-util.el
    * emacs/uim-keymap.el
    * emacs/uim-key.el
    * emacs/uim.el
    * emacs/uim-candidate.el
    * emacs/uim-helper.el
    * emacs/uim-leim.el
      - Clean up debug messages.

2008-03-21 Konosuke Watanabe <sasugaanija@gmail.com>

    * emacs/uim-var.el
      - (uim-lang-code-alist): Support UTF-8 experimentally.

2008-03-21 Konosuke Watanabe <sasugaanija@gmail.com>

    * emacs/context.c
     - (switch_context_im): Fix bug; uim-im-switch cannot switch IM
       when the encoding of the new IM is different from the old one.

2008-03-20 IWATA Ray <iwata@quasiquote.org>

    * uim/sj3.c (uim_sj3_make_error_pair):
      - Remove notation.

2008-03-18 IWATA Ray <iwata@quasiquote.org>

    * scm/sj3.scm (sj3-filter-merge-segment):
      - Fix logical error.
        This pattern allows (index == 0) case.

2008-03-17 IWATA Ray <iwata@quasiquote.org>

    * configure.ac:
      - Fix help message of sj3.

2008-03-17 IWATA Ray <iwata@quasiquote.org>

    * gtk/uim-eb.c:
      - Append <config.h> and <sys/types.h>.

2008-03-17 IWATA Ray <iwata@quasiquote.org>

    * gtk/uim-eb.c (go_text_eb):
      - Fix text_length and byte to ssize_t.

2008-03-17 IWATA Ray <iwata@quasiquote.org>

    * uim/sj3.c (uim_sj3_make_error_pair):
      - More gettextize.

2008-03-17 IWATA Ray <iwata@quasiquote.org>

    * configure.ac:
       - Set default behavior is --without-sj3.

2008-03-17 IWATA Ray <iwata@quasiquote.org>

    * m4/eb4.m4:
      - Remove useless AC_MSG_ERROR.

2008-03-17 IWATA Ray <iwata@quasiquote.org>

    * m4/eb4.m4:
      - Import from eb-4.3.2.
    * configure.ac:
      - Renewed --with-eb.
      - Set default behavior is --without-eb.
    * gtk/Makefile.am
      (im_uim_la_CPPFLAGS, im_uim_la_CFLAGS)
      (im_uim_la_LDFLAGS, im_uim_la_LIBADD):
      - Use EBCONF_* variables.

2008-03-17 IWATA Ray <iwata@quasiquote.org>

    * scm/sj3.scm (sj3-filter-merge-segment)
      - Fix argument.

2008-03-17 IWATA Ray <iwata@quasiquote.org>

    Add implementation of Segment-length learnining routine.
    
    * scm/sj3.scm
      (sj3-lib-get-nth-candidate-without-muhenkan):
      - New function.
      (sj3-lib-get-nth-candidate):
      - Sync uim_sj3_getnthdouon API change.
      (sj3-get-seg-offset):
      - New function.
      (sj3-find-index):
      - new function. inspired from Gauche.
      (sj3-filter-split-segment)
      (sj3-filter-merge-segment)
      (sj3-filter-move-segment):
      - New function. These functions detects shrinking,
        stretching and merging from fixed segment.
      (sj3-lib-commit-segments):
      - New function. Segment-length learnining routine.
      (sj3-commit-string):
      - Store sj3-lib-get-nth-candidate-without-muhenkan.
      - Call sj3-lib-commit-segments with stored args.

2008-03-17 IWATA Ray <iwata@quasiquote.org>

    * uim/sj3.c
      (uim_sj3_getkan): Use MAKE_STR and MAKE_PTR.
      (uim_sj3_getnthdouon): Return dcid. API Change.

2008-03-16 IWATA Ray <iwata@quasiquote.org>

    * pixmaps/Makefile.am (IM_SUBST_PNGS):
      - Fix file extention name from .svg to .png.

2008-03-16 IWATA Ray <iwata@quasiquote.org>

    * scm/wnn.scm (wnn-lib-get-nth-candidate, wnn-lib-release-context)
      (wnn-lib-get-unconv-candidate, wnn-lib-get-nr-segments)
      (wnn-lib-get-nr-candidates, wnn-lib-commit-segment)
      (wnn-lib-reset-conversion):
      - Replace first argument with wc.
    * scm/wnn.scm (wnn-release-handler, wnn-begin-conv)
      (wnn-cancel-conv, wnn-get-raw-candidate)
      (wnn-compose-state-preedit, wnn-commit-string)
      (wnn-resize-segment, wnn-move-candidate)
      (wnn-move-candidate-in-page, wnn-proc-compose-state)
      (wnn-reset-handler, wnn-context-wc-ctx)
      - Sync API.
    * (wnn-get-raw-candidate): Remove argument 'sc-ctx'. Change API.
      (wnn-compose-state-preedit): Sync API.
      (wnn-get-commit-string): Ditto.

2008-03-16 IWATA Ray <iwata@quasiquote.org>

    * po/POTFILES.in: Sort.

2008-03-16 IWATA Ray <iwata@quasiquote.org>

    * po/POTFILES.in:
      - Add scm/wnn-custom.scm, scm/wnn-key-custom.scm and scm/wnn.scm.

2008-03-16 IWATA Ray <iwata@quasiquote.org>

    * po/POTFILES.in: Add scm/sj3.scm.

2008-03-16 IWATA Ray <iwata@quasiquote.org>

    * scm/sj3 (sj3-connect-retry):
      - Fix message.

2008-03-16 IWATA Ray <iwata@quasiquote.org>

    * scm/sj3 (sj3-connect-retry):
      - Send notify-info.

2008-03-15 IWATA Ray <iwata@quasiquote.org>

    * scm/sj3.scm (sj3-get-raw-candidate):
      - Remove sc-ctx. API change.
      (sj3-compose-state-preedit, sj3-get-commit-string):
      - Sync API (sj3-get-raw-candidate).
      (sj3-proc-compose-state):
      - Remove sc-ctx.

2008-03-15 IWATA Ray <iwata@quasiquote.org>

    * scm/sj3.scm (sj3-commit-string):
      Fix argument from r5925.

2008-03-14 IWATA Ray <iwata@quasiquote.org>

    * scm/sj3.scm (sj3-lib-error?):
      Use pair?.

2008-03-14 IWATA Ray <iwata@quasiquote.org>

    * scm/sj3.scm (sj3-lib-error?):
      - Check nul.

2008-03-13 IWATA Ray <iwata@quasiquote.org>

    * scm/sj3.scm
      - Support connect-retry mechanism.
      (sj3-lib-error?, sj3-connect-wait, sj3-connect-retry, sj3-lib-funcall)
      - New function.
      (sj3-getdouon, sj3-lib-get-nth-candidate, sj3-get-nr-douon)
      (sj3-lib-begin-conversion, sj3-lib-commit-segment):
      - Use sj3-lib-funcall.

2008-03-13 IWATA Ray <iwata@quasiquote.org>

    * scm/sj3.scm (sj3-getdouon, sj3-get-nth-yomi)
      (sj3-lib-get-nth-candidate, sj3-lib-get-unconv-candidate)
      (sj3-lib-get-nr-segments, sj3-get-nr-douon)
      (sj3-lib-get-nr-candidates, sj3-lib-commit-segment)
      (sj3-lib-reset-conversion):
      - Replace first argument with sc.
      (sj3-lib-resize-segment, sj3-release-handler, sj3-cancel-conv)
      (sj3-get-raw-candidate, sj3-compose-state-preedit)
      (sj3-get-commit-string, sj3-commit-string)
      (sj3-resize-segment, sj3-move-candidate, sj3-move-candidate-in-page)
      (sj3-get-candidate-handler):
      - Sync API.

2008-03-13 IWATA Ray <iwata@quasiquote.org>

    * uim/uim-posix.c
      (time_t_to_uim_lisp):
      - New function. time_t treates as string in sigscheme.
      (uim_lisp_to_time_t):
      - Ditto.
      (c_time):
      New function. POSIX time().
      (c_difftime):
      New function. POSIX difftime().
      (uim_init_posix_subrs):
      - Add scheme function (time) and (difftile).

2008-03-11 Etsushi Kato <ek.kato@gmail.com>

    * helper/candwin-gtk.c
    * helper/im-switcher-gtk.c
    * helper/pref-gtk.c
      - include <stdio.h> for compilation on Solaris 10

2008-03-10 Etsushi Kato <ek.kato@gmail.com>

    * gtk/Makefile.am : Update.

2008-03-09 Etsushi Kato <ek.kato@gmail.com>

    * uim/wnnlib.c (uim_wnn_jc_dump_jconvbuf) : Fix segment
      transposing in wnn-proc-compose-state.

2008-03-09 IWATA Ray <iwata@quasiquote.org>

    * uim/sj3.c (uim_sj3_getkan):
     - Remove trailing space.

2008-03-09 IWATA Ray <iwata@quasiquote.org>

    * uim/sj3.c (uim_sj3_open):
      - Change sname and uname to array.
      (uim_sj3_open_with_list):
      - Ditto.

2008-03-09 Etsushi Kato <ek.kato@gmail.com>

    * uim/wnnlib.c (jcGetCandidate) : Fix calling wstrncpy().
    * scm/wnn-custom.scm (wnn-rcfile) : Change custom type as
      pathname.

2008-03-09 Etsushi Kato <ek.kato@gmail.com>

    * m4/wnn.m4 (WNN_LIBADD) : New.
    * uim/Makefile.am (libuim_wnn_la_LIBADD) : Add WNN_LIBADD.

2008-03-09 Etsushi Kato <ek.kato@gmail.com>

    * m4/wnn.m4 : Fix other-libraries check, and fix recheck libwnn
      with another function.

2008-03-09 IWATA Ray <iwata@quasiquote.org>

    * uim/wnnlib.h:
      - Cleanup prototype.

2008-03-09 IWATA Ray <iwata@quasiquote.org>

    * uim/wnnlib.c
      (wstrncpy):
      - New function.
      (wstrcpy):
      - Remove.
      (jcGetCandidate):
      - Change API. Add argument of string length.
      - Replace with wstrncpy().
    * uim/wnnlib.h (jcGetCandidate):
      - Change API.

2008-03-08 IWATA Ray <iwata@quasiquote.org>

    * m4/Makefile.am
     - Add wnn.m4.
     - Sort *.m4 files.

2008-03-08 IWATA Ray <iwata@quasiquote.org>

    * uim/wnnlib.c (uim_plugin_instance_init):
      - Fix typo "wnn-lib-cancel".

2008-03-08 IWATA Ray <iwata@quasiquote.org>

    * uim/Makefile.am
      (libuim_wnn_la_LIBADD):
      - Use WNN_LIBS.
      (libuim_wnn_la_CPPFLAGS):
      - Use WNN_CPPFLAGS.
    * uim/wnnlib.c (jcOpen2):
      - Rename WNNLIBDIR to WNNENVDIR.
    * configure.ac:
      - Use AM_PATH_WNN.
    * m4/wnn.m4:
      - New file.

2008-03-08 IWATA Ray <iwata@quasiquote.org>

    * configure.ac:
      - Check libwnn with libcrypt. Wnn7 SDK use crypt(3).

2008-03-08 IWATA Ray <iwata@quasiquote.org>

    * uim/wnnlib.c: Merged from kinput2-v3.1.

2008-03-07 Etsushi Kato <ek.kato@gmail.com>

    * xim/locale.cpp (UTF8_Locale::utf8_to_native_str) : Simplify.

2008-03-06 Etsushi Kato <ek.kato@gmail.com>

    * Reset iconv(3) conversion state, patched by G-HAL (#14812).
    
    * xim/locale.cpp (UTF8_Locale::utf8_to_native_str) : Reset
      conversion state.
    * xim/compose.cpp (mb_string_to_utf8) : Ditto.
    * uim/iconv.c (uim_iconv_code_conv)
      - Add space for '\0' and terminate the string explicitly.
      - Reset conversion state.

2008-03-06 IWATA Ray <iwata@quasiquote.org>

    * uim/uim-posix.c
      (c_sleep):
      - New function. Call POSIX sleep() from scheme.
      (uim_init_posix_subrs):
      - Add scheme function (sleep).

2008-03-06 IWATA Ray <iwata@quasiquote.org>

    * fep/udsock.c (usersockname):
      - Remove free(). sock_dir has been changed to array.

2008-03-03 Etsushi Kato <ek.kato@gmail.com>

    * uim/wnnlib.c : Replace LIBDIR with WNNLIBDIR.

2008-03-03 Etsushi Kato <ek.kato@gmail.com>

    * uim/bsdlook.c : Include <config.h>.
    * uim/wnnlib.c : Ditto.
    * uim/uim-helper.c : Don't include unused "uim-util.h".
    * uim/uim-posix.c
      - Ditto.
      - Include <unistd.h> for getuid(2).

2008-03-03 Etsushi Kato <ek.kato@gmail.com>

    * scm/sj3.scm (sj3-user) : Fix for change in r5262.

2008-03-02 IWATA Ray <iwata@quasiquote.org>

    * doc/COMPATIBILITY:
      - Add section "New utility procedures in uim 1.5.0"

2008-03-02 IWATA Ray <iwata@quasiquote.org>

    * uim/uim-posix.c
      (uim_get_user_name, uim_get_home_directory, uim_get_config_path):
      - Check truncation.
    * uim/uim-helper.c (uim_helper_get_pathname):
      - Ditto.
    * uim/prime.c (prime_get_ud_path):
      - Ditto.
    * fep/udsock.c (get_ud_path):
      - Ditto.

2008-03-02 IWATA Ray <iwata@quasiquote.org>

    * uim/uim-helper.c (uim_helper_get_pathname):
      - Replace snprintf->strlcat.
    * uim/prime.c (prime_get_ud_path):
      - Ditto.

2008-03-02 IWATA Ray <iwata@quasiquote.org>

    * uim/uim-helper.c (uim_helper_get_pathname):
      - Fix correct pathname of socket.
    * uim/prime.c (prime_get_ud_path):
      - Ditto.

2008-03-02 IWATA Ray <iwata@quasiquote.org>

    * uim/uim-posix.c:
      - Revert Copyright.

2008-03-02 Konosuke Watanabe <sasugaanija@gmail.com>

    * uim/uim-posix.c
    * uim/uim-helper.c
    * uim/uim-helper-server.c
    * uim/uim-helper-client.c
    * uim/prime.c
      - include <sys/param.h>

2008-03-02 IWATA Ray <iwata@quasiquote.org>

    * doc/COMPATIBILITY:
      - Add section "Change API to know operations are success or not"

2008-03-02 IWATA Ray <iwata@quasiquote.org>

    * uim-posix.h:
      - New header.
    * uim-posix.c:
      - New file. These functions treates file/directory operation
        via posix functions.
      (uim_get_user_name, uim_get_home_directory,
       uim_check_dir, uim_get_config_path):
      - New function for C developer.
      (user_name, home_directory):
      - New function for scheme developer.
      (file_stat_mode, file_readablep, file_writablep, file_executablep)
      (file_regularp, file_directoryp, file_mtime, c_getenv, c_setenv)
      (c_unsetenv, setugidp):
      - Move from uim-util.c.
      (uim_init_posix_subrs):
      - New function.
    * uim/uim.c (uim_init_internal):
      - Call uim_init_posix_subrs().
    * uim-util.c:
      - Remove POSIX functions to uim-posix.c.
    * uim-helper.c (uim_helper_get_pathname):
      - Change API for safety operation.
    * uim/uim-helper.h:
      - Sync API change of uim_helper_get_pathname().
    * uim/uim-helper-client.c (uim_helper_init_client_fd):
      - Ditto.
    * uim/uim-helper-server.c (main):
      - Ditto.
    * uim/prime.c (check_dir):
      - Remove.
    * uim/prime.c (prime_get_ud_path):
      - Change API for safety operation.
      - Use uim_get_config_path().
    * fep/udsock.c (check_dir):
      - Remove.
    * fep/udsock.c (get_ud_path):
      - Change API for safety operation.
      - Use uim_get_config_path().
    * fep/udsock.h
      - Sync API change of get_ud_path().
    * fep/uim-fep.c (main):
      - Ditto.
    * scm/skk-custom.scm (skk-personal-dic-filename):
      (skk-uim-personal-dic-filename):
      - Replace (getenv "HOME") with (home-directory (user-name)).
    * scm/init.scm (load-user-conf):
      - Ditto.
    * scm/plugin.scm
      (uim-plugin-lib-load-path, uim-plugin-scm-load-path,
       load-module-conf, load-enabled-modules):
      - Ditto.
    * scm/tutcode-custom.scm (tutcode-personal-dic-filename):
      - Ditto.
    * scm/sj3-custom.scm (sj3-user):
      - Ditto.
    * scm/look-custom.scm (look-personal-dict-filename):
      - Ditto.
    * scm/custom-rt.scm (custom-file-path):
      - Ditto.
    * uim/uim-custom.c (uim_conf_path):
      - Ditto.

2008-03-02 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * test/uim-test-utils.scm
      - Fix unset LIBUIM_PLUGIN_LIB_DIR
    * test/test-slib.scm
      - Removed since the R5RS tests are no longer needed and
        replaced with the tests of SigScheme
    * test/test-util.scm
      - Fix alist-delete tests involving SIOD-dependent '=' behavior

2008-03-02 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/bsdlook.c
      - (copyright): Fix a multiline string that causes 'make check'
        complaining

2008-03-02 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/Makefile.am
      - (libuim_scm_la_CPPFLAGS): Fix debug flags

2008-03-01 IWATA Ray <iwata@quasiquote.org>

    * scm/sj3.scm
      (sj3-get-nr-douon): Use sj3-make-map-from-kana-string.
      (sj3-lib-begin-conversion): Ditto.

2008-03-01 Konosuke Watanabe <sasugaanija@gmail.com>

    * NEWS
      - update

2008-03-01 IWATA Ray <iwata@quasiquote.org>

    * uim/wnnlib.c
      (euctows, wstoeuc, uim_wnn_jcInsertChar):
      - Change source pointer to const.
      (uim_wnn_jcOpen):
      - Copy strings.
    * uim/wnnlib.h (jcClose):
      - Return void.
      uim/wnnlib.c (jcClose):
      - Ditto.

2008-03-01 IWATA Ray <iwata@quasiquote.org>

    * uim/wnnlib.c: ANSIfy. no functional change.

2008-03-01 IWATA Ray <iwata@quasiquote.org>

    * uim/wnnlib.c
     (doKantanSConvert, unconvert, jcCancel, jcFix,
      jcFix1, jcGetCandidate):
      Remove unused variable.

2008-03-01 IWATA Ray <iwata@quasiquote.org>

    * uim/wnnlib.h: ANSIfy. no functional change.
      uim/wnnlib.c: Ditto.

2008-03-01 IWATA Ray <iwata@quasiquote.org>

    * NEWS:
      - Update

2008-03-01 IWATA Ray <iwata@quasiquote.org>

    Add new japanese input method wnn. ok YamaKen@
    
    * scm/Makefile.am:
      - Add wnn.scm wnn-custom.scm wnn-key-custom.scm.
      - Add module_names.
    * scm/wnn.scm, scm/wnn-custom.scm, scm/wnn-key-custom.scm
      Add new files for new input method wnn.
      scheme code is copied from canna*.scm.
    * configure.ac:
      Add checking libwnn.
    * pixmaps/Makefile.am (IM_SUBST_SVGS, IM_SUBST_PNGS):
      Add wnn.svg and wnn.png.
    * uim/Makefile.am (libuim_wnn_la_SOURCES):
      Add wnnlib.h and wnnlib.c.
    * uim/wnnlib.h, uim/wnnlib.c:
      Add new file for scheme/libwnn interface.
      Import from kinput2.
    * COPYING:
      Add license term of wnnlib.h and wnnlib.c.

2008-02-29 IWATA Ray <iwata@quasiquote.org>

    * uim/sj3.c
      (uim_sj3_make_error, uim_sj3_make_single_error):
      - Reneme uim_sj3_make_error to uim_sj3_make_single_error
        and return alist.
      (uim_sj3_server_down_error, uim_sj3_undefined_error)
      (uim_sj3_internal_error, uim_sj3_getkan, uim_sj3_douoncnt)
      (uim_sj3_getdouon, uim_sj3_getnthdouon, uim_sj3_touroku):
      - Rename uim_sj3_make_single_error.
      (uim_sj3_getnthdouon): Remove unused variable.

2008-02-26 IWATA Ray <iwata@quasiquote.org>

    * scm/sj3.scm (sj3-lib-begin-conversion):
      - sj3-lib-begin-conversion return number. not boolean.

2008-02-26 Etsushi Kato <ek.kato@gmail.com>

    * NEWS : Merge changes in 1.4 branch.

2008-02-23 IWATA Ray <iwata@quasiquote.org>

    * uim/sj3.c (uim_sj3_getnthdouon):
      - New function.
    * scm/sj3.scm
      (sj3-make-map-from-kana-string):
      - New function.
      (sj3-get-nth-douon):
      - Remove.
      (sj3-lib-get-nth-candidate):
      - Use sj3-lib-get-nth-douon.

2008-02-23 IWATA Ray <iwata@quasiquote.org>

    * scm/sj3.scm (sj3-get-nr-douon):
      Use sj3-lib-douoncnt.

2008-02-21 Konosuke Watanabe <sasugaanija@gmail.com>

    * emacs/uim-key.el
      - (uim-translate-xemacs-keyname): Remove unnecessary line.
    * emacs/key.c
      - (convert_keyname_e2u):
        * Remove some unknown key rules.
        * Support lower-case keysyms.

2008-02-20 Etsushi Kato <ek.kato@gmail.com>

    * NEWS : Update invalid uim-tutcode section.

2008-02-20 Etsushi Kato <ek.kato@gmail.com>

    * NEWS : Update.

2008-02-18 Konosuke Watanabe <sasugaanija@gmail.com>

    * emacs/uim-key.el
      - (uim-translate-xemacs-keyname): Support Multi_key on XEmacs
      - (uim-command-execute): Ditto
      - (uim-translate-key): Ditto
    * emacs/uim.el
      - (uim-process-input): Ditto

2008-02-18 IWATA Ray <iwata@quasiquote.org>

    * uim/prime.c (prime_read_msg_from_ud)
      - Stop inserting '\0'.
        It will be cause of underflow when rc == -1.

2008-02-18 Etsushi Kato <ek.kato@gmail.com>

    * uim/prime.c (prime_read_msg_from_ud) : Fix a bug in r5139.

2008-02-18 IWATA Ray <iwata@quasiquote.org>

    * uim/sj3.c
      (uim_sj3_make_error_pair,
       uim_sj3_server_down_error,
       uim_sj3_undefined_error,
       uim_sj3_internal_error,
       uim_sj3_open_error,
       uim_sj3_close_error,
       uim_sj3_getkan,
       uim_sj3_douoncnt,
       uim_sj3_getdouon,
       uim_sj3_touroku_syoukyo_error,
       uim_sj3_touroku,
       uim_sj3_syoukyo):
      Gettextize.

2008-02-18 IWATA Ray <iwata@quasiquote.org>

    * uim/sj3.c
     (uim_sj3_error): Add human readable message.
     (uim_sj3_open_error): Reconstruct.
     (uim_sj3_close_error): Ditto.
     (uim_sj3_touroku_syoukyo_error): Ditto.
     (uim_sj3_make_error_pair):
     - New function. Add calling uim_notify_fatal().
     (uim_sj3_select_error): Use uim_sj3_make_error_pair().
     (uim_sj3_getkan): Add message to uim_sj3_make_error().
     (uim_sj3_douoncnt): Ditto.
     (uim_sj3_getdouon): Ditto.
     (uim_sj3_touroku): Ditto.
     (uim_sj3_syoukyo): Ditto.

2008-02-18 IWATA Ray <iwata@quasiquote.org>

    * uim/sj3.c
      (uim_sj3_open, uim_sj3_open_with_list, uim_sj3_getkan):
      - Skip pointer check.
      (uim_sj3_gakusyuu2):
      - Add comment.

2008-02-17 IWATA Ray <iwata@quasiquote.org>

    * uim/sj3.c
      (uim_sj3_open, uim_sj3_open_with_list, uim_sj3_getkan)
      Replace malloc/strdup to uim_malloc/uim_strdup.

2008-02-17 Konosuke Watanabe <sasugaanija@gmail.com>

    * emacs/key.c
      - (convert_keyname_e2u): Support all keys listed on uim/uim.h (ex. Multi_key)

2008-02-17 IWATA Ray <iwata@quasiquote.org>

    * scm/sj3.scm
      (sj3-get-nth-yomi): New function.
      (sj3-lib-get-nth-candidate): Use sj3-get-nth-yomi.
      (sj3-lib-get-nr-candidates): Ditto.
      (sj3-lib-resize-segment): Ditto.
      (sj3-lib-commit-segment): Ditto.
      (sj3-lib-get-unconv-candidate):
      Implement. sj3-transpose-* key press works fine now.

2008-02-17 IWATA Ray <iwata@quasiquote.org>

    * scm/sj3.scm (sj3-getdouon)
      - Don't search duplicate entry from douon list.
        This operation eats cputime.

2008-02-17 IWATA Ray <iwata@quasiquote.org>

    * scm/sj3.scm (sj3-getdouon)
      - Force to insert hiragana/katakana/halfkana.

2008-02-16 Jae-hyeon Park <jhyeon@gmail.com>

    * NEWS
      - update on uim-byeoru

2008-02-16 IWATA Ray <iwata@quasiquote.org>

    * scm/sj3.scm (sj3-lib-resize-segment)
      - Rewrite better shrink/stretch routine.

2008-02-16 IWATA Ray <iwata@quasiquote.org>

    * uim/sj3.c:
     - Fix copyright.

2008-02-15 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * doc/ENV
    * doc/PACKAGING
      - New file
    * doc/UIM-SH
    * doc/UIM-SCM
    * doc/00INDEX
    * doc/Makefile.am
      - Update

2008-02-15 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * NEWS
      - Update

2008-02-15 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * COPYING
      - Fix copyright for SigScheme

2008-02-15 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/im-switcher.scm
      - (imsw-iconic-label-alist): Add entries for the new IMs

2008-02-15 IWATA Ray <iwata@quasiquote.org>

    * scm/sj3.scm (sj3-lib-init):
    * scm/sj3-custom.scm (sj3-server-name):
     - Remove custom-activate-sj3-server* and
       custom-preserved-sj3-server* to avoid crash.
       pointed out by ek.kato@

2008-02-15 IWATA Ray <iwata@quasiquote.org>

    * scm/sj3.scm (sj3-lib-resize-segment):
      - Don't shrink segment length is 1. pointed out by ek.kato@

2008-02-15 IWATA Ray <iwata@quasiquote.org>

    * uim/sj3.c:
     - Add <config.h>. pointed out by ek.kato@
    * uim/sj3.c (uim_sj3_select_error):
     - Regard to more-than-one-error case. pointed out by ek.kato@
    * uim/sj3.c (uim_sj3_close, uim_sj3_lockserv, uim_sj3_unlockserv):
     - Fix strict args.

2008-02-15 IWATA Ray <iwata@quasiquote.org>

    * scm/sj3.scm (sj3-lib-resize-segment):
      - Check str = "" case.

2008-02-15 IWATA Ray <iwata@quasiquote.org>

    * scm/sj3.scm (japanese-split-euc-kana, sj3-lib-resize-segment):
      - Remove stupid function japanese-split-euc-kana.
        string-to-list works fine with multibyte string.

2008-02-13 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * qt/test/qedittest.cpp
    * gtk/test/entry.c
      - Add lacked copyright header
    * COPYING
    * emacs/COPYING
    * emacs/README.ja
    * emacs/README
    * emacs/callback.c
    * emacs/callback.h
    * emacs/candidate.c
    * emacs/candidate.h
    * emacs/commit.c
    * emacs/commit.h
    * emacs/context.c
    * emacs/context.h
    * emacs/debug.c
    * emacs/debug.h
    * emacs/encoding.c
    * emacs/encoding.h
    * emacs/helper-message.c
    * emacs/helper-message.h
    * emacs/helper-server.c
    * emacs/helper-server.h
    * emacs/helper.c
    * emacs/helper.h
    * emacs/im.c
    * emacs/im.h
    * emacs/key.c
    * emacs/key.h
    * emacs/output.c
    * emacs/output.h
    * emacs/preedit.c
    * emacs/preedit.h
    * emacs/prop.c
    * emacs/prop.h
    * emacs/uim-candidate.el
    * emacs/uim-debug.el
    * emacs/uim-el-agent.c
    * emacs/uim-el-agent.h
    * emacs/uim-el-helper-agent.c
    * emacs/uim-el-helper-agent.h
    * emacs/uim-el-types.h
    * emacs/uim-helper.el
    * emacs/uim-key.el
    * emacs/uim-keymap.el
    * emacs/uim-leim.el
    * emacs/uim-preedit.el
    * emacs/uim-util.el
    * emacs/uim-var.el
    * emacs/uim-version.el.in
    * emacs/uim.el
    * examples/uim-custom/uim-custom-dump.c
    * examples/uim-custom/uim-custom-update.c
    * examples/uim-custom/uim-custom-variable.c
    * fep/COPYING
    * fep/callbacks.c
    * fep/callbacks.h
    * fep/draw.c
    * fep/draw.h
    * fep/escseq.c
    * fep/escseq.h
    * fep/helper.c
    * fep/helper.h
    * fep/key.c
    * fep/key.h
    * fep/read.c
    * fep/read.h
    * fep/str.c
    * fep/str.h
    * fep/udsock.c
    * fep/udsock.h
    * fep/uim-fep-tick.c
    * fep/uim-fep.c
    * fep/uim-fep.h
    * gtk/caret-state-indicator.c
    * gtk/caret-state-indicator.h
    * gtk/compose.c
    * gtk/compose.h
    * gtk/gtk-im-uim.c
    * gtk/gtk-im-uim.h
    * gtk/gtk-rc-get-immodule-file.c
    * gtk/key-util-gtk.c
    * gtk/key-util-gtk.h
    * gtk/test/entry.c
    * gtk/text-util.c
    * gtk/text-util.h
    * gtk/uim-cand-win-gtk.c
    * gtk/uim-cand-win-gtk.h
    * gtk/uim-eb.c
    * gtk/uim-eb.h
    * helper/candwin-gtk.c
    * helper/dict-anthy.c
    * helper/dict-anthy.h
    * helper/dict-canna-cclass.c
    * helper/dict-canna-cclass.h
    * helper/dict-canna.c
    * helper/dict-canna.h
    * helper/dict-cclass-dialog.c
    * helper/dict-cclass-dialog.h
    * helper/dict-dict.c
    * helper/dict-dict.h
    * helper/dict-main-gtk.c
    * helper/dict-util.c
    * helper/dict-util.h
    * helper/dict-word-list-view-gtk.c
    * helper/dict-word-list-view-gtk.h
    * helper/dict-word-list-win-gtk.c
    * helper/dict-word-list-win-gtk.h
    * helper/dict-word-win-gtk.c
    * helper/dict-word-win-gtk.h
    * helper/dict-word.c
    * helper/dict-word.h
    * helper/im-switcher-gtk.c
    * helper/input-pad-ja.c
    * helper/pref-gtk-custom-widgets.c
    * helper/pref-gtk-custom-widgets.h
    * helper/pref-gtk-keytab.h
    * helper/pref-gtk.c
    * helper/toolbar-applet-gnome.c
    * helper/toolbar-common-gtk.c
    * helper/toolbar-standalone-gtk.c
    * helper/toolbar-systray-gtk.c
    * helper/uim-dict-ui.xml.in
    * notify/uim-knotify3.cc
    * notify/uim-libnotify.c
    * pixmaps/uim-m17nlib-relink-icons.in
    * qt/candwin-qt.cpp
    * qt/candwin-qt.h
    * qt/chardict/chardict-bushuviewwidget.cpp
    * qt/chardict/chardict-bushuviewwidget.h
    * qt/chardict/chardict-chargridview.cpp
    * qt/chardict/chardict-chargridview.h
    * qt/chardict/chardict-qt.cpp
    * qt/chardict/chardict-qt.h
    * qt/chardict/chardict-unicodeviewwidget.cpp
    * qt/chardict/chardict-unicodeviewwidget.h
    * qt/chardict/po/ja.po
    * qt/chardict/qtgettext.h
    * qt/immodule-candidatewindow.cpp
    * qt/immodule-candidatewindow.h
    * qt/immodule-plugin.cpp
    * qt/immodule-plugin.h
    * qt/immodule-qhelpermanager.cpp
    * qt/immodule-qhelpermanager.h
    * qt/immodule-qtextutil.cpp
    * qt/immodule-qtextutil.h
    * qt/immodule-quiminfomanager.cpp
    * qt/immodule-quiminfomanager.h
    * qt/immodule-quiminputcontext.cpp
    * qt/immodule-quiminputcontext.h
    * qt/immodule-quiminputcontext_compose.cpp
    * qt/immodule-quiminputcontext_compose.h
    * qt/immodule-quiminputcontext_with_slave.cpp
    * qt/immodule-quiminputcontext_with_slave.h
    * qt/immodule-subwindow.cpp
    * qt/immodule-subwindow.h
    * qt/pref-customwidgets.cpp
    * qt/pref-customwidgets.h
    * qt/pref-qt.cpp
    * qt/pref-qt.h
    * qt/qtgettext.h
    * qt/switcher-qt.cpp
    * qt/switcher-qt.h
    * qt/toolbar-applet-kde.cpp
    * qt/toolbar-applet-kde.h
    * qt/toolbar-common-quimhelpertoolbar.cpp
    * qt/toolbar-common-quimhelpertoolbar.h
    * qt/toolbar-common-uimstateindicator.cpp
    * qt/toolbar-common-uimstateindicator.h
    * qt/toolbar-standalone-qt.cpp
    * qt/toolbar-standalone-qt.h
    * qt4/immodule/candidatewindow.cpp
    * qt4/immodule/candidatewindow.h
    * qt4/immodule/debug.h
    * qt4/immodule/qhelpermanager.cpp
    * qt4/immodule/qhelpermanager.h
    * qt4/immodule/qtextutil.cpp
    * qt4/immodule/qtextutil.h
    * qt4/immodule/quiminfomanager.cpp
    * qt4/immodule/quiminfomanager.h
    * qt4/immodule/quiminputcontext_compose.cpp
    * qt4/immodule/quiminputcontext_compose.h
    * qt4/immodule/subwindow.cpp
    * qt4/immodule/subwindow.h
    * replace/os_dep.h
    * scm/action.scm
    * scm/anthy-custom.scm
    * scm/anthy-key-custom.scm
    * scm/anthy-utf8-custom.scm
    * scm/anthy-utf8.scm
    * scm/anthy.scm
    * scm/byeoru-custom.scm
    * scm/byeoru-dic.scm
    * scm/byeoru-key-custom.scm
    * scm/byeoru-symbols.scm
    * scm/byeoru.scm
    * scm/canna-custom.scm
    * scm/canna-key-custom.scm
    * scm/canna.scm
    * scm/custom-rt.scm
    * scm/custom.scm
    * scm/deprecated-util.scm
    * scm/direct.scm
    * scm/editline.scm
    * scm/elatin-custom.scm
    * scm/elatin-rules.scm
    * scm/elatin.scm
    * scm/generic-custom.scm
    * scm/generic-key-custom.scm
    * scm/generic.scm
    * scm/hangul.scm
    * scm/hangul2.scm
    * scm/hangul3.scm
    * scm/i18n.scm
    * scm/ichar.scm
    * scm/im-custom.scm
    * scm/im-switcher.scm
    * scm/im.scm
    * scm/init.scm
    * scm/ipa-x-sampa.scm
    * scm/iso-639-1.scm
    * scm/japanese-azik.scm
    * scm/japanese-kana.scm
    * scm/japanese.scm
    * scm/key.scm
    * scm/latin.scm
    * scm/lazy-load.scm
    * scm/load-action.scm
    * scm/look-custom.scm
    * scm/look.scm
    * scm/m17nlib.scm
    * scm/mana-custom.scm
    * scm/mana-key-custom.scm
    * scm/mana.scm
    * scm/pinyin-big5.scm
    * scm/plugin.scm
    * scm/prime-custom.scm
    * scm/prime-key-custom.scm
    * scm/prime.scm
    * scm/pyload.scm
    * scm/pyunihan.scm
    * scm/rk.scm
    * scm/scim.scm
    * scm/sj3-custom.scm
    * scm/sj3-key-custom.scm
    * scm/sj3.scm
    * scm/skk-custom.scm
    * scm/skk-dialog.scm
    * scm/skk-editor.scm
    * scm/skk-key-custom.scm
    * scm/skk.scm
    * scm/spellcheck-custom.scm
    * scm/spellcheck.scm
    * scm/tcode.scm
    * scm/trycode.scm
    * scm/tutcode-bushudic.scm
    * scm/tutcode-custom.scm
    * scm/tutcode-key-custom.scm
    * scm/tutcode-rule.scm
    * scm/tutcode.scm
    * scm/uim-db.scm
    * scm/uim-module-manager.scm
    * scm/uim-sh.scm
    * scm/ustr.scm
    * scm/util.scm
    * scm/viqr.scm
    * scm/zaurus.scm
    * test/run-test.scm
    * test/template.scm
    * test/test-action.scm
    * test/test-anthy.scm
    * test/test-custom-rt.scm
    * test/test-custom.scm
    * test/test-db.scm
    * test/test-example.scm
    * test/test-i18n.scm
    * test/test-im.scm
    * test/test-intl.scm
    * test/test-key.scm
    * test/test-lazy-load.scm
    * test/test-plugin.scm
    * test/test-slib.scm
    * test/test-uim-test-utils.scm
    * test/test-uim-util.scm
    * test/test-ustr.scm
    * test/test-util.scm
    * test/uim-test-utils.scm
    * uim/agent.c
    * uim/anthy-utf8.c
    * uim/anthy.c
    * uim/bsdlook.h
    * uim/canna.c
    * uim/editline.c
    * uim/encoding-table.c
    * uim/iconv.c
    * uim/intl.c
    * uim/look.c
    * uim/m17nlib.c
    * uim/mana.c
    * uim/plugin.c
    * uim/plugin.h
    * uim/prime.c
    * uim/rk.c
    * uim/scim.cpp
    * uim/sj3.c
    * uim/skk.c
    * uim/spellcheck.c
    * uim/test-gc.c
    * uim/uim-custom-enabler.c
    * uim/uim-custom.c
    * uim/uim-custom.h
    * uim/uim-error.c
    * uim/uim-func.c
    * uim/uim-helper-client.c
    * uim/uim-helper-server.c
    * uim/uim-helper.c
    * uim/uim-helper.h
    * uim/uim-im-switcher.h
    * uim/uim-internal.h
    * uim/uim-ipc.c
    * uim/uim-key.c
    * uim/uim-module-manager.c
    * uim/uim-notify.c
    * uim/uim-scm-abbrev.h
    * uim/uim-scm-sigscheme.c
    * uim/uim-scm.h
    * uim/uim-sh.c
    * uim/uim-util.c
    * uim/uim-util.h
    * uim/uim-x-kana-input-hack.c
    * uim/uim-x-util.h
    * uim/uim.c
    * uim/uim.h
    * xim/canddisp.cpp
    * xim/canddisp.h
    * xim/compose.cpp
    * xim/compose.h
    * xim/connection.cpp
    * xim/connection.h
    * xim/convdisp.cpp
    * xim/convdisp.h
    * xim/helper.cpp
    * xim/helper.h
    * xim/locale.cpp
    * xim/main.cpp
    * xim/util.cpp
    * xim/util.h
    * xim/xdispatch.h
    * xim/xim.h
    * xim/ximic.cpp
    * xim/ximim.cpp
    * xim/ximpacket.cpp
    * xim/ximpn.h
    * xim/ximserver.cpp
    * xim/ximserver.h
    * xim/ximtrans.cpp
      - Update copyright by following script
        svn ls -R | egrep -v '/$' | xargs perl -i -pe 's/\b(200\d)([,-\s]+200\d)*\s+uim\b/\1-2008 uim/'

2008-02-13 IWATA Ray <iwata@quasiquote.org>

    Add new japanese input method sj3.
    "Go ahead" YamaKen@.
    
    * pixmaps/Makefile.am (IM_SUBST_SVGS, IM_SUBST_PNGS):
      Add sj3.svg and sj3.png
    * configure.ac:
      Add checking sj3.
    * POTFILES.in:
      Add scm/sj3-custom.scm and scm/sj3-key-custom.scm
    * scm/sj3-key-custom.scm:
    * scm/sj3-custom.scm:
    * scm/sj3.scm:
      Add new files for new input method sj3.
      scheme code is copied from canna*.scm.
    * scm/Makefile.am (SCM_FILES):
      Add sj3.scm sj3-custom.scm sj3-key-custom.scm.
    * scm/Makefile.am:
      Add module_names.
    * uim/sj3.c:
      Add new file for scheme/sj3lib interface.
    * uim/Makefile.am
      Add sj3.c

2008-02-12 IWATA Ray <iwata@quasiquote.org>

    * scm/canna.scm (canna-proc-transposing-state):
      Fix typo.

2008-02-11 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/init.scm
      - Fix unconditional uim-notify-load call on !UIM_USE_NOTIFY

2008-02-11 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/Makefile.am
      - Install uim-notify.h even if !NOTIFY since plugins will need
        this to use uim_notify_{info,fatal}()

2008-02-11 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-notify.h
      - Add a TODO comment
    * uim/uim-error.c
      - (ERRMSG_UIM_HAS_BEEN_DISABLED): Enclose into N_()
      - (print_caught_error): Follow the message change
    * uim/uim-helper.c
      - Fix uim-notify activation on compilation
    * uim/plugin.c
    * uim/canna.c
    * uim/mana.c
    * uim/skk.c
      - Include gettext.h
      - Add N_() to various messages for uim_notify_*()
    * po/POTFILES.in
      - Add uim/{uim-error,plugin,canna,mana,skk}.c
    * notify/uim-libnotify.c
      - (uim_libnotify_notify):
        * Fix return type int to uim_bool
        * Change error message header "uim: " to "libuim: "
        * Add a FIXME comment
    * notify/uim-knotify3.cc
      - (send_knotify):
        * Change error message header "uim: " to "libuim: "
        * Add a FIXME comment

2008-02-11 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-notify.h
      - Cosmetic change

2008-02-11 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-internal.h
      - (uim_notify_info, uim_notify_fatal): Replace temporary macro
        definition with prototype decl
    * uim/uim.c
      - (uim_notify_info, uim_notify_fatal): New function for !UIM_USE_NOTIFY

2008-02-11 Konosuke Watanabe <sasugaanija@gmail.com>

    * emacs/uim-var.el
     - (uim-el-helper-agent): Fix documentation (thanks to Masato Onodera)

2008-02-11 Etsushi Kato <ek.kato@gmail.com>

    * uim/prime.c (prime_read_msg_from_ud) : Fix a bug in r5139.

2008-02-11 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-notify.h
      - (uim_notify_init, uim_notify_load, uim_notify_info,
        uim_notify_fatal, uim_notify_plugin_init, uim_notify_plugin_info,
        uim_notify_plugin_fatal): Replace return type int with uim_bool to
        indicate the semantics
    * uim/uim-internal.h
      - (uim_notify_fatal_raw): Ditto
    * uim/uim-notify.c
      - (uim_notify_init, uim_notify_load, uim_notify_info,
        uim_notify_fatal, uim_notify_fatal_raw, uim_notify_stderr_init,
        uim_notify_stderr_info, uim_notify_stderr_fatal): Ditto
    * notify/uim-libnotify.c
      - Include uim.h for uim_bool
      - (uim_libnotify_notify, uim_notify_plugin_init,
        uim_notify_plugin_info, uim_notify_plugin_fatal): Follow the
        return type change
    * notify/uim-knotify3.cc
      - Include uim.h for uim_bool
      - (uim_notify_plugin_init, send_knotify, uim_notify_plugin_info,
        uim_notify_plugin_fatal): Follow the return type change

2008-02-11 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-error.c
      - Cooperate with uim-notify iff UIM_USE_NOTIFY and compiled for libuim
      - (ERRMSG_UIM_HAS_BEEN_DISABLED): New macro
      - (print_caught_error): Fix uim-notify cooperation
    * uim/uim-internal.h
      - (uim_notify_fatal_raw): New function decl
    * uim/uim-notify.c
      - (uim_notify_fatal_raw): New function
      - (uim_notify_stderr_info, uim_notify_stderr_fatal):
        * Remove the inappropriate FIXME comment by my misrecognition
        * Replace fprintf() with fputs()s to reduce stack consumption
    * uim/Makefile.am
      - (uim_helper_server_CPPFLAGS): Add -DUIM_NON_LIBUIM_PROG as
        uim-notify workaround for uim-error.c combined with non-libuim
        program

2008-02-04 IWATA Ray <iwata@quasiquote.org>

    * uim/uim-notify.c (uim_notify_stderr_info)
     (uim_notify_stderr_fatal):
     Add newline to output string.

2008-02-01 Etsushi Kato <ek.kato@gmail.com>

    * xim/xim.h : Include <stdio.h> for FILE.

2008-01-30 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-notify.c
      - (uim_scm_notify_get_plugins, uim_scm_notify_load,
        uim_scm_notify_info, uim_scm_notify_fatal): Renamed to
        'uim_scm_' prefix-less ones since it is reserved for uim-scm
        API
      - (notify_get_plugins, notify_load, notify_info,
        notify_fatal): Renamed from above functions
      - (uim_init_notify_subrs): Follow the renamings

2008-01-30 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/Makefile.am
      - (pkginclude_HEADERS): Remove bsdlook.h
      - (libuim_skk_la_SOURCES, libuim_look_la_SOURCES,
        libuim_bsdlook_la_SOURCES): Add bsdlook.h

2008-01-30 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * configure.ac
      - Fix indentation

2008-01-30 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit make uim-notify optional
    
    * uim/uim-notify.c
      - (agent_body): Remove the static initialization (See uim_notify_init())
      - (uim_notify_init): Add uim_notify_load_stderr() invocation
    * uim/uim-internal.h
      - (uim_init_notify_subrs): Enable only if UIM_USE_NOTIFY
      - (uim_notify_info, uim_notify_fatal): Define as alias of printf if
        !UIM_USE_NOTIFY
    * uim/uim.c
      - Include uim-notify.h only if UIM_USE_NOTIFY
      - (uim_init_internal):
        * Add uim_notify_init() invocation
        * Call uim_init_notify_subrs() iff UIM_USE_NOTIFY
      - (uim_quit): Add uim_notify_quit() invocation
    * uim/Makefile.am
      - (pkginclude_HEADERS): Add uim-notify.h iff NOTIFY
      - (libuim_la_SOURCES): Add uim-notify.c iff NOTIFY
    * configure.ac
      - AC_DEFINE UIM_USE_NOTIFY
      - AM_CONDITIONAL NOTIFY
      - Add 'stderr' to $use_notify
      - Fix some uim-notify handlings

2008-01-29 Etsushi Kato <ek.kato@gmail.com>

    * uim/skk.c (search_line_from_server) : Apply patch from
      revel@muub.net (#14285).

2008-01-29 Etsushi Kato <ek.kato@gmail.com>

    * xim/locale.cpp (UTF8_Locale::utf8_to_native_str) : Oops, fix
      previsous commit.

2008-01-29 Etsushi Kato <ek.kato@gmail.com>

    * xim/compose.cpp (mb_string_to_utf8) : Make string buffer
      calculations more meaningful.
    * xim/locale.cpp (UTF8_Locale::utf8_to_native_str) : Ditto.

2008-01-29 IWATA Ray <iwata@quasiquote.org>

    * uim/uim-notify.c (uim_scm_notify_get_plugins):
      Replace strlen() to sizeof().

2008-01-28 IWATA Ray <iwata@quasiquote.org>

    * xim/compose.cpp (mb_string_to_utf8):
      Fix off-by-one and unterminated string.

2008-01-27 IWATA Ray <iwata@quasiquote.org>

    * emacs/uim-el-helper-agent.c (read_command):
      Insert empty line to buffer for error recovery.

2008-01-24 IWATA Ray <iwata@quasiquote.org>

     * emacs/uim-el-helper-agent.c (read_command)
     * fep/uim-fep.c (main_loop, recover_loop)
     * uim/prime.c (prime_read_msg_from_ud)
     * uim/skk.c (search_line_from_server)
     * uim/uim-helper-server.c (reflect_message_fragment)
     * uim/uim-helper-client.c (uim_helper_read_proc)
     * uim/uim-ipc.c (open_pipe_rw):
       OpenBSD manpage of read(2) says, error checks should
       explicitly test for -1. Some platforms allow for
       nbytes to range between SSIZE_MAX and SIZE_MAX - 2,
       in which case the return value of an error-free read()
       may appear as a negative number distinct from -1.

2008-01-15 Etsushi Kato <ek.kato@gmail.com>

    * uim/uim-notify.c (agent_body) : Fix an initialization bug from
      r5133.

2008-01-15 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-notify.c
      - (uim_scm_notify_load, uim_scm_notify_info,
        uim_scm_notify_fatal): Simplify

2008-01-15 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-notify.c
      - (my_dlfunc_t): New type
      - (dlfunc): Rewrite with my_dlfunc_t
      - (load_func): New static function
      - (uim_notify_load):
        * Simplify with load_func()
        * Replace 0 and 1 with UIM_FALSE and UIM_TRUE to indicate
          its meaning
      - (uim_notify_quit): Remove return for void

2008-01-15 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-notify.c
      - (uim_notify_load_stderr): Add lacked agent->desc initialization
      - Move definitions of stderr agent bottom of the file

2008-01-15 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-notify.c
      - (notify_desc): Removed
      - (uim_notify_load_stderr, uim_notify_load): Follow the
        removal of the variable

2008-01-15 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-notify.c
      - (struct uim_notify_agent): New type
      - (uim_notify_get_desc_func, uim_notify_init_func,
        uim_notify_quit_func, uim_notify_info_func,
        uim_notify_fatal_func): Removed
      - (agent_body, agent): New static variable
      - (uim_notify_load_stderr, uim_notify_load, uim_notify_get_desc,
        uim_notify_init, uim_notify_quit, uim_notify_info,
        uim_notify_fatal): Replace uim_notify_*_func() with agent->*() to
        indicate the pluggable notification agent model meaningful

2008-01-15 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-internal.h
      - (NOTIFY_PLUGIN_PATH, NOTIFY_PLUGIN_PREFIX, NOTIFY_PLUGIN_SUFFIX):
        Move to uim-notify.c
    * uim/uim-notify.c
      - (NOTIFY_PLUGIN_PATH, NOTIFY_PLUGIN_PREFIX, NOTIFY_PLUGIN_SUFFIX):
        Moved from uim-internal.c
    
    * uim/canna.c
      - (get_unconv_candidate): Revert uim_notify_info() to fprintf()
        since only developers should know it
    
    * uim/bsdlook.c
      - (look_print_from): Revert uim_notify_info() to fprintf() since
        bsdlook.c should not depend on libuim
    
    * uim/uim-helper.c
      - Cosmetic change

2008-01-14 IWATA Ray <iwata@quasiquote.org>

    * notify/uim-libnotify.c (uim_notify_plugin_get_desc)
    * notify/uim-knotify3.cc (uim_notify_plugin_get_desc)
      Fix function declaration.

2008-01-14 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-notify.h
    * uim/uim-notify.c
      - Replace C++-style 'uim_notify_desc*' with traditional C-style
        'uim_notify_desc *'. See bug #1483 for my opinion about it

2008-01-14 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-util.c
      - Exclude uim-notify.h
      - (dlfunc): Removed
      - (uim_scm_notify_get_plugins, uim_scm_notify_load,
        uim_scm_notify_info, uim_scm_notify_fatal): Move to uim-notify.c
      - (uim_init_util_subrs): Move uim-notify procedures initialization
        to uim_init_notify_subrs()
    * uim/uim-notify.h
      - (uim_notify_stderr_get_desc): Move to uim-notify.c
    * uim/uim-internal.h
      - (uim_init_notify_subrs): New function decl
    * uim/uim-notify.c
      - (uim_notify_stderr_get_desc):
        * Moved decl from uim-notify.h
        * Make static
      - (uim_scm_notify_get_plugins, uim_scm_notify_load,
        uim_scm_notify_info, uim_scm_notify_fatal): Moved from uim-util.c
      - (uim_init_notify_subrs): New function
    * uim/uim.c
      - (uim_init_internal): Add uim_init_notify_subrs() invocation
    
    * uim/uim-helper.c
      - (USE_UIM_NOTIFY): New macro
      - (uim_helper_check_connection_fd): Disable uim_notify
    
    * uim/uim-helper-server.c
      - Exclude uim-notify.h
      - (write_message): Revert uim_notify_fatal() to keep
        uim-helper-server independent of libuim
    * uim/Makefile.am
      - (uim_helper_server_SOURCES): Remove uim-notify.c

2008-01-14 IWATA Ray <iwata@quasiquote.org>

    * uim/uim-notify.h:
      Oops. fix date.

2008-01-14 IWATA Ray <iwata@quasiquote.org>

    * uim/uim-notify.h:
      Change license ISCL to 3-clause BSDL and contribute to uim project.

2008-01-14 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-notify.h
      - Fix the copyright header
      - Change include guard style to uim standard (although the style is
        not best, uniformity is important)
      - (struct uim_notify_desc_): Name the struct in addition to the
        typedef
      - (uim_notify_plugin_get_desc, uim_notify_get_desc,
        uim_notify_plugin_get_desc, uim_notify_stderr_get_desc): Make
        return type const
      - (uim_notify_plugin_load): Remove orphaned prototype
      - (uim_notify_stderr_init, uim_notify_stderr_quit,
        uim_notify_stderr_info, uim_notify_stderr_fatal): Removed since
        unexported
    * uim/uim-notify.c
      - (uim_notify_load_stderr):
        * Add prototype
        * Change arg type to void
      - (notify_desc): Follow the type change of uim_notify_desc
      - (uim_notify_stderr_desc):
        * Ditto
        * Unify storage definition
      - (uim_notify_load, uim_notify_get_desc_func): Follow the function
        type change
      - (uim_notify_get_desc, uim_notify_stderr_get_desc): Make return
        type const
      - (uim_notify_stderr_init, uim_notify_stderr_quit,
        uim_notify_stderr_info, uim_notify_stderr_fatal): Make static
    * uim/uim-util.c
      - (uim_scm_notify_get_plugins): Follow the type change of
        uim_notify_desc

2008-01-14 KIHARA Hideto <deton@m1.interq.or.jp>

    * scm/tutcode-custom.scm
      - (custom tutcode-enable-mazegaki-learning?): New custom variable
    * scm/tutcode.scm
      - (tutcode-save-personal-dictionary):
        Change not to save dictionary if tutcode-enable-mazegaki-learning? is #f.
      - (tutcode-prepare-commit-string): Change not to learn(reorder candidates)
        if tutcode-enable-mazegaki-learning? is #f
        (to select candidate by fixed label key on mazegaki conversion).

2008-01-14 KIHARA Hideto <deton@m1.interq.or.jp>

    * scm/tutcode-custom.scm
      - (custom tutcode-commit-candidate-by-label-key?): New custom variable
    * scm/tutcode.scm
      - (tutcode-heading-label-char-list): New variable.
      - (tutcode-commit-by-label-key, tutcode-heading-label-char?): New function.
      - (tutcode-incr-candidate-index, tutcode-decr-candidate-index): Remove.
      - (tutcode-change-candidate-index): Change to support next/prev page select.
      - (tutcode-proc-state-converting):
        Fix to be able to select next/prev page without candidate window.
        Add support of commit by label key.
      - (tutcode-get-candidate-handler):
        Change label to use tutcode-heading-label-char-list.

2008-01-14 KIHARA Hideto <deton@m1.interq.or.jp>

    * This commit add support of candidate window for tutcode
    * scm/tutcode-key-custom.scm
      - (tutcode-next-page-key, tutcode-prev-page-key): New custom key definition
    * scm/tutcode-custom.scm
      - (custom tutcode-use-candidate-window?, custom tutcode-candidate-op-count,
         custom tutcode-nr-candidate-max): New custom variable
    * scm/tutcode.scm
      - (tutcode-context-rec-spec): Add context candidate-window.
      - (tutcode-flush, tutcode-back-to-yomi-state):
        Add call to reset candidate window.
      - (tutcode-begin-conversion): Change to begin candidate window.
      - (tutcode-check-candidate-window-begin, tutcode-reset-candidate-window,
         tutcode-change-candidate-index): New function.
      - (tutcode-proc-state-converting):
        Change to use tutcode-change-candidate-index instead of
        tutcode-incr-candidate-index or tutcode-decr-candidate-index directly.
        Add support of tutcode-next-page-key, tutcode-prev-page-key.
      - (tutcode-get-candidate-handler, tutcode-set-candidate-index-handler):
        Implement

2008-01-09 Etsushi Kato <ek.kato@gmail.com>

    * notify/Makefile.am
      - (libuimnotify_libnotify_la_LIBADD)
      - (libuimnogify_knotify3_la_LIBADD)
        - Add libreplace.la for strlcpy.
    * notify/uim-knotify3.cc
    * notify/uim-libnotify.c
      - Fix #include "config.h" with <config.h> and move to the top.

2008-01-08 Konosuke Watanabe <sasugaanija@gmail.com>

    * emacs/uim-candidate.el
      - (uim-show-candidate): Disable inline candidates display mode
        while the window scrolls horizontally.

2008-01-08 Etsushi Kato <ek.kato@gmail.com>

    * gtk/Makefile.am : Fix typo.

2008-01-07 Etsushi Kato <ek.kato@gmail.com>

    * gtk/Makefile.am : Use QUERY_COMMAND macro for
      gtk-query-immodules-2.0.

2008-01-07 Etsushi Kato <ek.kato@gmail.com>

    * gtk/Makefile.am : Check existence of gtk-query-immodules-2.0
      before execution.

2008-01-07 Etsushi Kato <ek.kato@gmail.com>

    * gtk/Makefile.am : Check existence of gtk-query-immodules-2.0
      before execution.

2008-01-05 IWATA Ray <iwata@quasiquote.org>

    * emacs/README.ja: Fix typo.

2008-01-05 Konosuke Watanabe <sasugaanija@gmail.com>

    * emacs/README: update
    * emacs/README.ja: ditto

2008-01-05 IWATA Ray <iwata@quasiquote.org>

    * notify/uim-libnotify.c (uim_libnotify_notify): Add timeout.
      (uim_notify_plugin_info): Set timeout to NOTIFY_EXPIRES_DEFAULT.
      (uim_notify_plugin_fatal): Set timeout to NOTIFY_EXPIRES_NEVER.

2008-01-04 IWATA Ray <iwata@quasiquote.org>

    * notify/Makefile.am
     (libuimnotify_libnotify_la_LIBADD, libuimnotify_knotify3_la_LIBADD):
     libuim is not needed.

2008-01-04 IWATA Ray <iwata@quasiquote.org>

    * uim/skk.c (open_skkserv): Remove duplicate code.

2008-01-04 IWATA Ray <iwata@quasiquote.org>

    * uim/skk.c (open_skkserv): do while vs for. no functional change.

2008-01-04 Jae-hyeon Park <jhyeon@gmail.com>

    * scm/elatin.scm
    * scm/elatin-rules.scm
    * scm/elatin-custom.scm
      - new files for new input method elatin that performs
        Emacs-style Latin characters translation
      - elatin-rules.scm was generated from latin-pre.el, latin-post.el, and
        latin-alt.el, included in GNU Emacs 22
    
    * scm/Makefile.am
      - SCM_FILES: added elatin.scm elatin-rules.scm elatin-custom.scm
      - module_names: added "elatin"
    * pixmaps/Makefile.am
      - IM_SUBST_SVGS: added elatin.svg
      - IM_SUBST_PNGS: added elatin.png
    * po/POTFILES.in
      - added scm/elatin.scm, scm/elatin-custom.scm

2008-01-04 Etsushi Kato <ek.kato@gmail.com>

    * uim/uim-util.c (uim_scm_notify_get_plugins) : Use full path for
      dlopen(3).

2008-01-04 Etsushi Kato <ek.kato@gmail.com>

    * uim/skk.c (skk_commit_candidate) : Bug fix.

2008-01-04 Etsushi Kato <ek.kato@gmail.com>

    * xim/ximim.cpp (XimIM_impl::create_ic) : Follow the type change
      in icid.

2008-01-04 Etsushi Kato <ek.kato@gmail.com>

    * xim/xim.h
      - Use appropriate value types for icid, imid, icattr, imattr,
        and major packet number to fix compiler warning with GCC4.3.
    * xim/connection.cpp
    * xim/ximtrans.cpp
    * xim/ximic.cpp
    * xim/ximim.cpp
    * xim/convdisp.cpp
    * xim/ximpacket.cpp
      - Follow the changes in value types.
      - Suppress some compiler warnings.
    * xim/locale.cpp (utf8_wctomb)
    * xim/compose.cpp (nexttoken)
    * xim/ximserver.cpp (keyState::check_key)
      - Suppress compiler warnings.

2008-01-04 Jae-hyeon Park <jhyeon@gmail.com>

    * scm/byeoru-custom.scm
      - byeoru-layout-alist: changed the symbol 'byeoru-layout-hangul2windows
        to 'byeoru-layout-hangul2 for backward compatibility; closes #13920
        reported by Etsushi Kato and ChangBeom Yoon
      - changed the default value of byeoru-layout
        from 'byeoru-layout-hangul2windows back to 'byeoru-layout-hangul2
    
    * scm/byeoru.scm
      - changed the variable name byeoru-layout-hangul2windows to
        byeoru-layout-hangul2 to fix #13920
      - (byeoru-displace-handler): added
      - (byeoru-focus-out-handler): now closes candidate-selector if open

2008-01-04 Etsushi Kato <ek.kato@gmail.com>

    * fep/Makefile.am : Add uim_fep_tick_CPPFLAGS.

2008-01-04 IWATA Ray <iwata@quasiquote.org>

    * uim/uim-util.c (uim_scm_notify_get_plugins): Trim unused variable.
    * notify/uim-knotify3.cc: Ditto.

2008-01-04 Etsushi Kato <ek.kato@gmail.com>

    * qt4/edittest/Makefile.am : Fix r5099.

2008-01-04 Etsushi Kato <ek.kato@gmail.com>

    * qt4/edittest/Makefile.am : Fix misbehavior in 'make clean'.

2008-01-04 Etsushi Kato <ek.kato@gmail.com>

    * xim/locale.cpp : Include <string.h>.
    * xim/ximim.cpp : Include <stdio.h>.
    * xim/ximpacket.cpp : Ditto.

2008-01-04 Etsushi Kato <ek.kato@gmail.com>

    * fep/uim-fep.c
      - (check_dir)
      - (get_ud_path)
        - Move to udsock.c.
      - (main) : Plug leak.
      - Don't include uim-helper.h.
    * fep/udsock.c
      - (check_dir)
      - (get_ud_path)
        - Moved from uim-fep.c
      - (usersockname): BUG #11409.  Use ~/.uim.d/fep/backtik for the
        default socket.
      - (init_sendsocket)
      - (init_recvsocket)
        - Cleanup.
      - Include uim.h and uim-helper.h.
    * fep/udsock.h
      - Add get_ud_path().
    * fep/README: Update.
    * fep/README.ja: Ditto.
    * fep/Makefile.am (uim_fep_tick_LDADD) : Add libuim.la and remove
      libreplace.la.

2008-01-04 Etsushi Kato <ek.kato@gmail.com>

    * fep/README.ja : Update.

2008-01-04 Etsushi Kato <ek.kato@gmail.com>

    * qt4/immodule/Makefile.am : Fix misbehavior in 'make clean' with
      QT4_IMMODULE defined.

2008-01-03 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-util.c
      - (dlfunc) Add return type cast
      - (uim_scm_notify_get_plugins): Simplify with changed dlfunc() macro
    
    * uim/uim-notify.c
      - (dlfunc) Add return type cast
      - (uim_notify_load): Simplify with changed dlfunc() macro. The (void
        (*)(void)) cast is still remaining for real dlfunc()
    
    * uim/plugin.c
      - (dlfunc) Add return type cast
      - (plugin_load): Simplify with changed dlfunc() macro. The (void
        (*)(void)) cast is still remaining for real dlfunc()

2008-01-03 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-util.c
      - (uim_scm_notify_get_plugins): Fix size types
    
    * uim/canna.c
    * uim/scim.cpp
      - Include lacking uim-notify.h

2008-01-03 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * configure.ac
      - Mark --with-qt4-immodule as experimental due to the bug
        #13910 and #13911

2008-01-03 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * qt4/immodule/COPYING
      - Removed and replaced with the per-file indications
      - From now on, following files are only distributed under the
        3-clause BSD license as permitted in original GPL&BSD
        dual-license. This change is intended to unify license terms with
        other BSD-licensed codes imported from the qt3-immodule. I think
        this change will not introduce any inconvenience to the code
        users. Let me know if something is bad.
    * qt4/immodule/plugin.cpp
    * qt4/immodule/plugin.h
    * qt4/immodule/quiminputcontext.cpp
    * qt4/immodule/quiminputcontext.h
    * qt4/immodule/quiminputcontext_with_slave.cpp
    * qt4/immodule/quiminputcontext_with_slave.h
    * qt4/edittest/main.cpp
      - Prepend updated copyright and 3-clause BSD license terms

2008-01-03 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * qt4/immodule/COPYING
      - Fix the incorrect term 'the University' with 'authors'
      - Update the year part of the copyright notice

2008-01-03 Konosuke Watanabe <sasugaanija@gmail.com>

    * emacs/uim.el
      - (uim-update-font): removed
    * emacs/uim-var.el
      - (uim-preedit-face): use make-face instead of copy-face
      - (uim-separator-face): ditto
      - (uim-candidate-odd-face): ditto
      - (uim-candidate-even-face): ditto
      - (uim-candidate-selected-face): ditto
      - (uim-candidate-nth-face): ditto

2008-01-02 IWATA Ray <iwata@quasiquote.org>

    * configure.ac: Style.

2008-01-02 IWATA Ray <iwata@quasiquote.org>

    * configure.ac, notify/Makefike.am notify/uim-knotify3.cc:
      Rename knotify to knotify3

2008-01-01 Konosuke Watanabe <sasugaanija@gmail.com>

    * emacs/context.c
      - (update_context_encoding): use uim_set_client_encoding
        instead of re-creating a context to change client-side
        encoding.

2008-01-01 Jae-hyeon Park <jhyeon@gmail.com>

    * scm/byeoru.scm
      - added a 2-beol layout which works like MS-Windows IME;
        the difference from the existing (hanterm-style) 2-beol layout is that
        it maps an undefined shifted key to a jamo rather than an alphabet;
        for example, <Shift>e <Shift>k is translated to "따" instead of
        "ㄸK" as in hanterm; closes #13879;
        problem reported and patch submitted
        by ChangBeom Yoon <nidev.plontra@gmail.com>
    * scm/byeoru-custom.scm
      - follows the above addition to byeoru.scm
      - change default layout to byeoru-layout-hangul2windows
    
    * scm/byeoru-custom.scm
    * scm/byeoru-dic.scm
    * scm/byeoru-key-custom.scm
    * scm/byeoru-symbols.scm
    * scm/byeoru.scm
      - moved emacs mode and coding specs to the end of each file
        for cosmetic reasons

2008-01-01 IWATA Ray <iwata@quasiquote.org>

    * scm/im-custom.scm
      - (notify-agent): Remove hook.

2008-01-01 IWATA Ray <iwata@quasiquote.org>

    * uim/uim-notify.c
      - (uim_notify_load): Accessing notify_desc should be checked before dlclose.

2008-01-01 IWATA Ray <iwata@quasiquote.org>

    * uim/uim-notify.c
      - (uim_notify_get_desc): New function.
    * uim/uim-notify.c
      - (uim_notify_load_stderr): Initialize notify_desc.
    * uim/uim-notify.c
      - (uim_notify_stderr_get_desc): New function.
    * notify/uim-libnotify.c
      - (uim_notify_plugin_get_desc): ditto.
    * notify/uim-knotify.cc
      - (uim_notify_plugin_get_desc): ditto.
    * uim/uim-notify.c
      - (uim_notify_stderr_init, uim_notify_stderr_quit)
        (uim_notify_stderr_info, uim_notify_stderr_fatal):
        Make global.
    * uim/uim-notify.h
      - ditto.
    * uim/uim-util.c
      - (uim_scm_notify_get_plugins): Change return values as
        '(name "name" "description").
        Get description from uim_notify_plugin_get_desc() via dlopen.
    * scm/im-custom.scm
      - (notify-agent): Remove kludge.

2007-12-31 IWATA Ray <iwata@quasiquote.org>

    * notify/uim-knotify.cc
      - (send_knotify): Correct arguments, add level mask,
        remove shadowed parameter.
      - (uim_notify_plugin_info, uim_notify_plugin_fatal): Simply.

2007-12-31 IWATA Ray <iwata@quasiquote.org>

    * notify/uim-knotify.cc
      - (send_knotify): Remove duplicate banner.

2007-12-31 IWATA Ray <iwata@quasiquote.org>

    * notify/uim-knotify.cc
      - (send_knotify): New function. Change funcall manner KDE3 API to DCOP API.
      - (uim_notify_plugin_info, uim_notify_plugin_fatal): Call send_knotify.

2007-12-31 IWATA Ray <iwata@quasiquote.org>

    * notify/uim-libnotify.h, notify/uim-knotify.h
      - bye bye

2007-12-31 IWATA Ray <iwata@quasiquote.org>

    * uim/uim-notify.c
      - (uim_notify_load): Rename plugin function name
        uim_notify_foo -> uim_notify_plugin_foo and remove va_list.
    
    * uim/uim-notify.h
      - (uim_notify_plugin_load, uim_notify_plugin_init, uim_notify_plugin_quit
         uim_notify_plugin_info uim_notify_plugin_fatal) : Add plugin functions.
    
    * notify/uim-knotify.cc
      - (uim_notify_plugin_info, uim_notify_plugin_fatal): Plugin API Change.
    
    * notify/uim-libnotify.c
      - (uim_notify_plugin_info, uim_notify_plugin_fatal): ditto.
    
    * notify/Makefile.am
      - (libuimnotify_knotify_la_SOURCES, libuimnotify_libnotify_la_SOURCES):
      Remove headers.

2007-12-31 IWATA Ray <iwata@quasiquote.org>

    * uim/uim-notify.h
      - (NOTIFY_PLUGIN_PATH, NOTIFY_PLUGIN_PREFIX, NOTIFY_PLUGIN_SUFFIX):
        Remove macros.

2007-12-30 IWATA Ray <iwata@quasiquote.org>

    * uim/uim-internal.h
      - (NOTIFY_PLUGIN_PATH, NOTIFY_PLUGIN_PREFIX, NOTIFY_PLUGIN_SUFFIX):
      Move to uim-internal.h

2007-12-30 IWATA Ray <iwata@quasiquote.org>

    * uim/uim-notify.c
      - (uim_notify_load): dlclose when dlfunc failed.

2007-12-30 IWATA Ray <iwata@quasiquote.org>

    * uim/uim-notify.c
      - (uim_notify_load): Plug handle leak.
      - (uim_notify_load_stderr): New function.

2007-12-30 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim.c
      - (uim_set_client_encoding): Remove unneeded type check

2007-12-30 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim.c
      - (uim_set_client_encoding): Fix unchanged converter objects
    * uim/uim-internal.h
      - (uim_set_encoding): New function decl
    * uim/uim-func.c
      - (im_set_encoding): Split uim_set_encoding() off
      - (uim_set_encoding): New function splitted from im_set_encoding()
    * scm/im.scm
      - Require SRFI-2
      - (uim-context-encoding): New procedure

2007-12-29 Etsushi Kato <ek.kato@gmail.com>

    * mana.c
    * plugin.c
    * uim-helper.c
    * uim-helper-server.c
    * skk.c
      - Include uim-notify.h.
    * uim-notify.c
      - Suppress compilation warnings.

2007-12-29 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim.h
      - (uim_set_client_encoding): New function decl
    * uim/uim.c
      - (uim_set_client_encoding): New function
    * doc/COMPATIBILITY
      - Add section "New API for client encoding change"

2007-12-27 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim.c
      - (uim_release_context): Add zero clear for debug

2007-12-25 IWATA Ray <iwata@quasiquote.org>

    	* notify/Makefile.am (libuimnotify_libnotify_la_SOURCES)
    	(libuimnotify_knotify_la_SOURCES): add header files.

2007-12-25 IWATA Ray <iwata@quasiquote.org>

    	* uim/uim-notify.h, uim/uim-notify.c, uim/uim-util.c
    	: add UIM_NOTIFY_INTERNAL guard.
    
    	* uim/Makefile.am (pkginclude_HEADERS): install uim-notify.h

2007-12-25 IWATA Ray <iwata@quasiquote.org>

    	* uim/uim-notify.c (uim_notify_stderr_info)
    	(uim_notify_stderr_fatal): stderr, not stdout.

2007-12-25 IWATA Ray <iwata@quasiquote.org>

    	* configure.ac: oops, automake version is 1.10, revert.

2007-12-25 IWATA Ray <iwata@quasiquote.org>

    	* uim-knotify.cc(uim_notify_init): add missing variables.

2007-12-25 IWATA Ray <iwata@quasiquote.org>

    	* uim-knotify.cc: change function name to correct uim-notify API.

2007-12-25 IWATA Ray <iwata@quasiquote.org>

    	* uim/uim-helper-server.c (write_message):
    	* uim/plugin.c (plugin_load):
    	* uim/uim-helper.c (uim_helper_check_connection_fd):
    	* uim/canna.c (create_context, get_unconv_candidate):
    	* uim/skk.c (expand_str, open_skkserv):
    	* uim/mana.c (mana_ipc_send_command, mana_init):
    	* uim/scim.cpp (init_scim, alloc_id):
    	* uim/bsdlook.c (look_print_from): replacement fprintf to uim_notify_fatal.
    
    	* notify/uim-knotify.cc: add support KDE notify, but not tested.
    
    	* notify/uim-libnotify.cc: add support 'libnotify'.
    
    	* configure.ac, uim/uim-notify.h, uim/uim-notify.c:
    	* uim/uim-error.c:
    	* uim/uim-util.c (uim_init_util_subrs):
    	* scm/init.scm:
    	* scm/im-custom.scm (notify-agent): add notify.

2007-12-19 Konosuke Watanabe <sasugaanija@gmail.com>

    * This change modifies versioning rule of uim.el.
      Now, uim-el-version command returns a same version as uim.
      uim-version.el is generated automatically at the make stage
      when the configure is executed with --enable-maintainer-mode
      option.
    
    * emacs/uim-var.el
      - (uim-el-version): Move to uim-version.el
      - include uim-version.el
    
    * emacs/uim-version.el.in
      - New file
      - Template for uim-version.el
    
    * emacs/Makefile.am
      - (EXTRA_DIST): Add uim-version.el.in
      - (dist_uimel_lisp_DATA): Add uim-var.el
      - Add a rule to make uim-version.el

2007-12-15 Konosuke Watanabe <sasugaanija@gmail.com>

    * emacs/uim.el
      - Run uim-load-hook at the end of loading.
    
    * emacs/uim-var.el
      - (uim-load-hook): New variable

2007-12-15 Konosuke Watanabe <sasugaanija@gmail.com>

    * emacs/uim-keymap.el
      - (uim-reorder-minor-mode-map-alist): New function which moves
        uim-mode-map to the top of the minor-mode-map-alist.

2007-12-14 Konosuke Watanabe <sasugaanija@gmail.com>

    * emacs/uim.el
      - (uim-update-font):
        * Now, this function can be called as a command.
        * Do nothing if the Emacs is running on the terminal.

2007-12-12 KIHARA Hideto <deton@m1.interq.or.jp>

    * scm/trycode.scm
      - (trycode-rule): update to 2007-12-10 version: add one kanji.

2007-12-12 Etsushi Kato <ek.kato@gmail.com>

    * xim/ximserver.cpp (InputContext::review_im) : Fix segfault upon
      IM toggle with incompatible encoding.

2007-12-08 Konosuke Watanabe <sasugaanija@gmail.com>

    * emacs/uim-util.el
      - (uim-replace-tab): Comment out debug message
      - (uim-tab-pad-space): ditto
      - (uim-goto-char): ditto

2007-12-08 Konosuke Watanabe <sasugaanija@gmail.com>

    * emacs/uim-candidate.el
      - (uim-merge-candidate): Avoid buffer breaks caused by use of
        proportional fonts.
      - (uim-show-candidate): cosmetic change

2007-11-22 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/latin.scm
      - (latin-proc-composing-state): Fix eq? for integer with eqv?

2007-11-13 KIHARA Hideto <deton@m1.interq.or.jp>

    * scm/tutcode.scm
      - (action_tutcode_direct, action_tutcode_hiragana, action_tutcode_katakana):
        Fix to support Henkan state.

2007-11-11 KIHARA Hideto <deton@m1.interq.or.jp>

    * scm/tutcode.scm
      - (tutcode-flush): Fix not to set state on if current state is off.
        <http://arika.org/diary/20071021#p01>

2007-11-08 Etsushi Kato <ek.kato@gmail.com>

    fep/README.ja : Update.

2007-11-08 Etsushi Kato <ek.kato@gmail.com>

    * uim/skk.c (skk_save_personal_dictionary) : Use 0600 mode,
      patched by anonymous in http://uimwikija.mw.cmssquare.com/.

2007-11-06 KIHARA Hideto <deton@m1.interq.or.jp>

    * uim-util.h: Fix compile error on Solaris10: #include <sys/types.h> for pid_t

2007-10-29 KIHARA Hideto <deton@m1.interq.or.jp>

    * scm/tutcode.scm
      - (tutcode-key-press-handler): Fix to be able to select URL candidate
        at Firefox URL field. <http://arika.org/diary/20071021#p02>
      - (tutcode-state-has-preedit?): Add.
      - (tutcode-update-preedit): Remove unused variable.

2007-10-25 Etsushi Kato <ek.kato@gmail.com>

    * scm/prime.scm
      - (prime-candidates-get-nth)
      - (prime-candidates-get-length)
      - (prime-candidates-get-index)
        - Fix to use 'eq?' instead of '='.

2007-10-25 Etsushi Kato <ek.kato@gmail.com>

    * scm/prime.scm (prime-keymap-child-fund-state) : Don't handle
      prime-app-mode-start-key? in the state.

2007-10-25 Etsushi Kato <ek.kato@gmail.com>

    * scm/prime.scm
      - (prime-editor-cursor-move)
      - (prime-editor-backspace-char)
      - (prime-editor-delete-char)
        - Bug fix for r4393.

2007-10-20 Konosuke Watanabe <sasugaanija@gmail.com>

    * emcas/uim.el
      - (uim-process-input): wait the next input using with-timeout and
        read-key-sequence-vector instead of sit-for to handle
        keys which are bound to keyboard-quit.

2007-10-20 Konosuke Watanabe <sasugaanija@gmail.com>

    * emacs/uim-key.el
      - (uim-process-key-vector): don't display "... is undefined" on
        Emacs-21 and older version.

2007-10-20 Konosuke Watanabe <sasugaanija@gmail.com>

    * emacs/uim-key.el
      - (uim-process-key-vector): set uim-keystroke-displaying to nil
        to display the message "... is undefined" in the echo area.
      - (uim-translate-key): remove ineffective flag and protection.
    * emacs/uim.el
      - (uim-reset-input-parameter): New function (just separated from
        uim-process-input)
      - (uim-process-input)
        * bind inhibit-quit to t while calling the sit-for function
        to process commands which are bound to C-g-terminated keys.
        * protect whole of the function.

2007-10-17 Etsushi Kato <ek.kato@gmail.com>

    * helper/toolbar-common-gtk.c (uim_toolbar_trayicon_new) : Set
      focus-padding 0.

2007-10-16 Etsushi Kato <ek.kato@gmail.com>

    * scm/latin.scm (latin-proc-composing-state) : Use 'eq?' instead
      of '='.

2007-10-16 Etsushi Kato <ek.kato@gmail.com>

    * scm/prime-custom.scm
      - Add a hook for prime-custom-app-mode-vi?
    * scm/prime.scm
      - (prime-configure-app-mode-vi) : New.
      - (prime-release-key-handler) : Don't call
        prime-update-key-release in prime-mode-application.

2007-10-09 Konosuke Watanabe <sasugaanija@gmail.com>

    * NEWS
      - Update

2007-09-30 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * m4/Makefile.am
      - (EXTRA_DIST): Add lacked ax_path_qmake4.m4

2007-09-30 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * configure.ac
      - s/KDE/KDE3/ for some messages

2007-09-30 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit make libuim-bsdlook uninstalled and static link
    
    * uim/libtool-version.mk
      - (libuim_bsdlook_version): Removed
    * uim/Makefile.am
      - (lib_LTLIBRARIES): Remove libuim-bsdlook.la
      - (noinst_LTLIBRARIES): Add libuim-bsdlook.la
      - (libuim_bsdlook_la_LDFLAGS): Removed

2007-09-30 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * configure.ac
      - Add a FIXME comment for perror(3)
    * uim/uim-helper.c
      - (uim_helper_send_message): Replace fprintf() with perror() to
        investigate what kind of error is raised on No.869 of [uim thread
        7]. Thanks for the report

2007-09-30 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * qt4/immodule/debug.h
      - New file
      - (qDebug): Redefine as dummy macro if QT_NO_DEBUG. Thanks UTUMI
        Hirosi for the report
    * qt4/immodule/plugin.cpp
    * qt4/immodule/quiminputcontext.cpp
    * qt4/immodule/candidatewindow.cpp
      - Include debug.h
    * qt4/immodule/quiminputcontextplugin.pro.in
      - (HEADERS): Add debug.h
    * qt4/immodule/Makefile.am
      - (EXTRA_DIST): Ditto

2007-09-29 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * m4/ax_path_qmake4.m4
      - New file
    * configure.ac
      - Replace QMAKE_QT4 handlings with AX_PATH_QMAKE4. This resolves
        finding a non-qt4 qmake as qmake4. Thanks UTUMI Hirosi for letting
        me know it

2007-09-29 Konosuke Watanabe <sasugaanija@gmail.com>

    * Fix bug: C-u C-x f always set fill-column to 4.
      - C-u generates listified prefix-argument (i.e. '(4)),
        and some commands, such as set-fill-column, distinguish
        a listified prefix-argument and a numeric one.
        However, uim.el always convert prefix-argument to
        a numeric value by using prefix-numeric-value,
        and thus C-u C-x f doesn't perform correctly.
        Thanks Jae-hyeon for the report.
    
    * emacs/uim.el
     - (uim-process-input): Don't convert raw prefix argument to
        numeric variable  before calling the uim-process-key-vector.
     - (uim-process-agent-output): Ditto

2007-09-28 Etsushi Kato <ek.kato@gmail.com>

    * scm/canna.scm (canna-proc-transposing-state)
      - Same checks as in r5018.
    * scm/mana.scm (mana-proc-transposing-state)
      - Ditto.

2007-09-27 Jae-hyeon Park <jhyeon@gmail.com>

    * scm/anthy.scm
      - (anthy-proc-transposing-state): state can be #f;
        check the value of state before comparing it with an integer using =
    * scm/anthy-utf8.scm
      - (anthy-utf8-proc-transposing-state): ditto

2007-09-27 Jae-hyeon Park <jhyeon@gmail.com>

    * scm/anthy.scm
    * scm/anthy-utf8.scm
      - (anthy-move-prediction-in-page): fixed a comparison using =
        of compensated-pageidx (an integer) and #f

2007-09-26 Konosuke Watanabe <sasugaanija@gmail.com>

    * Fix bug: Shift + Space is unavailable
      - Shift + Space is translated into Space before uim process it...
        Thanks Jae-hyeon for the report.
    
    * emacs/uim.el
      - (uim-process-agent-output): Remove shift key from a key vector
        returned from uim when possible.
    
    * emacs/uim-key.el
      - (uim-check-shift) : New function to check a shift-modifier
        of a key vector.
      - (uim-translate-key): Delete shift-removing parts.

2007-09-24 Konosuke Watanabe <sasugaanija@gmail.com>

    * emacs/uim-key.el
     - (uim-key-binding): Fix bug; uim-key-binding causes an error
      when the bind is string.

2007-09-24 Konosuke Watanabe <sasugaanija@gmail.com>

    * emacs/uim-key.el
     - (uim-key-binding): Support autoloaded keymap for Emacs20.

2007-09-24 Konosuke Watanabe <sasugaanija@gmail.com>

    * Add workaround for Emacs21
       Some key-binds defined in key-translation-map require a
       2nd character in japanese environment and they call
       read-char-exclusive command.
    
       However, when such key-binds are called by command-execute
       function, read-char-exclusive function always returns -1
       and then the key-binds cause the errors.
    
       This change introduces a workaround of this problem by wrapping
       the read-char-exclusive function.
    
    * emacs/uim-key.el
      - (uim-read-char-exclusive-override): New function to override
        read-char-exclusive
      - (uim-read-char-exclusive-restore): New function to restore
        original read-char-exclusive
    
    * emacs/uim.el
      - (uim-mode-on): Call uim-read-char-exclusive-override
      - (uim-mode-off): Call uim-read-char-exclusive-restore
    
    * emacs/uim-var.el
      - (uim-read-char-exclusive-original): New variable to save original
        read-char-exclusive

2007-09-24 Konosuke Watanabe <sasugaanija@gmail.com>

    * emacs/uim-key.el
      - (uim-this-command-keys-restore): Add uim-this-command-keys-original
       check

2007-09-24 Konosuke Watanabe <sasugaanija@gmail.com>

    * This change makes uim.el to restore the original
      this-command-keys when uim-mode is turned off.
    
    * emacs/uim-key.el
      - (uim-backup-this-command-keys): Removed (merge with
        uim-this-command-keys-override)
      - (uim-this-command-keys-override):
        * Merge uim-this-command-keys-override
        * use fset instead of defun
      - (uim-this-command-keys-restore): New function to restore
        original this-command-keys
    
    * emacs/uim.el
      - (uim-init): Remove uim-this-command-keys-override
      - (uim-mode-on): Call uim-this-command-keys-override
      - (uim-mode-off): Call uim-this-command-keys-restore

2007-09-24 Konosuke Watanabe <sasugaanija@gmail.com>

    * emacs/uim-key.el
     - (uim-this-command-keys-override): Keep the original function's
      documentation.

2007-09-22 Etsushi Kato <ek.kato@gmail.com>

    * uim/prime.c (prime_read_msg_from_ud) : Change to remove last
      "\n" when using unix domain socket to follow the change in
      r5006 and/or r4693.

2007-09-22 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * configure.ac
      - Error if --enable-qt4-immodule and $QMAKE_QT4 is not found

2007-09-22 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * qt4/immodule/quiminputcontext.cpp
      - (QUimInputContext::getPreeditAttrs): Fix lacking microfocus
        setting on 'selected' cursor-attr segment. Thanks No.861 of
        [uim thread 7] for the report

2007-09-22 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit fix the initial fatal error of uim-prime
    
    * scm/prime.scm
      - (prime-engine-send-command):
        * Revert the wrong fix r4926 based on a misunderstanding about the
          new string-split specification (and my incorrect comment sorry)
        * Simplify with drop-right! (no logic is changed)
        * Fix the incorrect comment
        * Add expected result and result-lines as a comment
      - (prime-util-string-split): Add a comment about string-split

2007-09-22 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit make 'make distcheck' passed
    
    * configure.ac
      - Add AM_CONDITIONAL QT4_IMMODULE
      - Add qt4/immodule/Makefile qt4/edittest/Makefile to AC_CONFIG_FILES
      - Prepend ${ac_abs_top_{src,build}dir} to qmake invocation
    * Makefile.am
      - (SUBDIRS): Make qt4 optional in accordance with QT4_IMMODULE
    * qt4/edittest/Makefile.am
    * qt4/immodule/Makefile.am
      - New file to handle 'make dist'
      - Add delegation to Makefile.qmake
    
    * pixmaps/Makefile.am
    * pixmaps/uim-m17nlib-relink-icons.in
      - Fix DESTDIR handling
    
    * po/POTFILES.in
      - Update
      - Remove spellcheck-custom.scm and qtgettext.h

2007-09-21 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit port the Japanese kana-input hack from Qt3 immodule. And
      is correctly working
    
    * qt4/immodule/plugin.cpp
      - Include QX11Info and uim-x-util.h
      - (UimInputContextPlugin::uimInit): Add uim_x_kana_input_hack_init()
    * qt4/immodule/quiminputcontext.h
      - (UIM_QT_USE_JAPANESE_KANA_KEYBOARD_HACK): New macro
      - (QUimInputContext::x11FilterEvent): New function decl
    * qt4/immodule/quiminputcontext.cpp
      - Include Xlib.h and uim-x-util.h
      - (QUimInputContext::x11FilterEvent): Port the kana-input hack from
        Qt3 immodule
    * qt4/immodule/quiminputcontextplugin.pro.in
      - (LIBS): Add -luim-x-util
      - (QMAKE_LIBDIR): Add uim/.libs

2007-09-21 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * qt4/immodule/quiminputcontextplugin.pro.in
      - Revert libtool-linking to default one since libtool-linking
        does not handle plugin well
      - (QMAKE_LIBDIR): Replace replace/ with replace/.libs
      - (QMAKE_LINK_SHLIB_CMD): Removed

2007-09-21 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * qt4/immodule/quiminputcontext_compose.cpp
      - Include config.h
      - (XLIB_DIR): Removed and replaced with configured one
      - (strlcpy): Removed and replaced with libreplace
    * qt4/immodule/quiminputcontextplugin.pro.in
      - (INCLUDEPATH, QMAKE_LIBDIR): Add replace/
      - (LIBS): Add -lreplace
      - (QMAKE_CFLAGS_DEBUG, QMAKE_CFLAGS_RELEASE, QMAKE_CXXFLAGS_DEBUG,
        QMAKE_CXXFLAGS_RELEASE): Add @X_CFLAGS@
      - (QMAKE_LINK_SHLIB_CMD): Define as libtool --mode=link to handle
        libreplace.la

2007-09-21 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * qt4/immodule/quiminputcontext.cpp
      - (QUimInputContext::setFocusWidget): Fix lacking supermethod
        call to set the widget

2007-09-21 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit make Qt4 immodule configurable and installable via
      top-level make
    
    * qt4/immodule/plugin.cpp
      - (UimInputContextPlugin::createLanguageList): Return JKC* as same
        as Qt3 immodule
    * qt4/immodule/quiminputcontext.cpp
      - (QUimInputContext::setMicroFocus): Suppress warning
    * qt4/immodule/quiminputcontextplugin.pro.in
      - New file copied from quiminputcontextplugin.pro
      - Cooperate with configure
    * qt4/immodule/quiminputcontextplugin.pro
    * qt4/immodule/install
      - Removed
    * qt4/Makefile.am
      - New file
      - (SUBDIRS): Add immodule and edittest
    * Makefile.am
      - (SUBDIRS): Add qt4
    * configure.ac
      - Add AC_PATH_PROGS for qmake-qt4
      - Add --with-qt4-immodule
      - (QT_CONFIG_OPTS): set 'debug' or 'release' in accordance with
        --enable-debug
      - Add qt4/Makefile and qt4/immodule/quiminputcontextplugin.pro to
        AC_CONFIG_FILES
      - Add qmake invocation for qt4/immodule/Makefile and
        qt4/edittest/Makefile

2007-09-21 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * qt4/edittest/edittest.pro
      - (QT): Add qt3support
    * qt4/edittest/main.cpp
      - (main): Replace withdrawn QVBoxWidget with Q3VBox

2007-09-21 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * qt4/immodule/edittest
      - Move to qt4/edittest
    * qt4/edittest
      - Moved from qt4/immodule/edittest

2007-09-21 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * qt4
    * qt4/immodule
      - New directory
    * qt/quiminputcontextplugin-qt4
    * qt/quiminputcontextplugin-qt4/COPYING
    * qt/quiminputcontextplugin-qt4/INDENT
    * qt/quiminputcontextplugin-qt4/README.en
    * qt/quiminputcontextplugin-qt4/README.ja
    * qt/quiminputcontextplugin-qt4/candidatewindow.cpp
    * qt/quiminputcontextplugin-qt4/candidatewindow.h
    * qt/quiminputcontextplugin-qt4/edittest
    * qt/quiminputcontextplugin-qt4/edittest/README
    * qt/quiminputcontextplugin-qt4/edittest/edittest.pro
    * qt/quiminputcontextplugin-qt4/edittest/main.cpp
    * qt/quiminputcontextplugin-qt4/install
    * qt/quiminputcontextplugin-qt4/plugin.cpp
    * qt/quiminputcontextplugin-qt4/plugin.h
    * qt/quiminputcontextplugin-qt4/qhelpermanager.cpp
    * qt/quiminputcontextplugin-qt4/qhelpermanager.h
    * qt/quiminputcontextplugin-qt4/qtextutil.cpp
    * qt/quiminputcontextplugin-qt4/qtextutil.h
    * qt/quiminputcontextplugin-qt4/quiminfomanager.cpp
    * qt/quiminputcontextplugin-qt4/quiminfomanager.h
    * qt/quiminputcontextplugin-qt4/quiminputcontext.cpp
    * qt/quiminputcontextplugin-qt4/quiminputcontext.h
    * qt/quiminputcontextplugin-qt4/quiminputcontext_compose.cpp
    * qt/quiminputcontextplugin-qt4/quiminputcontext_compose.h
    * qt/quiminputcontextplugin-qt4/quiminputcontext_with_slave.cpp
    * qt/quiminputcontextplugin-qt4/quiminputcontext_with_slave.h
    * qt/quiminputcontextplugin-qt4/quiminputcontextplugin.pro
    * qt/quiminputcontextplugin-qt4/subwindow.cpp
    * qt/quiminputcontextplugin-qt4/subwindow.h
      - Move to qt4/immodule

2007-09-21 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * qt/quiminputcontextplugin-qt4/quiminputcontext.cpp
      - (QUimInputContext::~QUimInputContext): Merge lacking
        mCompose finalization from Qt3 immodule

2007-09-21 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit merge X Compose handlings from Qt3 immodule
    
    * qt/quiminputcontextplugin-qt4/quiminputcontext.h
      - (DefTree): New type
      - (QUimInputContext::mTreeTop, QUimInputContext::mCompose): New
        variable merged from Qt3 immodule
      - (QUimInputContext::create_compose_tree,
        QUimInputContext::get_compose_filename,
        QUimInputContext::TransFileName,
        QUimInputContext::ParseComposeStringFile,
        QUimInputContext::FreeComposeTree,
        QUimInputContext::parse_compose_line,
        QUimInputContext::get_mb_string, QUimInputContext::get_encoding,
        QUimInputContext::get_lang_region): New function decl merged from
        Qt3 immodule
    * qt/quiminputcontextplugin-qt4/quiminputcontext.cpp
      - (QUimInputContext::mTreeTop): New variable
      - (QUimInputContext::QUimInputContext,
        QUimInputContext::filterEvent, QUimInputContext::reset): Merge X
        Compose handling from Qt3 immodule
    * quiminputcontext_compose.h
      - New file copied from immodule-quiminputcontext_compose.h
    * quiminputcontext_compose.cpp
      - New file copied from immodule-quiminputcontext_compose.cpp
    * qt/quiminputcontextplugin-qt4/quiminputcontextplugin.pro
      - Add quiminputcontext_compose.{h,cpp}

2007-09-21 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit merge most updates of Qt3 immodule (except for X Compose
      cooperation)
    
    * quiminputcontext.h
      - Merge updates of Qt3 immodule
      - (QUimInputContext::reloadUim, QUimInputContext::textUtil,
        QUimInputContext::saveContext, QUimInputContext::restoreContext,
        QUimInputContext::switch_app_global_im_cb,
        QUimInputContext::switch_system_global_im_cb,
        QUimInputContext::switch_app_global_im,
        QUimInputContext::switch_system_global_im): New function decl
        merged from Qt3 immodule
      - (QUimInputContext::mTextUtil): New variable merged from Qt3
        immodule
      - (QUimInputContext::getPreeditString,
        QUimInputContext::getPreeditCursorPosition): Change from private
        to public to follow Qt3 immodule
    * quiminputcontext.cpp
      - Merge updates of Qt3 immodule
      - (QUimInputContext::QUimInputContext,
        QUimInputContext::~QUimInputContext): Merge updates of Qt3 immodule
      - (QUimInputContext::createUimContext): Add callbacks for im
        switching and text acquisition
      - (QUimInputContext::filterEvent): Improve key handling
      - (QUimInputContext::setFocus): Remove uim_prop_label_update()
      - (QUimInputContext::reloadUim,
        QUimInputContext::switch_app_global_im_cb,
        QUimInputContext::switch_system_global_im_cb,
        QUimInputContext::saveContext, QUimInputContext::restoreContext,
        QUimInputContext::switch_app_global_im,
        QUimInputContext::switch_system_global_im, unicodeToUKey): New
        function merged from Qt3 immodule
    * qtextutil.h
      - New file copied from qt/immodule-qtextutil.h
    * qtextutil.cpp
      - New file copied from qt/immodule-qtextutil.cpp
      - (QUimTextUtil::acquirePrimaryText,
        QUimTextUtil::acquirePrimaryTextInQTextEdit,
        QUimTextUtil::acquireSelectionText,
        QUimTextUtil::acquireSelectionTextInQTextEdit,
        QUimTextUtil::deletePrimaryText,
        QUimTextUtil::deletePrimaryTextInQTextEdit,
        QUimTextUtil::deleteSelectionText,
        QUimTextUtil::deleteSelectionTextInQTextEdit,
        QUimTextUtil::QTextEditPositionBackward,
        QUimTextUtil::QTextEditPositionForward): Adapt to Qt4 (but Qt4's
        QTextEdit is not supported yet)
    * quiminputcontextplugin.pro
      - Add qtextutil.{h,cpp}

2007-09-21 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit make uim-helper IPC and focus handlings working. Now
      toolbars are synced with this immodule
    
    * qt/quiminputcontextplugin-qt4/quiminputcontext.h
      - (QUimInputContext::setFocus, QUimInputContext::unsetFocus): Change
        from public to protected. Qt4 withdrew the functions from
        QInuputContext
      - (QUimInputContext::commitString): Change from private to public
      - (QUimInputContext::setFocusWidget): Add function decl
      - (QUimInputContext::createUimInfo, struct UIMInfo): Removed
    * qt/quiminputcontextplugin-qt4/quiminputcontext.cpp
      - (uimInfo, QUimInputContext::createUimInfo): Removed
      - (QUimInputContext::QUimInputContext): Fix QUimHelperManager
        instantiation timing
      - (QUimInputContext::setFocusWidget): New function. This func
        dispatches the focus handling to setFocus() and unsetFocus()
      - (QUimInputContext::setFocus, QUimInputContext::unsetFocus): Add
        uim focus handlings (ported from Qt3's immodule)
      - (QUimInputContext::reset): Add preedit clearance
      - (QUimInputContext::update): Modify debug message
      - (QUimInputContext::identifierName): Modify to "uim-<im>" to "uim"
      - (QUimInputContext::pushbackPreeditString): Cleanup
    * qt/quiminputcontextplugin-qt4/qhelpermanager.h
      - Re-copied from qt/immodule-qhelpermanager.h
      - (class QUimHelperManager): Change base class to public
      - (QUimHelperManager::QUimHelperManager): Remove 2nd arg to adapt to Qt4
    * qt/quiminputcontextplugin-qt4/qhelpermanager.cpp
      - Re-copied from qt/immodule-qhelpermanager.cpp
      - (contextList, QUimHelperManager::QUimHelperManager,
        QUimHelperManager::slotStdinActivated,
        QUimHelperManager::parseHelperStr,
        QUimHelperManager::parseHelperStrImChange,
        QUimHelperManager::sendImList,
        QUimHelperManager::send_im_change_whole_desktop,
        QUimHelperManager::update_prop_list_cb,
        QUimHelperManager::update_prop_label_cb): Adapt to Qt4
    * qt/quiminputcontextplugin-qt4/plugin.h
      - Port updates of qt/immodule-plugin.h
      - (UimInputContextPlugin::getQUimInfoManager): New function decl
      - (UimInputContextPlugin::infoManager): New variable decl
    * qt/quiminputcontextplugin-qt4/plugin.cpp
      - Port updates of qt/immodule-plugin.cpp
      - Include quiminfomanager.h
      - (UimInputContextPlugin::infoManager): New variable
      - (UimInputContextPlugin::getQUimInfoManager): New function
      - (UimInputContextPlugin::uimInit, UimInputContextPlugin::uimQuit):
        Add QUimInfoManager handlings
    * qt/quiminputcontextplugin-qt4/quiminfomanager.h
      - Copied from qt/immodule-quiminfomanager.h
      - Adapt to Qt4
    * qt/quiminputcontextplugin-qt4/quiminfomanager.cpp
      - Copied from qt/immodule-quiminfomanager.cpp
      - Adapt to Qt4
    * qt/quiminputcontextplugin-qt4/quiminputcontextplugin.pro
      - Add quiminfomanager.{h,cpp}

2007-09-21 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * qt/immodule-quiminputcontext.cpp
      - (QUimInputContext::QUimInputContext): Fix QUimHelperManager
        instantiation timing (no user-visible behavior is changed)

2007-09-20 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit replace the obsolete candidate window with the latest
      Qt3 immodule's. And the broken candidate window positioning has been
      fixed with the Qt4's QInputContext::update() and
      QWidget::inputMethodQuery(Qt::ImMicroFocus)
    
    * qt/quiminputcontextplugin-qt4/quiminputcontext.h
      - (QUimInputContext::update): New function decl
      - (QUimInputContext::setMicroFocus): Changed to non-virtual
        private. Qt4 does not have QInputContext::setMicroFocus()
      - (QUimInputContext::preeditString): Removed
    * qt/quiminputcontextplugin-qt4/quiminputcontext.cpp
      - (QUimInputContext::update): New function
      - (QUimInputContext::reset, QUimInputContext::commitString): Follow
        the removal of preeditString
      - (QUimInputContext::updatePreedit):
        * Ditto
        * Simplify
        * Add microfocus handling required for Qt4
      - (QUimInputContext::setMicroFocus): Comment in debug message
    * qt/quiminputcontextplugin-qt4/candidatewindow.h
      - Re-copied from updated qt/immodule-candidatewindow.h
      - (class CandidateWindow): Change base class QVBox to Q3VBox
      - (CandidateWindow::setCandidates,
        CandidateWindow::slotCandidateSelected,
        CandidateWindow::slotHookSubwindow, stores): Adapt to Qt4
      - (class CandidateListView): Change base class QListView to Q3ListView
      - (CandidateListView::CandidateListView,
        CandidateListView::itemIndex, CandidateListView::itemAtIndex):
        Adapt to Qt4
    * qt/quiminputcontextplugin-qt4/candidatewindow.cpp
      - Re-copied from updated qt/immodule-candidatewindow.cpp
      - Exclude immodule-candidatewindow.moc
      - (candidateFlag, CandidateWindow::CandidateWindow,
        CandidateWindow::~CandidateWindow,
        CandidateWindow::clearCandidates, CandidateWindow::setCandidates,
        CandidateWindow::setPage, CandidateWindow::setIndexInPage,
        CandidateWindow::slotCandidateSelected,
        CandidateWindow::slotHookSubwindow, CandidateListView::sizeHint):
        Adapt to Qt4
    * qt/quiminputcontextplugin-qt4/subwindow.h
      - Copied from qt/immodule-subwindow.h
      - (class SubWindow): Change base class QVBox to Q3VBox
    * qt/quiminputcontextplugin-qt4/subwindow.cpp
      - Copied from qt/immodule-subwindow.cpp
      - Exclude immodule-subwindow.moc
      - (subwindowFlag, SubWindow::SubWindow): Adapt to Qt4
    * qt/quiminputcontextplugin-qt4/quiminputcontextplugin.pro
      - Add subwindow.{h,cpp}

2007-09-20 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * qt/quiminputcontextplugin-qt4/quiminputcontext.cpp
      - (QUimInputContext::getPreeditAttrs): Add unworlking code
        fragment for reverse attribute as comment

2007-09-20 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * qt/quiminputcontextplugin-qt4/quiminputcontext.cpp
      - (QUimInputContext::reset): Fix calling pure virtual
        supermethod (Qt4 release withdrew the default
        QInputContext::reset() implementation)

2007-09-20 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * qt/quiminputcontextplugin-qt4/quiminputcontext.h
      - (QUimInputContext::getPreeditAttrs): New function decl
    * qt/quiminputcontextplugin-qt4/quiminputcontext.cpp
      - Include QInputMethodEvent and QTextCharFormat
      - (QUimInputContext::getPreeditAttrs): New function
      - (QUimInputContext::updatePreedit): Replace cursor-only attribute
        generation with full-featured attr-list with getPreeditAttrs()

2007-09-20 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * qt/quiminputcontextplugin-qt4/plugin.cpp
      - (UIM_QT_LIST_SUBIM_AS_QTIM): New macro defined as 0
      - (UimInputContextPlugin::create,
        UimInputContextPlugin::createImList,
        UimInputContextPlugin::createLanguageList): Enclose 'uim-*' IM
        listing into UIM_QT_LIST_SUBIM_AS_QTIM

2007-09-20 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit make Qt4 immodule working. But some behaviors are still broken
    
    * qt/quiminputcontextplugin-qt4/plugin.cpp
      - (UimInputContextPlugin::createLanguageList): Fix empty list on the
        key "uim"
    * qt/quiminputcontextplugin-qt4/quiminputcontext.cpp
      - (QUimInputContext::commitString): Make commits regardless of
        isComposing()
    * qt/quiminputcontextplugin-qt4/candidatewindow.cpp
      - (CandidateWindow::CandidateWindow): Replace withdrawn
        QListWidget::clicked() signal with itemClicked()
    * qt/quiminputcontextplugin-qt4/quiminputcontextplugin.pro
      - (QT): Add 'qt3support' for Q3VBox

2007-09-20 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit update the obsolete code written for Qt4 technical
      previews to Qt4.3 release. Now it can be built but not working yet
    
    * qt/quiminputcontextplugin-qt4/quiminputcontext.cpp
      - Include uim.h and uim-scm.h
      - (QUimInputContext::commitString):
        * Replace withdrawn sendIMEvent() with sendEvent()
        * Comment out Japanese fullwidth-space hack
      - (QUimInputContext::updatePreedit): Replace withdrawn sendIMEvent()
        with sendEvent()
      - (QUimInputContext::readIMConf): Follow the removal of
        uim_symbol_value_str()
    * qt/quiminputcontextplugin-qt4/candidatewindow.h
      - Replace qvboxwidget.h with Qt3Support/Q3VBox
      - (class CandidateWindow): Replace the withdrawn base class
        QVBoxWidget with Q3VBox
    * qt/quiminputcontextplugin-qt4/candidatewindow.cpp
      - (candidateFlag): Replace Qt3 flags with Qt4's
      - (CandidateWindow::CandidateWindow): Replace the withdrawn base
        class QVBoxWidget with Q3VBox
      - (CandidateWindow::setIndex, CandidateWindow::setIndexInPage):
        Follow the removal of QListWidget::isSelected() and setSelected()
    * qt/quiminputcontextplugin-qt4/plugin.cpp
      - Replace Q_EXPORT_PLUGIN() with Q_EXPORT_PLUGIN2() and specify
        uiminputcontextplugin as identifier
    * qt/quiminputcontextplugin-qt4/quiminputcontextplugin.pro
      - (TARGET): New and specify uiminputcontextplugin

2007-09-20 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * qt/quiminputcontextplugin-qt4/plugin.cpp
      - (UimInputContextPlugin::create,
        UimInputContextPlugin::createImList): Follow the removal of
        QString::operator const char *() in Qt4
    * qt/quiminputcontextplugin-qt4/quiminputcontext.cpp
      - (QUimInputContext::filterEvent, QUimInputContext::commit_cb,
        QUimInputContext::pushback_cb): Ditto
    * qt/quiminputcontextplugin-qt4/qhelpermanager.cpp
      - (QUimHelperManager::parseHelperStr,
        QUimHelperManager::parseHelperStrImChange,
        QUimHelperManager::sendImList,
        QUimHelperManager::update_prop_list_cb,
        QUimHelperManager::update_prop_label_cb): Ditto

2007-09-19 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * configure.ac
      - Add message for $QTDIR

2007-09-19 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit add the Japanese kana-input hack to Qt3 immodule
    
    * uim/uim-x-util.h
      - (uim_x_kana_input_hack_filter_event): New function decl
    * uim/uim-x-kana-input-hack.c
      - (uim_x_kana_input_hack_filter_event): New function
    * qt/immodule-quiminputcontext.h
      - (UIM_QT_USE_JAPANESE_KANA_KEYBOARD_HACK): New macro
      - (class QUimInputContext): Add decl for x11FilterEvent()
    * qt/immodule-quiminputcontext.cpp
      - Include Xlib.h and uim-x-util.h
      - (QUimInputContext::x11FilterEvent): New function
    * qt/immodule-plugin.cpp
      - Include qwindowdefs.h and uim-x-util.h
      - (UimInputContextPlugin::uimInit): Add uim_x_kana_input_hack_init()
    * qt/Makefile.am
      - (libquiminputcontextplugin_la_CXXFLAGS): Add @X_CFLAGS@
      - (libquiminputcontextplugin_la_LIBADD): Add libuim-x-util.la

2007-09-19 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * configure.ac
      - Clean up -Werror handlings

2007-09-19 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit fix compilation error on uim-scim. But it indicates
      "create_config failed" on runtime. I don't know how to fix it
    
    * uim/scim.cpp
      - Exclude uim-compat-scm.h and context.h
      - Include uim-internal.h
      - (init_scim): Follow the API change of
        ConfigModule::create_config() in SCIM 1.3. But SCIM 1.4.4 returns
        null config
      - (get_input_method_lang, get_input_method_name): Fix signed and
        unsigned comparison
    * uim/Makefile.am
      - (CXXFLAGS): Add warning suppression workaround for uim-scim
    * configure.ac
      - Require SCIM version 1.3.0 or later
      - Relax warning flags for uim-scim

2007-09-19 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/custom-rt.scm
      - (require-custom): Fix unexpected file-mtime use even if
        custom-enable-mtime-aware-user-conf-reloading? is #f. Thanks
        Etsushi for the report

2007-09-18 Konosuke Watanabe <sasugaanija@gmail.com>

    * emacs/uim-key.el
      - (uim-command-execute) : Fix bug; if delete-selection-mode is
        enabled, a character at the left of the selected region is also
        erased when deleting the region by BS.

2007-09-18 Etsushi Kato <ek.kato@gmail.com>

    * uim/Makefile.am (libuim_x_util_la_CFLAGS) : New.  Use
      @X_CFLAGS@.

2007-09-17 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * helper/Makefile.am
      - (uim_pref_gtk_LDADD): Add libuim-x-util.la to fix the build
        error. Thanks the anonymous

2007-09-17 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit make the kana-input hack Japanese-keysym independent. A
      reporter said that xkeyboard-config 1.0 will make the previous hack
      unworking. So I rewrite the hack to be capable of any Japanese
      keyboard mapping
    
    * uim/uim-x-util.h
      - (uim_x_kana_input_hack_translate_key, uim_x_kana_input_hack_init):
        New function decl
    * uim/uim-x-kana-input-hack.c
      - New file
      - (enum KeySymIndex): New type
      - (is_japanese_keyboard, kana_RO_keycode, yen_sign_keycode): New
        static variable
      - (uim_x_kana_input_hack_translate_key, uim_x_kana_input_hack_init):
        New function
    * uim/Makefile.am
      - (noinst_LTLIBRARIES): Add libuim-x-util.la
    * gtk/key-util-gtk.c
      - Include uim-x-util.h
      - (UIM_GTK_USE_JAPANESE_KANA_KEYBOARD_HACK): New macro
      - (g_prolongedsound_keycode): Removed
      - (im_uim_convert_keyevent, im_uim_init_modifier_keys): Replace the
        hack with uim_x_kana_input_hack_*()
    * gtk/Makefile.am
      - (im_uim_la_LIBADD): Add libuim-x-util.la
    * xim/ximserver.cpp
      - Include uim-x-util.h
      - (gProlongedsoundKeyCode): Removed
      - (keyState::check_key, check_modifier): Replace the hack with
        uim_x_kana_input_hack_*()
    * xim/Makefile.am
      - (uim_xim_LDADD): Add libuim-x-util.la
    * configure.ac
      - Define AM_CONDITIONAL LIBUIM_X_UTIL

2007-09-17 Etsushi Kato <ek.kato@gmail.com>

    * scm/skk.scm (skk-do-update-preedit) : Don't add preedit-cursor
      when skk-show-cursor-on-preedit? is #f.

2007-09-16 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * xim/ximserver.cpp
      - (init_modifier_keys): Fix a comment

2007-09-16 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * xim/ximserver.cpp
      - Port the kana-input hack by Yusuke for GTK+ bridge to
        uim-xim. Working correctly
      - (UIM_XIM_USE_JAPANESE_KANA_KEYBOARD_HACK): New macro
      - (gProlongedsoundKeyCode): New static variable
      - (keyState::check_key): Add the yen sign key hack
      - (check_modifier): Add initialization for gProlongedsoundKeyCode

2007-09-16 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit completes the kana-input hack by Yusuke. Now the
      distinction between kana_RO key and yen sign key are correctly
      working for GTK+ bridge
    
    * scm/japanese.scm
      - (ja-rk-rule-basic, japanese-roma-set-yen-representation): Replace
        fullwidth yen sign for romaji-halfwidth-kana-mode and
        alphanumeric-mode since users just expect to input character code
        134 rather than yen sign symbol

2007-09-16 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit fix bug #11966 "Requiring m17n-db installed at build time"
    
    * pixmaps/uim-m17nlib-relink-icons.in
      - New file
    * pixmaps/Makefile.am
      - (bin_SCRIPTS): Add uim-m17nlib-relink-icons
      - Replace m17n icons linking script with uim-m17nlib-relink-icons
    * configure.ac
      - Modify for uim-m17nlib-relink-icons

2007-09-16 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-scm.h
      - (UIM_SCM_FOR_EACH): New macro
    * uim/uim-scm-abbrev.h
      - (FOR_EACH): Ditto
    * doc/COMPATIBILITY
      - Update "uim-scm API reorganization in uim 1.5.0"

2007-09-16 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/editline.scm
      - Require SRFI-0 and SRFI-23
      - (%EDITLINE-PARTIAL-EXPR): Removed
      - (%editline-eof-error?): New procedure
      - (%editline-partial-read): Rewrite with %editline-eof-error?
      - (editline-read): Fix silent EOF error discard on echo '(+ 1' |
        uim-sh --editline. Thanks No.843 of [uim thread 7] for the report

2007-09-16 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * fep/callbacks.c
      - (update_current_im_name): New static function copied from
        configuration_changed_cb()
      - (configuration_changed_cb): Replace with update_current_im_name()
        invocation
      - (prop_list_update_cb): Add update_current_im_name() invocation to
        fix the unupdated IM-name of the status line on receiving
        prop_list_update message. Thanks No.827,834 of [uim thread 7] for
        the bug report
    * NEWS
      - Update

2007-09-16 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/custom-rt.scm
      - (custom-update-group-conf-freshness, custom-group-conf-updated?):
        Add exception handling around file-mtime to follow the
        specification change of file-mtime in r4915. Thanks Etsushi ([uim-ja 60])
    * doc/COMPATIBILITY
      - Update "Specification changes of utility procedures" for file-mtime

2007-09-16 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/anthy-utf8.scm
    * scm/anthy.scm
    * scm/mana.scm
      - Fix typo in comments by s/spcae/space/g. Thanks No.841 of [uim thread 7]

2007-09-13 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * doc/RELEASING
      - Fix label specification of googlecode-upload.py

2007-09-10 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/m17nlib.c
      - (get_input_method_lang): Return "*" instead of invalid
        language code "t" for uim to complement the change of r4948

2007-09-10 Etsushi Kato <ek.kato@gmail.com>

    * uim/m17nlib.c : Fix a bug in r4567, which makes a m17n's IM with
      lang "t" fail to open.
      - (pushback_input_method)
      - (get_input_method_name)
      - (find_im_by_name)
        - Use "t" instead of "".

2007-09-08 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-util.c
      - (file_stat_mode): Make returning #f instead of raising error. This
        is the same behavior of uim 1.4.x ([uim-ja 55])
    * uim/uim.c
      - (fatal_error_hook): Change error message
    * scm/look.scm
      - (look-load-personal-dict): Revert r4941 since the change of
        file_stat_mode() make it unneeded

2007-09-07 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/custom-rt.scm
      - (custom-prop-update-custom-handler): Fix setting quoted-value as
        real value ([uim-ja 47]). Thanks No.825 of [uim thread 7] and
        Etsushi

2007-09-05 Etsushi Kato <ek.kato@gmail.com>

    * scm/look.scm (look-load-personal-dict) : Add guard for
      file-readable?

2007-09-05 Etsushi Kato <ek.kato@gmail.com>

    * scm/japanese.scm
      - (ja-rk-rule-basic)
      - (ja-rk-rule-additional)
        - Update some rules.

2007-09-03 Konosuke Watanabe <sasugaanija@gmail.com>

    * emacs/uim.el
      - (uim-process-agent-output) : refactoring

2007-09-03 Konosuke Watanabe <sasugaanija@gmail.com>

    * emacs/uim.el
      - (uim-process-agent-output)
        - Fix Bug: On Emacs-22, the cursor moves to buggy position when
          calling undo command after inputting some characters by
          uim-input-pad-ja.

2007-09-03 Etsushi Kato <ek.kato@gmail.com>

    * scm/skk.scm
      - (skk-get-candidate-with-okuri) : New.
      - (skk-get-candidate-handler) : Fix showing okuri-ari word with
        an annotation.

2007-08-29 Konosuke Watanabe <sasugaanija@gmail.com>

    * emacs/uim-var.el
     - (uim-ignore-next)
       - Renamed to uim-merge-next
     - (uim-merge-next)
       - Renamed from uim-ignore-next
    
    * emacs/uim.el
      - (uim-process-input)
        - Improve workaround introduced at r4923.
          Now, [C-u 1 0 ESC x] works correctly

2007-08-29 Etsushi Kato <ek.kato@gmail.com>

    * scm/prime.scm (prime-engine-send-command) : Bug fix for changes
      in r4693.

2007-08-28 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim-helper.c
      - (uim_helper_send_message): Fix the fatal errors on ordinary use
        cases. Thanks No.815 and No.820 of [uim thread 7] for the report

2007-08-28 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/im.scm
      - (im-get-raw-key-str): Fix the always-upcased char. This resolved
        the problem that can't type "yes" to the query "[Really purge?
        (yes/no) ]" on uim-skk. Thanks No.819 and No.821 of [uim thread 7]
        for the report

2007-08-28 Konosuke Watanabe <sasugaanija@gmail.com>

    * emacs/uim-var.el
      - (uim-ignore-next)
        - Revived.
    
    * emacs/uim.el
      - (uim-process-input)
        - Add workaround for FSF Emacs-20/21.

2007-08-28 Konosuke Watanabe <sasugaanija@gmail.com>

    * emacs/uim.el
      - (uim-process-input):
        Fix bug; Input events which have prefix-argument and are
        terminating with ESC-something are passed to uim-el-agent.

2007-08-28 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * configure.ac
      - Add check for issetugid(2)
    * uim/uim-internal.h
      - (uim_issetugid): Define uim_issetugid() as just an alias macro to
        issetugid(2) if available
    * uim/uim-helper.c
      - (uim_issetugid): Enclose into #if !HAVE_ISSETUGID

2007-08-28 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-scm.h
      - (uim_scm_symbol_value_int): Change return type from int to long
    * uim/uim-scm-sigscheme.c
      - (uim_scm_symbol_value_int): Change return type from int to long
      - (uim_scm_symbol_value_int_internal): Follow the change
    * doc/COMPATIBILITY
      - Update "uim-scm API reorganization in uim 1.5.0"

2007-08-28 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-scm.h
      - Cosmetic changes. Reorder functions, and make
        uim_scm_symbol_value*() variants well-looked

2007-08-28 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-scm.h
      - Cosmetic changes. The "<rettype>\nfunc_name()" style
        prototypes are modified to "<rettype> func_name()"

2007-08-28 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/rk.c
      - (rk_find_seq, rk_find_partial_seq, rk_expect_seq): Replace
        deprecated UIM_SCM_NFALSEP() with TRUEP()
    
    * uim/skk.c
      - (find_cand_array_lisp, skk_get_entry, skk_get_nth_candidate,
        skk_get_nr_candidates, make_comp_array_from_cache,
        find_comp_array_lisp, skk_get_completion, skk_get_nth_completion,
        skk_get_nr_completions, skk_clear_completions, skk_get_dcomp_word,
        skk_commit_candidate, skk_purge_candidate): Ditto

2007-08-28 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/canna.c
      - Replace all canonical uim-scm forms with abbreviated ones by
        tools/abbrev-uim-scm.pl. No other changes are applied
    
    * uim/anthy-utf8.c
    * uim/anthy.c
    * uim/look.c
    * uim/m17nlib.c
    * uim/mana.c
    * uim/prime.c
    * uim/skk.c
      - Include uim-scm-abbrev.h
      - Replace all canonical uim-scm forms with abbreviated ones by
        tools/abbrev-uim-scm.pl. No other changes are applied

2007-08-28 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-util.c
      - (c_getenv, c_setenv, c_unsetenv, string_prefixp_internal):
        Simplify
      - (file_stat_mode, file_mtime, string_contains):
        * Ditto
        * Add error handling
    
    * uim/uim-func.c
      - (im_convertiblep, im_update_prop_list): Simplify
      - (uim_init_im_subrs): Cosmetic change
    
    * uim/uim-key.c
      - (define_valid_key_symbols): Cosmetic change
    
    * uim/intl.c
      - (intl_bind_textdomain_codeset, intl_dcgettext, intl_ngettext,
        intl_dngettext, intl_dcngettext): Cosmetic change

2007-08-28 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-scm.h
      - (uim_scm_stringp):
        * Rename to uim_scm_strp()
        * Redefine as alias macro to uim_scm_strp()
      - (uim_scm_strp): Renamed from uim_scm_stringp()
    * uim/uim-scm-abbrev.h
      - (STRP): Follow the renaming
    * uim/uim-scm-sigscheme.c
      - (uim_scm_stringp): Rename to uim_scm_strp()
      - (uim_scm_strp): Renamed from uim_scm_stringp()
    * doc/COMPATIBILITY
      - Update "uim-scm API reorganization in uim 1.5.0"

2007-08-28 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim.c
    * uim/uim-key.c
    * uim/uim-func.c
    * uim/uim-util.c
    * uim/plugin.c
    * uim/intl.c
      - Replace all canonical uim-scm forms with abbreviated ones by
        tools/abbrev-uim-scm.pl. No other changes are applied

2007-08-28 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * tools/abbrev-uim-scm.pl
      - New file
      - Add uim-scm canonical form -> abbreviated form substitutions

2007-08-28 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-func.c
    * uim/uim-util.c
    * uim/uim-custom.c
    * uim/uim-module-manager.c
    * uim/plugin.c
    * uim/intl.c
    * uim/editline.c
    * uim/rk.c
    * uim/look.c
    * uim/anthy.c
    * uim/anthy-utf8.c
    * uim/canna.c
    * uim/mana.c
    * uim/skk.c
    * uim/m17nlib.c
    * uim/prime.c
      - Replace all deprecated uim_scm_init_subr_?() with uim_scm_init_proc?() by
        perl -i -pe 's/\buim_scm_init_subr_/uim_scm_init_proc/g' uim/*.c

2007-08-28 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-scm-sigscheme.c
    * uim/look.c
    * uim/skk.c
    * uim/rk.c
      - Replace all deprecated uim_scm_null_list() with uim_scm_null() by
        perl -i -pe 's/\buim_scm_null_list\b/uim_scm_null/g' uim/*.c

2007-08-28 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-scm-sigscheme.c
      - (uim_scm_c_bool, uim_scm_symbol_value_int_internal,
        uim_scm_symbol_value_str_internal): Replace deprecated truth
        predicates with newer ones
    * uim/uim.c
      - (uim_get_im_short_desc): Ditto
    * uim/uim-util.c
      - (c_setenv): Ditto
    * uim/plugin.c
      - (plugin_unload_internal): Ditto
    * uim/intl.c
      - Include uim-scm-abbrev.h
      - (intl_textdomain, intl_bindtextdomain,
        intl_bind_textdomain_codeset): Ditto
    * uim/uim-custom.c
      - (uim_scm_c_str_failsafe): Ditto

2007-08-28 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-util.c
      - (vector_copy): New static function
      - (uim_init_util_subrs): Add initialization for 'vector-copy'

2007-08-28 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-scm.h
      - (uim_scm_listp): New function decl
      - (uim_scm_ensure): Removed
      - (UIM_SCM_ENSURE, UIM_SCM_ENSURE_OBJ, UIM_SCM_ENSURE_TYPE): New macro
    * uim/uim-scm-sigscheme.c
      - (uim_scm_listp): New function
      - (uim_scm_ensure): Removed
      - (uim_scm_vector2array): Follow the removal of uim_scm_ensure()
      - (uim_scm_callf_internal): Add format string 'l' for 'long'
    * uim/uim-scm-abbrev.h
      - (ERROR, ERROR_OBJ, ENSURE, ENSURE_OBJ, ENSURE_TYPE, C_BOOL,
        C_INT, C_CHAR, C_STR, REFER_C_STR, C_SYM, C_PTR, C_FPTR, LISTP,
        VECTOR_REF, VECTOR_SET): New macro
    * uim/uim.c
      - (uim_get_candidate_internal): Follow the removal of uim_scm_ensure()
    * doc/COMPATIBILITY
      - Update "uim-scm API reorganization in uim 1.5.0"

2007-08-27 Konosuke Watanabe <sasugaanija@gmail.com>

    * emacs/uim-key.el
      - (uim-translate-key): Remove Japanese comment
    * emacs/uim.el
      - (uim-process-input): Ditto

2007-08-27 Konosuke Watanabe <sasugaanija@gmail.com>

    * Support digit-argument.
    
    * emacs/uim-var.el
      - (uim-dummy-map)
        - New variable
        - Dummy key map.
    
    * emacs/uim-keymap.el
      - (uim-init-keymap)
        - Add uim-dummy-map initialization
    
    * emacs/uim-key.el
      - (uim-command-execute)
        - Use uim-dummy-map instead of disabling uim-mode.
        - Integarate some function calls around uim-command-execute call in
          uim-process-keyvec.
      - (uim-process-keyvec): Rename to uim-process-key-vector
      - (uim-process-key-vector)
        - Renamed from uim-process-keyvec
        - Remove command-execute call.
    
    * emacs/uim.el
      - (uim-process-input)
        - Follow the new name.

2007-08-27 Konosuke Watanabe <sasugaanija@gmail.com>

    * emacs/uim-key.el
      - (uim-is-escape)
        - use [(meta escape)] instead of
          (uim-convert-char-to-symbolvector "M-ESC")

2007-08-27 Konosuke Watanabe <sasugaanija@gmail.com>

    * emacs/uim.el
      - (uim-process-input)
        - Fix bug: selected region of XEmacs is always deactivated
          with terminal-mode.
        - Remove redundant update of uim-deactivate-mark.

2007-08-27 Konosuke Watanabe <sasugaanija@gmail.com>

    * emacs/uim-key.el
      - (uim-this-command-keys): Rename to uim-translate-key.
      - (uim-translate-key)
        - Renamed from uim-this-command-keys and simplified.
        - Move call of this-command-keys(-vector) to uim-process-input.
        - Remove with-arg argument.
        - Remove vector separation function.
        - Remove complicated vector processing routine.
        - Display a prompt when the function-key-map returnes a
         translation function (ex. C-x @ c)
        - Remove [escape escape] translation.
      - (uim-separate-prefix-vector)
        - New function extracted from uim-translate-key.
        - Separate prefix vector and other from input vector.
      - (uim-translate-escape-meta)
        - New function extracted from uim-translate-key.
        - Replace [escape escape] to [M-escape] for XEmacs
      - (uim-process-keyvec)
        - Return continue flag to wait latter inputs if the vector is
         bound to a key map.
    
    * emacs/uim.el
      - (uim-process-input)
        - Replace uim-this-command-keys to uim-translate-key
        - Call uim-this-commnad-keys-vector to get key vector.
        - Separate prefix vector from input vector.
        - Change uim-el-agent bypass rule.
          - Special prefix keys (such as Escape and C-x) are
          passed to uim-el-agent anyway.
      - (uim-process-agent-output)
        - Set uim-wait-next-key when uim-process-keyvec returned
          continue flag.
    
    * emacs/uim-var.el
      - (uim-stacked-key-vector): Remove
      - (uim-translated-key-vector)
        - New variable to manage key vector which has already been translated
          through function-key-map.
      - (uim-untranslated-key-vector)
        - New variable to manage key vector which is not translated yet.
      - (uim-wait-next-key)
        - New variable
      - (uim-prefix-ignore-next)
        - Remove
      - (uim-show-keystrokes)
        - Renamed to uim-keystroke-displaying
      - (uim-keystroke-displaying)
        - Renamed from uim-show-keystrokes
    
    * emacs/uim-util.el
      - (uim-get-vector-from-head): New function to manage vector easily.
      - (uim-get-vector-from-tail): Ditto
      - (uim-cut-vector-from-head): Ditto
      - (uim-vector-cdr): Ditto
      - (uim-vector-car): Ditto

2007-08-27 Konosuke Watanabe <sasugaanija@gmail.com>

    * emacs/uim-util.el
      - (uim-delete-atom): New utility function to remove
       atoms from a list.
    * emacs/uim.el
      - (uim-process-agent-output)
        - Delete delatom and call uim-delete-atom instead of it.

2007-08-27 Konosuke Watanabe <sasugaanija@gmail.com>

    * emacs/uim-key.el
      - (uim-this-command-keys)
        - Remove workaround for Emacs-22's bug
          (the bug seems to have been fixed in released version)

2007-08-27 Konosuke Watanabe <sasugaanija@gmail.com>

    * Rename and simplify uim-getbind.
    
    * emacs/uim-key.el
     - (uim-getbind): Rename to uim-key-binding
     - (uim-key-binding):
       - Renamed from uim-getbind
       - Remove uinversal-argument family checking.
     - (uim-process-mouse-event)
       - Follow the new name.
     - (uim-process-keyvec)
       - Ditto.
     - (uim-is-single-escape)
       - Ditto.
     - (uim-this-command-keys)
       - Ditto.

2007-08-27 Konosuke Watanabe <sasugaanija@gmail.com>

    * Support key-translation-map.
      Now, [C-x 8 ~ a] is work correctly.
    
    * emacs/uim-key.el
      - (uim-getbind)
        - Add option to look-up key-translation-map.
      - (uim-this-command-keys)
        - Remove direct accessing to key-translation-map.
        - Enable look-up key-translation-map option when
          call uim-getbind.
      - (uim-process-keyvec)
        - Enable look-up key-translation-map option when
          call uim-getbind.
        - Support strings data which is returned by uim-getbind.

2007-08-27 Konosuke Watanabe <sasugaanija@gmail.com>

    * Integrate SHIFT modifier removing into the key code
      translation with function-key-map.
    * Correct look-up manner of the function-key-map.
    
    * emacs/uim-key.el
      - (uim-remove-shift): Support long vector.
      - (uim-process-keyvec): Delete SHIFT modifier removing.
      - (uim-this-command-keys)
        - Delete uim-retry-keys handler.
        - Add code to remove SHIFT modifier.
        - Skip translation with the function-key-map when the
         key binding is defined in global/local/minor map.
    * emacs/uim.el
      - (uim-process-input)
        - Delete uim-retry-key from branch condition.
    * emacs/uim-var.el
      - (uim-retry-keys): Remove.

2007-08-27 Konosuke Watanabe <sasugaanija@gmail.com>

    * Fix this-command-key related bug.
    
    * emacs/uim-var.el
      - (uim-this-command-keys-original): New variable
    * emacs/uim-key.el
      - (uim-backup-this-command-keys): New function
         Copy original function definition of this-command-keys to
         uim-this-command-keys-original.
      - (uim-this-command-keys-override): New function
         Redefine this-command-keys so as to return uim-key-vector
         instead of the typed keys when it's bound.
      - (uim-process-keyvec):
        - Remove temporariliy overriding of this-command-keys.
        - Rename keyvector to uim-key-vector for overridden
          this-command-keys.
      - (uim-command-execute): Ditto
    * emacs/uim.el
      - (uim-init): Add a call of uim-this-command-keys-override.

2007-08-27 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * gtk/key-util-gtk.c
      - (im_uim_convert_keyevent): Add a comment for the kana_RO key hack

2007-08-27 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit add a hack to distinguish Japanese kana_RO key from yen
      sign key (both keys normally generates backslash on ASCII input) by
      Yusuke. I just apply his patch without any changes on this
      commit. See [uim-en 11] and follow messages for the discussion
    
    * gtk/key-util-gtk.c
      - (g_prolongedsound_keycode): New static variable
      - (im_uim_convert_keyevent): Add the Japanese kana_RO key hack
      - (im_uim_init_modifier_keys): Add initialization for
        g_prolongedsound_keycode

2007-08-25 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-module-manager.c
      - (main_internal): Fix broken error indication "failed to require
        uim-module-manager.scm: Success" by inappropriate perror(3)
        invocation. It now prints "libuim: fatal error: failed to require
        uim-module-manager.scm". Thanks Jeroen Ruigrok for the report
      - Other 2 perror(3) invocation is working properly

2007-08-25 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit fix arbitrary sexp evaluation of passed custom value for
      uim_prop_update_custom()
    
    * uim/uim.c
      - (uim_prop_update_custom): Stop evaluating the custom value
        string. And pass it to custom-set-handler as unevaluated raw string
    * scm/custom-rt.scm
      - Require SRFI-6 and SRFI-34
      - (custom-prop-update-custom-handler): Read the string
        representation of the custom value
    * scm/custom.scm
      - (custom-prop-update-custom-handler): Removed since the
        implementation is exactly same as custom-rt.scm's

2007-08-24 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit separate libuim-bsdlook from libuim
    
    * uim/libtool-version.mk
      - (libuim_bsdlook_version): New variable initialized with 0:0:0
    * uim/Makefile.am
      - (lib_LTLIBRARIES): Add libuim-bsdlook.la
      - (pkginclude_HEADERS): Add bsdlook.h
      - (libuim_la_SOURCES): Remove bsdlook.c
      - (libuim_skk_la_LIBADD, libuim_look_la_LIBADD): Add libuim-bsdlook.la
      - (libuim_bsdlook_la_SOURCES):
        * New variable
        * Add bsdlook.c
      - (libuim_bsdlook_la_LIBADD, libuim_bsdlook_la_LDFLAGS,
        libuim_bsdlook_la_CPPFLAGS): New variable

2007-08-24 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim.h
      - (uim_set_im_switch_request_cb): Move to uim-im-switcher.h
    * uim/uim-im-switcher.h
      - (uim_set_im_switch_request_cb): Moved from uim.h

2007-08-24 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-scm.c
      - Rename to uim-scm-sigscheme.c
    * uim/uim-scm-sigscheme.c
      - Renamed from uim-scm.c
    * uim/Makefile.am
      - (libuim_scm_la_SOURCES): Follow the file renaming

2007-08-24 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit separate libuim-scm from libuim
    
    * uim/libtool-version.mk
      - (libuim_scm_version): New variable initialized with 0:0:0
    * uim/Makefile.am
      - (lib_LTLIBRARIES): Add libuim-scm.la
      - (libuim_la_SOURCES): Remove uim-scm.c
      - (libuim_m17nlib_la_LIBADD, libuim_scim_la_LIBADD,
        libuim_canna_la_LIBADD, libuim_anthy_la_LIBADD,
        libuim_anthy_utf8_la_LIBADD, libuim_mana_la_LIBADD,
        libuim_prime_la_LIBADD, libuim_skk_la_LIBADD,
        libuim_look_la_LIBADD, libuim_custom_la_LIBADD,
        libuim_custom_enabler_la_LIBADD, uim_sh_LDADD,
        libuim_editline_la_LIBADD, uim_module_manager_LDADD,
        uim_agent_LDADD): Add libuim-scm.la
      - (libuim_scm_la_SOURCES):
        * New variable
        * Add uim-scm.c
      - (libuim_scm_la_LIBADD, libuim_scm_la_LDFLAGS,
        libuim_scm_la_CPPFLAGS): New variable
      - (libuim_la_LIBADD):
        * Move $(GCROOTS_LIBS) to libuim_scm_la_LIBADD
        * Add libuim-scm.la to make libuim dependent to libuim-scm
      - (libuim_la_CPPFLAGS): Move uim-scm stuff to libuim_scm_la_CPPFLAGS
      - (libuim_la_CFLAGS): Removed
    * uim.pc.in
      - Add -luim-scm to Libs
    * examples/uim-custom/Makefile.am
    * gtk/Makefile.am
    * helper/Makefile.am
    * qt/Makefile.am
    * xim/Makefile.am
    * fep/Makefile.am
    * emacs/Makefile.am
      - Add libuim-scm.la to *_LIBADD

2007-08-24 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit make uim-scm.[hc] independent of other part of libuim
    
    * uim/uim.h
      - (UIM_BOOL_DEFINED): New macro
      - Add duplicate definition guard for uim_bool, UIM_FALSE and
        UIM_TRUE by UIM_BOOL_DEFINED
    * uim/uim-internal.h
      - (uim_scm_init, uim_scm_quit, uim_scm_set_fatal_error_hook): Move to
        from uim-scm.h
    * uim/uim-scm.h
      - (UIM_BOOL_DEFINED): New macro
      - (uim_bool): New type
      - (UIM_FALSE, UIM_TRUE): New macro
      - Add duplicate definition guard for uim_bool, UIM_FALSE and
        UIM_TRUE by UIM_BOOL_DEFINED
      - Exclude unneeded stdio.h
      - Include stdlib.h for size_t
      - Exclude uim.h
      - (uim_scm_init, uim_scm_quit, uim_scm_set_fatal_error_hook): Moved
        from uim-internal.h
    * uim/uim-scm.c
      - Exclude uim-internal.h
    * doc/COMPATIBILITY
      - Update

2007-08-24 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim.h
      - Remove unneeded stdio.h formally included for FILE
      - Include stdlib.h for size_t
    * uim/uim-util.h
      - Include stdio.h
      - Include uim.h
    * uim/uim-im-switcher.h
      - Include uim.h
    * uim/anthy.c
    * uim/anthy-utf8.c
    * uim/prime.c
      - Include uim.h for uim_*alloc() and uim_fatal_error()
    * uim/canna.c
    * uim/m17nlib.c
      - Include uim.h for uim_*alloc() and uim_fatal_error()
      - Include stdio.h
    * uim/editline.c
    * uim/mana.c
    * uim/prime.c
    * uim/uim-module-manager.c
    * examples/uim-custom/uim-custom-update.c
      - Include stdio.h

2007-08-24 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * src/sigscheme.h
      - (uim_scm_init_subr_0, uim_scm_init_subr_1, uim_scm_init_subr_2,
         uim_scm_init_subr_3, uim_scm_init_subr_4, uim_scm_init_subr_5):
        * Rename to uim_scm_init_proc*()
        * Redefine as alias macro to uim_scm_init_proc*()
      - (uim_scm_init_proc0, uim_scm_init_proc1, uim_scm_init_proc2,
         uim_scm_init_proc3, uim_scm_init_proc4, uim_scm_init_proc5): Renamed from
         uim_scm_init_subr_*()
    * src/sigscheme.c
      - (uim_scm_init_subr_0, uim_scm_init_subr_1, uim_scm_init_subr_2,
         uim_scm_init_subr_3, uim_scm_init_subr_4, uim_scm_init_subr_5): Rename to
         uim_scm_init_proc*()
      - (uim_scm_init_proc0, uim_scm_init_proc1, uim_scm_init_proc2,
         uim_scm_init_proc3, uim_scm_init_proc4, uim_scm_init_proc5): Renamed from
         uim_scm_init_subr_*()
    * doc/COMPATIBILITY
      - Update

2007-08-24 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-scm.h
      - (uim_scm_null_term_array2list, uim_scm_list2null_term_array): Removed
      - (uim_scm_list2array): New function
    * uim/uim-scm.c
      - (uim_scm_null_term_array2list,
        uim_scm_null_term_array2list_internal,
        uim_scm_list2null_term_array,
        uim_scm_list2null_term_array_internal): Removed
      - (struct list2array_args): Add member 'len'
      - (uim_scm_list2array): New function
      - (uim_scm_list2array_internal): New static function
    * doc/COMPATIBILITY
      - Update

2007-08-21 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * doc/COMPATIBILITY
      - Add lacking "libuim ABI" marker to Updates: fields

2007-08-20 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-scm-abbrev.h
      - (EQ): New macro
    * doc/COMPATIBILITY
      - Update

2007-08-20 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-scm.h
      - (uim_scm_integerp):
        * Rename to uim_scm_intp()
        * Redefine as alias macro to uim_scm_intp()
      - (uim_scm_intp): Renamed from uim_scm_integerp()
    * uim/uim-scm.c
      - (uim_scm_integerp): Rename to uim_scm_intp()
      - (uim_scm_intp): Renamed from uim_scm_integerp()
    * uim/uim-scm-abbrev.h
      - (INTP): Follow the renaming
    * doc/COMPATIBILITY
      - Update

2007-08-20 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-scm.h
      - (UIM_SCM_USE_DEPRECATED_API): New macro
      - (uim_scm_truep, uim_scm_falsep): New function decl
      - (UIM_SCM_FALSEP, UIM_SCM_NFALSEP): Redefine as deprecated macro
      - (FALSEP, NFALSEP, TRUEP, NTRUEP): Removed
      - (uim_scm_null_list): Enclosed into #if UIM_SCM_USE_DEPRECATED_API
    * uim/uim-scm.c
      - (uim_scm_truep, uim_scm_falsep): New function
    * uim/uim-scm-abbrev.h
      - (TRUEP, FALSEP): New macro
    * uim/canna.c
      - (init_canna_lib): Replace NFALSEP() with TRUEP()
    * doc/COMPATIBILITY
      - Add new section "uim-scm API truth predicates reorganization in uim 1.5.0"

2007-08-20 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-scm.h
    * uim/uim-scm.c
      - (uim_scm_init_fsubr): Removed
    * doc/COMPATIBILITY
      - Update

2007-08-20 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-key.c
      - (define_key): Removed
      - (uim_init_key_subrs): Remove definition of define-key
    * scm/key.scm
      - (define-key): New macro

2007-08-20 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-scm.h
      - (uim_scm_set_car, uim_scm_set_cdr): New function decl
    * uim/uim-scm.c
      - (uim_scm_set_car, uim_scm_set_cdr): New function
    * doc/COMPATIBILITY
      - Update

2007-08-20 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-scm.h
      - (uim_scm_array2list): Rename arg 'size' to 'len'
    * uim/uim-scm.c
      - (struct array2list_args): Rename member 'size' to 'len'
      - (uim_scm_array2list): Rename arg 'size' to 'len'
      - (uim_scm_array2list_internal): Follow the renamings

2007-08-20 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-scm.h
      - (uim_scm_array2vector, uim_scm_vector2array, uim_scm_vectorp,
        uim_scm_vector_ref, uim_scm_vector_set, uim_scm_vector_length):
        New function decl
    * uim/uim-scm.c
      - (uim_scm_array2vector, uim_scm_vector2array, uim_scm_vectorp,
        uim_scm_vector_ref, uim_scm_vector_set, uim_scm_vector_length):
        New function
      - (struct array2vector_args, struct vector2array_args): New type
      - (uim_scm_array2vector_internal, uim_scm_vector2array_internal):
        New static function
    * uim/uim-scm-abbrev.h
      - (VECTORP): New macro
    * doc/COMPATIBILITY
      - Update

2007-08-20 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-scm.h
      - (uim_scm_c_char, uim_scm_make_char, uim_scm_charp): New function decl
    * uim/uim-scm.c
      - (uim_scm_c_char, uim_scm_make_char, uim_scm_charp): New function
      - (uim_scm_c_char_internal, uim_scm_make_char_internal): New static
        function
    * uim/uim-scm-abbrev.h
      - (MAKE_CHAR, CHARP): New macro
    * doc/COMPATIBILITY
      - Update

2007-08-20 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-internal.h
      - Disable/enable error-related decls according to UIM_USE_ERROR_GUARD
      - (uim_catch_error_begin): Rename to UIM_CATCH_ERROR_BEGIN()
      - (UIM_CATCH_ERROR_BEGIN):
        * Renamed from uim_catch_error_begin()
        * Make UIM_USE_ERROR_GUARD sensitive
      - (UIM_CATCH_ERROR_END):
        * New macro
        * Make UIM_USE_ERROR_GUARD sensitive
      - (uim_print_caught_error): Removed decl
    * uim/uim-error.c
      - Disable/enable some definitions according to UIM_USE_ERROR_GUARD
      - (uim_print_caught_error): Rename to print_caught_error()
      - (print_caught_error):
        * Renamed from uim_print_caught_error()
        * Make static
      - (uim_catch_error_begin_post): Follow the renaming
      - (uim_throw_error): Add error printing on non-guarded error
    * uim/uim.c
    * uim/uim-key.c
    * uim/uim-util.c
    * uim/uim-helper.c
    * uim/plugin.c
    * uim/iconv.c
      - Replace all uim_catch_error_begin() with UIM_CATCH_ERROR_BEGIN()
      - Replace all uim_catch_error_end() with UIM_CATCH_ERROR_END()
    * configure.ac
      - AC_DEFINE UIM_USE_ERROR_GUARD to 1

2007-08-19 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/deprecated-util.scm
      - (string-to-list): Fix length attribute of the string counted in
        EUC-JP, with counted in ISO-8859-1. This fixed the broken
        candidate strings on uim-prime
    * scm/ichar.scm
      - (ucs->utf8-string): Likewise counted in UTF-8 -> ISO-8859-1
    * scm/util.scm
      - (string-split): Fix a comment

2007-08-19 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-error.c
      - (uim_print_caught_error): Change fatal error message meaningful
    * uim/uim.c
      - (fatal_error_hook): Add error message

2007-08-19 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/iconv.c
      - (uim_iconv_is_convertible, uim_iconv_create, uim_iconv_code_conv):
        Fix returning from a guarded region without calling
        uim_catch_error_end(). This problem caused SEGV on fatal error
    * uim/uim-helper.c
      - (uim_helper_buffer_get_message): Ditto

2007-08-18 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/uim-sh.scm
      - Require SRFI-48
      - (uim-sh-display-version): Add SigScheme version information

2007-08-18 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/editline.scm
      - Cosmetic change

2007-08-18 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/uim-sh.scm
      - (*editline-prompt-beginning*, *editline-prompt-succeeding*,
        %*editline-reading*, %EDITLINE-PARTIAL-EXPR, editline-prompt,
        %editline-partial-read, editline-read): Move to editline.scm
    * scm/editline.scm
      - New file copied from uim-sh.scm, separated as non-uim-sh-dependent
        feature
      - (*editline-prompt-beginning*, *editline-prompt-succeeding*,
        %*editline-reading*, %EDITLINE-PARTIAL-EXPR, editline-prompt,
        %editline-partial-read, editline-read): Moved from uim-sh.scm
    * scm/Makefile.am
      - (SCM_FILES): Add editline.scm

2007-08-18 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/editline.c
      - (UIM_SH_FALLBACK_PROMPT): Removed
      - (prompt):
        * Plug leak
        * Get string via editline-prompt
    * scm/uim-sh.scm
      - (uim-sh): Configure uim-sh prompt for editline
      - (*editline-prompt-beginning*, *editline-prompt-succeeding*,
        %*editline-reading*): New variable
      - (editline-prompt): New procedure
      - (editline-read): Add multi-line expr prompt handlings

2007-08-18 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/editline.c
      - (uim_editline_readline, editline_readline): Rename
        uim_editline_readline() to editline_readline()
      - (uim_plugin_instance_init):
        * Follow the renaming
        * Rename uim-editline-readline to editline-readline
    * scm/uim-sh.scm
      - (uim-editline-read, editline-read):
        * Rename uim-editline-read to editline-read
        * Follow the renaming of uim-editline-readline
      - (uim-sh): Follow the renaming

2007-08-17 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/uim-sh.scm
      - (%EDITLINE-PARTIAL-EXPR): New variable
      - (%editline-partial-read): New procedure
      - (uim-editline-read): Fix read error on multi-line expression such
        as "(define\nfoo\n3)"
    * NEWS
      - Update

2007-08-17 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/uim-sh.scm
      - (uim-sh): Fix ignorance of -B option on -e <expr>

2007-08-17 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/uim-sh.scm
      - (%HYPHEN-SYM): New variable
      - (uim-sh-define-opt-vars, uim-sh-parse-args): Make independent of
        uim-sh-option-table and reusable for user-script options parsing
      - (uim-sh): Follow the change of uim-sh-parse-args

2007-08-17 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/uim-sh.scm
      - (uim-sh):
        * Change the meaning of rest arguments for uim-sh [file ...] as
          [file [arg ...]]
        * Support SRFI-22 'main' procedure call
        * Return exit status
      - (uim-sh-usage): Modify the description about rest arguments
    * uim/uim-sh.c
      - Exclude stdlib.h for EXIT_FAILURE
      - Receive and return exit status from 'uim-sh' procedure
    * uim/uim-error.c
      - Include sysexits.h
      - Define EX_SOFTWARE if not exist
      - (uim_throw_error): Replace EXIT_FAILURE with EX_SOFTWARE as
        specified in SRFI-22
    * configure.ac
      - Check sysexits.h
    * NEWS
      - Update

2007-08-17 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/uim-sh.scm
      - (uim-sh-opt-expression, uim-sh-opt-arg-expression): New variable
      - (uim-sh-option-table, uim-sh-usage, uim-sh): Add -e option for
        arbitrary expression evaluation

2007-08-17 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/uim-sh.scm
      - (uim-sh-option-table, uim-sh-usage, uim-sh): Add 'version' options
      - (uim-sh-display-version): New procedure

2007-08-15 Etsushi Kato <ek.kato@gmail.com>

    * uim/prime.c (prime_read_msg_from_ud)
    * uim/skk.c (look_get_comp)
      - Add fatal error handlings.

2007-08-15 Etsushi Kato <ek.kato@gmail.com>

    * uim/skk.c
      - (open_dic, okuri_in_bracket, nth_candidate,
        find_candidate_array_from_line, push_back_candidate_to_array,
        alloc_skk_line, copy_skk_line, search_line_from_server,
        search_line_from_file, expand_str, get_purged_words,
        skk_store_replaced_numeric_str, numeric_wide_or_kanji_conv,
        numeric_kanji_with_position_conv,
        numeric_kanji_for_check_conv,
        numeric_shogi_conv, numeric_convert,
        skk_merge_replaced_numeric_str, replace_numeric,
        skk_get_nth_candidate, make_comp_array_from_cache,
        restore_numeric, push_purged_word, purge_candidate,
        quote_word, sanitize_word, open_lock,
        push_back_candidate_array_to_sl,
        update_personal_dictionary_cache_with_file,
        skk_save_personal_dictionary, eval_candidate_with_concat,
        skk_substring, skk_look_open, look_get_top_word,
        look_get_comp)
        - Add fatal error handlings.

2007-08-13 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/m17nlib.c
      - (unused_ic_id, pushback_input_method, convert_mtext2str,
        fill_new_candidates): Add fatal error handlings
    
    * uim/prime.c
      - (prime_get_ud_path, prime_send_command, prime_lib_init): Add fatal
        error handlings
      - (prime_read_msg_from_ud): Remove unneeded cast

2007-08-13 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/look.c
      - (uim_look_look): Add fatal error handlings

2007-08-13 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/mana.c
      - (mana_ipc_send_command, mana_eval): Add exception-based error handling

2007-08-13 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/canna.c
      - Include assert.h
      - (get_canna_context): Add NULL pointer check
      - (validate_segment_index): New static function
      - (get_nr_candidate, get_nr_candidates): Rename get_nr_candidate()
        to get_nr_candidates()
      - (init_canna_lib, create_context, begin_conversion,
        get_nth_candidate, get_unconv_candidate, get_nr_segments,
        get_nr_candidates, resize_segment, reset_conversion): Add
        exception-based error handling
      - (release_context):
        * Add exception-based error handling
        * Nullify canna_context
      - (_reset_conversion): Replace precondition check
        with assertion
      - (_update_status):
        * Ditto
        * Add exception-based error handling
      - (uim_plugin_instance_init): Require SRFI-1 for delete!

2007-08-13 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/uim-sh.scm
      - (uim-sh-loop): Fix prompt printing on --strict-batch. Thanks
        No.806 of [uim thread 7]

2007-08-13 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * Port r4841-4842 to anthy-utf8.c
    
    * uim/anthy-utf8.c
      - (validate_segment_index): New static function
      - (init_anthy_lib, create_context, get_nr_segments,
        get_nr_candidates, get_nth_candidate, get_segment_length,
        get_nr_predictions, get_nth_prediction): Add exception-based error
        handling
      - (uim_plugin_instance_init): Require SRFI-1 for delete!
      - (get_anthy_context): New static function
      - (release_context):
        * Replace uim_scm_c_ptr() with get_anthy_context()
        * Nullify anthy_context
      - (set_string, get_nr_segments, get_nr_candidates,
        get_nth_candidate, get_segment_length, resize_segment,
        commit_segment, set_prediction_src_string, get_nr_predictions,
        get_nth_prediction, commit_nth_prediction): Replace
        uim_scm_c_ptr() with get_anthy_context()

2007-08-13 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/anthy.c
      - (get_anthy_context): New static function
      - (release_context):
        * Replace uim_scm_c_ptr() with get_anthy_context()
        * Nullify anthy_context
      - (set_string, get_nr_segments, get_nr_candidates,
        get_nth_candidate, get_segment_length, resize_segment,
        commit_segment, set_prediction_src_string, get_nr_predictions,
        get_nth_prediction, commit_nth_prediction): Replace
        uim_scm_c_ptr() with get_anthy_context()

2007-08-13 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/anthy.c
      - (validate_segment_index): New static function
      - (init_anthy_lib, create_context, get_nr_segments,
        get_nr_candidates, get_nth_candidate, get_segment_length,
        get_nr_predictions, get_nth_prediction): Add exception-based error
        handling
      - (uim_plugin_instance_init): Require SRFI-1 for delete!

2007-08-13 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-util.h
      - (uim_ipc_open_command, uim_ipc_open_command_with_option,
        uim_ipc_send_command): Fix invalid type int for PIDs with
        pid_t. 64-bit systems are possibly (sizeof(int) < sizeof(pid_t))
    * uim/uim-ipc.c
      - (uim_ipc_open_command, uim_ipc_open_command_with_option,
        uim_ipc_send_command): Ditto
    * uim/uim-helper-client.c
      - (uim_helper_init_client_fd): Ditto
    * uim/prime.c
      - (prime_pid): Ditto
    * uim/mana.c
      - (mana_pid, mana_ipc_send_command): Ditto
    * doc/COMPATIBILITY
      - Add new section "Fix invalid type assumption on PIDs"

2007-08-13 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-helper.c
      - (uim_helper_buffer_append): Replace libc memory allocation
        function with uim_*()
      - (uim_helper_send_message, uim_helper_get_pathname,
        uim_helper_buffer_get_message):
        * Ditto
        * Add fatal error handling
    * uim/uim-helper-client.c
      - (uim_helper_init_client_fd): Replace libc memory allocation
        function with uim_*()
    * uim/uim-helper-server.c
      - Include uim-internal.h for fatal error handlings
      - (get_unused_client, close_client, write_message): Replace libc
        memory allocation function with uim_*()
      - (main): Add uim_init_error()
    * uim/Makefile.am
      - (uim_helper_server_SOURCES): Add uim-error.c

2007-08-13 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-ipc.c
      - (uim_ipc_open_command_with_option, uim_ipc_send_command):
        Replace libc memory allocation functions with uim_*()

2007-08-13 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-ipc.c
      - Exclude uim-helper.h
      - (uim_helper_check_connection_fd): Move to uim-helper.c
    * uim/uim-helper.c
      - (uim_helper_check_connection_fd): Moved from uim-ipc.c

2007-08-11 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/uim-sh.scm
      - (uim-sh-parse-args): Simplify

2007-08-11 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-sh.c
      - (struct uim_sh_args, uim_sh): Removed
      - (main): Merge uim_sh() and simplify

2007-08-11 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit turn editline feature into plugin
    
    * uim/editline.h
      - Removed
    * uim/editline.c
      - Turn into plugin
      - Exclude editline.h
      - (UIM_EDITLINE_SEPARATED_BUILD): Removed
      - (editline_init): Renamed to uim_plugin_instance_init()
      - (uim_plugin_instance_init):
        * Renamed from editline_init()
        * Provide "editline"
      - (editline_quit): Renamed to uim_plugin_instance_quit()
      - (uim_plugin_instance_quit): Renamed from editline_quit()
    * uim/uim-sh.c
      - Exclude editline.h
      - (uim_sh): Remove editline handlings
    * uim/Makefile.am
      - Add libuim-editline plugin
      - (uim_sh_SOURCES): Remove editline.c and editline.h
    * scm/uim-sh.scm
      - Require SRFI 1, 2, 23
      - (uim-sh-opt-batch, uim-sh-opt-strict-batch, uim-sh-opt-help):
        Removed. These variables are automatically defined according to
        the option table definition
      - (uim-editline-enabled): Removed
      - (uim-sh-option-table): New variable
      - (uim-sh-usage): Describe all options
      - (uim-sh-define-opt-vars): New procedure
      - (uim-sh-parse-args): Replace with table-based option handler
      - (uim-sh-loop): Change editline feature detection method
      - (uim-sh):
        * Ditto
        * Add optional Scheme files loading (by require)
    * configure.ac
      - Fix a typo for libedit library path option
    * NEWS
      - Update

2007-08-11 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit fix broken editline (since 1.4) and related features of uim-sh
    
    * scm/uim-sh.scm
      - Require SRFI-6
      - (uim-sh-loop):
        * Accept custom reader as arg
        * Suppress prompting if editline is enabled
        * Simplify
      - (uim-sh): Rewrite to reader-switch based editline activation
      - (uim-sh-loop-orig, activate-editline): Removed
      - (uim-editline-read): New procedure that accepts multiple expressions
        on a line
    * uim/editline.c
      - (uim_editline_readline): Return EOF instead of "" if the ^d is input
    * NEWS
      - Update

2007-08-11 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/uim-sh.scm
      - (uim-sh-loop): Terminate execution on a non-recoverable read error
        such as non-ASCII char in token on a non-Unicode port. Thanks
        No.785 of [uim thread 7] for the report

2007-08-11 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-util.c
      - (setugidp): Simplify
    
    * uim/uim-error.c
      - (uim_strdup): Cosmetic change
    
    * uim/uim-func.c
      - (im_pushback_preedit): Ditto

2007-08-11 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-compat-scm.h
      - Removed file
      - (uim_scm_string_equal): Removed
    * uim/uim-compat-scm.c
      - Removed file
      - (struct cmp_args, uim_scm_string_equal,
        uim_scm_string_equal_internal): Removed
    * uim/uim-scm.c
      - Exclude uim-compat-scm.c
    * uim/rk.c
      - Exclude uim-compat-scm.h
      - (string_equalp): New static function
      - (str_seq_equal, str_seq_partial): Replace uim_scm_string_equal()
        with string_equalp()
    * uim/uim-util.c
      - Exclude uim-compat-scm.h
    * uim/Makefile.am
      - (EXTRA_DIST): Remove uim-compat-scm.c
      - (pkginclude_HEADERS): Remove uim-compat-scm.h
    * qt/toolbar-common-quimhelpertoolbar.cpp
    * xim/ximic.cpp
    * xim/ximserver.cpp
    * xim/main.cpp
    * xim/convdisp.cpp
      - Replace uim-compat-scm.h for uim_scm_symbol_value_*() with uim-scm.h
    * xim/canddisp.cpp
      - Ditto
      - (candwin_command):
        * Modify comment about uim-compat-scm API
        * Remove #ifdef UIM_COMPAT_SCM
    * configure.ac
      - Remove the option --disable-compat-scm
    * doc/COMPATIBILITY
      - Update

2007-08-11 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit fix the broken exceptoin-based error handlings. Now
      uim_throw_error() and uim_fatal_error() are actually recovered
      without application termination
    
    * uim/uim-internal.h
      - Include setjmp.h
      - (JMP_BUF, SETJMP, LONGJMP): Moved from uim-error.c
      - (uim_print_caught_error, uim_caught_fatal_error,
        uim_catch_error_begin_pre, uim_catch_error_begin_post): New function decl
      - (uim_catch_error_begin): New macro
      - (uim_catch_block_env): New variable decl
    * uim/uim-error.c
      - Exclude setjmp.h
      - (JMP_BUF, SETJMP, LONGJMP): Move to uim-internal.h
      - (env, uim_catch_block_env): Replace static var env with
        public uim_catch_block_env
      - (uim_print_caught_error, uim_caught_fatal_error,
        uim_catch_error_begin_pre, uim_catch_error_begin_post): New
        function
      - (uim_catch_error_begin): Removed and replaced with the same name
        macro in uim-internal.h
      - (uim_throw_error): Follow the renaming of env
    * doc/COMPATIBILITY
      - Update

2007-08-11 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit add the exception-based error handlings to all core uim
      API functions. Each IM plugin and uim-{helper*,ipc} is not modified yet
    
    * uim/uim.c
      - (enum uim_result): New type
      - (uim_init, uim_quit, uim_create_context, uim_release_context,
        uim_reset_context, uim_focus_in_context, uim_focus_out_context,
        uim_place_context, uim_displace_context, uim_set_preedit_cb,
        uim_set_candidate_selector_cb, uim_get_candidate,
        uim_get_candidate_internal, uim_candidate_get_cand_str,
        uim_candidate_get_heading_label, uim_candidate_get_annotation_str,
        uim_candidate_free, uim_get_candidate_index,
        uim_set_candidate_index, uim_set_text_acquisition_cb,
        uim_input_string, uim_set_configuration_changed_cb,
        uim_set_im_switch_request_cb, uim_switch_im,
        uim_get_current_im_name, uim_get_default_im_name,
        uim_get_im_name_for_locale, uim_get_nr_modes, uim_get_mode_name,
        uim_get_current_mode, uim_set_mode, uim_set_mode_cb,
        uim_set_mode_list_update_cb, uim_set_prop_list_update_cb,
        uim_set_prop_label_update_cb, uim_prop_list_update,
        uim_prop_label_update, uim_prop_activate, uim_prop_update_custom,
        uim_prop_reload_configs, uim_get_nr_im, uim_get_im_name,
        uim_get_im_language, uim_get_im_encoding, uim_get_im_short_desc):
        Add the exception-based error handlings
    * uim/uim-key.c
      - (uim_press_key, uim_release_key): Ditto
    * uim/uim-util.c
      - (uim_get_language_name_from_locale,
        uim_get_language_code_from_language_name): Ditto
    * uim/uim-func.c
      - (im_pushback_mode_list): Ditto
    * uim/plugin.c
      - (plugin_load, uim_init_plugin, uim_quit_plugin): Ditto
    * uim/iconv.c
      - (check_encoding_equivalence, uim_iconv_is_convertible,
        uim_iconv_open, uim_iconv_create, uim_iconv_code_conv,
        uim_iconv_release): Ditto

2007-08-11 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-scm.c
      - (uim_scm_error): Suppress warning
      - (uim_scm_c_str, uim_scm_c_symbol): Replace strdup() with scm_strdup()

2007-08-11 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-sh.c
      - Exclude uim-scm-abbrev.h
      - (uim_siod_fatal): Removed
      - (main, uim_sh): Remove obsolete fatal error handlings

2007-08-11 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/editline.c
      - (editline_quit, uim_editline_readline): Cosmetic change

2007-08-11 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/editline.c
      - (UIM_SH_FALLBACK_PROMPT): New macro
      - (uim_editline_readline_internal): Merge into uim_editline_readline()
      - (uim_editline_readline):
        * Remove unneeded GC protection
        * Logical cleanup
      - (prompt): Logical cleanup

2007-08-11 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/iconv.c
      - (uim_iconv_is_convertible): Logical cleanup

2007-08-11 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/iconv.c
      - Include assert.h
      - (MBCHAR_LEN_MAX): New macro
      - (check_encoding_equivalence, uim_iconv_is_convertible,
        uim_get_encoding_alias, uim_iconv_open, uim_iconv_create): Add
        precondition assertions
      - (uim_iconv_code_conv): Logical cleanup
      - (uim_iconv_release): Call iconv_close() only if obj is not NULL

2007-08-11 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-compat-scm.h
    * uim/uim-compat-scm.c
      - (uim_scm_c_strs_into_list): Removed
    * uim/uim-sh.c
      - Exclude uim-compat-scm.h
      - (uim_sh): Replace uim_scm_c_strs_into_list() with uim_scm_array2list()
    * doc/COMPATIBILITY
      - Update

2007-08-11 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-scm.h
      - (uim_scm_eof, uim_scm_array2list, uim_scm_null_term_array2list,
        uim_scm_list2null_term_array): New function decl
    * uim/uim-scm.c
      - (uim_scm_eof, uim_scm_array2list, uim_scm_null_term_array2list,
        uim_scm_list2null_term_array): New function
      - (struct array2list_args, struct list2array_args): New type
      - (uim_scm_array2list_internal,
        uim_scm_null_term_array2list_internal,
        uim_scm_list2null_term_array_internal): New static function
    * doc/COMPATIBILITY
      - Update

2007-08-11 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-scm.h
      - (uim_scm_eof, uim_scm_array2list, uim_scm_null_term_array2list,
        uim_scm_list2null_term_array): New function decl
    * uim/uim-scm.c
      - (uim_scm_eof, uim_scm_array2list, uim_scm_null_term_array2list,
        uim_scm_list2null_term_array): New function
      - (struct array2list_args, struct list2array_args): New type
      - (uim_scm_array2list_internal,
        uim_scm_null_term_array2list_internal,
        uim_scm_list2null_term_array_internal): New static function
    * doc/COMPATIBILITY
      - Update

2007-08-10 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-scm.h
      - (uim_scm_nullify_c_ptr): New function decl
    * uim/uim-scm.c
      - (uim_scm_nullify_c_ptr): New function
    * doc/COMPATIBILITY
      - Update

2007-08-10 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim.h
      - (uim_strdup): New function decl
    * uim/uim-error.c
      - Include lacked uim-internal.h
      - (uim_strdup): New function
    * doc/COMPATIBILITY
      - Update

2007-08-10 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-scm.h
      - (uim_scm_is_alive): Removed
    * uim/uim-scm.c
      - (sscm_is_exit_with_fatal_error, uim_scm_is_alive, exit_hook): Removed
      - (uim_scm_init): Remove obsolete fatal error handling
    * uim/uim-error.c
      - (uim_throw_error, uim_fatal_error, uim_catch_error_begin): Allow NULL msg
    * uim/uim.c
      - (fatal_error_hook): Replace error message with NULL
      - (uim_create_context): Remove uim_scm_is_alive()
    * doc/COMPATIBILITY
      - Update

2007-08-10 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim.h
      - (uim_fatal_error, uim_malloc, uim_realloc, uim_calloc): New function decl
    * uim/uim-internal.h
      - (uim_init_error, uim_catch_error_begin, uim_catch_error_end,
        uim_throw_error): New function decl
    * uim/uim-error.c
      - New file
      - (JMP_BUF, SETJMP, LONGJMP): New macro
      - (fatal_errored, guarded, env, err_msg): New static variable
      - (uim_init_error, uim_catch_error_begin, uim_catch_error_end,
        uim_throw_error, uim_fatal_error, uim_malloc, uim_realloc,
        uim_calloc): New function
    * uim/uim.c
      - (fatal_error_hook): New static function
      - (uim_init): Initialize the new error handling facilities
    * uim/Makefile.am
      - (libuim_la_SOURCES): Add uim-error.c
    * m4/ax_func_sigsetjmp.m4
      - New file
    * m4/Makefile.am
      - Add ax_func_sigsetjmp.m4
    * configure.ac
      - Add AX_FUNC_SIGSETJMP
    * doc/COMPATIBILITY
      - Add new section "Exception-based libuim error handling"
      - Add new section "Fatal error handling helpers for plugin developers"

2007-08-10 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-internal.h
      - (uim_scm_set_fatal_error_hook): New function decl
    * uim/uim-scm.c
      - (uim_scm_set_fatal_error_hook): New function
    * doc/COMPATIBILITY
      - Update "uim-scm API reorganization in uim 1.5.0"
      - Fix "Stricter argument precondition requirements"

2007-08-10 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-scm.h
      - (uim_scm_error, uim_scm_error_obj): New function decl
    * uim/uim-scm.c
      - (struct uim_scm_error_args): Rename to uim_scm_error_obj_args
      - (struct uim_scm_error_obj_args): Renamed from uim_scm_error_args
      - (uim_scm_error, uim_scm_error_internal): New function
      - (uim_scm_error_obj):
        * Renamed from uim_scm_error()
        * Make public
      - (uim_scm_error_obj_internal): Renamed from uim_scm_error_internal()
      - (uim_scm_c_int_internal, uim_scm_refer_c_str_internal,
        uim_scm_c_ptr, uim_scm_c_func_ptr): Follow the renaming
    * uim/uim-key.c
      - (define_key):
        * Follow the renaming
        * Error if invalid form

2007-08-07 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-scm.h
      - (uim_scm_get_output, uim_scm_set_output): Removed
    * uim/uim-scm.c
      - (scm_out, scm_err): Removed the illegal accessor definition
      - (uim_output, uim_scm_get_output, uim_scm_set_output): Removed
      - (uim_scm_init): Remove output port handlings
    * uim/uim-sh.c
      - (main): Remove uim_scm_set_output()
    * test/uim-test-utils.scm
      - (*uim-sh-setup-proc*): Add error port redirection
    * doc/COMPATIBILITY
      - Update

2007-08-07 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/plugin.c
      - (verbose_level): Fix incorrect prototype

2007-08-06 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim.c
      - (uim_get_im_name): Remove the test code for broken
        l_freelist problem resolved in sigscheme-trunk r4790

2007-08-05 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-sh.c
      - (uim_sh): Revert accidencially removed uim-sh.scm
        requirement. Thanks the anonymous

2007-08-05 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-internal.h
      - (uim_scm_init): Remove 1st arg 'verbose_level'
    * uim/uim-scm.h
      - (uim_scm_get_verbose_level, uim_scm_set_verbose_level): Removed
    * uim/uim-scm.c
      - (uim_scm_get_verbose_level, uim_scm_set_verbose_level): Removed
      - (uim_scm_init):
        * Remove 1st arg 'verbose_level'
        * Remove verbose-level handlings
    * uim/uim.c
      - (uim_init): Remove LIBUIM_VERBOSE handling
    * scm/init.scm
      - Add LIBUIM_VERBOSE handling
    
    * uim/plugin.c
      - (verbose_level): New static function
      - (DPRINTFN): Follow the removal of uim_scm_get_verbose_level()
    
    * uim/uim-sh.c
      - (uim_sh): Remove verbose-level handlings
    * scm/uim-sh.scm
      - Add verbose-level handling
    
    * uim/uim-module-manager.c
      - (main): Remove verbose-level handling
    * scm/uim-module-manager.scm
      - Add verbose-level handling
    
    * doc/COMPATIBILITY
      - Update

2007-07-22 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/scim.cpp
      - (init_scim, search_uuid_by_imname, alloc_id, get_context_from_id,
        cb_commit, cb_preedit_update, cb_preedit_hide, cb_preedit_caret,
        cb_lookup_update, uim_keysymbol_to_scim_keysymbol): Replace
        C++-style pointer notation such as (char*) with C-style (char *).
        This change completes bug #1483

2007-07-22 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/anthy.scm
      - (action action_anthy_halfwidth_alnum): Fix inconsistent
        short-desc. Thanks No.758 of [uim thread 7]
    * scm/anthy-utf8.scm
      - (action action_anthy_utf8_halfwidth_alnum): Ditto

2007-07-22 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-util.c
      - (uim_version): New static function
      - (uim_init_util_subrs): Add initialization of uim-version
    * doc/COMPATIBILITY
      - Add new section "New utility procedures in uim 1.5.0"

2007-07-22 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/init.scm
      - Undefine SIOD-compatible the-environment
    * scm/hangul.scm
    * scm/uim-db.scm
      - Replace SIOD-compatible the-environment with %%current-environment

2007-07-22 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-scm.c
      - (uim_scm_init): Remove require-module for srfi-23 and siod
    * scm/init.scm
      - Add require-extension for srfi-60 and siod
      - Undefine SIOD-compatible bit-and, bit-or, bit-xor, bit-not
    * scm/key.scm
    * scm/anthy.scm
    * scm/anthy-utf8.scm
    * scm/canna.scm
    * scm/mana.scm
    * scm/skk.scm
    * scm/byeoru.scm
      - Replace SIOD-compatible bit-* with SRFI-60 bitwise-*

2007-07-22 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/anthy-utf8.c
      - (get_nr_segments, get_nth_candidate, get_nr_predictions,
        get_nth_prediction): Add error check
      - (get_nr_candidates, get_segment_length):
        * Ditto
        * Rename argument to make meaningful and consistent
      - (resize_segment, commit_segment): Rename argument to make
        meaningful and consistent
      - (commit_nth_prediction): Make meaningful

2007-07-22 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/anthy.c
      - (get_nr_segments, get_nth_candidate, get_nr_predictions,
        get_nth_prediction): Add error check
      - (get_nr_candidates, get_segment_length):
        * Ditto
        * Rename argument to make meaningful and consistent
      - (resize_segment, commit_segment): Rename argument to make
        meaningful and consistent
      - (commit_nth_prediction): Make meaningful

2007-07-22 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/canna.c
      - (struct canna_context, create_context, release_context):
        Replace array diclist with pointer and make optional to
        UIM_CANNA_DEBUG

2007-07-22 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/canna.c
      - (create_context): Fix an error check condition

2007-07-22 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit simplify canna.c. No new features are added
    
    * uim/canna.c
      - Include uim-scm-abbrev.h
      - (MAX_CONTEXT, context_array, context_len): Removed
      - (VALID_CANNA_CONTEXTP, VALID_SEGMENT_INDEXP): New macro
      - (enum canna_api_result, enum learning_mode): New type
      - (context_list): New static variable
      - (get_canna_context, init_canna_lib, create_context,
        release_context, _reset_conversion, _update_status,
        begin_conversion, get_nth_candidate, get_unconv_candidate,
        get_unconv_candidate, get_nr_segments, get_nr_candidate,
        resize_segment, commit_segment, reset_conversion,
        uim_plugin_instance_init, uim_plugin_instance_quit):
        * Replace integer-based 'id' with pointer object
        * Add lacked error handlings
        * Increase semantic readability
    * scm/canna.scm
      - (canna-release-handler, canna-begin-conv): Replace ac-id validity
        check by number? with not-false to follow the id->ptr change

2007-07-20 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/anthy-utf8.c
      - Exclude iconv.h and errno.h
      - (iconv_cd_e2u, iconv_cd_u2e, create_context): Fix iconv_t to
        abstract (void *)
      - (eucjp_to_utf8, utf8_to_eucjp): Cosmetic change
      - (uim_anthy_plugin_instance_init, uim_anthy_plugin_instance_quit):
        Rename to uim_anthy_utf8_*()
      - (uim_anthy_utf8_plugin_instance_init,
        uim_anthy_utf8_plugin_instance_quit):
        * Renamed from uim_anthy_*()
        * Add lacked prototype decl
      - Replace ENABLE_ANTHY_STATIC with ENABLE_ANTHY_UTF8_STATIC
    * uim/anthy.c
      - (uim_anthy_plugin_instance_init, uim_anthy_plugin_instance_quit):
        Add lacked prototype decl
    * uim/uim.c
      - (uim_anthy_plugin_instance_init, uim_anthy_plugin_instance_quit):
        Add lacked prototype decl
      - (uim_anthy_utf8_plugin_instance_init,
        uim_anthy_utf8_plugin_instance_quit): Add prototype
      - (uim_init_internal, uim_quit): Add --enable-anthy-utf8-static support
    * uim/Makefile.am
      - Add --enable-anthy-utf8-static support
    * configure.ac
      - Add --enable-anthy-utf8-static

2007-07-20 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

     * uim/anthy-utf8.c
      - (initialized, context_list): New static variable
      - (MAX_CONTEXT, struct context, context_slot, get_anthy_context,
        anthy_version_major, anthy_version_minor, get_anthy_version): Removed
      - (anthy_version): Return bare Anthy version string
      - (init_anthy_lib):
        * Remove get_anthy_version() invocation
        * Replace integer-based 'id' with pointer object
      - (create_context, release_context, set_string,
        get_nr_segments, get_nr_candidates, get_unconv_candidate,
        resize_segment, commit_segment, set_prediction_src_string,
        get_nr_predictions, get_nth_prediction, commit_nth_prediction,
        uim_anthy_plugin_instance_init, uim_anthy_plugin_instance_quit):
        Replace integer-based 'id' with pointer object
      - (get_nth_candidate, get_segment_length):
        * Ditto
        * Add lacking negative index check
    * scm/anthy-utf8.scm
      - Require SRFI-1, SRFI-8
      - (anthy-utf8-version->major.minor): New procedure
      - (anthy-utf8-context-new): Follow the change of anthy-lib-get-anthy-version
      - (anthy-utf8-release-handler, anthy-utf8-begin-conv): Replace ac-id
        validity check by number? with not-false to follow the id->ptr
        change
    * scm/anthy.scm
      - (anthy-release-handler): Follow the id->ptr change

2007-07-20 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/anthy.c
      - (uim_plugin_instance_quit): Add lacking uim_scm_gc_unprotect(&context_list)

2007-07-20 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-scm-abbrev.h
      - (MAKE_STR_DIRECTLY): Fix incorrect func name
    * uim/uim-func.c
      - (im_acquire_text): Simplify with MAKE_STR_DIRECTLY()
    
    * uim/anthy.c
      - (get_nth_candidate, get_nth_prediction): Simplify with
        uim_scm_make_str_directly()

2007-07-20 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-scm.h
      - (uim_scm_make_str_directly): New function decl
    * uim/uim-scm.c
      - (uim_scm_make_str_directly): New function
      - (uim_scm_make_str_directly_internal): New static function
    * uim/uim-scm-abbrev.h
      - (MAKE_STR_DIRECTLY): New macro
    * doc/COMPATIBILITY
      - Update

2007-07-20 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/anthy.c
      - (anthy_version_major, anthy_version_minor): Removed
      - (anthy_version): Return bare Anthy version string
      - (get_anthy_version): Removed
      - (init_anthy_lib): Remove get_anthy_version() invocation
    * scm/anthy.scm
      - Require SRFI-1, SRFI-8
      - (anthy-version->major.minor): New procedure
      - (anthy-context-new): Follow the change of anthy-lib-get-anthy-version
    * test/test-anthy.scm
      - New file
      - Add tests for anthy-version->major.minor
    * test/Makefile.am
      - (EXTRA_DIST): Add test-anthy.scm

2007-07-20 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-scm.c
      - (uim_scm_callf_internal): Add 'v' format string for symbol_value
    * uim/anthy.c
      - (initialized, context_list): New static variable
      - (MAX_CONTEXT, struct context, context_slot, get_anthy_context): Removed
      - (init_anthy_lib, create_context, release_context, set_string,
        get_nr_segments, get_nr_candidates, get_unconv_candidate,
        resize_segment, commit_segment, set_prediction_src_string,
        get_nr_predictions, get_nth_prediction, commit_nth_prediction,
        uim_anthy_plugin_instance_init, uim_anthy_plugin_instance_quit):
        Replace integer-based 'id' with pointer object
      - (get_nth_candidate, get_segment_length):
        * Ditto
        * Add lacking negative index check
    * scm/anthy.scm
      - (anthy-begin-conv): Replace ac-id validity check by number? with
        not-false to follow the id->ptr change
    * doc/COMPATIBILITY
      - Update

2007-07-20 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-func.c
      - (im_get_raw_key_str): Removed
      - (uim_init_im_subrs): Remove im-get-raw-key-str initialization
    * scm/im.scm
      - (im-get-raw-key-str): New procedure

2007-07-20 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim.c
      - (uim_create_context):
        * Replace runtime !uim_initialized check with the precondition assertion
        * Simplify

2007-07-20 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-scm.c
      - (uim_scm_quit): Do nothing if !initialized

2007-07-20 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-internal.h
      - (uim_scm_init): Add 2nd arg system_load_path
    * uim/uim-scm.c
      - (uim_scm_init):
        * Add 2nd arg system_load_path
        * Fix unsecure system_load_path setting via getenv
    * uim/uim.c
      - (uim_init):
        * Follow the change of uim_scm_init()
        * get env LIBUIM_SYSTEM_SCM_FILES only when !issetugid()

2007-07-20 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-scm.h
      - (uim_scm_is_initialized): New function decl
      - (uim_scm_gc_any_contextp): Fix uim_scm_is_alive() with
        uim_scm_is_initialized()
    * uim/uim-scm.c
      - (uim_scm_is_initialized): New function
      - (uim_scm_get_output, uim_scm_set_output): Fix uim_scm_is_alive()
        with uim_scm_is_initialized(). Thanks No.784 of [uim thread 7]
    * doc/COMPATIBILITY
      - Record uim_scm_is_initialized()

2007-07-20 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-scm.c
      - (uim_scm_callf_internal): Replace ordinary assertion with SCM_NOTREACHED

2007-07-19 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * configure.ac
      - Append -Wno-error to UIM_SCM_CFLAGS if
        --disable-warnings-into-error is not specified with
        --enable-debug. Thanks No.783 of [uim thread 7]

2007-07-17 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-scm.h
      - (uim_scm_gc_any_contextp): Add check for uim_scm_is_alive()
    * uim/uim-scm.c
      - (uim_scm_is_alive): Follow the change of uim_scm_gc_any_contextp()
      - (uim_scm_init): Ditto
    
    * uim/uim.c
      - (uim_get_im_name): Fix a comment

2007-07-14 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/Makefile.am
      - (UIM_MODULE_MANAGER_ENV): Fix
        LIBUIM_SYSTEM_SCM_FILES. Thanks Etsushi and the anonymous

2007-07-13 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * test/uim-test-utils.scm
      - Set LIBUIM_SYSTEM_SCM_FILES

2007-07-13 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-scm.c
      - (uim_scm_init): Replace scm_use() with scm_require_module()
    * scm/init.scm
    * scm/util.scm
    * scm/deprecated-util.scm
    * scm/ichar.scm
    * scm/uim-sh.scm
      - Replace 'use' with 'require-extension'

2007-07-13 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit resolve [uim-en 25]
    
    * uim/uim-scm.c
      - (uim_scm_init):
        * Add LIBUIM_SYSTEM_SCM_FILES handlings
        * Replace current_char_codec setting with '-C ISO-8859-1'
    * scm/Makefile.am
      - (UIM_MODULE_MANAGER_ENV): Add LIBUIM_SYSTEM_SCM_FILES

2007-07-12 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/util.scm
      - (writeln, compose): Simplify
      - (list-join, try-load, try-require, define-record): Cosmetic change
      - (context-update-preedit): Move to im.scm
    * scm/im.scm
      - (context-update-preedit): Moved from util.scm
    
    * doc/COMPATIBILITY
      - Complement "Renaming of integer-based char procedures"

2007-07-11 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/ichar.scm
      - Cosmetic change

2007-07-11 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit rename integer-based char procedures
      The renamings are performed by following script
    
      $ perl -i -pe 's/\bstring->char\b/string->ichar/g' {scm,test}/*.scm
      $ perl -i -pe 's/\bstring->printable-char\b/string->printable-ichar/g' {scm,test}/*.scm
      $ perl -i -pe 's/\bstring->letter\b/string->alphabetic-ichar/g' {scm,test}/*.scm
      $ perl -i -pe 's/\bnumeral-char->number\b/numeric-ichar->integer/g' {scm,test}/*.scm
    
    * scm/ichar.scm
      - (string->char, string->printable-char, string->letter,
        numeral-char->number): Renamed to below
      - (string->ichar, string->printable-ichar, string->alphabetic-ichar,
        numeric-ichar->integer): Renamed from above
    * scm/anthy-utf8.scm
    * scm/anthy.scm
    * scm/canna.scm
    * scm/custom.scm
    * scm/generic.scm
    * scm/mana.scm
    * scm/prime.scm
      - Follow the renamings
    * test/test-util.scm
      - Ditto
      - Update the "passed revision" comment
    * doc/COMPATIBILITY
      - Update "Renaming of integer-based char procedures"

2007-07-11 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit replace deprecated integer-based char procedures with new names
      The renamings are performed by following script
    
      $ perl -i -pe 's/\bcontrol-char\?/ichar-control?/g' {scm,test}/*.scm
      $ perl -i -pe 's/\balphabet-char\?/ichar-alphabetic?/g' {scm,test}/*.scm
      $ perl -i -pe 's/\bnumeral-char\?/ichar-numeric?/g' {scm,test}/*.scm
      $ perl -i -pe 's/\busual-char\?/ichar-graphic?/g' {scm,test}/*.scm
      $ perl -i -pe 's/\bto-lower-char/ichar-downcase/g' {scm,test}/*.scm
    
    * scm/ichar.scm
      - (control-char?, alphabet-char?, numeral-char?, usual-char?,
        to-lower-char): Removed
    * scm/anthy-utf8.scm
    * scm/anthy.scm
    * scm/byeoru.scm
    * scm/canna.scm
    * scm/generic.scm
    * scm/key.scm
    * scm/latin.scm
    * scm/look.scm
    * scm/mana.scm
    * scm/prime.scm
    * scm/skk.scm
    * scm/spellcheck.scm
    * scm/tutcode.scm
      - Follow the renamings
    * test/test-util.scm
      - Remove tests for the removed procedures
      - Update the "passed revision" comment
    * doc/COMPATIBILITY
      - Update "Renaming of integer-based char procedures"

2007-07-11 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit rename integer-based char-* procedures to ichar-* to
      distinguish from and coexist with R5RS ones. The renamings are
      performed by following script
    
      $ perl -i -pe 's/\bchar-(control\?|upper-case\?|lower-case\?|alphabetic\?|numeric\?|printable\?|graphic\?|vowel\?|consonant\?|downcase\b|upcase\b)/ichar-\1/g' {scm,test}/*.scm
    
    * scm/ichar.scm
      - (char-control?, char-upper-case?, char-lower-case?,
        char-alphabetic?, char-numeric?, char-printable?, char-graphic?,
        char-vowel?, char-consonant?, char-downcase, char-upcase): Renamed
        to ichar-*
      - (ichar-control?, ichar-upper-case?, ichar-lower-case?,
        ichar-alphabetic?, ichar-numeric?, ichar-printable?, ichar-graphic?,
        ichar-vowel?, ichar-consonant?, ichar-downcase, ichar-upcase):
        * Renamed from char-*
        * Follow the renamings
      - (string->printable-char, string->letter, numeral-char->number,
        control-char?, alphabet-char?, numeral-char?, usual-char?,
        to-lower-char): Follow the renamings
    * scm/anthy-utf8.scm
    * scm/anthy.scm
    * scm/byeoru.scm
    * scm/canna.scm
    * scm/custom.scm
    * scm/look.scm
    * scm/m17nlib.scm
    * scm/mana.scm
    * scm/skk.scm
      - Follow the renamings
    * test/test-util.scm
      - Ditto
      - Update the "passed revision" comment
    * doc/COMPATIBILITY
      - Add new entry "Renaming of integer-based char procedures"

2007-07-11 Etsushi Kato <ek.kato@gmail.com>

    * qt/immodule-quiminputcontext.h
    * qt/immodule-quiminputcontext_compose.cpp
    * gtk/compose.c
    * xim/xim.h
    * xim/compose.cpp
      - Revise changes in r4670 and r4671.

2007-07-11 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/Makefile.am
      - (SCM_FILES): Remove uim-db.scm, spellcheck.scm and
        spellcheck-custom.scm. These files have been unsupported, but are
        kept for now for reference
    * test/Makefile.am
      - (EXTRA_DIST): Remove test-slib.scm and test-db.scm. The files
        itself are kept for now for reference

2007-07-11 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/util.scm
      - (writeln): New procedure
      - (define-record): Replace deprecated procedure
    * scm/ustr.scm
      - (ustr-set-cursor-pos!): Ditto
    * scm/custom.scm
      - (custom-set-value!, custom-value-as-literal): Ditto
    * scm/custom-rt.scm
      - (custom-modify-key-predicate-names, custom-key-exist?,
        custom-set-value!, define-custom): Ditto
    * scm/uim-module-manager.scm
      - (add-modules-to-module-list): Ditto
    * scm/uim-sh.scm
      - (uim-sh-loop, activate-editline): Ditto
    * scm/deprecated-util.scm
      - Add a comment about deprecated procedures
    * test/test-util.scm
    * test/test-ustr.scm
    * test/test-custom.scm
    * test/test-custom-rt.scm
      - Update the "passed revision" comment
    * doc/COMPATIBILITY
      - Update "Specification changes of utility procedures"

2007-07-11 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/util.scm
      - (join): Renamed to list-join
      - (list-join):
        * Renamed from 'join'
        * Swap arguments order
      - (string-join): Follow the change
    * test/test-util.scm
      - Update the "passed revision" comment
      - Replace tests for 'join' with for 'list-join'
    * doc/COMPATIBILITY
      - Update "Specification changes of utility procedures"

2007-07-11 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/util.scm
      - (method-delegator-new): Optimize

2007-07-11 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/util.scm
      - Disable SRFI-60
    * scm/ichar.scm
      - Enable SRFI-60
      - (ucs->utf8-string): New procedure
      - (ucs-to-utf8-string): Replace with alias to ucs->utf8-string

2007-07-11 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/util.scm
      - (proc-or, proc-and, join, compose, make-scm-pathname): Simplify
      - (define-record): Replace deprecated procedures
    * test/test-util.scm
      - Update the "passed revision" comment

2007-07-11 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/util.scm
      - (sublist, sublist-rel):
        * The meaning of second arg has been changed to correct one
        * Optimize
    * test/test-util.scm
      - Revise tests for sublist and sublist-rel
    * scm/anthy.scm
      - (anthy-get-raw-candidate): Follow the specification changes
    * scm/anthy-utf8.scm
      - (anthy-utf8-get-raw-candidate): Ditto
    * scm/mana.scm
      - (mana-get-raw-candidate): Ditto
    * scm/canna.scm
      - (canna-get-raw-candidate): Ditto
    * doc/COMPATIBILITY
      - Update "Specification changes of utility procedures"

2007-07-11 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * test/test-util.scm
      - Add tests for sublist, sublist-rel, safe-car, safe-cdr, assq-cdr

2007-07-11 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/util.scm
      - (string-list-concat, string-find, truncate-list, list-head, nconc,
        string-to-list, symbolconc, nth, nthcdr, copy-list, digit->string,
        puts, siod-print, print, feature?, uim-symbol-value-str): Moved to
        deprecated-util.scm
      - Require deprecated-util.scm
    * scm/deprecated-util.scm
      - New file copied from util.scm
      - (string-list-concat, string-find, truncate-list, list-head, nconc,
        string-to-list, symbolconc, nth, nthcdr, copy-list, digit->string,
        puts, siod-print, print, feature?, uim-symbol-value-str): Moved
        from util.scm
    * scm/Makefile.am
      - (SCM_FILES): Add deprecated-util.scm

2007-07-11 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/util.scm
      - (string->char, string->printable-char, string->letter,
        char-control?, char-upper-case?, char-lower-case?,
        char-alphabetic?, char-numeric?, char-printable?, char-graphic?,
        char-vowel?, char-consonant?, numeral-char->number, char-downcase,
        char-upcase, control-char?, alphabet-char?, numeral-char?,
        usual-char?, to-lower-char, charcode->string, string->charcode,
        ucs-to-utf8-string): Moved to ichar.scm
      - Require ichar.scm
    * scm/ichar.scm
      - New file copied from util.scm
      - (string->char, string->printable-char, string->letter,
        char-control?, char-upper-case?, char-lower-case?,
        char-alphabetic?, char-numeric?, char-printable?, char-graphic?,
        char-vowel?, char-consonant?, numeral-char->number, char-downcase,
        char-upcase, control-char?, alphabet-char?, numeral-char?,
        usual-char?, to-lower-char, charcode->string, string->charcode,
        ucs-to-utf8-string): Moved from util.scm
    * scm/Makefile.am
      - (SCM_FILES): Add ichar.scm

2007-07-11 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/util.scm
      - (charcode->string): Fix non-integer value acception as like as the
        previous C version
    * test/test-uim-util.scm
      - Update the "passed revision" comment
      - Add a test for charcode->string

2007-07-11 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/util.scm
      - (string-join): The 2 arguments has been swapped to be compatible
        with SRFI-13
    * scm/custom.scm
      - (custom-list-as-literal, custom-definition-as-literal): Follow the
        specification change of string-join
    * scm/mana.scm
      - (mana-list->string): Ditto
    * scm/uim-module-manager.scm
      - (update-loader-scm): Ditto
    * test/test-util.scm
      - Update the "passed revision" comment
      - Follow the specification change of string-join
    * doc/COMPATIBILITY
      - Update "Specification changes of utility procedures"

2007-07-11 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-util.c
      - (uim_strsplit, uim_split_string): Removed
      - (string_contains): New static function
      - (uim_init_util_subrs):
        * Remove definition for string-split
        * Add definition for string-contains
    * scm/util.scm
      - (string-split): New procedure. The specification is changed from C
        version. See doc/COMPATIBILITY. All the invocation of string-split
        is checked as safe by eyes
    * scm/prime.scm
      - (prime-engine-send-command): Follow the specification change of
        string-split
      - (prime-util-string-split): Add a comment about string-split
    * test/test-uim-util.scm
      - Update the "passed revision" comment
      - Add tests for new string-split
      - Add tests for string-contains
    * doc/COMPATIBILITY
      - Add new section "Specification changes of utility procedures"

2007-07-11 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-util.c
      - (eucjp_string_to_list): Removed
      - (uim_init_util_subrs): Remove definition for string-to-list
    * scm/util.scm
      - (string-to-list): New procedure
    * test/test-uim-util.scm
      - Update the "passed revision" comment

2007-07-11 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/util.scm
      - (char-vowel?): Rewrite without string->char (and string->charcode)

2007-07-11 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-util.c
      - (charcode2string, string2charcode): Removed
      - (uim_init_util_subrs): Remove definitions for charcode->string and
        string->charcode
    * scm/util.scm
      - (charcode->string, string->charcode): New procedure
    * test/test-uim-util.scm
      - Update the "passed revision" comment

2007-07-11 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * fep/uim-fep.c
      - Include uim-helper.h for uim_helper_is_setugid()
    
    * uim/bsdlook.h
    * uim/bsdlook.c
      - (uim_look_init): Change argument type to void

2007-07-10 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/util.scm
      - (truncate-list): Simplify with SRFI-1 'take'
      - (list-head): Rewrite as an alias to SRFI-1 'take'
    * test/test-util.scm
      - Update the "passed revision" comment

2007-07-10 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-util.c
      - (shift_elems, iterate_lists): Removed
      - (uim_init_util_subrs): Remove iterate-lists definition
    * test/test-util.scm
      - Remove tests for iterate-lists
      - Update the "passed revision" comment
    * doc/COMPATIBILITY
      - Update "SRFI-1 procedures replacement"

2007-07-10 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-util.c
      - (find_tail): Removed
      - (uim_init_util_subrs): Remove find-tail definition
    * scm/util.scm
      - (nthcdr): New procedure
    
    * scm/util.scm
      - Enable SRFI-1
      - (list-tabulate, make-list, iota, last, append!, concatenate,
        concatenate!, zip, last-pair, append-map, append-reverse, find,
        any, every, fold, unfold, filter, filter-map, remove, delete,
        alist-delete): Removed and replaced with SigScheme's SRFI-1
        implementation
    
    * scm/generic.scm
      - (ascii-rule): Follow the specification change of iota
    * scm/latin.scm
      - (ascii-rule): Ditto
    * test/test-util.scm
      - Fix misunderstood iota specification
      - Update the "passed revision" comment
    * doc/COMPATIBILITY
      - Add new entry "SRFI-1 procedures replacement"

2007-07-10 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-util.c
      - (nthcdr): Removed
      - (uim_init_util_subrs): Remove nthcdr definition
    * scm/util.scm
      - (nthcdr): New procedure
    * test/test-uim-util.scm
       - Update the "passed revision" comment

2007-07-10 Etsushi Kato <ek.kato@gmail.com>

    * qt/immodule-quiminput_context_compose.cpp
    * gtk/compose.c
    * xim/compose.cpp
    * uim/agent.c
    * uim/uim-scm.c
    * uim/anthy.c
    * uim/uim-func.c
      - Apply patch from Christian Biere for isspace(3), isalpha(3),
        and isdigit(3) (bug #11407).

2007-07-10 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * test/test-im.scm
      - Update the "passed revision" comment

2007-07-10 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * test/test-im.scm
      - Exclude uim-look from enabled-im-list to test direct IM as default IM
      - Unset LANG and LC_ALL in "test find-im" to pass (im-name
        (find-im #f "")) => 'direct

2007-07-10 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * test/test-im.scm
      - Replace default IM names for Chinese and Vietnamese in accordance
        with m17n-lib update

2007-07-10 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * test/test-action.scm
    * test/test-custom-rt.scm
    * test/test-custom.scm
    * test/test-example.scm
    * test/test-i18n.scm
    * test/test-key.scm
    * test/test-lazy-load.scm
    * test/test-plugin.scm
    * test/test-uim-test-utils.scm
    * test/test-uim-util.scm
    * test/test-ustr.scm
    * test/test-util.scm
      - Update the "passed revision" comment

2007-07-10 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/im.scm
      - (next-im): Fix SIOD-dependent list operation
    * test/test-im.scm
      - Replace SIOD bool expected values to R5RS
    
    * uim/uim-util.c
      - (uim_split_string): Fix SIOD-dependent duplexed result meaning of
        #f and '()
    
    * uim/intl.c
      - (intl_textdomain, intl_bindtextdomain): Fix SIOD-dependent boolean
        condition
    
    * test/uim-test-utils.scm
      - (uim-bool): Change SIOD bool to R5RS bool
    * test/test-uim-util.scm
    * test/test-lazy-load.scm
    * test/test-util.scm
      - Replace SIOD bool expected values to R5RS
    
    * test/test-action.scm
      - Replace SIOD bool expected values to R5RS
      - Fix non-R5RS-conformant internal definitions
      - Fix incorrect #f with '()
    
    * test/test-custom.scm
      - Add SigScheme-specific closure external representation workaround
    
    * test/test-example.scm
      - Fix a SIOD-dependent? test result to R5RS

2007-07-10 Etsushi Kato <ek.kato@gmail.com>

    * Add check for off_t.

2007-07-10 Etsushi Kato <ek.kato@gmail.com>

    * qt/immodule-quiminputcontext.h
    * qt/immodule-quiminputcontext_compose.cpp
    * xim/xim.h
    * xim/compose.cpp
      - Apply fixes of compose token buffer usage as in gtk+ bridge
        on r4670.

2007-07-09 Etsushi Kato <ek.kato@gmail.com>

    * gtk/compose.c
      - (nextch)
      - (nexttoken)
      - (parse_compose_line)
        - Check buffer size (bug #11411).
      - (ParseComposeStringFile)
        - Check st_size of a compose file properly (bug #11411,
          Christian Biere).

2007-07-05 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/skk-custom.scm
      - (custom-group skkserv, custom-group dict-files): New custom group
      - Subgroup skkserv-related custom variables
      - Subgroup dictionary file -related custom variables

2007-07-04 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * helper/dict-word-list-win-gtk.c
      - (help_about_action_cb): Update project URL in a string
    
    * COPYING
    * emacs/COPYING
    * emacs/README
    * emacs/README.ja
    * emacs/callback.c
    * emacs/callback.h
    * emacs/candidate.c
    * emacs/candidate.h
    * emacs/commit.c
    * emacs/commit.h
    * emacs/context.c
    * emacs/context.h
    * emacs/debug.c
    * emacs/debug.h
    * emacs/encoding.c
    * emacs/encoding.h
    * emacs/helper-message.c
    * emacs/helper-message.h
    * emacs/helper-server.c
    * emacs/helper-server.h
    * emacs/helper.c
    * emacs/helper.h
    * emacs/im.c
    * emacs/im.h
    * emacs/key.c
    * emacs/key.h
    * emacs/output.c
    * emacs/output.h
    * emacs/preedit.c
    * emacs/preedit.h
    * emacs/prop.c
    * emacs/prop.h
    * emacs/uim-candidate.el
    * emacs/uim-debug.el
    * emacs/uim-el-agent.c
    * emacs/uim-el-agent.h
    * emacs/uim-el-helper-agent.c
    * emacs/uim-el-helper-agent.h
    * emacs/uim-el-types.h
    * emacs/uim-helper.el
    * emacs/uim-key.el
    * emacs/uim-keymap.el
    * emacs/uim-leim.el
    * emacs/uim-preedit.el
    * emacs/uim-util.el
    * emacs/uim-var.el
    * emacs/uim.el
    * examples/uim-custom/uim-custom-dump.c
    * examples/uim-custom/uim-custom-update.c
    * examples/uim-custom/uim-custom-variable.c
    * fep/COPYING
    * fep/callbacks.c
    * fep/callbacks.h
    * fep/draw.c
    * fep/draw.h
    * fep/escseq.c
    * fep/escseq.h
    * fep/helper.c
    * fep/helper.h
    * fep/key.c
    * fep/key.h
    * fep/read.c
    * fep/read.h
    * fep/str.c
    * fep/str.h
    * fep/udsock.c
    * fep/udsock.h
    * fep/uim-fep-tick.c
    * fep/uim-fep.c
    * fep/uim-fep.h
    * gtk/caret-state-indicator.c
    * gtk/caret-state-indicator.h
    * gtk/compose.c
    * gtk/compose.h
    * gtk/gtk-im-uim.c
    * gtk/gtk-im-uim.h
    * gtk/key-util-gtk.c
    * gtk/key-util-gtk.h
    * gtk/text-util.c
    * gtk/text-util.h
    * gtk/uim-cand-win-gtk.c
    * gtk/uim-cand-win-gtk.h
    * gtk/uim-eb.c
    * gtk/uim-eb.h
    * helper/candwin-gtk.c
    * helper/dict-anthy.c
    * helper/dict-anthy.h
    * helper/dict-canna-cclass.c
    * helper/dict-canna-cclass.h
    * helper/dict-canna.c
    * helper/dict-canna.h
    * helper/dict-cclass-dialog.c
    * helper/dict-cclass-dialog.h
    * helper/dict-dict.c
    * helper/dict-dict.h
    * helper/dict-main-gtk.c
    * helper/dict-util.c
    * helper/dict-util.h
    * helper/dict-word-list-view-gtk.c
    * helper/dict-word-list-view-gtk.h
    * helper/dict-word-list-win-gtk.c
    * helper/dict-word-list-win-gtk.h
    * helper/dict-word-win-gtk.c
    * helper/dict-word-win-gtk.h
    * helper/dict-word.c
    * helper/dict-word.h
    * helper/im-switcher-gtk.c
    * helper/input-pad-ja.c
    * helper/pref-gtk-custom-widgets.c
    * helper/pref-gtk-custom-widgets.h
    * helper/pref-gtk-keytab.h
    * helper/pref-gtk.c
    * helper/toolbar-applet-gnome.c
    * helper/toolbar-common-gtk.c
    * helper/toolbar-standalone-gtk.c
    * helper/toolbar-systray-gtk.c
    * helper/uim-dict-ui.xml.in
    * qt/candwin-qt.cpp
    * qt/candwin-qt.h
    * qt/chardict/chardict-bushuviewwidget.cpp
    * qt/chardict/chardict-bushuviewwidget.h
    * qt/chardict/chardict-chargridview.cpp
    * qt/chardict/chardict-chargridview.h
    * qt/chardict/chardict-qt.cpp
    * qt/chardict/chardict-qt.h
    * qt/chardict/chardict-unicodeviewwidget.cpp
    * qt/chardict/chardict-unicodeviewwidget.h
    * qt/chardict/qtgettext.h
    * qt/immodule-candidatewindow.cpp
    * qt/immodule-candidatewindow.h
    * qt/immodule-plugin.cpp
    * qt/immodule-plugin.h
    * qt/immodule-qhelpermanager.cpp
    * qt/immodule-qhelpermanager.h
    * qt/immodule-qtextutil.cpp
    * qt/immodule-qtextutil.h
    * qt/immodule-quiminfomanager.cpp
    * qt/immodule-quiminfomanager.h
    * qt/immodule-quiminputcontext.cpp
    * qt/immodule-quiminputcontext.h
    * qt/immodule-quiminputcontext_compose.cpp
    * qt/immodule-quiminputcontext_compose.h
    * qt/immodule-quiminputcontext_with_slave.cpp
    * qt/immodule-quiminputcontext_with_slave.h
    * qt/immodule-subwindow.cpp
    * qt/immodule-subwindow.h
    * qt/pref-customwidgets.cpp
    * qt/pref-customwidgets.h
    * qt/pref-qt.cpp
    * qt/pref-qt.h
    * qt/qtgettext.h
    * qt/switcher-qt.cpp
    * qt/switcher-qt.h
    * qt/toolbar-applet-kde.cpp
    * qt/toolbar-applet-kde.h
    * qt/toolbar-common-quimhelpertoolbar.cpp
    * qt/toolbar-common-quimhelpertoolbar.h
    * qt/toolbar-common-uimstateindicator.cpp
    * qt/toolbar-common-uimstateindicator.h
    * qt/toolbar-standalone-qt.cpp
    * qt/toolbar-standalone-qt.h
    * replace/os_dep.h
    * scm/action.scm
    * scm/anthy-custom.scm
    * scm/anthy-key-custom.scm
    * scm/anthy-utf8-custom.scm
    * scm/anthy-utf8.scm
    * scm/anthy.scm
    * scm/byeoru-custom.scm
    * scm/byeoru-dic.scm
    * scm/byeoru-key-custom.scm
    * scm/byeoru-symbols.scm
    * scm/byeoru.scm
    * scm/canna-custom.scm
    * scm/canna-key-custom.scm
    * scm/canna.scm
    * scm/custom-rt.scm
    * scm/custom.scm
    * scm/direct.scm
    * scm/generic-custom.scm
    * scm/generic-key-custom.scm
    * scm/generic.scm
    * scm/hangul.scm
    * scm/hangul2.scm
    * scm/hangul3.scm
    * scm/i18n.scm
    * scm/im-custom.scm
    * scm/im-switcher.scm
    * scm/im.scm
    * scm/init.scm
    * scm/ipa-x-sampa.scm
    * scm/iso-639-1.scm
    * scm/japanese-azik.scm
    * scm/japanese-kana.scm
    * scm/japanese.scm
    * scm/key.scm
    * scm/latin.scm
    * scm/lazy-load.scm
    * scm/load-action.scm
    * scm/look-custom.scm
    * scm/look.scm
    * scm/m17nlib.scm
    * scm/mana-custom.scm
    * scm/mana-key-custom.scm
    * scm/mana.scm
    * scm/pinyin-big5.scm
    * scm/plugin.scm
    * scm/prime-custom.scm
    * scm/prime-key-custom.scm
    * scm/prime.scm
    * scm/pyload.scm
    * scm/pyunihan.scm
    * scm/rk.scm
    * scm/scim.scm
    * scm/skk-custom.scm
    * scm/skk-dialog.scm
    * scm/skk-editor.scm
    * scm/skk-key-custom.scm
    * scm/skk.scm
    * scm/spellcheck-custom.scm
    * scm/spellcheck.scm
    * scm/tcode.scm
    * scm/trycode.scm
    * scm/tutcode-bushudic.scm
    * scm/tutcode-custom.scm
    * scm/tutcode-key-custom.scm
    * scm/tutcode-rule.scm
    * scm/tutcode.scm
    * scm/uim-db.scm
    * scm/uim-module-manager.scm
    * scm/uim-sh.scm
    * scm/ustr.scm
    * scm/util.scm
    * scm/viqr.scm
    * scm/zaurus.scm
    * test/run-test.scm
    * test/template.scm
    * test/test-action.scm
    * test/test-custom-rt.scm
    * test/test-custom.scm
    * test/test-db.scm
    * test/test-example.scm
    * test/test-i18n.scm
    * test/test-im.scm
    * test/test-intl.scm
    * test/test-key.scm
    * test/test-lazy-load.scm
    * test/test-plugin.scm
    * test/test-slib.scm
    * test/test-uim-test-utils.scm
    * test/test-uim-util.scm
    * test/test-ustr.scm
    * test/test-util.scm
    * test/uim-test-utils.scm
    * uim/agent.c
    * uim/anthy-utf8.c
    * uim/anthy.c
    * uim/bsdlook.h
    * uim/canna.c
    * uim/editline.c
    * uim/editline.h
    * uim/encoding-table.c
    * uim/iconv.c
    * uim/intl.c
    * uim/look.c
    * uim/m17nlib.c
    * uim/mana.c
    * uim/plugin.c
    * uim/plugin.h
    * uim/prime.c
    * uim/rk.c
    * uim/scim.cpp
    * uim/skk.c
    * uim/spellcheck.c
    * uim/test-gc.c
    * uim/uim-compat-scm.c
    * uim/uim-compat-scm.h
    * uim/uim-custom-enabler.c
    * uim/uim-custom.c
    * uim/uim-custom.h
    * uim/uim-func.c
    * uim/uim-helper-client.c
    * uim/uim-helper-server.c
    * uim/uim-helper.c
    * uim/uim-helper.h
    * uim/uim-im-switcher.h
    * uim/uim-internal.h
    * uim/uim-ipc.c
    * uim/uim-key.c
    * uim/uim-module-manager.c
    * uim/uim-scm-abbrev.h
    * uim/uim-scm.c
    * uim/uim-scm.h
    * uim/uim-sh.c
    * uim/uim-util.c
    * uim/uim-util.h
    * uim/uim.c
    * uim/uim.h
    * xim/canddisp.cpp
    * xim/canddisp.h
    * xim/compose.cpp
    * xim/compose.h
    * xim/connection.cpp
    * xim/connection.h
    * xim/convdisp.cpp
    * xim/convdisp.h
    * xim/helper.cpp
    * xim/helper.h
    * xim/locale.cpp
    * xim/main.cpp
    * xim/util.cpp
    * xim/util.h
    * xim/xdispatch.h
    * xim/xim.h
    * xim/ximic.cpp
    * xim/ximim.cpp
    * xim/ximpacket.cpp
    * xim/ximpn.h
    * xim/ximserver.cpp
    * xim/ximserver.h
    * xim/ximtrans.cpp
      - Replace http://uim.freedesktop.org/ with
        http://code.google.com/p/uim/ in the copyrights

2007-07-04 Etsushi Kato <ek.kato@gmail.com>

    * uim/uim-helper-client.c (uim_helper_init_client_fd) : Fix leak
      of file descriptors when uim-helper-server is not working
      (bug #11461, Christian Biere).

2007-07-03 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit update website URLs and mailinglist address for Google
      Code hosting
    
    * doc/RELEASING
      - Update release process for Google Code hosting
    
    * uim/uim.h
      - Update svn repository URL in a comment
    
    * helper/dict-word-list-win-gtk.c
      - (help_about_action_cb): Update website URL
    
    * configure.ac
      - Update mailinglist address
    
    * po/Makevars
    * qt/chardict/po/Makevars
      - (MSGID_BUGS_ADDRESS): Update mailinglist address
    
    * README
    * RELNOTE
    * uim.spec.in
    * make-wc.sh
    * make-dist.sh
    * Makefile.am
      - Update site URLs

2007-07-03 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * configure.ac
      - Add --with-master-pkg=uim which I forgot to commit since Jun 15 19:02

2007-07-03 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * tools/gnuify-changelog.pl
      - (%hackers): Add Gmail account for kzk

2007-06-30 Etsushi Kato <ek.kato@gmail.com>

    * gtk/uim-candwin-gtk.c
    * gtk/uim-eb.c
    * gtk/gtk-im-uim.c
      - Don't mixup free() and g_free().

2007-06-30 Etsushi Kato <ek.kato@gmail.com>

    * uim/Makefile.am : Include sigscheme.mk.

2007-06-30 Etsushi Kato <ek.kato@gmail.com>

    * gtk-im-uim.c (get_preedit_segment) : Change return type as gchar *.

2007-06-30 Etsushi Kato <ek.kato@gmail.com>

    * gtk/compose.c
    * gtk/gtk-im-uim.c
      - Use g_free() instead of free() for string allocated by glib
        (bug #11406).

2007-06-24 IWATA Ray <iwata@quasiquote.org>

    fix typo 'prepered' -> 'prepared'

2007-06-24 Konosuke Watanabe <sasugaanija@gmail.com>

    * uim.el
    * uim-var.el
     - Fix bug; font faces of the candidates are lost when the
       idle time exceeds 3 seconds (Emacs21)

2007-06-23 KIHARA Hideto <deton@m1.interq.or.jp>

    * scm/tutcode.scm
      - (tutcode-rule-set-sequences!, tutcode-rule-commit-sequences!):
      Removed codes to change a part of tutcode-rule.
      Instead, only prepend new sequences to tutcode-rule. (for smaller code size)

2007-06-23 Konosuke Watanabe <sasugaanija@gmail.com>

    * emacs/uim.el
    * emacs/uim-key.el
    * emacs/uim-var.el
     - Support shifted-motion-keys-select-region feature of XEmacs

2007-06-14 KIHARA Hideto <deton@m1.interq.or.jp>

    * scm/tutcode.scm
      - (tutcode-proc-state-yomi): Fix to be able to begin conversion
      by customized tutcode-begin-conv-key with <Control>.

2007-06-13 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/init.scm
      - (allocate-heap): Fix invalid top-level
        definition. --enable-strict-toplevel-definitions requires this fix
    * scm/uim-sh.scm
      - (activate-editline): Ditto
    * scm/load-action.scm
      - (do-nothing, register-widget, register-action, indicator-new,
        activity-indicator-new, actions-new, context-init-widgets,
        context-list-replace-widgets!, context-update-widgets,
        context-prop-activate-handler, context-mode-handler): Ditto
    * scm/prime.scm
      - (prime-app-mode-end-stroke-list): Ditto

2007-06-11 KIHARA Hideto <deton@m1.interq.or.jp>

    * scm/tcode.scm: Fix tcode-rule (patch from akira yamada [uim-ja 29])

2007-06-03 Konosuke Watanabe <sasugaanija@gmail.com>

    * emacs/uim-keymap.el
    * emacs/uim-key.el
     - Fix bug reported by Kouhei Sutou
       http://groups.google.com/group/uim-ja/browse_thread/thread/a6b63c2d36176ac2

2007-06-03 Konosuke Watanabe <sasugaanija@gmail.com>

    * emacs/uim-keymap.el
     - Support Emacs-23.x

2007-05-29 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/m17nlib.c
      - (init_m17nlib): Cosmetic change

2007-05-29 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/m17nlib.c
      - (init_m17nlib): Add a comment

2007-05-29 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/m17nlib.c
      - (init_m17nlib): Fix listing incomplete IMs (reported in
        [uim-ja 30] by Kenichi Handa. Thanks)

2007-05-29 KIHARA Hideto <deton@m1.interq.or.jp>

    * scm/tcode.scm: Fix tcode-rule (patch from akira yamada [uim-ja 29])

2007-05-29 Etsushi Kato <ek.kato@gmail.com>

    * scm/prime.scm (prime-context-history-compare) : Fix to not
      return undef.

2007-05-28 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-util.c
      - (protected): New static variable
      - (uim_get_language_name_from_locale,
        uim_get_language_code_from_language_name): Fix GC-unprotected lisp
        variables reported by Etsushi on [uim-en 16]. Thanks for the report
      - (setugidp): Add an API precondition
      - (uim_init_util_subrs): Init 'protected'

2007-05-28 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * tools/gnuify-changelog.pl
      - (%hackers): Add Google Code account for Yusuke

2007-05-28 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit fix the problem opening all of registered m17n IM at
      startup reported by Kenichi Handa on [uim-ja 27]. Thanks letting us
      know the problem
    
    * uim/m17nlib.c
      - (im_instance): New static function
      - (init_m17nlib): Defer m17nlib IM instantiation
      - (get_input_method_short_desc, find_im_by_name): Follow the
        introduction of lazy IM instantiation

2007-05-24 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * tools/gnuify-changelog.pl
      - (%hackers): Fix a mail address notation

2007-05-23 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/japanese-kana.scm
      - (ja-kana-halfkana-rule): Fix fullwidth middle dot with halfwidth
        one. Thanks the anonymous reporter
    * NEWS
      - Update

2007-05-23 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

     * AUTHORS
      - Add IWATA Ray
    * tools/gnuify-changelog.pl
      - (%hackers): Ditto

2007-05-23 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/trycode.scm
      - (trycode-rule): Follow the original Try-Code table
        definition update of 2007-04-05 by patch posted in
        http://slashdot.jp/comments.pl?sid=350913&cid=1138016. Thanks
        the anonymous

2007-05-23 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim.c
      - (struct uim_get_candidate_args): New type
      - (uim_get_candidate_internal): New static function
      - (uim_get_candidate): Fix the assertion failure on uim-fep reported
        in [uim-en 7]. Thanks Etsushi

2007-05-21 KIHARA Hideto <deton@m1.interq.or.jp>

    * scm/tutcode.scm: Fix bugs when --disable-compat-siod-bugs.
      - (tutcode-push-key!, tutcode-rule-commit-sequences!): Add #f check.
        Fix null list check.
      - (tutcode-bushu-convert, tutcode-bushu-compose,
        tutcode-bushu-alternative): Add #f check
      - (tutcode-bushu-decompose): Add null list check

2007-05-20 KIHARA Hideto <deton@m1.interq.or.jp>

    * This commit add bushu conversion and mazegaki conversion for tutcode
      [anthy-dev 3467]
    
    * scm/tutcode-key-custom.scm
      - (tutcode-mazegaki-start-sequence, tutcode-bushu-start-sequence,
        tutcode-begin-conv-key, tutcode-commit-key, tutcode-cancel-key,
        tutcode-next-candidate-key, tutcode-prev-candidate-key,
        tutcode-return-key, tutcode-vi-escape-key): New custom key definition
    
    * scm/tutcode-bushudic.scm
      - New file for bushu conversion dictionary
      - (tutcode-bushudic-altchar, tutcode-bushudic): New variable
    
    * scm/tutcode-rule.scm
      - New file
      - (tutcode-rule): Moved from tutcode.scm.
        Change kana part from dot pair to list
    
    * scm/tutcode-custom.scm
      - New file
      - (tutcode-im-name-label, tutcode-im-short-desc): New variable
      - (custom-group tutcode, custom-group tutcode-dict): New custom group
      - (custom tutcode-dict, custom tutcode-dic-filename,
        custom tutcode-personal-dic-filename, custom tutcode-rule-filename,
        custom tutcode-use-with-vi?,
        custom tutcode-use-dvorak?): New custom varible
    
    * scm/tutcode.scm
      - (tutcode-rule): Moved contents to tutcode-rule.scm
      - (tutcode-rule-userconfig): New variable for rule customization in ~/.uim
      - (tutcode-dic-init): New variable for mazegaki dictionary
      - (tutcode-context-rec-spec): Rename context on to state.
        Add context head, nth and nr-candidates for mazegaki conversion.
      - (tutcode-context-on?): Follow the change of context
      - (tutcode-context-new): Add initialization of mazegaki dictionary.
        Add rule modification to apply user configuration.
      - (tutcode-flush, tutcode-make-string, tutcode-append-string,
        tutcode-update-preedit):
        New function for mazegaki and bushu conversion.
      - (tutcode-read-personal-dictionary, tutcode-save-personal-dictionary,
        tutcode-get-nth-candidate, tutcode-get-current-candidate,
        tutcode-prepare-commit-string, tutcode-begin-conversion,
        tutcode-proc-state-yomi, tutcode-incr-candidate-index,
        tutcode-decr-candidate-index, tutcode-back-to-yomi-state,
        tutcode-proc-state-converting):
        New function for mazegaki conversion.
      - (tutcode-proc-state-bushu, tutcode-bushu-convert,
        tutcode-bushu-compose-sub, tutcode-bushu-compose,
        tutcode-bushu-alternative, tutcode-bushu-decompose):
        New function for bushu conversion.
      - (tutcode-push-key!): New function
      - (tutcode-proc-state-on): Renamed from tutcode-proc-on-mode.
        Add mode transition to mazegaki or bushu conversion.
        Add vi-friendly feature.
        Changed to drop non TUT-Code key strokes entirely like tc2.
      - (tutcode-proc-state-off): Renamed from tutcode-proc-off-mode
      - (tutcode-key-press-handler):
        Follow the addition of mazegaki and bushu conversion mode.
      - (tutcode-release-handler):
        New function to save personal mazegaki dictionary
      - (tutcode-reset-handler): Changed to use tutcode-flush instead of rk-flush
      - (tutcode-rule-qwerty-to-dvorak): New function for dvorak keyboard
      - (tutcode-rule-qwerty-to-dvorak-alist): New variable for dvorak keyboard
      - (tutcode-custom-load-rule!, tutcode-rule-commit-sequences!
        tutcode-custom-set-mazegaki/bushu-start-sequence!):
        New function to modify rule for applying user configuration
      - (tutcode-rule-set-sequences!):
        New function to customize rule in ~/.uim
    
    * scm/Makefile.am
      - (SCM_FILES): Add tutcode-custom.scm tutcode-bushudic.scm tutcode-rule.scm

2007-05-19 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * AUTHORS
      - Add KIHARA Hideto
    * tools/gnuify-changelog.pl
      - (%hackers): Ditto

2007-05-17 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * tools/gnuify-changelog.pl
      - (%hackers): Add usernames on Google Code hosting

2007-05-05 Konosuke Watanabe <sasugaanija@gmail.com>

    * emacs/uim-keymap.el
    * emacs/uim-var.el
    * emacs/uim.el
    * emacs/uim-candidate.el
     - Improve font-lock-mode support

2007-05-05 Konosuke Watanabe <sasugaanija@gmail.com>

    * emacs/uim-key.el
     - Support delete-selection-mode

2007-05-05 Konosuke Watanabe <sasugaanija@gmail.com>

    * emacs/uim-key.el
     - Support event-apply-*-modifier

2007-05-05 Konosuke Watanabe <sasugaanija@gmail.com>

    * emacs/uim-var.el
     - Remove unused variable.

2007-05-05 Konosuke Watanabe <sasugaanija@gmail.com>

    * emacs/uim.el
     - Fix indentation.

2007-04-08 Etsushi Kato <ek.kato@gmail.com>

    * pixmaps/Makefie.am
      - (IM_SUBST_SVGS)
      - (IM_SUBST_PNGS)
        - Use subst icon for look IM.

2007-04-08 Etsushi Kato <ek.kato@gmail.com>

    * scm/look.scm
      - (look-learn) : Fix typo.
      - (look-key-press-state-look) : Apply patch
        http://lists.freedesktop.org/archives/uim/2007-April/001835.html.

2007-04-08 Etsushi Kato <ek.kato@gmail.com>

    * configure.ac : Add check for LLONG_MIN and LLONG_MAX.

2007-04-08 Etsushi Kato <ek.kato@gmail.com>

    * uim/look.c : New file.

2007-04-08 Etsushi Kato <ek.kato@gmail.com>

    * Apply look IM patch from iwata at quasiquote.org
      (http://lists.freedesktop.org/archives/uim/2007-March/001809.html
      and the thead).
    
    * scm/skk-custom.scm (skk-look-dict) : New custom variable.
    * scm/skk.scm (skk-context-new) : Call skk-lib-look-open.
    * scm/look.scm
    * scm/look-custom.scm
      - New files for look IM.
    * scm/Makefile.am
      - (SCM_FILES)
      - (module_names)
        - Add look.
    * uim/bsklook.h
    * uim/bsd
      - New file for look IM.
    * uim/skk.c : Use bsdlook
    * uim/Makefile.am
      - (libuim_la_SOURCES) : Add bsdlook.c.
      - Add look plugin.

2007-04-08 Etsushi Kato <ek.kato@gmail.com>

    * configure.ac : Use -Wno-long-long for CFLAGS.

2007-04-08 Etsushi Kato <ek.kato@gmail.com>

    * Integrate patch from iwata at quasiquote.org
      (http://lists.freedesktop.org/archives/uim/2007-March/001819.html).
    
    * configure.ac
      - AC_REPLACE_FUNCS for strtonum strtoll.
      - Remove check for C99 vsnprintf for asprintf in uim-xim.
      - Check BROKEN_SNPRINTF instead.
    * fep/uim-fep.c
      - (check_dir) : New.  Same as in check_dir() in uim-helper.c.
      - (get_ud_path) : New.  Check ~/.uim.d/fep/.
      - (main)
        - Use strtonum() instead of atoi().
        - Use ~/.uim.d/fep/ directory.
    * replace/os_dep.h
      - Include <stdarg.h> for asprintf() and snprintf().
      - Replace asprintf(), vsnprintf(), snprintf(), strtoll(), and
        strtonum().
    * replace/Makefile.am (libreplace_la_SOURCES) : Add bsd-asprintf.c
      bsd-snprintf.c strtoll.c strtonum.c.
    * replace/strtoll.c
    * replace/bsd-snprintf.c
    * replace/strtonum.c
    * replace/bsd-asprintf.c
      - New file.
    * xim/util.cpp : Remove asprintf() replacement.

2007-04-05 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim.c
      - (uim_get_im_name, uim_get_im_language, uim_get_im_encoding):
        Fix unprotected variable
      - (uim_get_im_short_desc): Make a variable protection more conservative

2007-03-26 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim.desktop.in.in
      - (_Name): Modify "Input Method (uim)" to "Input Method"
      - (Categories): Add X-GNOME-PersonalSettings
    * helper/GNOME_UimApplet.server.in.in
      - Fix panel:category "Utility" to "Utilities" to follow the category
        renaming on Gnome 2.7
      - Rename name attribute "Input Method Indicator (uim)" to "Input
        Method Indicator" since the information 'uim' is provided by the
        icon and description
      - Modify description attribute
    * po/ja.po
    * po/ko.po
    * po/fr.po
      - Update to follow the changes

2007-03-26 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/iso-639-1.scm
      - (iso-639-1-alist): Modify "Oromo (Afan Galla)" to "Oromo (Afan, Galla)"
    * po/ja.po
      - Update
      - Translate new uim-skk messages
      - Translate eggtrayicon.c messages
    * po/ko.po
    * po/fr.po
      - Update

2007-03-26 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * po/uim.pot
      - Removed since this file is autogenerated

2007-03-26 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-key.c
      - (uim_key_sym_to_int, get_sym, define_valid_key_symbols): Simplify
      - (define_key):
        * Add syntax check
        * Simplify

2007-03-26 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-sh.c
      - (struct uim_sh_args): New type
      - (main): Split main code off to uim_sh() to fix GC protection
      - (uim_sh): New static function split from main()

2007-03-26 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-scm.c
      - (uim_scm_c_int_internal, uim_scm_refer_c_str_internal,
        uim_scm_c_ptr, uim_scm_c_func_ptr): Simplify

2007-03-26 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-scm.c
      - (uim_scm_symbol_value, uim_scm_symbol_value_int,
        uim_scm_symbol_value_str): Add NULL check assertion for the arg
      - (uim_scm_symbol_value_bool): Replace runtime NULL check for the
        arg with equivalent assertion
    * doc/COMPATIBILITY
      - Update section "Stricter argument precondition requirements"

2007-03-26 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-scm.c
      - (uim_scm_load_file, uim_scm_require_file): Replace runtime NULL
        check for the argument with equivalent assertion
    * doc/COMPATIBILITY
      - Add new section "Stricter argument precondition requirements"

2007-03-26 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-scm.h
      - (uim_scm_string_equal): Move to uim-compat-scm.h
    * uim/uim-compat-scm.h
      - (uim_scm_string_equal): Moved from uim-scm.h
    * uim/uim-scm.c
      - (struct cmp_args, uim_scm_string_equal,
        uim_scm_string_equal_internal): Move to uim-compat-scm.c
    * uim/uim-compat-scm.c
      - (struct cmp_args, uim_scm_string_equal,
        uim_scm_string_equal_internal): Moved from uim-scm.c
    * uim/rk.c
      - Include uim-compat-scm.h to follow the moving

2007-03-26 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit add precondition assertions and temporary uim_lisp
      protection around GC context
    
    * uim/uim-scm.c
      - (protected, initialized): New static variable
      - (struct cmp_args): New type
      - (uim_scm_error, uim_scm_get_output, uim_scm_set_output,
        uim_scm_ensure, uim_scm_c_bool, uim_scm_make_bool, uim_scm_c_int,
        uim_scm_make_int, uim_scm_c_str, uim_scm_refer_c_str,
        uim_scm_make_str, uim_scm_c_symbol, uim_scm_make_symbol,
        uim_scm_c_ptr, uim_scm_make_ptr, uim_scm_c_func_ptr,
        uim_scm_make_func_ptr, uim_scm_gc_protect, uim_scm_gc_unprotect,
        uim_scm_call_with_gc_ready_stack, uim_scm_gc_protectedp,
        uim_scm_is_alive, uim_scm_get_verbose_level,
        uim_scm_set_verbose_level, uim_scm_set_lib_path,
        uim_scm_symbol_value_bool, uim_scm_symbol_value_int,
        uim_scm_symbol_value_str, uim_scm_t, uim_scm_f, uim_scm_null,
        uim_scm_quote, uim_scm_list1, uim_scm_list2, uim_scm_list3,
        uim_scm_list4, uim_scm_list5, uim_scm_nullp, uim_scm_consp,
        uim_scm_integerp, uim_scm_stringp, uim_scm_symbolp, uim_scm_eq,
        uim_scm_eval, uim_scm_eval_c_string, uim_scm_call,
        uim_scm_call_with_guard, uim_scm_car, uim_scm_cdr, uim_scm_cons,
        uim_scm_init_subr_0, uim_scm_init_subr_1, uim_scm_init_subr_2,
        uim_scm_init_subr_3, uim_scm_init_subr_4, uim_scm_init_subr_5,
        uim_scm_init_fsubr): Add precondition assertions
      - (uim_scm_length):
        * Add uim_lisp protection
        * Add precondition assertions
      - (uim_scm_load_file, uim_scm_require_file):
        * Add uim_lisp protection
        * Add precondition assertions
        * Simplify
      - (uim_scm_gc_protected_contextp): Make callable from uninitialized
        context
      - (uim_scm_symbol_value): Make callable from unprotected context
      - (uim_scm_symbol_value_internal): New static function split from
        uim_scm_symbol_value()
      - (uim_scm_string_equal):
        * Ditto
        * Add precondition assertions
      - (uim_scm_string_equal_internal): New static function split from
        uim_scm_string_equal()
      - (uim_scm_symbol_value_str_internal): Simplify
      - (uim_scm_init): Add initialization for the new static variables
      - (uim_scm_quit): Add 'initialized' handling
    * uim/uim-compat-scm.c
      - (uim_scm_c_strs_into_list): Add precondition assertions
    * uim/uim.c
      - (protected0, protected1): New static variable
      - (uim_init): Split main initalization off to uim_init_internal() to
        fix unprotected GC context
      - (uim_init_internal):
        * New static function split from uim_init()
        * Add initalization for the new static variables
      - (uim_create_context):
        * Add precondition assertions
        * Add uim_lisp protections
      - (uim_release_context, uim_reset_context, uim_focus_in_context,
        uim_focus_out_context, uim_place_context, uim_displace_context,
        uim_set_preedit_cb, uim_set_candidate_selector_cb,
        uim_set_candidate_selector_cb, uim_get_candidate,
        uim_candidate_get_cand_str, uim_candidate_get_heading_label,
        uim_candidate_get_annotation_str, uim_candidate_free,
        uim_get_candidate_index, uim_set_candidate_index,
        uim_set_text_acquisition_cb, uim_input_string,
        uim_set_configuration_changed_cb, uim_set_im_switch_request_cb,
        uim_switch_im, uim_get_nr_modes, uim_get_mode_name,
        uim_get_current_mode, uim_set_mode, uim_set_mode_cb,
        uim_set_mode_list_update_cb, uim_set_prop_list_update_cb,
        uim_set_prop_label_update_cb, uim_prop_list_update,
        uim_prop_label_update, uim_prop_activate, uim_prop_update_custom,
        uim_prop_reload_configs, get_nth_im): Add precondition assertions
      - (uim_get_current_im_name, uim_get_default_im_name,
        uim_get_im_name_for_locale, uim_get_nr_im, uim_get_im_name,
        uim_get_im_language, uim_get_im_encoding, uim_get_im_short_desc):
        * Add uim_lisp protections
        * Add precondition assertions
    * uim/uim-key.c
      - (protected): New static variable
      - (filter_key): Add uim_lisp protection
      - (uim_press_key, uim_release_key): Add precondition assertions
      - (uim_init_key_subrs): Add initialization for 'protected'
    * uim/uim-custom.c
      - (uim_custom_init): Add uim_scm_gc_protect() for uim_scm_last_val

2007-03-16 Etsushi Kato <ek.kato@gmail.com>

    * helper/toolbar-common-gtk.c (uim_toolbar_trayicon_new) : Adjust
      focus-padding.

2007-03-16 Etsushi Kato <ek.kato@gmail.com>

    * scm/canna.scm (canna-context-rec-spec) : Fix initial values.

2007-03-16 Etsushi Kato <ek.kato@gmail.com>

    * scm/canna.scm (canna-context-rec-spec) : Fix initial value of
      'state.

2007-03-16 Etsushi Kato <ek.kato@gmail.com>

    * fep/uim-fep.c (main) : Fix crash when -u option is used.

2007-03-16 Etsushi Kato <ek.kato@gmail.com>

    * gtk/gtk-im-uim.c
      - (im_uim_commit_string) : Suppress warning for just in case.
      - (show_preedit) : Minimize the window as (1, 1) when hiding it.

2007-03-15 Etsushi Kato <ek.kato@gmail.com>

    * helper/toolbar-common-gtk.c
      - (prop_button_create)
      - (helper_toolbar_prop_list_update)
      - (toolbar_new)
      - (uim_toolbar_trayicon_new)
        - Set focus-line-width and focu-padding as 0 for systray
          icons.

2007-03-15 Etsushi Kato <ek.kato@gmail.com>

    * scm/rk.scm (rk-proc-end-seq): Simplify.

2007-03-14 Etsushi Kato <ek.kato@gmail.com>

    * uim/Makefile.am (libuim_m17nlib_la_CPPFLAGS) : Fix to add
      M17NLIB_CFLAGS.

2007-03-14 Etsushi Kato <ek.kato@gmail.com>

    * configure.ac : Check libdir of GTK+.
    * gtk/Makefile.am : Install gtk.immodules file with specifying
      GTK_PATH if the prefix directory is different from GTK+'s one.
      http://lists.freedesktop.org/archives/uim/2007-March/001795.html.
    * gtk/gtk-rc-get-immodule-file.c : New file for helping
      installation of gtk.immodules file.

2007-03-14 Etsushi Kato <ek.kato@gmail.com>

    * scm/generic.scm (generic-commit-by-numkey) : Fix a bug in
      generic IMs.  Thanks n g <sghnqk at gmail.com>.

2007-03-04 Etsushi Kato <ek.kato@gmail.com>

    * qt/pref-customwidgets.cpp
      - (CustomLineEdit::CustomLineEdit)
      - (CustomOrderedListEdit::CustomOrderedListEdit)
      - (CustomKeyEdit::CustomKeyEdit)
        - Disable input method.

2007-03-01 Etsushi Kato <ek.kato@gmail.com>

    * pixmaps/Makefile.am : Add anthy-utf8.png.

2007-03-01 Etsushi Kato <ek.kato@gmail.com>

    * configure.ac : Add --with-anthy-utf8 option.  Default is no.
    * helper/Makefile.am : Check ANTHY_UTF8.
    * scm/anthy-utf8.scm : New file.  Copied from anthy.scm.
    * scm/anthy-utf8-custom.scm : New file.  Copied from
      anthy-custom.scm.
    * scm/im-switcher.scm (imsw-iconic-label-alist) : Add anthy-utf8.
    * scm/Makefile.am
      - (SCM_FILES) : Add anthy-utf8.scm and anthy-utf8-custom.scm.
      - (module_names) : Add anthy-utf8.
    * uim/anthy-utf8.c : New file.  Copied from anthy.c.
    * uim/Makefile.am : Check ANTHY_UTF8.

2007-03-01 Etsushi Kato <ek.kato@gmail.com>

    * xim/ximserver.cpp : Check XK_dead_horn at the end of #include.

2007-03-01 Etsushi Kato <ek.kato@gmail.com>

    * xim/main.cpp (reload_uim) : Change argument name.
    * xim/ximserver.cpp (XimServer::reloadConfigs) : Follow the change.

2007-02-28 Etsushi Kato <ek.kato@gmail.com>

    * scm/im.scm : Remove obsolete comment.

2007-02-28 Etsushi Kato <ek.kato@gmail.com>

    * xim/ximserver.cpp (XimServer::reloadConfigs) : Update uim_info.
    * xim/main.cpp (reload_uim) : Add an option to update uim_info
      only.

2007-02-28 Etsushi Kato <ek.kato@gmail.com>

    * qt/immodule-qhelpermanager.cpp
      (QUimHelperManager::parseHelperStr) : Cleanup
      "custom_reload_notify" handling.

2007-02-28 Etsushi Kato <ek.kato@gmail.com>

    * scm/im-custom.scm (update-imsw-widget-of-context-widgets) :
      Remove IM from im-list if it is not in the enabled-im-list.

2007-02-28 Etsushi Kato <ek.kato@gmail.com>

    * xim/ximserver.cpp (XimServer::reloadConfigs) : Use
      uim_prop_reload_configs().

2007-02-28 Etsushi Kato <ek.kato@gmail.com>

    * scm/im-custom.scm : Fix bug #2412, #2622 and show correct list
      for custom-preserved-default-im-name and toggle-im-alt-im.
    
      - (retrieve-im-for-custom-choice) : New.  Return information
        for custom choice of enabled-im-list including direct IM.
      - (update-imsw-widget-of-context-widgets) : New.  Dynamic update
        of im-list for the action based IM switcher.
      - (enabled-im-list) : Fix and add new custom-set-hooks.
        - Fix to include 'direct IM for
          custom-preserved-default-im-name in some cases.
        - Add hooks for toggle-im-alt-im.
        - Update im-list for non-full-featured case.
      - (toggle-im-alt-im) : Use proper IM list for the initial
        choice.
      - (enable-lazy-loading?) : Add missing custom-set-hooks.

2007-02-27 Etsushi Kato <ek.kato@gmail.com>

    * uim/m17nlib.c (get_input_method_name) : Oops, fix the wrong code
      in previous commit.

2007-02-27 Etsushi Kato <ek.kato@gmail.com>

    * uim/m17nlib.c (get_input_method_name) : Fix bug got in r4437.

2007-02-27 Etsushi Kato <ek.kato@gmail.com>

    * scm/im.scm
      - (reset-toggled-im) : New.  Used for reset-toggle-context!.
      - (reset-toggle-context!) : Use reset-toggled-im.
    * scm/im-switcher.scm (widgets-refresh-switcher-widget) : Check
      widgets properly.

2007-02-20 Etsushi Kato <ek.kato@gmail.com>

    * scm/mana.scm (mana-get-nr-candidates) : Fix to check null list
      properly.

2007-02-20 Etsushi Kato <ek.kato@gmail.com>

    * scm/canna.scm (canna-commit-string) : Check if its context is
      working.

2007-02-16 Etsushi Kato <ek.kato@gmail.com>

    * scm/anthy.scm (anthy-get-raw-str-seq)
    * scm/canna.scm (canna-get-raw-str-seq)
    * scm/mana.scm (mana-get-raw-str-seq)
      - Check return value of rk-peek-terminal-match properly.
      - Fix crash in uim 1.4.x.

2007-02-16 Etsushi Kato <ek.kato@gmail.com>

    * scm/japanese.scm (ja-join-vu) : Check retern value of member
      properly.

2007-02-15 Etsushi Kato <ek.kato@gmail.com>

    * xim/locale.cpp (UTF8_Locale::utf8_to_native_str) : Fix
      off-by-one and unterminated string by IWATA Ray
      <iwata@quasiquote.org>.

2007-02-08 Etsushi Kato <ek.kato@gmail.com>

    * scm/prime.scm (prime-keymap-get-command) : Fix to check #f for
      key-pred.

2007-02-01 Etsushi Kato <ek.kato@gmail.com>

    * qt/qtgettext.h : Fix mygettext in r2962 even if ENABLE_NLS is
      not defined.

2007-01-27 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-scm.h
    * uim/uim-scm.c
      - (uim_scm_init_fsubr): Add const qualifier to 1st arg 'name'
    * doc/COMPATIBILITY
      - Record the change

2007-01-27 Masahito Omote <omote@utyuuzin.net>

    * make-wc.sh: Force to set LANG=C.

2007-01-26 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit replace the mis-designed uim_scm_call[0-3]() API with newly
      defined ones. But since some unprotected lisp objects are still existing,
      the GC problem is not completely fixed yet
    
      http://lists.freedesktop.org/archives/uim/2007-January/001761.html
    
    * uim/uim-scm.h
      - (uim_scm_call0, uim_scm_call1, uim_scm_call2, uim_scm_call3): Removed
    * uim/uim-scm.c
      - (uim_scm_call0, uim_scm_call1, uim_scm_call2, uim_scm_call3): Removed
      - (uim_scm_init): Replace withdrawn uim_scm_call[0-3]() with
        uim_scm_callf()
    * uim/uim.c
      - (uim_create_context, uim_release_context, uim_reset_context,
        uim_focus_in_context, uim_focus_out_context, uim_place_context,
        uim_displace_context, uim_get_candidate, uim_set_candidate_index,
        uim_input_string, uim_switch_im, uim_get_current_im_name,
        uim_get_default_im_name, uim_get_im_name_for_locale, uim_set_mode,
        uim_prop_activate, uim_prop_update_custom, uim_prop_reload_configs,
        uim_get_nr_im, get_nth_im, uim_get_im_name, uim_get_im_language,
        uim_get_im_encoding, uim_get_im_short_desc): Ditto
    * uim/uim-key.c
      - (filter_key): Ditto
    * uim/uim-func.c
      - (im_acquire_text): Ditto
    * uim/uim-util.c
      - (shift_elems, uim_get_language_name_from_locale,
        uim_get_language_code_from_language_name): Ditto
    * uim/plugin.c
      - (plugin_unload_internal): Ditto
    * uim/intl.c
      - (uim_init_intl_subrs): Ditto
    * uim/skk.c
      - (skk_store_replaced_numeric_str): Ditto
    * uim/uim-sh.c
      - (main): Ditto
    * uim/uim-module-manager.c
      - (append_module_names, main_internal): Ditto
    * doc/COMPATIBILITY
      - Update

2007-01-26 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-scm.c
      - (uim_scm_callf_internal):
        * Fix broken procedure retrieval
        * Fix 'o' argument handling to semantically correct
    * doc/COMPATIBILITY
      - Update

2007-01-26 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-scm.h
      - (uim_scm_gc_protectedp, uim_scm_gc_protected_contextp, uim_scm_callf,
        uim_scm_callf_with_guard): New function decl
      - (uim_scm_gc_any_contextp): New macro
      - (uim_scm_call0, uim_scm_call1, uim_scm_call2, uim_scm_call3): Mark as
        deprecated
    * uim/uim-scm.c
      - Require SigScheme 0.8.0
      - Include stdarg.h and assert.h
      - (struct callf_args): New type
      - (uim_scm_callf_internal): New static function
      - (uim_scm_gc_protectedp, uim_scm_gc_protected_contextp, uim_scm_callf,
        uim_scm_callf_with_guard): New function
      - (uim_scm_call0, uim_scm_call1, uim_scm_call2, uim_scm_call3): Mark as
        deprecated
    * uim/Makefile.am
      - Fix gcroots.h inclusion precedence
    * doc/COMPATIBILITY
      - Update "uim-scm API reorganization in uim 1.5.0" section

2007-01-24 Etsushi Kato <ek.kato@gmail.com>

    * scm/japanese.scm (ja-make-kana-str-list) : Fix to not return
      undef.
    * scm/rk.scm (rk-proc-end-seq) : Fix to return #f instead of '()
      when (cadr seq) is null.

2007-01-23 Etsushi Kato <ek.kato@gmail.com>

    * uim/uim-custom.c (uim_custom_broadcast)
    * uim/m17nlib.c (get_input_method_name)
    * uim/mana.c (mana_eval)
      - Use snprintf() instead of sprintf().
    * uim/prime.c
      - (PRIME_UNIX_SOCKET_PREFIX) : Removed.
      - (check_dir) : Copied from prepare_dir() in uim-custom.c.
      - (prime_get_ud_path) : Use ~/.uim.d/socket/uim-prime instead of
        /tmp/uimprime-username as an unix domain socket path.
      - (prime_lib_init)
        - Use snprintf().
        - Check timeout for the unix domain socket connection.
    * uim/uim-helper-client.c
      - (uim_helper_init_client_fd)
      - (uim_helper_close_client_fd)
        - Cosmetic changes.
    * uim/uim-helper.c
      - Include <sys/stat.h>.
      - (check_dir) : Copied from prepare_dir() in uim-custom.c.
      - (uim_helper_get_pathname)
        - Use ~/.uim.d/socket/uim-helper as an unix domain socket
          path.
        - Use snprintf().
    * uim/uim-helper-server.c
      - (init_server_fd)
        - Use fchmod() and fchown() instead of chmod() and chown().
        - Simplify.
      - (get_unused_client)
      - (reflect_message_fragment)
      - (check_session_alive)
      - (accept_new_connection)
      - (read_message)
      - (uim_helper_server_process_connection)
      - (main)
        - Cosmetic changes.
    * uim/skk.c
      - (search_line_from_server)
      - (search_line_from_file)
      - (push_purged_word)
      - (open_lock)
        - Use snprintf() instead of sprintf().

2007-01-21 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim.c
      - (uim_switch_im): Fix broken im-name passing which causes
        application-global IM switching disfunction. Thanks No.594 of [uim thread
        7] for the report

2007-01-20 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * doc/RELEASING
      - Update

2007-01-15 Jae-hyeon Park <jhyeon@gmail.com>

    * scm/byeoru-dic.scm
      - replaced by a dictionary from the libhangul project
        [http://wiki.kldp.org/wiki.php/libhangul], which has about 30000
        Korean words that can be written in Chinese characters

2007-01-14 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/im.scm
      - (uim-switch-im): Add lacking setup-context invocation

2007-01-14 Jae-hyeon Park <jhyeon@gmail.com>

    * scm/byeoru.scm
    
      - changed a confusing term "jamo candidate" to "jamo choice";
        now "candidate" is used only for a word candidate displayed in
        a window for Korean-Chinese conversion
      - (byeoru-cmp-class, byeoru-test-list,
        byeoru-automata-eat-orderless-key, byeoru-automata-eat-key,
        byeoru-feed-romaja-key, byeoru-feed-hangul-key,
        byeoru-proc-input-state-with-preedit,
        byeoru-proc-input-state-no-preedit): follows the above term change
      - (byeoru-insert-candidates, byeoru-key-to-candidates): renamed to
        (byeoru-insert-choices, byeoru-key-to-choices) respectively
    
      - byeoru-automata: no longer records state history but the current
        state since (byeoru-automata-backspace) now depends on the choices
        history only; changed member names candidate-history,
        ordered-cand-hist, elected-keys to choices-history,
        unsorted-choices-history, chosen-jamos, respectively
      - (byeoru-automata-reset!): follows the change of byeoru-automata
    
      - changed the term "jamo key" to "jamo"
      - (byeoru-jamo-key-class, byeoru-jamo-keys-to-johab): renamed to
        (byeoru-jamo-class, byeoru-jamos-to-johab) respectively
      - (byeoru-compound?, byeoru-double?): follows the term change
    
      - (byeoru-automata-eat-ordered-key): follows the change of
        byeoru-automata; modified to allow a transformation such as
        (choseong-giyeog) + jongseong-sios => (jongseong-giyeog
        jongseong-sios) to enable input of ㄳ, ㄼ, etc. with a 2-beol
        layout; this involves change in (byeoru-automata-backspace)
      - (byeoru-automata-backspace): backspacing method changed to work
        with (byeoru-automata-eat-ordered-key)
    
      - byeoru-layout-hangul2: fixed state numbers of double choseongs

2007-01-14 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit will probably fix the problem
      http://lists.freedesktop.org/archives/uim/2007-January/001741.html
    
    * uim/uim.c
      - (uim_create_context): Call setup-context
    * scm/im.scm
      - (setup-context): New procedure
      - (create-context): Split context-init-widgets! and update-style invocation
        to setup-context

2007-01-14 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim.c
      - (uim_create_context): Fix invalid lisp object as initial value of uc->sc.
        This will fix the looped fatal error on uim_scm_c_ptr(), but non-pointer
        error itself is still remaining.
        http://lists.freedesktop.org/archives/uim/2007-January/001741.html
    
    * uim/uim-scm.c
      - (uim_scm_error_internal, uim_scm_c_int_internal,
        uim_scm_refer_c_str_internal, uim_scm_c_ptr, uim_scm_c_func_ptr): Simplify

2007-01-13 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * doc/RELEASING
      - Fix another URL

2007-01-13 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * doc/RELEASING
      - Fix an URL

2007-01-13 Etsushi Kato <ek.kato@gmail.com>

    * uim/skk.c (open_skkserv) : Suppress warning.

2007-01-13 Etsushi Kato <ek.kato@gmail.com>

    * uim/skk.c
      - Exclude unused headers.
      - (skk_dic_open) : Simplify.

2007-01-13 Etsushi Kato <ek.kato@gmail.com>

    * replace/fake-rfc2553.c : #include <config.h>.
    * replace/Makefile.am (libreplace_la_SOURCES) : Add
      fake-rfc2553.[ch].

2007-01-13 Etsushi Kato <ek.kato@gmail.com>

    * replace/fake-rfc2553.h : Use uim_ instead of ssh_ prefix for
      getaddrinfo, gai_strerror, freeaddrinfo, and getnameinfo replace
      functions.

2007-01-13 Etsushi Kato <ek.kato@gmail.com>

    * Support IPv6 with uim-skk.  Patched by Iwata-san
      (http://quasiquote.org/files/patch-uim_skk_c).
    * uim/skk.c
      - (dic_info) : Add skkserv_hostname and skkserv_family members.
      - (SKK_SERVICENAME)
      - (SKK_SERVER_HOST)
      - (SKKServerHost)
        - Removed.
      - (open_skkserv)
      - (open_dic)
      - (skk_dic_open)
        - Use hostname and family information.
      - (uim_plugin_instance_init) : Follow the change in
        skk_dic_open.
      - (uim_plugin_instance_quit) : Free skkserv_hostname.
    * scm/skk-custom.scm
      - (skk-skkserv-use-env?)
      - (skk-skkserv-hostname)
      - (skk-skkserv-address-family)
        - New.
    * scm/skk.scm
      - (skk-context-new) : Follow the change in skk-lib-dic-open.

2007-01-13 Etsushi Kato <ek.kato@gmail.com>

    * configure.ac : Support fake-rfc2553 replace functions.
      - Add check netdb.h header file.
      - Add check for getaddrinfo, freeaddrinfo, and getnameinfo
        functions.
      - Add check for gai_strerror.
      - Add check for sockaddr_storage, sockaddr_in6, in6_addr,
        addrinfo structs.
    * replace/os_dep.h : #include "fake-rfc2553.h".
    * replace/fake-rfc2553.h
    * replace/fake-rfc2553.c
      - Remove "#include "includes.h".

2007-01-13 Etsushi Kato <ek.kato@gmail.com>

    * replace/fake-rfc2553.[ch] : Copy from tags/openssh-4.5p1/openbsd-compat/

2007-01-13 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-scm.c
      - Require SigScheme 0.7.4

2007-01-13 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit fix license terms of strsep.c and setenv.c accidencially
      mis-modified in r790
    
    * replace/strsep.c
    * replace/setenv.c
      - Fix 'COPYRIGHT HOLDERS' in the license with original 'REGENTS'
    * NEWS
    * RELNOTE
      - Update

2007-01-12 Etsushi Kato <ek.kato@gmail.com>

    * helper/dict-word-list-win-gtk.c : Remove #include
      "uim-stdint.h".
    * qt/immodule-quiminputcontext.cpp
      (QUimInputContext::createUimContext) : Replace uim_iconv with
      NULL.
    * immodule-quiminfomanager.cpp (QUimInfoManager::initUimInfo) :
      Ditto.

2007-01-12 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit fix default IM name acquisition of uim-fep. Thanks No.580 of
      [uim thread 7] for the report
    
    * fep/uim-fep.c
      - (init_uim): Modify message
      - (get_default_im_name): Add comment about uim API spec
      - (main): Fix wrong assumption on uim_get_default_im_name()
    * uim/uim.h
      - (uim_get_im_name, uim_get_im_language, uim_get_im_short_desc,
        uim_get_im_encoding, uim_get_default_im_name, uim_get_im_name_for_locale,
        uim_get_mode_name): Add a description about return value durability

2007-01-12 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-func.c
      - Include assert.h
      - (retrieve_uim_context, im_retrieve_context): Add valid pointer assertion
      - (im_update_preedit, im_commit, im_set_encoding, im_clear_mode_list,
        im_pushback_mode_list, im_update_mode_list, im_update_prop_list,
        im_update_mode, im_activate_candidate_selector, im_select_candidate,
        im_shift_page_candidate, im_deactivate_candidate_selector,
        im_acquire_text, im_delete_text, switch_app_global_im,
        switch_system_global_im, uim_init_im_subrs): Cleanup
      - (im_get_raw_key_str): Remove a wrong comment

2007-01-12 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * test/test-action.scm
    * test/test-custom-rt.scm
    * test/test-custom.scm
    * test/test-i18n.scm
    * test/test-im.scm
    * test/test-intl.scm
    * test/test-key.scm
    * test/test-lazy-load.scm
    * test/test-plugin.scm
    * test/test-slib.scm
    * test/test-uim-util.scm
    * test/test-ustr.scm
    * test/test-util.scm
      - Update all-test-passed revision information in comment

2007-01-12 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/im.scm
      - (register-im): Fix lacking return value enbuged in r4354
    * test/test-im.scm
      - Follow the changes in uim 1.5.0
    
    * test/test-slib.scm
    * test/test-lazy-load.scm
      - Follow the changes in uim 1.5.0

2007-01-12 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim.c
      - (uim_init, uim_quit): Reorder definition place. No codes are modified

2007-01-12 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim.h
      - (uim_get_candidate): Add descirption about accel_enumeration_hint
    * uim/uim.c
      - Exclude unused headers
      - Include assert.h
      - (uim_release_context, uim_reset_context, uim_focus_in_context,
        uim_focus_out_context, uim_place_context, uim_displace_context,
        uim_set_preedit_cb, uim_set_candidate_selector_cb, uim_get_candidate,
        uim_candidate_get_cand_str, uim_candidate_get_heading_label,
        uim_candidate_get_annotation_str, uim_candidate_free,
        uim_get_candidate_index, uim_set_candidate_index,
        uim_set_text_acquisition_cb, uim_input_string,
        uim_set_configuration_changed_cb, uim_set_im_switch_request_cb,
        uim_switch_im, uim_get_current_im_name, uim_get_default_im_name,
        uim_get_im_name_for_locale, uim_get_nr_modes, uim_get_mode_name,
        uim_get_current_mode, uim_set_mode, uim_set_mode_cb,
        uim_set_mode_list_update_cb, uim_set_prop_list_update_cb,
        uim_set_prop_label_update_cb, uim_prop_list_update,
        uim_prop_label_update, uim_prop_activate, uim_prop_update_custom,
        uim_get_nr_im, get_nth_im): Add assertion for args as precondition

2007-01-12 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim.c
      - Reorder function definition places to make logical categorization
        clear. No codes are modified

2007-01-12 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * NEWS
      - Fix mis-stated 'Fixed' (the fix has been enbuged on 1.5 by me)

2007-01-12 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-func.c
      - (TEXT_EMPTYP): New macro
      - (im_acquire_text):
        * Fix invalid Scheme string creation for NULL string
        * Simplify
    * uim/uim.c
      - (uim_candidate_free): Simplify
      - (uim_input_string): Fix unimplemented return value
    * NEWS
      - Update

2007-01-12 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/intl.c
      - (intl_init_locale, uim_init_intl_subrs): Fix ENABLE_NLS detection

2007-01-12 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit recover gettext functionality for uim-custom
    
    * uim/uim-custom.c
      - Include gettext.h
      - (UGETTEXT): New macro
      - (uim_custom_get_str): Change return type to const char *
      - (uim_custom_value_as_literal, uim_custom_definition_as_literal): Follow
        the specification change of uim_custom_get_str()
      - (uim_custom_label, uim_custom_desc, uim_custom_choice_get,
        uim_custom_group_get): Add UGETTEXT()
      - (uim_custom_init): Add bind_textdomain_codeset() for textdomain "uim"

2007-01-11 Etsushi Kato <ek.kato@gmail.com>

    * scm/prime.scm
      - (prime-keymap-get-keymap)
      - (prime-keymap-get-keymap-hiragana)
      - (prime-convert-start-internal)
        - Fix let.
      - (prime-context-initialize)
        - Check prime-context-session properly.
      - (prime-context-push)
      - (prime-context-pop)
        - Follow the rename of context-id.
      - (prime-context-history-compare)
      - (prime-command-app-mode-internal)
        - Use safe-cdr.
      - (prime-editor-cursor-move)
      - (prime-editor-backspace-char)
      - (prime-editor-delete-char)
        - Check prime-editor-get-{right,left} properly.
      - (prime-commit-word-data)
      - (prime-learn-word)
      - (prime-mode-language-set)
        - Check return value of assoc properly.
      - (prime-update-key-press)
      - (prime-update-key-release)
        - Check prime-context-session properly.
      - (prime-display-preedit)
        - Check argument properly.
      - (prime-get-candidate-handler)
        - Add annotation.
      - (prime-candidate-get-data)
        - Use safe-car and safe-cdr.

2007-01-11 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/im.scm
      - (normalize-im-list): Remove a FIXME comment. It's already resolved
    
    * scm/prime.scm
      - (prime-context-push, prime-context-pop): Add FIXME comment

2007-01-11 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * configure.ac
      - Remove check for bzero(3)
    * uim/uim-helper-client.c
      - (uim_helper_init_client_fd): Replace bzero(3) with more portable
        memset(3)
    * uim/uim-helper-server.c
      - (init_server_fd): Ditto
    * uim/prime.c
      - (prime_init_ud): Ditto

2007-01-11 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit remove uim-stdint.h and replace with config.h and os_dep.h
    
    * configure.ac
      - Remove AX_CREATE_STDINT_H
      - Add header checks for stdint.h compatible definitions
      - Add stdint type check AC_TYPE_UINTPTR_T and so on
      - Add AC_TYPE_SSIZE_T
    * replace/os_dep.h
      - Add header inclusion for stdint.h compatible definitions
    * uim/Makefile.am
      - (DISTCLEANFILES): Remove uim-stdint.h
    * uim/uim-scm.c
    * uim/uim-custom.c
    * uim/plugin.c
    * gtk/gtk-im-uim.c
    * helper/pref-gtk-custom-widgets.c
    * xim/connection.cpp
    * xim/ximserver.cpp
      - Exclude uim-stdint.h

2007-01-11 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim.c
      - (uim_create_context): Fix a typo
    
    * uim/mana.c
      - Include uim-util.h for uim_ipc_*()

2007-01-11 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim.h
    * uim/uim.c
      - (uim_set_candidate_selector_cb): Change return type to void
    * doc/COMPATIBILITY
      - Add new section "Change return type of uim_set_candidate_selector_cb() to
        void"

2007-01-11 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim.c
      - (OK): New macro
      - (uim_initialized): Change type to uim_bool
      - (uim_create_context): Simplify
      - (uim_init_scm): Removed and merge into uim_init()
      - (uim_init):
        * Merge uim_init_scm()
        * Follow the uim_initialized change
      - (uim_quit): Follow the uim_initialized change
    
    * uim/uim.h
      - Increase version to 1.5.0
    
    * uim/uim-key.c
      - (define_valid_key_symbols, get_sym, filter_key): Add prototype decl
    
    * uim/Makefile.am
      - Cosmetic changes

2007-01-11 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim.h
      - (uim_ipc_open_command, uim_ipc_open_command_with_option,
        uim_ipc_send_command, uim_iconv): Move to uim-util.h
    * uim/uim-util.h
      - (uim_ipc_open_command, uim_ipc_open_command_with_option,
        uim_ipc_send_command, uim_iconv): Moved from uim.h
    * xim/ximserver.cpp
      - (InputContext::createUimContext): Replace uim_iconv for
        uim_create_context() with NULL
    * fep/uim-fep.c
      - (init_uim, usage): Ditto
    * uim/prime.c
    * uim/uim-helper-client.c
    * uim/agent.c
    * xim/canddisp.cpp
    * fep/callbacks.c
      - Include uim-util.h for uim_ipc_*()
    * doc/COMPATIBILITY
      - Add new section "Non-core API move to uim-util.h"

2007-01-11 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit resolve the context inconsistency problem between C and Scheme
    
    * scm/im.scm
      - (uim-switch-im, im-switch-im): New procedure
    * uim/uim-func.c
      - (switch_im): Removed
      - (raise_configuration_change): New static function
      - (uim_init_im_subrs):
        * Remove im-switch-im registration
        * Remove im-raise-configuration-change registration
    * uim/uim.c
      - (uim_switch_im): Replace with call to uim-switch-im
    * doc/COMPATIBILITY
      - Update

2007-01-11 Etsushi Kato <ek.kato@gmail.com>

    * scm/skk.scm (skk-setup-child-context) : Follow the rename of
      context-id.

2007-01-11 Etsushi Kato <ek.kato@gmail.com>

    * scm/byeoru.scm (byeoru-feed-romaja-key) : Check return value of
      rk-current-seq properly.

2007-01-11 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/im.scm
      - (context-rec-spec): Rename 'id' to 'uc'
      - (context-id, context-set-id!): New alias for backward compatibility
      - (uim-filter-convertible-ims, uim-n-convertible-ims,
        uim-nth-convertible-im, switch-im, toggle-im, reset-toggle-context!,
        create-context, release-context, invoke-handler, key-press-handler,
        key-release-handler, reset-handler, focus-in-handler, focus-out-handler,
        place-handler, displace-handler, mode-handler, prop-activate-handler,
        input-string-handler, custom-set-handler, get-candidate,
        set-candidate-index): Follow the renaming
    * doc/COMPATIBILITY
      - Update

2007-01-11 Etsushi Kato <ek.kato@gmail.com>

    * xim/locale.cpp
      - (UTF8_Locale::UTF8_Locale)
      - (UTF8_Locale::~UTF8_Locale)
      - (UTF8_Locale::utf8_to_native_str)
        - Follow the removal of uim_iconv_open().
    * xim/compose.cpp
      - (mb_string_to_utf8)
        - Ditto.

2007-01-11 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim.h
      - (enum UKey):
        * Reorder definitions
        * Add UKey_Shift, UKey_Control, UKey_Alt, UKey_Meta, UKey_Super,
          UKey_Hyper to replace legacy UKey_Shift_key and so on. Bridges should
          replace these keys although *_key is still also defined as backward
          compatibility.
    * doc/COMPATIBILITY
      - Add new section "Deprecation of UKey_Shift_key and so on"

2007-01-11 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit split rk.c off from uim-util.c for future libuim reorganization
    
    * uim/uim-internal.h
      - (uim_init_rk_subrs): New function decl
    * uim/uim-util.c
      - Exclude unused locale.h and gettext.h
      - (str_seq_equal, str_seq_partial, rk_find_seq, rk_find_partial_seq,
        rk_expect_seq): Move to rk.c
      - (uim_init_util_subrs): Move str-seq-equal?, str-seq-partial?,
        rk-lib-find-seq, rk-lib-find-partial-seq, rk-lib-expect-seq registration
        to uim_init_rk_subrs()
    * uim/rk.c
      - New file copied from uim-util.c
      - (str_seq_equal, str_seq_partial, rk_find_seq, rk_find_partial_seq,
        rk_expect_seq): Moved from uim-util.c
      - (uim_init_rk_subrs): New function
    * uim/uim.c
      - (uim_init_scm):
        * Add uim_init_rk_subrs() invocation
        * Simplify
    * uim/Makefile.am
      - (libuim_la_SOURCES): Add rk.c

2007-01-11 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-internal.h
      - Exclude unneeded stdio.h
      - Cosmetic changes
      - (struct uim_context_): Reorder members

2007-01-11 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit remove uim_iconv_open() from uim API. Etsushi, please read the
      doc/COMPATIBILITY and rewrite uim-xim
    
    * uim/uim-util.h
      - (uim_iconv_open): Move the decl to iconv.c
    * uim/uim-internal.h
      - (uim_iconv_is_convertible, uim_iconv_create, uim_iconv_code_conv,
        uim_iconv_release): Move the decls to iconv.c
    * uim/iconv.c
      - (uim_iconv_is_convertible, uim_iconv_open, uim_iconv_create,
        uim_iconv_code_conv, uim_iconv_release): Make static
    * doc/COMPATIBILITY
      - Add new section "uim_iconv_open() privatization"

2007-01-11 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit split off iconv-related code to a single file. This helps
      future reorganization of libuim
    
    * uim/uim-encoding.h
      Rename to encoding-table.c
    * uim/encoding-table.c
      - Renamed from uim-encoding.h
    * uim/uim-func.c
      - Exclude alloca.h, string.h and so on for iconv feature
      - (uim_iconv_tbl, uim_iconv, check_encoding_equivalence,
        uim_iconv_is_convertible, uim_get_encoding_alias, uim_iconv_open,
        uim_iconv_create, uim_iconv_code_conv, uim_iconv_release): Move to
        iconv.c
    * uim/iconv.c
      - New file copied from uim-func.c
      - Exclude strings.h for bzero(1)
      - Include encoding-table.c
      - (uim_iconv_tbl, uim_iconv, check_encoding_equivalence,
        uim_iconv_is_convertible, uim_get_encoding_alias, uim_iconv_open,
        uim_iconv_create, uim_iconv_release): Moved from uim-func.c
      - (uim_iconv_code_conv):
        * Ditto
        * Replace bzero(1) with more portable memset(1)
    * uim/Makefile.am
      - (EXTRA_DIST): Add encoding-table.c
      - (libuim_la_SOURCES):
        * Remove uim-encoding.h
        * Add iconv.c

2007-01-11 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-util.h
      - (uim_get_language_name_from_locale,
        uim_get_language_code_from_language_name): Revise the comment
    * uim/uim-util.c
      - (struct _locale_language_table, locale_language_table,
        NR_LOCALE_LANGUAGE, get_language_name_from_locale,
        lang_code_to_lang_name_raw): Removed
      - (uim_get_language_name_from_locale,
        uim_get_language_code_from_language_name): Replace with Scheme code
        invocation
      - (uim_init_util_subrs): Remove lang-code->lang-name-raw registration
    * uim/iso-639-1.def
      - Removed
    * uim/Makefile.am
      - (EXTRA_DIST): Remove iso-639-1.def
    * scm/i18n.scm
      - Require iso-639-1.scm
      - (lang-code->lang-name): Replace lang-code->lang-name-raw with
        iso-639-1-alist search
      - (lang-name->lang-code): New procedure
    * scm/iso-639-1.scm
      - New file copied and converted from iso-639-1.def
      - (iso-639-1-alist): New variable
    * scm/Makefile.am
      - (SCM_FILES): Add iso-639-1.scm
    * po/POTFILES.in
      - Replace iso-639-1.def with iso-639-1.scm
    * doc/COMPATIBILITY
      - Add new section "Language strings fallback to "-""

2007-01-10 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/prime.scm
      - (prime-context-pop): Fix broken let

2007-01-10 Etsushi Kato <ek.kato@gmail.com>

    * scm/romana.scm (romaja-rule) : Remove SIOD dependent char.

2007-01-10 Etsushi Kato <ek.kato@gmail.com>

    * scm/rk.scm (rk-pending) : Fix for keys like Multi_key.

2007-01-10 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim.c
      - (uim_get_default_im_name, uim_get_im_name_for_locale): Simplify
    
    * uim/uim-func.c
      - (check_encoding_equivalence): Cosmetic change

2007-01-10 Etsushi Kato <ek.kato@gmail.com>

    * scm/rk.scm
      - (rk-find-longest-back-match)
      - (rk-find-longest-head)
        - Check argument properly.
        - Change to return '() if not found.
      - (rk-check-back-commit)
        - Follow the above changes.
        - Check return value of rk-find-partial-seq and rk-find-seq
          properly.
      - (rk-partial?)
      - (rk-proc-tail)
        - Check rk-context-seq properly.

2007-01-10 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit remove the confusable 'commit_raw' handlings from libuim
    
    * uim/uim-internal.h
      - (struct uim_context_):
        * Rename 'is_enable' to 'is_enabled' and change the its to uim_bool
        * Remove 'commit_raw_flag'
    * uim/uim.c
      - (uim_create_context): Follow the renaming of 'is_enable'
    * uim/uim-key.c
      - (enum key_filtering_result): New type
      - (handle_key): Rename to filter_key()
      - (filter_key):
        * Renamed from handle_key()
        * Aggregate press/release -specific handlings
      - (uim_press_key, uim_release_key): Simplify with filter_key()
    * uim/uim-func.c
      - (im_commit_raw): Removed
      - (uim_init_im_subrs): Remove im-commit-raw registration
    * scm/im.scm
      - (context-rec-spec): Add new field 'key-passthrough'
      - (im-commit-raw): New procedure compatible with previous C implementation
      - (key-press-handler, key-release-handler):
        * Add 'key-passthrough' handling
        * Return 'filtered' boolean value

2007-01-10 Etsushi Kato <ek.kato@gmail.com>

    * scm/generic.scm
      - (generic-commit)
      - (generic-proc-input-state)
        - Check return value of rk-current-seq properly.
      - (generic-proc-converting-state)
        - Ditto.
        - Use proper name for candidates list.
      - (generic-focus-out-handler)
        - Ditto.
        - Fix indentation.

2007-01-10 Etsushi Kato <ek.kato@gmail.com>

    * scm/anthy.scm (anthy-proc-transposing-state)
    * scm/canna.scm (canna-proc-transposing-state)
    * scm/mana.scm (mana-proc-transposing-state)
      - Check '() for rotate-list when exiting from transposing state.

2007-01-10 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-internal.h
      - (struct uim_context_): Remove unused members 'candidate_index' and
        'nr_candidates'
    * uim/uim.c
      - (uim_create_context): Follow the change

2007-01-10 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit remove unneeded preedit buffering in uim_context
    
    * uim/uim-internal.h
      - (struct preedit_segment, uim_release_preedit_segments,
        uim_update_preedit_segments): Removed
      - (struct uim_context_): Remove 'psegs' and 'nr_psegs'
    * uim/uim-func.c
      - (pushback_preedit_segment, uim_update_preedit_segments,
        uim_release_preedit_segments): Removed
      - (im_clear_preedit, im_pushback_preedit, im_update_preedit): Directly
        callback without buffering in uim_context
    * uim/uim.c
      - (uim_create_context):
        * Follow the preedit buffering withdrawal
        * Initialize uc->sc before calling create-context
      - (uim_reset_context, uim_switch_im, uim_release_context): Remove preedit
        buffering handling

2007-01-10 Etsushi Kato <ek.kato@gmail.com>

    * scm/anthy.scm
    * scm/byeoru.scm
    * scm/canna.scm
    * scm/mana.scm
      - Pass '() for ustr-new.

2007-01-10 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/im.scm
      - (create-context): Fix invalid destruction of uninitialized context

2007-01-10 Etsushi Kato <ek.kato@gmail.com>

    * qt/immodule-quiminputcontext.cpp
      - (QUimInputContext::readIMConf) : Use
        uim_scm_symbol_value_str() instead of uim_symbol_value_str().

2007-01-10 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-internal.h
      - (struct uim_context_):
        * Remove 'id'
        * Add 'sc'
      - (uim_find_context): Removed
    * uim/uim.c
      - (CONTEXT_ARRAY_SIZE, context_array, get_context_id, put_context_id,
        uim_find_context): Removed
      - (uim_create_context, uim_reset_context, uim_focus_in_context,
        uim_focus_out_context, uim_place_context, uim_displace_context,
        uim_switch_im, uim_release_context, uim_prop_activate,
        uim_prop_update_custom, uim_set_mode, uim_get_nr_im, get_nth_im,
        uim_get_current_im_name, uim_get_candidate, uim_set_candidate_index,
        uim_input_string, uim_quit): Follow the context_array removal and the
        uim_context change
    * uim/uim-func.c
      - (im_retrieve_context): New static function
      - (retrieve_uim_context): Follow the uim_context change
      - (uim_init_im_subrs): Add im-retrieve-context registration
    * uim/uim-key.c
      - (handle_key): Follow the uim_context change
    * uim/uim-scm-abbrev.h
      - (NULLP, CONSP): New macro
    * scm/im.scm
      - (find-context): Removed
      - (toggle-im, reset-toggle-context!, remove-context, uim-context-im,
        invoke-handler, key-press-handler, key-release-handler): Follow the
        find-context removal and direct uim_context storing
      - (create-context):
        * Ditto
        * Return created context
    * scm/prime.scm
      - (prime-context-push, prime-context-pop): Follow the find-context removal
        and direct uim_context storing

2007-01-10 Etsushi Kato <ek.kato@gmail.com>

    * scm/skk-editor.scm
      - (skk-editor-make-string)
      - (skk-editor-commit-char-list)
      - (skk-editor-commit-raw)
        - Fix to check '() properly.
    * scm/skk-dialog.scm
      - Ditto for copy and pasted codes.
    * scm/skk.scm
      - (skk-do-get-string)
      - (skk-append-string)
      - (skk-append-okuri-string)
        - Fix to check '() properly.
      - (skk-rk-push-key-match-without-new-seq)
        - Check return value of rk-lib-find-seq properly.
      - (skk-proc-state-kanji)
        - Check return value of rk-push-key! properly.
    * scm/rk.scm
      - (rk-proc-end-seq)
        - Check return value of rk-lib-find-seq from rk-push-key-last!
          properly.

2007-01-10 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-scm.h
    * uim/uim-scm.c
      - (uim_scm_gc_unprotect): New function
    * doc/COMPATIBILITY
      - Update

2007-01-10 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-scm.c
      - (struct cons_args): New type
      - (uim_scm_make_int_internal, uim_scm_make_str_internal,
        uim_scm_make_symbol_internal, uim_scm_make_ptr_internal,
        uim_scm_make_func_ptr_internal, uim_scm_cons_internal,
        uim_scm_quote_internal): New static function
      - (uim_scm_c_int, uim_scm_c_int_internal): Change return type to long
      - (uim_scm_make_int):
        * Change integer type to long
        * Make callable from non-Scheme context
      - (uim_scm_make_str, uim_scm_make_symbol, uim_scm_make_ptr,
        uim_scm_make_func_ptr, uim_scm_quote, uim_scm_cons): Make callable from
        non-Scheme context

2007-01-10 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit remove the complex and problematic IM registration management
      divided in C. Now all IM management data is concentrated into Scheme as
      one-source management. This will resolve C-data and Scheme-data
      synchronization problem on im-switching and so on
    
    * scm/im.scm
      - (register-im): Remove im-register-im invocation
      - (uim-get-im-short-desc): Removed
      - (uim-filter-convertible-ims, uim-n-convertible-ims,
        uim-nth-convertible-im, uim-context-im): New procedure
    * uim/uim-internal.h
      - (struct uim_im): Removed
      - (struct uim_candidate_):
        * Remove 'current_im_name', 'short_desc'
        * Rename 'encoding' to 'client_encoding'
      - (uim_im_array, uim_nr_im): Removed the decl
    * uim/uim-scm-abbrev.h
      - (MAKE_BOOL): New macro
    * uim/uim-util.c
      - Include assert.h
      - (get_language_name_from_locale, uim_get_language_name_from_locale): Add
        assertion as argument precondition
    * doc/COMPATIBILITY
      - Update

2007-01-09 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-compat-scm.h
      - (struct uim_api_tbl): Removed
    * uim/uim-internal.h
    * uim/uim-compat-scm.c
      - (uim_init_compat_scm_subrs): Removed
    * uim/uim.c
      - (uim_init_scm): Remove uim_init_compat_scm_subrs() invocation
    * uim/uim-scm.c
    * uim/uim-func.c
    * uim/uim-key.c
    * uim/plugin.c
    * uim/intl.c
    * uim/editline.c
    * uim/anthy.c
    * uim/canna.c
    * uim/prime.c
    * uim/uim-module-manager.c
      - Exclude uim-compat-scm.h
    * gtk/gtk-im-uim.c
      - Replace uim-compat-scm.h with uim-scm.h
      - (get_user_defined_color): Replace uim_symbol_value_str() with
        uim_scm_symbol_value_str()
    * gtk/uim-cand-win-gtk.c
      - (uim_cand_win_gtk_get_window_pos_type): Ditto
    * helper/toolbar-common-gtk.c
      - Replace uim-compat-scm.h with uim-scm.h
    * doc/COMPATIBILITY
      - Update

2007-01-09 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-internal.h
      - (UIM_EVAL_STRING_INTERNAL, UIM_EVAL_STRING, UIM_EVAL_FSTRING1,
        UIM_EVAL_FSTRING2, UIM_EVAL_FSTRING3, UIM_EVAL_FSTRING4,
        UIM_EVAL_FSTRING5, uim_sizeof_sexp_str): Move to uim-custom.c
      - (UIM_EVAL_SEXP_AS_STRING, uim_eval_string): Removed
    * uim/uim-func.c
      - (MAX_LENGTH_OF_INT_AS_STR, uim_sizeof_sexp_str): Move to uim-custom.c
      - (uim_eval_string): Removed
    * uim/uim-scm.h
      - (uim_scm_return_value): Moved to uim-custom.c
    * uim/uim-scm.c
      - (uim_scm_last_val, uim_scm_return_value): Moved to uim-custom.c
      - (uim_scm_eval_internal, uim_scm_eval_c_string, uim_scm_init): Remove
        uim_scm_last_val storing
    * uim/uim-compat-scm.c
      - (uim_scm_last_val): Removed extern decl
    * uim/uim-custom.c
      - (UIM_EVAL_STRING, UIM_EVAL_FSTRING1, UIM_EVAL_FSTRING2,
        UIM_EVAL_FSTRING3, UIM_EVAL_FSTRING4, UIM_EVAL_FSTRING5): Moved from
        uim-internal.h
      - (UIM_EVAL_STRING_INTERNAL):
        * Ditto
        * Add uim_scm_last_val storing
        * Remove uim_eval_string() invocation
      - (uim_scm_last_val, uim_scm_return_value):
        * Moved from uim-scm.c
        * Make static
      - (MAX_LENGTH_OF_INT_AS_STR, uim_sizeof_sexp_str):
        * Moved from uim-func.c
        * Make static
    * doc/COMPATIBILITY
      - Update

2007-01-09 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-compat-scm.h
      - (uim_scm_c_list_conv_func, uim_scm_c_list_free_func, uim_scm_c_list,
        uim_scm_c_str_failsafe, uim_scm_c_str_list, uim_scm_c_list_free): Move to
        uim-custom.c
    * uim/uim-compat-scm.c
      - (uim_scm_c_list, uim_scm_c_str_failsafe, uim_scm_c_str_list,
        uim_scm_c_list_free): Move to uim-custom.c
    * uim/uim-custom.c
      - (uim_scm_c_list_conv_func, uim_scm_c_list_free_func): Moved from
        uim-compat-scm.h
      - (uim_scm_c_list, uim_scm_c_str_failsafe, uim_scm_c_str_list,
        uim_scm_c_list_free):
        * Moved from uim-compat-scm.c
        * Make static
    * doc/COMPATIBILITY
      - Update

2007-01-09 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * Oops. This is the changelog for r4349
    
    * uim/uim.h
    * uim/uim-compat-scm.c
      - (uim_symbol_value_str): Removed
    * doc/COMPATIBILITY
      - Add new section "uim_symbol_value_str removal"

2007-01-09 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-scm.h
    * uim/uim-scm.c
      - (uim_scm_cadr, uim_scm_caar, uim_scm_cdar, uim_scm_cddr,
        uim_scm_reverse): Removed
    * uim/uim-compat-scm.h
    * uim/uim-compat-scm.c
      - (uim_get_c_string, uim_scm_repl_c_string, uim_scm_int_from_c_int,
        uim_scm_str_from_c_str, uim_scm_intern_c_str, uim_scm_qintern_c_str,
        uim_scm_nth, uim_scm_nreverse, uim_scm_provide): Removed
    * uim/uim.c
      - (uim_get_candidate): Follow the changes
    * uim/uim-util.c
      - (rk_expect_seq, shift_elems): Ditto
    * uim/uim-key.c
      - (define_key): Ditto
    * uim/intl.c
      - (uim_init_intl_subrs): Ditto
    * uim/uim-sh.c
      - (main): Ditto
    * uim/skk.c
      - (skk_store_replaced_numeric_str): Ditto
    * doc/COMPATIBILITY
      - Update

2007-01-09 Jae-hyeon Park <jhyeon@gmail.com>

    * scm/byeoru.scm
      - (byeoru-look-up-dic): minor clean-up

2007-01-09 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-scm.h
    * uim/uim-scm.c
      - (uim_scm_cadr, uim_scm_caar, uim_scm_cdar, uim_scm_cddr,
        uim_scm_reverse): Removed
    * uim/uim-compat-scm.h
    * uim/uim-compat-scm.c
      - (uim_get_c_string, uim_scm_repl_c_string, uim_scm_int_from_c_int,
        uim_scm_str_from_c_str, uim_scm_intern_c_str, uim_scm_qintern_c_str,
        uim_scm_nth, uim_scm_nreverse, uim_scm_provide): Removed
    * uim/uim.c
      - (uim_get_candidate): Follow the changes
    * uim/uim-util.c
      - (rk_expect_seq, shift_elems): Ditto
    * uim/uim-key.c
      - (define_key): Ditto
    * uim/intl.c
      - (uim_init_intl_subrs): Ditto
    * uim/uim-sh.c
      - (main): Ditto
    * uim/skk.c
      - (skk_store_replaced_numeric_str): Ditto
    * doc/COMPATIBILITY
      - Update

2007-01-09 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-compat-scm.h
      - (uim_scm_symbol_value, uim_scm_symbol_value_bool,
        uim_scm_symbol_value_int, uim_scm_symbol_value_str, uim_scm_quote,
        uim_scm_list1, uim_scm_list2, uim_scm_list3, uim_scm_list4,
        uim_scm_list5, uim_scm_init_fsubr): Move to uim-scm.h
    * uim/uim-compat-scm.c
      - (uim_scm_symbol_value, uim_scm_symbol_value_bool,
        uim_scm_symbol_value_int, uim_scm_symbol_value_str, uim_scm_quote,
        uim_scm_list1, uim_scm_list2, uim_scm_list3, uim_scm_list4,
        uim_scm_list5, uim_scm_init_fsubr, uim_scm_symbol_value_int_internal,
        uim_scm_symbol_value_str_internal): Move to uim-scm.c
    * uim/uim-scm.h
      - (uim_scm_symbol_value, uim_scm_symbol_value_bool,
        uim_scm_symbol_value_int, uim_scm_symbol_value_str, uim_scm_quote,
        uim_scm_list1, uim_scm_list2, uim_scm_list3, uim_scm_list4,
        uim_scm_list5, uim_scm_init_fsubr): Moved from uim-compat-scm.h
    * uim/uim-scm.c
      - (uim_scm_symbol_value, uim_scm_symbol_value_bool,
        uim_scm_symbol_value_int, uim_scm_symbol_value_str, uim_scm_quote,
        uim_scm_list1, uim_scm_list2, uim_scm_list3, uim_scm_list4,
        uim_scm_list5, uim_scm_init_fsubr, uim_scm_symbol_value_int_internal,
        uim_scm_symbol_value_str_internal): Moved from uim-compat-scm.c
    * doc/COMPATIBILITY
      - Update

2007-01-09 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-scm.h
    * uim/uim-scm.c
    * uim/uim-compat-scm.c
    * uim/uim-custom.c
    * uim/plugin.c
    * uim/editline.c
      - Remove all #if UIM_SCM_GCC4_READY_GC -enclosed codes
    * doc/COMPATIBILITY
      - Update

2007-01-09 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * make-wc.sh
      - Modify comments

2007-01-09 Jae-hyeon Park <jhyeon@gmail.com>

    * scm/byeoru.scm
      - (byeoru-feed-romaja-key): moved the internal definition of
        (flush-automata) to the beginning of the procedure for R5RS
        compliance.
      - (byeoru-feed-romaja-key), (byeoru-feed-hangul-key): removed a
        null-list test which is not needed by sigscheme

2007-01-09 Etsushi Kato <ek.kato@gmail.com>

    * make-wc.sh : s/CONF_ARGS/CONF_COMMON/

2007-01-09 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * make-wc.sh
      - Fix repository URL in the usage
      - Add prerequisites as a comment

2007-01-09 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * make-wc.sh
      - New file copied from make-dist.sh
    * configure.ac
      - Increase version to 1.5.0
    * uim/libtool-version.mk
      - (libuim_version): Increase to 6:0:0 from 5:0:0 due to the uim-scm
        incompatibility
    
    * doc/COMPATIBILITY
      - Fix previous commit

2007-01-09 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit replace almost all UIM_EVAL_FSTRING*() with uim_scm_call*() and
      simplify. UIM_EVAL_FSTRING*() will be uim-custom -local and removed from
      libuim core soon
    
    * uim/uim-scm-abbrev.h
      - New file
      - (MAKE_INT, MAKE_STR, MAKE_SYM, MAKE_PTR, MAKE_FPTR, INTP, STRP, SYMP,
        PTRP, FPTRP, CAR, CDR, SET_CAR, SET_CDR, CONS, LIST1, LIST2, LIST3,
        LIST4, LIST5, QUOTE): New macro
    * uim/uim-scm.h
      - (uim_scm_null_list):
        * Renamed to uim_scm_null()
        * Define uim_scm_null_list as alias to uim_scm_null
      - (uim_scm_symbolp, uim_scm_call0, uim_scm_call1, uim_scm_call2,
        uim_scm_call3, uim_scm_call, uim_scm_call_with_guard): New function decl
    * uim/uim-scm.c
      - (struct call_args): New type
      - (uim_scm_symbolp, uim_scm_call0, uim_scm_call1, uim_scm_call2,
        uim_scm_call3, uim_scm_call, uim_scm_call_with_guard,
        uim_scm_call_internal, uim_scm_call_with_guard_internal): New function
      - (uim_scm_load_file, uim_scm_require_file): Replace UIM_EVAL_FSTRING*()
        with uim_scm_call*()
    
    * uim/uim-internal.h
      - (uim_internal_escape_string): Removed
    * uim/uim.c
      - Include uim-scm-abbrev.h
      - (uim_create_context, uim_reset_context, uim_focus_in_context,
        uim_focus_out_context, uim_place_context, uim_displace_context,
        uim_switch_im, uim_release_context, uim_prop_activate,
        uim_prop_update_custom, uim_prop_reload_configs, uim_set_mode,
        uim_get_im_short_desc, uim_get_default_im_name,
        uim_get_im_name_for_locale, uim_get_candidate, uim_set_candidate_index,
        uim_input_string): Replace UIM_EVAL_FSTRING*() with uim_scm_call*()
      - (uim_internal_escape_string): Removed
    
    * uim/uim-key.c
      - (KEYBUF_SIZE, keycode_to_sym): Removed
      - (define_valid_key_symbols, handle_key): Replace UIM_EVAL_FSTRING*() with
        uim_scm_call*() and simplify
      - (uim_press_key, uim_release_key): Follow handle_key changes
    
    * uim/uim-func.c
      - Include uim-compat-scm.h and uim-scm-abbrev.h
      - (im_acquire_text): Replace UIM_EVAL_FSTRING*() with uim_scm_call*() and
        simplify
    
    * uim/uim-util.c
      - Include uim-scm-abbrev.h
      - (uim_get_language_name_from_locale): Replace UIM_EVAL_FSTRING*() with
        uim_scm_call*()
      - (digit2string): Removed
      - (uim_init_util_subrs): Remove digit->string registration
    * scm/util.scm
      - (digit->string): New procedure
    
    * uim/uim-compat-scm.c
      - (uim_symbol_value_str): Replace UIM_EVAL_FSTRING*() with uim_scm_call*()
    
    * uim/plugin.c
      - Include uim-scm-abbrev.h
      - (plugin_unload_internal): Replace UIM_EVAL_FSTRING*() with
        uim_scm_call*()
    
    * uim/uim-module-manager.c
      - Include uim-compat-scm.h and uim-scm-abbrev.h
      - (struct main_args): New type
      - (append_module_names): Directly construct string list
      - (main): Split main code off to main_internal
      - (main_internal):
        * New function
        * Replace UIM_EVAL_FSTRING*() with uim_scm_call*() and simplify
    * scm/uim-module-manager.scm
      - (register-modules, unregister-modules): Follow the changes in
        uim-module-manager.c
    
    * uim/Makefile.am
      - (pkginclude_HEADERS): Add uim-scm-abbrev.h
    
    * doc/COMPATIBILITY
      - Update

2007-01-08 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-scm.c
      - (uim_scm_length): Remove unneeded uim_scm_ensure()

2007-01-08 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-internal.h
      - Exclude gettext.h
      - (UIM_PREPARE_SAVING_TEXTDOMAIN_CODESET, UIM_SWITCH_TEXTDOMAIN_CODESET,
        UIM_RESTORE_TEXTDOMAIN_CODESET): Removed
      - (UIM_EVAL_STRING, UIM_EVAL_FSTRING1, UIM_EVAL_FSTRING2,
        UIM_EVAL_FSTRING3, UIM_EVAL_FSTRING4, UIM_EVAL_FSTRING5): Remove gettext
        handlings
      - (uim_last_client_encoding): Removed
    * uim/uim.c
      - Exclude gettext.h
      - (uim_last_client_encoding): Removed
      - (uim_create_context, uim_init_scm, uim_init, uim_quit): Remove gettext
        handlings
    * uim/uim-util.c
      - Cosmetic change

2007-01-08 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit stop gettext in libuim. It should be performed in client
      side. To support the migration, libuim-custom will perform it for now. I'll
      commit the code later. Translations are temporarily disabled
    
    * scm/i18n.scm
      - (ugettext, _): Add WARNING comment
      - (lang-code->lang-name): Strip ugettext
    * scm/load-action.scm
      - (indication-alist-entry-extract-choice, indication-alist-indicator):
        Strip ugettext
    * scm/anthy-custom.scm
    * scm/anthy-key-custom.scm
    * scm/byeoru-custom.scm
    * scm/byeoru-key-custom.scm
    * scm/canna-custom.scm
    * scm/canna-key-custom.scm
    * scm/custom.scm
    * scm/generic-custom.scm
    * scm/generic-key-custom.scm
    * scm/im-custom.scm
    * scm/mana-custom.scm
    * scm/mana-key-custom.scm
    * scm/prime-custom.scm
    * scm/prime-key-custom.scm
    * scm/skk-custom.scm
    * scm/skk-key-custom.scm
    * scm/spellcheck-custom.scm
    * scm/tutcode-key-custom.scm
      - Strip all ugettext
      - Replace all _ with N_

2007-01-08 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim.c
      - (uim_get_candidate): Fix wrong comment

2007-01-08 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit optimize out the dirty uim_return_str handling
    
    * uim/uim-func.c
      - (uim_return_str, im_return_str): Removed
      - (uim_init_im_subrs): Remove im-return-str registration
    * uim/uim.c
      - (uim_return_str): Removed
      - (uim_switch_im, uim_get_im_short_desc, uim_get_default_im_name,
        uim_get_im_name_for_locale): Accept string from Scheme directly
      - (uim_init_scm): Remove uim_return_str handling
    * uim/uim-util.c
      - (uim_return_str): Removed
      - (uim_get_language_name_from_locale): Accept string from Scheme directly
    * scm/im.scm
      - (uim-get-im-short-desc, uim-get-default-im-name,
        uim-get-im-name-for-locale): Return string directly
    * scm/i18n.scm
      - (langgroup-primary-lang-code): Ditto

2007-01-08 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit optimize out the dirty return_str_list handling
    
    * uim/uim-scm.h
    * uim/uim-scm.c
      - (uim_scm_ensure): New function
      - (uim_scm_length): Change to return C long directly
    * uim/uim-util.c
      - (str_seq_equal, str_seq_partial): Follow the specification change of
        uim_scm_length()
    * uim/uim-func.c
      - (uim_return_str_list, UIM_RETURN_STR_LIST_SIZE, im_return_str_list):
        Removed
      - (uim_init_im_subrs): Remove im-return-str-list registration
    * uim/uim.c
      - (uim_return_str_list, UIM_RETURN_STR_LIST_SIZE): Removed
      - (uim_init_scm): Remove uim_return_str_list initialization
      - (uim_get_candidate): Directly accept string list and simplify
    * scm/im.scm
      - (get-candidate): Return string list directly
    * doc/COMPATIBILITY
      - Add new section "uim-scm API reorganization in uim 1.5.0"

2007-01-08 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * All test/test-*.scm have been passed again
    
    * test/uim-test-utils.scm
      - (uim-define-siod-compatible-require): New procedure
    
    * test/test-db.scm
      - Disable all tests
    * scm/uim-db.scm
      - Add a comment that SigScheme is not supported
    
    * test/test-lazy-load.scm
      - Support SigScheme
      - Follow lazy-load.scm specification changes
      - Add LIBUIM_VANILLA=1 support
    * scm/lazy-load.scm
      - Remove a TODO comment
    
    * test/test-im.scm
      - Support SigScheme
      - Follow im.scm specification changes
      - Fix invalid retrieve-im invocations
    
    * test/test-uim-util.scm
      - Support SigScheme storage-compact (fixnum limits)
    
    * test/test-custom-rt.scm
    * test/test-custom.scm
    * test/test-plugin.scm
      - Add LIBUIM_VANILLA=1 support
    
    * test/test-slib.scm
      - Support SigScheme
    * test/test-util.scm
      - Support SigScheme
      - Disable string->letter control char tests
      - Disable multi-segment-* tests
    
    * NEWS
      - Update

2007-01-08 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/Makefile.am
      - (module_names): Reorder preference. m17nlib takes precedence over pyload,
        hangul, viqr and ipa-x-sampa

2007-01-08 Etsushi Kato <ek.kato@gmail.com>

    * helper/toolbar-systray-gtk.c
      - Include <stdlib.h> for exit(3).
      - (systray_unrealized_cb) : New.  Quit the program.
      - (main) : Connect after to the systray's unrealize.

2007-01-08 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/init.scm
      - (allocate-heap, prealloc-heaps-for-heavy-job): Replace dummy functions with
        actual SigScheme operation
    * uim/uim-scm.c
      - (uim_scm_init): Expand maximum heap size to 0.99GB
    * NEWS
      - Update

2007-01-06 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * Makefile.am
      - Fix $(distdir) abuse
    * make-dist.sh
      - Add RELEASE_SUFFIX make variable into Makefile.in

2007-01-06 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * COPYING
      - Remove SIOD license. No SIOD codes are remained in current uim
      - Cosmetic change for the license terms. It is only cosmetic, and no actual
        terms are modified
      - Replace supplementary explanation
      - Add license for SigScheme
      - Add license for libgcroots

2007-01-06 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * COPYING
    * emacs/COPYING
    * emacs/README
    * emacs/README.ja
    * emacs/callback.c
    * emacs/callback.h
    * emacs/candidate.c
    * emacs/candidate.h
    * emacs/commit.c
    * emacs/commit.h
    * emacs/context.c
    * emacs/context.h
    * emacs/debug.c
    * emacs/debug.h
    * emacs/encoding.c
    * emacs/encoding.h
    * emacs/helper-message.c
    * emacs/helper-message.h
    * emacs/helper-server.c
    * emacs/helper-server.h
    * emacs/helper.c
    * emacs/helper.h
    * emacs/im.c
    * emacs/im.h
    * emacs/key.c
    * emacs/key.h
    * emacs/output.c
    * emacs/output.h
    * emacs/preedit.c
    * emacs/preedit.h
    * emacs/prop.c
    * emacs/prop.h
    * emacs/uim-candidate.el
    * emacs/uim-debug.el
    * emacs/uim-el-agent.c
    * emacs/uim-el-agent.h
    * emacs/uim-el-helper-agent.c
    * emacs/uim-el-helper-agent.h
    * emacs/uim-el-types.h
    * emacs/uim-helper.el
    * emacs/uim-key.el
    * emacs/uim-keymap.el
    * emacs/uim-leim.el
    * emacs/uim-preedit.el
    * emacs/uim-util.el
    * emacs/uim-var.el
    * emacs/uim.el
    * examples/uim-custom/uim-custom-dump.c
    * examples/uim-custom/uim-custom-update.c
    * examples/uim-custom/uim-custom-variable.c
    * fep/COPYING
    * fep/callbacks.c
    * fep/callbacks.h
    * fep/draw.c
    * fep/draw.h
    * fep/escseq.c
    * fep/escseq.h
    * fep/helper.c
    * fep/helper.h
    * fep/key.c
    * fep/key.h
    * fep/read.c
    * fep/read.h
    * fep/str.c
    * fep/str.h
    * fep/udsock.c
    * fep/udsock.h
    * fep/uim-fep-tick.c
    * fep/uim-fep.c
    * fep/uim-fep.h
    * gtk/caret-state-indicator.c
    * gtk/caret-state-indicator.h
    * gtk/compose.c
    * gtk/compose.h
    * gtk/gtk-im-uim.c
    * gtk/gtk-im-uim.h
    * gtk/key-util-gtk.c
    * gtk/key-util-gtk.h
    * gtk/text-util.c
    * gtk/text-util.h
    * gtk/uim-cand-win-gtk.c
    * gtk/uim-cand-win-gtk.h
    * gtk/uim-eb.c
    * gtk/uim-eb.h
    * helper/candwin-gtk.c
    * helper/dict-anthy.c
    * helper/dict-anthy.h
    * helper/dict-canna-cclass.c
    * helper/dict-canna-cclass.h
    * helper/dict-canna.c
    * helper/dict-canna.h
    * helper/dict-cclass-dialog.c
    * helper/dict-cclass-dialog.h
    * helper/dict-dict.c
    * helper/dict-dict.h
    * helper/dict-main-gtk.c
    * helper/dict-util.c
    * helper/dict-util.h
    * helper/dict-word-list-view-gtk.c
    * helper/dict-word-list-view-gtk.h
    * helper/dict-word-list-win-gtk.c
    * helper/dict-word-list-win-gtk.h
    * helper/dict-word-win-gtk.c
    * helper/dict-word-win-gtk.h
    * helper/dict-word.c
    * helper/dict-word.h
    * helper/im-switcher-gtk.c
    * helper/input-pad-ja.c
    * helper/pref-gtk-custom-widgets.c
    * helper/pref-gtk-custom-widgets.h
    * helper/pref-gtk-keytab.h
    * helper/pref-gtk.c
    * helper/toolbar-applet-gnome.c
    * helper/toolbar-common-gtk.c
    * helper/toolbar-standalone-gtk.c
    * helper/toolbar-systray-gtk.c
    * helper/uim-dict-ui.xml.in
    * po/fr.po
    * po/ja.po
    * po/ko.po
    * po/uim.pot
    * qt/candwin-qt.cpp
    * qt/candwin-qt.h
    * qt/chardict/chardict-bushuviewwidget.cpp
    * qt/chardict/chardict-bushuviewwidget.h
    * qt/chardict/chardict-chargridview.cpp
    * qt/chardict/chardict-chargridview.h
    * qt/chardict/chardict-qt.cpp
    * qt/chardict/chardict-qt.h
    * qt/chardict/chardict-unicodeviewwidget.cpp
    * qt/chardict/chardict-unicodeviewwidget.h
    * qt/chardict/po/ja.po
    * qt/chardict/qtgettext.h
    * qt/immodule-candidatewindow.cpp
    * qt/immodule-candidatewindow.h
    * qt/immodule-plugin.cpp
    * qt/immodule-plugin.h
    * qt/immodule-qhelpermanager.cpp
    * qt/immodule-qhelpermanager.h
    * qt/immodule-qtextutil.cpp
    * qt/immodule-qtextutil.h
    * qt/immodule-quiminfomanager.cpp
    * qt/immodule-quiminfomanager.h
    * qt/immodule-quiminputcontext.cpp
    * qt/immodule-quiminputcontext.h
    * qt/immodule-quiminputcontext_compose.cpp
    * qt/immodule-quiminputcontext_compose.h
    * qt/immodule-quiminputcontext_with_slave.cpp
    * qt/immodule-quiminputcontext_with_slave.h
    * qt/immodule-subwindow.cpp
    * qt/immodule-subwindow.h
    * qt/pref-customwidgets.cpp
    * qt/pref-customwidgets.h
    * qt/pref-qt.cpp
    * qt/pref-qt.h
    * qt/qtgettext.h
    * qt/switcher-qt.cpp
    * qt/switcher-qt.h
    * qt/toolbar-applet-kde.cpp
    * qt/toolbar-applet-kde.h
    * qt/toolbar-common-quimhelpertoolbar.cpp
    * qt/toolbar-common-quimhelpertoolbar.h
    * qt/toolbar-common-uimstateindicator.cpp
    * qt/toolbar-common-uimstateindicator.h
    * qt/toolbar-standalone-qt.cpp
    * qt/toolbar-standalone-qt.h
    * replace/os_dep.h
    * scm/action.scm
    * scm/anthy-custom.scm
    * scm/anthy-key-custom.scm
    * scm/anthy.scm
    * scm/byeoru-custom.scm
    * scm/byeoru-dic.scm
    * scm/byeoru-key-custom.scm
    * scm/byeoru-symbols.scm
    * scm/byeoru.scm
    * scm/canna-custom.scm
    * scm/canna-key-custom.scm
    * scm/canna.scm
    * scm/custom-rt.scm
    * scm/custom.scm
    * scm/direct.scm
    * scm/generic-custom.scm
    * scm/generic-key-custom.scm
    * scm/generic.scm
    * scm/hangul.scm
    * scm/hangul2.scm
    * scm/hangul3.scm
    * scm/i18n.scm
    * scm/im-custom.scm
    * scm/im-switcher.scm
    * scm/im.scm
    * scm/init.scm
    * scm/ipa-x-sampa.scm
    * scm/japanese-azik.scm
    * scm/japanese-kana.scm
    * scm/japanese.scm
    * scm/key.scm
    * scm/latin.scm
    * scm/lazy-load.scm
    * scm/load-action.scm
    * scm/m17nlib.scm
    * scm/mana-custom.scm
    * scm/mana-key-custom.scm
    * scm/mana.scm
    * scm/pinyin-big5.scm
    * scm/plugin.scm
    * scm/prime-custom.scm
    * scm/prime-key-custom.scm
    * scm/prime.scm
    * scm/pyload.scm
    * scm/pyunihan.scm
    * scm/rk.scm
    * scm/scim.scm
    * scm/skk-custom.scm
    * scm/skk-dialog.scm
    * scm/skk-editor.scm
    * scm/skk-key-custom.scm
    * scm/skk.scm
    * scm/spellcheck-custom.scm
    * scm/spellcheck.scm
    * scm/tcode.scm
    * scm/trycode.scm
    * scm/tutcode-key-custom.scm
    * scm/tutcode.scm
    * scm/uim-db.scm
    * scm/uim-module-manager.scm
    * scm/uim-sh.scm
    * scm/ustr.scm
    * scm/util.scm
    * scm/viqr.scm
    * scm/zaurus.scm
    * test/run-test.scm
    * test/template.scm
    * test/test-action.scm
    * test/test-custom-rt.scm
    * test/test-custom.scm
    * test/test-db.scm
    * test/test-example.scm
    * test/test-i18n.scm
    * test/test-im.scm
    * test/test-intl.scm
    * test/test-key.scm
    * test/test-lazy-load.scm
    * test/test-plugin.scm
    * test/test-slib.scm
    * test/test-uim-test-utils.scm
    * test/test-uim-util.scm
    * test/test-ustr.scm
    * test/test-util.scm
    * test/uim-test-utils.scm
    * uim/agent.c
    * uim/anthy.c
    * uim/canna.c
    * uim/editline.c
    * uim/editline.h
    * uim/intl.c
    * uim/iso-639-1.def
    * uim/m17nlib.c
    * uim/mana.c
    * uim/plugin.c
    * uim/plugin.h
    * uim/prime.c
    * uim/scim.cpp
    * uim/skk.c
    * uim/spellcheck.c
    * uim/test-gc.c
    * uim/uim-compat-scm.c
    * uim/uim-compat-scm.h
    * uim/uim-custom-enabler.c
    * uim/uim-custom.c
    * uim/uim-custom.h
    * uim/uim-encoding.h
    * uim/uim-func.c
    * uim/uim-helper-client.c
    * uim/uim-helper-server.c
    * uim/uim-helper.c
    * uim/uim-helper.h
    * uim/uim-im-switcher.h
    * uim/uim-internal.h
    * uim/uim-ipc.c
    * uim/uim-key.c
    * uim/uim-module-manager.c
    * uim/uim-scm.c
    * uim/uim-scm.h
    * uim/uim-sh.c
    * uim/uim-util.c
    * uim/uim-util.h
    * uim/uim.c
    * uim/uim.h
    * xim/canddisp.cpp
    * xim/canddisp.h
    * xim/compose.cpp
    * xim/compose.h
    * xim/connection.cpp
    * xim/connection.h
    * xim/convdisp.cpp
    * xim/convdisp.h
    * xim/helper.cpp
    * xim/helper.h
    * xim/locale.cpp
    * xim/main.cpp
    * xim/util.cpp
    * xim/util.h
    * xim/xdispatch.h
    * xim/xim.h
    * xim/ximic.cpp
    * xim/ximim.cpp
    * xim/ximpacket.cpp
    * xim/ximpn.h
    * xim/ximserver.cpp
    * xim/ximserver.h
    * xim/ximtrans.cpp
      - Update copyright by following script
        svn ls -R | egrep -v '/$' | xargs perl -i -pe 's/\b(200\d)([,-\s]+200\d)*\s+uim\b/\1-2007 uim/'

2007-01-06 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * make-dist.sh
      - Increase version numbers
    * uim/uim-scm.c
      - Require SigScheme 0.7.3
    * RELNOTE
    * NEWS
      - Update

2007-01-06 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/Makefile.am
      - (CFLAGS): Append $(UIM_SCM_CFLAGS) to suppress warning

2007-01-06 Etsushi Kato <ek.kato@gmail.com>

    * NEWS : Fix mismerge.

2007-01-06 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * configure.ac
      - Suppress warnings of uim-scm.c if --disable-debug
    * uim/Makefile.am
      - (libuim_la_CFLAGS): Add $(UIM_SCM_CFLAGS)

2007-01-03 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/im-custom.scm
      - (custom eb-dic-path): Make sys-datadir as default prefix. Thanks the
        anonymous reporter

2007-01-01 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/uim-sh.scm
      - (uim-sh): Fix broken error backtrace printing
    * NEWS
      - Update

2007-01-01 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/uim-sh.scm
      - (uim-sh-loop, activate-editline): Fix broken 'uim-sh -B'
      - (uim-sh-usage): Fix broken printing
      - Thanks No.568 of [uim thread 7] for these report

2006-12-31 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-scm.h
      - (uim_scm_return_value): Add a comment
    * uim/uim-scm.c
      - Require SigScheme 0.7.2
      - (uim_scm_make_bool): Make independent of SigScheme
      - (uim_scm_eval_internal): Fix lacking uim_scm_last_val storing
    * uim/uim-compat-scm.c
      - (return_val): Removed
      - (uim_scm_c_strs_into_list): Make independent of SigScheme
      - (uim_scm_c_list): Fix unprotected return_val dependency
    * NEWS
      - Update

2006-12-31 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * doc/RELEASING
      - Change tag naming scheme
    
    * RELNOTE
    * NEWS
      - Update

2006-12-30 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-compat-scm.c
      - (uim_scm_symbol_value): Fix unbound variable handling incompatible with uim
        1.3.x (enbuged in r1239)

2006-12-29 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * configure.ac
      - (AC_LANG_CXX): New macro for AX_CXXFLAGS_GCC_OPTION
    * make-dist.sh
      - Detect autogen error
      - Add auto modification of Makefile.in for -alpha and -beta suffixes
    * Makefile.am
      - (RELEASE_URL): Support -alpha and -beta suffixes
      - (MAINTAINERCLEANFILES): Add aclocal.m4, ltmain.sh, depcomp, missing,
        install-sh, intltool-extract.in, intltool-merge.in, intltool-update.in
    * doc/RELEASING
      - Update

2006-12-29 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * RELNOTE
    * NEWS
      - Update

2006-12-29 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * make-dist.sh
      - (LIBGCROOTS_URL): Update to 0.1.3
    * Makefile.am
      - Cosmetic change
    
    * test/uim-test-utils.scm
      - Set LIBUIM_SCM_FILES with absolute path. SigScheme rejects relative paths.

2006-12-29 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * configure.ac
      - Add lacking AX_LANG_WNOERROR definition

2006-12-29 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * m4/ax_cflags_gcc_option.m4
    * m4/ax_lib_glibc.m4
      - Copied from sigscheme-trunk/m4
    * m4/Makefile.am
      - (EXTRA_DIST): Add ax_cflags_gcc_option.m4 and ax_lib_glibc.m4
    * configure.ac
      - AC_PREREQ(2.60b) for AC_LANG_WERROR
      - AM_INIT_AUTOMAKE([1.10])
      - Stop CFLAGS and CXXFLAGS overwriting
      - Remove -O2
      - Replace gcc options setting with AX_CFLAGS_GCC_OPTION() and
        AX_CXXFLAGS_GCC_OPTION()
      - Add -no-cpp-precomp for Mac OS X
      - Add -Wno-overlength-strings
      - Add AX_LIB_GLIBC
    * autogen.sh
      - Remove a comment

2006-12-29 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-custom.c
      - Include uim-stdint.h
      - (custom_cb_add, custom_cb_add_internal): Fix 64-bit<->32-bit cast
    * uim/uim-scm.c
      - (uim_scm_c_int, uim_scm_c_int_internal): Ditto
    * uim/uim-compat-scm.c
      - (uim_scm_symbol_value_int, uim_scm_symbol_value_int_internal): Ditto
    
    * uim/uim-util.c
      - Remove unused and not so portable langinfo.h

2006-12-28 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * Makefile.am
      - (DIST_SUM_LIST): Use $(distdir) to receive the -alpha and -beta suffixes
    * doc/RELEASING
    * RELNOTE
      - Update
    
    * po/ja.po
    * po/ko.po
    * po/fr.po
      - Update Project-Id-Version
      - Add Report-Msgid-Bugs-To

2006-12-28 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * qt/chardict/po/Makevars
      - (top_builddir): Add again. It is required by intltool-update

2006-12-28 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit make 'make distcheck' passed
    
    * configure.ac
      - Add IT_PO_SUBDIR([qt/chardict/po])
    * autogen.sh
      - Add patch for -m with (srcdir != builddir) for intltool-update.in
    * qt/chardict/po/Makevars
      - (top_builddir): Removed and replaced with Makefile.in.in -provided one
      - (top_podir): New variable
      - Override MSGMERGE and GENPOT
    * po/POTFILES.in
      - Add helper/eggtrayicon.c
    * po/POTFILES.skip
      - New file

2006-12-28 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * qt/chardict/po/Makevars
      - (GETTEXT_PACKAGE): New variable to adapt to recent intltool
    * configure.ac
      - Require intltool 0.35.2
    * autogen.sh
      - Apply "# Makevars" workaround to po/Makefile.in.in
      - Copy po/Makefile.in.in to qt/chardict/po
    * qt/chardict/po/Makefile.in.in
      - Removed

2006-12-28 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * RELNOTE
      - Update

2006-12-27 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * make-dist.sh
      - Complement forgotten options
      - Always --without-scim since it is broken with SCIM 1.4.5
    * configure.ac
      - Mark scim as broken
    
    * doc/UIM-SCM
      - Follow the GC protection API change. Thanks the anonymous document
        committer on Japanese uim wiki

2006-12-27 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/libtool-version.mk
      - (libuim_version): Increase to 5:0:0 from 4:0:1 due to the GC protection API
        change which required to fix the GC problem. See doc/COMPATIBILITY for
        further information
    
    * uim/uim.c
      - Cosmetic change

2006-12-27 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * fep/uim-fep.c
    * fep/str.c
    * fep/read.c
    * fep/helper.c
    * fep/callbacks.c
    * fep/escseq.c
    * fep/key.c
    * fep/draw.c
      - Fix duplicate NDEBUG definition

2006-12-27 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * RELNOTE
    * doc/RELEASING
      - Update
    
    * README
      - Modify a expression that causes misunderstanding

2006-12-27 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * make-dist.sh
      - Add 'make distcheck' with various argument sets
    * Makefile.am
      - (releasetest-all-flag-enabled, releasetest-all-flag-disabled,
        each-releasetest, releasetest): Remove the distcheck-alternative
        workaround. Use make-dist.sh instead
      - Cosmetic changes
    * doc/RELEASING
      - Update

2006-12-27 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * po/ChangeLog
      - New file for translation logging. Not for intltool itself
    
    * config.rpath
    * compile
    * depcomp
    * missing
    * install-sh
    * mkinstalldirs
      - Removed

2006-12-27 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * po/ChangeLog
      - Removed
    * Makefile.am
      - (DISTCLEANFILES): Remove po/.intltool-merge-cache

2006-12-27 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * autogen.sh
      - Add *.scm filename suffix workaround for intltool-update
    
    * Makefile.am
      - handle uim.spec and uim.desktop properly
      - Add ChangeLog handling to distclean-local

2006-12-27 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * Makefile.am
      - Fix gnuify-changelog.pl path

2006-12-27 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * autogen.sh
      - Add intltoolize invocation
    * po/Makefile.in.in
    * intltool-extract.in
    * intltool-update.in
    * intltool-merge.in
      - Removed. These files should be generated by intltoolize on each release
    * configure.ac
      - Increase intltool version requirement to 0.35. The previous intltools in
        the repository are having problem on 'make distcheck' since it does not
        support POTFILES.in located in $srcdir different to $builddir
    
    * Makefile.am
      - Fix gnuify-changelog.pl placement

2006-12-27 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * Merge r5rs branch @r4234 into trunk by following commands. The
      r5rs branch is no longer used
    
      $ rm -rf trunk
      $ svn up trunk
      $ cd trunk
      $ svn merge --ignore-ancestry svn+ssh://svn.freedesktop.org/svn/uim/trunk svn+ssh://svn.freedesktop.org/svn/uim/branches/r5rs

2006-12-22 Etsushi Kato <ek.kato@gmail.com>

    * NEWS
    * RELNOTE
      - Update.

2006-12-21 Etsushi Kato <ek.kato@gmail.com>

    * qt/candwin-qt.cpp (CandidateWindow::slotStdinActivated) : Fix to
      use exit(3) instead of QApplication::exit().
    * qt/toolbar-common-uimstateindicator.h
      - (class UimStateIndicator) : Add slotPopupMenuAboutToShow() and
        slotPopupMenuAboutToHide(), popupMenuShowing members.
    * qt/toolbar-common-quimhelpertoolbar.h
      - (class QUimHelperToolbar)
        - Add isApplet argument for the constructor.
        - Add contextMenu() member.
    * qt/toolbar-applet-kde.h
      - (class UimToolbar) : Add mousePressEvent() member.
      - (class UimApplet) : Add resizeEvent() member.
    * qt/toolbar-common-uimstateindicator.cpp
      - (UimStateIndicator::UimStateIndicator) : Fix to use an icon for
        the fallback button.
      - (UimStateIndicator::UimStateIndicator) : Initialize
        popupMenuShowing.
      - (UimStateIndicator::propListUpdate) : Don't parse prop_list
        message while popup the menu.
      - (UimStateIndicator::propListUpdate) : Connect to popupMenu
        event.
      - (UimStateIndicator::slotPopupMenuAboutToShow)
      - (UimStateIndicator::slotPopupMenuAboutToHide)
        - New.
    * qt/toolbar-common-quimhelpertoolbar.cpp
      - (QUimHelperToolbar::QUimHelperToolbar) : Use isApplet
        argument to not to show quit item.
      - (QUimHelperToolbar::contextMenu) : New.
    * qt/toolbar-applet-kde.cpp
      - Include <qcursor.h>.
      - (UimApplet::UimApplet) : Resize toolbar.
      - (UimApplet::resizeEvent) : New.  Fix to layout the toolbar.
      - (UimToolbar::UimToolbar) : Follow the changes in
        QUimHelperToolbar.
      - (UimToolbar::mousePressEvent) : Fix to show context menu with
        right button press.

2006-12-21 Etsushi Kato <ek.kato@gmail.com>

    * qt/pref-customwidgets.cpp (KeyGrabDialog::setKeyStr) : Fix
      compilation on non immodule patched Qt.  Thanks to Kentaro
      Hatori.

2006-12-20 Etsushi Kato <ek.kato@gmail.com>

    * helper/toolbar-common-gtk.c
      - (prop_menu_showing) : New.
      - (prop_menu_shell_deactivate) : New.  Reset prop_menu_showing.
      - (popup_prop_menu) : Set prop_menu_showing.
      - (helper_toolbar_prop_list_update) : Don't parse prop_list
        messages while the menu is popuped.

2006-12-20 Etsushi Kato <ek.kato@gmail.com>

    * scm/skk.scm (skk-proc-state-wide-latin) : Fix for symbol key
      handling.

2006-12-15 Etsushi Kato <ek.kato@gmail.com>

    * configure.ac
    * uim/uim.h
      - Post release bump version.

2006-12-14 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * RELNOTE
      - Cosmetic change

2006-12-13 Etsushi Kato <ek.kato@gmail.com>

    * NEWS
    * RELNOTE
      - Update.

2006-12-13 Etsushi Kato <ek.kato@gmail.com>

    * xim/ximserver.cpp : Fix keysym usage for pre X11R6.7
      environment.  Thanks to Koichi Tsuchikane.

2006-12-08 Etsushi Kato <ek.kato@gmail.com>

    * NEWS : Update.

2006-12-08 Etsushi Kato <ek.kato@gmail.com>

    * RELNOTE: Update.

2006-12-07 Etsushi Kato <ek.kato@gmail.com>

    * qt/candwin-qt.cpp (CandidateWindow::updateLabel) : Add check for
      needHilite.

2006-12-07 Etsushi Kato <ek.kato@gmail.com>

    * qt/immodule-candidatewindow.cpp (CandidateWindow::setPage)
    * qt/candwin-qt.cpp (CandidateWindow::setPage)
      - Update an index label properly.

2006-12-07 Etsushi Kato <ek.kato@gmail.com>

    * emacs/candidate.c
      - (show_candidate)
      - (shift_candidate_page)
        - Fix for display_limit zero.

2006-12-07 Etsushi Kato <ek.kato@gmail.com>

    * NEWS : Update.

2006-12-07 Etsushi Kato <ek.kato@gmail.com>

    * Bug fix for candidate window behavior in GTK+/QT/XIM bridges.
    
    * gtk/gtk-im-uim.c (cand_shift_page)
    * qt/immodule-candidatewindow.cpp (CandidateWindow::shiftPage)
      - Don't call uim_set_candiadte_index() unless candidate is
        selected.
    * xim/canddisp.h (class Canddisp) : Update argument of select().
    * xim/canddisp.cpp (Canddisp::select) : Send additional message.
    * xim/ximserver.h (class InputContext) : Add new member
      set_need_hilite_selected_cand() and need_hilite_selected_cand.
    * xim/ximserver.cpp
      - (InputContext::candidate_select_cb) : Set
        need_hilite_selected_cand.
      - (InputContext::candidate_activate) : Initialize variables.
      - (InputContext::candidate_update) : Follow the change in
        Canddsip.
      - (InputContext::candidate_select)
        - Ditto.
        - Don't call Don't call uim_set_candiadte_index() unless
          candidate is selected.
      - (InputContext::set_need_hilite_selected_cand) : New.
    * helper/candwin-gtk.c
      - (_UIMCandidateWindow) : Add new member need_hilite.
      - (candidate_window_init)
      - (candwin_activate)
        -  Follow the change.
      - (candwin_update) : Set need_hilite.
      - (uim_cand_win_gtk_set_index) : Check need_hilite.
      - (uim_cand_win_gtk_set_page) : Update.
    * qt/candwin-qt.h (class CandidateWindow) : Add needHilite member.
    * qt/candwin-qt.cpp
      - (CandidateWindow::selectCand) : Set needHilite.
      - (CandidateWindow::setIndex) : Check needHilite.

2006-12-07 Etsushi Kato <ek.kato@gmail.com>

    * xim/ximserver.cpp (InputContext::candidate_activate)
      - Initialize current_page.

2006-12-07 Etsushi Kato <ek.kato@gmail.com>

    * qt/candwin-qt.cpp
      - (CandidateWindow::CandidateWindow) : Don't sort the list.
      - (CandidateWindow::activateCand) : Don't modify heading label.
      - (CandidateWindow::setPage)
        - Check display limit.
        - Fix to put candidates with proper order.

2006-12-07 Etsushi Kato <ek.kato@gmail.com>

    * qt/immodule-candidatewindow.cpp : Fix heading lable handling and
      page shift.
      - (CandidateWindow::CandidateWindow) : Don't sort the list.
      - (CandidateWindow::activateCandwin) : Initialize pageIndex.
      - (CandidateWindow::setPage)
        - Check displayLimit.
        - Fix to put candidates with proper order.
      - (CandidateWindow::shiftPage) : Fix behavior when
        candidateIndex is -1.

2006-12-06 Etsushi Kato <ek.kato@gmail.com>

    * qt/toolbar-common-uimstateindicator.cpp
      - (UimStateIndicator::propListUpdate)
      - (QHelperPopupMenu::insertHelperItem)
        - Add check before scaling a icon.

2006-12-05 Etsushi Kato <ek.kato@gmail.com>

    * doc/COMPATIBILITY : Update.

2006-12-05 Etsushi Kato <ek.kato@gmail.com>

    * uim/uim.h
    * uim/uim-key.c
    * gtk/key-util-gtk.c
    * helper/pref-gtk-keytab.h
    * qt/pref-customwidgets.cpp
    * xim/ximserver.cpp
      - Add missing lock keys.
    * qt/immodule-quiminputcontext.cpp
      - Ditto.
      - Fix handle some keys.

2006-12-04 Etsushi Kato <ek.kato@gmail.com>

    * scm/plugin.scm (uim-plugin-lib-load-path) : Fix bug got in
      r3878.

2006-12-04 Etsushi Kato <ek.kato@gmail.com>

    * uim/uim.c (uim_internal_escape_string) : Oops. Bug fix.

2006-12-02 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * pixmaps/Makefile.am
      - (GENERATED_SVGS): Add trycode.svg
      - (SVG_PNGS): Add trycode.png
      - (GENERATED_PNGS): Remove trycode.png
      - (trycode.svg): New rule which copies tcode.svg
    
    * configure.ac
      - (GCC, GXX): New AM_CONDITIONAL
    * helper/Makefile.am
      - (uim_toolbar_applet_CFLAGS): Add -Wno-error if the compiler is
        gcc, to avoid ISO C 89 string overlength

2006-12-02 Etsushi Kato <ek.kato@gmail.com>

    * uim/uim.c
      - (escape_string)
      - (uim_internal_escape_string)
        - Renamed as uim_internal_escape_string().
        - Change to escape '\\' and '"' only.
      - (uim_input_string) : Follow the change.
    * uim/uim-func.c
      - (im_acquire_text) : Fix to escape strings.
    * uim/uim-internal.h : Add uim_internal_escape_string()
      declaration.

2006-12-02 Etsushi Kato <ek.kato@gmail.com>

    * uim/uim.c (escape_string) : Bug fix.

2006-12-02 Etsushi Kato <ek.kato@gmail.com>

    * NEWS : Update

2006-12-02 Etsushi Kato <ek.kato@gmail.com>

    * scm/tcode.scm
    * scm/trycode.scm
      - Update compose table.
        http://slashdot.jp/comments.pl?sid=337552&cid=1068530

2006-12-02 Etsushi Kato <ek.kato@gmail.com>

    * pixmaps/trycode.svg : Removed.
    * pixmaps/AUTHORS : Update.
    * pixmaps/LIST : Ditto.
    * pixmaps/Makefile.am : Generate trycode.png from tcode.png.

2006-12-01 Etsushi Kato <ek.kato@gmail.com>

    * pixmaps/AUTHORS
    * pixmaps/LIST
    * pixmaps/indication-id.txt
      - Update for trycode.scm.

2006-12-01 Etsushi Kato <ek.kato@gmail.com>

    * scm/tcode.scm : Update compose table
      (http://slashdot.jp/comments.pl?sid=337552&cid=1068311,
      http://slashdot.jp/comments.pl?sid=337552&cid=1068334).
    * scm/trycode.scm : New Japanese IM based on T-Code.  See
      http://slashdot.jp/comments.pl?sid=337552&cid=1068349
    * scm/Makefile.am
      - (SCM_FILES)
      - (module_names)
        - Add trycode.scm
    * pixmaps/Makefile.am : Add trycode.svg.
    * pixmaps/trycode.svg : New.  Copied from tcode.svg.
    * NEWS
    * RELNOTE
      - Add description about Try-Code IM.

2006-12-01 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * doc/COMPATIBILITY
    * NEWS
    * RELNOTE
      - Update for uim 1.3.0

2006-12-01 Etsushi Kato <ek.kato@gmail.com>

    * fep/str.c (get_enc) : Fix bug got in r3399.

2006-12-01 Etsushi Kato <ek.kato@gmail.com>

    * qt/Makefile.am
      - (libquiminputcontextplugin_la_SOURCES) : Add immodule-plugin.h.

2006-12-01 Etsushi Kato <ek.kato@gmail.com>

    * uim/libtool-version.mk (libuim_version) : Update to 4:0:1
      (libuim.so.3.1.0) to correspond API additions without breaking
      backward compatibility.

2006-12-01 Etsushi Kato <ek.kato@gmail.com>

    * NEWS : Update.

2006-12-01 Etsushi Kato <ek.kato@gmail.com>

    * gtk/gtk-im-uim.h
    * gtk/gtk-im-uim.c
      - Make module compilable even when IM_UIM_USE_TOPLEVEL is not
        defined.

2006-12-01 Etsushi Kato <ek.kato@gmail.com>

    * gtk/gtk-im-uim.c
      - (im_uim_reset) : Call uim_focus_out_context() and
        uim_focus_in_context() to workaround broken reset timing in
        GTK+.
        http://lists.freedesktop.org/archives/uim/2006-November/001633.html
      - (handle_key_on_toplevel) : Set need_im_reset.

2006-12-01 Etsushi Kato <ek.kato@gmail.com>

    * uim/uim.c
      - (uim_input_string) : Implement.
      - (escape_string) : New.  Utility for uim_input_string().

2006-11-30 Etsushi Kato <ek.kato@gmail.com>

    * scm/m17nlib.scm : Support reset, focus-in, and focus-out
      handlers.
    * scm/generic.scm
      - (generic-proc-input-state-with-preedit) : Enable implicit
        commit with symbol? keys and keys with modifier state.
      - (generic-proc-converting-state)
        - Ditto.
        - Add check for generic-context-candidate-op-count with
          generic-prev-candidate-key?
    * scm/hangul.scm : Use implicit commit with return key.
    * uim/m17nlib.c (push_symbol_key) : Fix return value with Mnil
      symbol.

2006-11-30 Etsushi Kato <ek.kato@gmail.com>

    * scm/tcode.scm : Update table by
      http://slashdot.jp/comments.pl?sid=337552&cid=1059724

2006-11-29 Etsushi Kato <ek.kato@gmail.com>

    * scm/rk.scm (rk-check-back-commit) : Add check for tail sequence
      to reset rk context.
    * scm/hangul.scm
      - (hangul-proc-on-mode-with-preedit)
      - (hangul-proc-on-mode)
        - Remove space key from commit key.  Use implicit commit
          instead.

2006-11-29 Etsushi Kato <ek.kato@gmail.com>

    * scm/generic.scm
      - (generic-context-flush) : Flush rk context.
      - (generic-commit)
      - (generic-commit-by-numkey)
        - Clean up with generic-context-flush.
      - (generic-proc-input-state-without-preedit)
        - Ditto.
        - Don't consume {prev,next}-candidate-key?
      - (generic-proc-input-state-with-preedit) : Fix indentation.
      - (generic-proc-input-state) : Bug fix for key handling with
        rk-push-key!.
      - (generic-proc-converting-state)
        - Clean up with generic-context-flush.
        - Add comments for symbol? and key with modifier state.
        - Fix indentation.
      - (generic-focus-out-handler) : Clean up with
        generic-context-flush.
    * scm/tutcode.scm : Update.
    * scm/rk.scm
      - (rk-check-back-commit) : Reset rk context with unmatched
        sequence.
      - (rk-partial-seq?) : Return #f is input sequence is a null
        list.
      - (rk-partial?) : Fix for back-match.

2006-11-28 Etsushi Kato <ek.kato@gmail.com>

    * scm/generic.scm
    * scm/tutcode.scm
    * scm/hangul.scm
      - Implement focus-in/focus-out/place/displace handlers.

2006-11-28 Etsushi Kato <ek.kato@gmail.com>

    * scm/latin.scm (latin-focus-in-handler) : Fix to return #f.

2006-11-27 Etsushi Kato <ek.kato@gmail.com>

    * gtk/gtk-im-uim.c
      - (im_uim_reset)
      - (handle_key_on_toplevel)
        - Revert changes in r4008.  It requires revised reset handling
          in GtkEntry and GtkTextView.

2006-11-27 Etsushi Kato <ek.kato@gmail.com>

    * gtk/gtk-im-uim.c (im_uim_reset)
      - Reset preedit.
      - (handle_key_on_toplevel) : Enable reset.
    * qt/immodule-quiminputcontext.cpp (QUimInputContext::reset)
      - Reset preedit.
    * scm/byeoru.scm (byeoru-focus-out-handler) : New.  Commit when
      focus out.

2006-11-27 Etsushi Kato <ek.kato@gmail.com>

    *  qt/immodule-qhelpermanager.cpp
       - (QUimHelperManager::parseHelperStr) : Use
         uim_prop_reload_configs() again.

2006-11-27 Etsushi Kato <ek.kato@gmail.com>

    * qt/Makefile.am : Add immodule-quiminfomanager.{cpp,h}.
    * qt/immodule-quiminputcontext_with_slave.cpp
    * qt/immodule-qtextutil.cpp
    * qt/immodule-subwindow.cpp
    * qt/immodule-quiminputcontext_compose.cpp
    * qt/immodule-candidatewindow.cpp
    * qt/immodule-qtextutil.h
      - Reorganization of header include.
    * qt/immodule-quiminfomanager.h
      - New file.
      - (uimInfo) : Moved from UIMInfo in immodule-quiminputcontext.h
        and use QString for the strings.
      - (class QUimInfoManager) : New.
    * qt/immodule-quiminfomanager.cpp : New file.
    * qt/immodule-plugin.cpp
      - Ditto.
      - Separate class definition into immodule-plugin.h.
      - (UimInputContextPlugin::create) : Get proper lang for IM.
      - (UimInputContextPlugin::languages) : Return list of languages.
      - (UimInputContextPlugin::displayName) : Don't add language
        information.
      - (UimInputContextPlugin::getQUimInfoManager) : New.
      - (UimInputContextPlugin::uimInit) : Create QUimInfoManager.
      - (UimInputContextPlugin::uimQuit) : Delete QUimInfoManager.
    * qt/immodule-plugin.h
      - New file.
      - Separate the definition from immodule-plugin.cpp.
      - (class UimInputContextPlugin) : Add getQUimInfoManager() and
        infoManager member.
    * qt/immodule-quiminputcontext.h
      - Reorganization of header include.
      - (class QUimInputContext)
        - Add reloadUim() member.
        - Remove createUimInfo() member and move as initUimInto() in
          QUimInfoManger.
      - (UIMInfo) : Remove.
    * qt/immodule-quiminputcontext.cpp
      - Reorganization of header include.
      - (QUimInputContext::QUimInputContext) : Don't call
        createUimInfo() here.
      - (QUimInputContext::reloadUim) : New.
      - (QUimInputContext::createUimInfo) : Remove.
    * qt/immodule-qhelpermanager.cpp
      - Reorganization of header include.
      - (QUimHelperManager::parseHelperStr) : Don't use
        uim_prop_reload_configs() and use QUimInputContext::reloadUim()
        instead for a workaround of bug #2412.
      - (QUimHelperManager::sendImList) : Use QUimInfoManager.

2006-11-24 Etsushi Kato <ek.kato@gmail.com>

    * scm/latin.scm
      - (latin-focus-in-handler)
      - (latin-focus-out-handler)
      - (latin-place-handler)
      - (latin-displace-handler)
        - New.
      - (register-im) : Use its own focus and place handler.

2006-11-24 Etsushi Kato <ek.kato@gmail.com>

    * xim/ximserver.cpp
      - (InputContext::focusIn)
      - (InputContext::focusOut)
        - Call uim_focus_{in,out}_context().

2006-11-24 Etsushi Kato <ek.kato@gmail.com>

    * qt/immodule-quiminputcontext.h
      - (class QUimInputContext)
        - Remove isPreeditPreservationEnabled() as focus out handler is
          now available.
        - Remove redundant preeditString.
    * qt/immodule-quiminputcontext.cpp
      - (QUimInputContext::setFocus) : Call uim_focus_in_context().
      - (QUimInputContext::unsetFocus)
        - Call uim_focus_out_context().
        - Don't call reset().
      - (QUimInputContext::identifierName) : Use "uim".
      - (QUimInputContext::isPreeditPreservationEnabled) : Removed.
    * qt/immodule-quiminputcontext_with_slave.cpp
      - Clean up.

2006-11-24 Etsushi Kato <ek.kato@gmail.com>

    * gtk/gtk-im-uim.c
      - (im_uim_focus_in)
      - (im_uim_focus_out)
        - Call uim_focus_{in,out}_context().

2006-11-24 Etsushi Kato <ek.kato@gmail.com>

    * uim/uim.c
      - (uim_focus_in_context)
      - (uim_focus_out_context)
      - (uim_place_context)
      - (uim_displace_context)
        - Added.

2006-11-21 Etsushi Kato <ek.kato@gmail.com>

    * qt/toolbar-applet-kde.cpp : Include <config.h>.

2006-11-21 Etsushi Kato <ek.kato@gmail.com>

    * gtk/text-util.c
    * qt/immodule-qtextutil.cpp
      - Use bit flag to check UTextExtent_Line or UTextExtent_Full.

2006-11-19 Etsushi Kato <ek.kato@gmail.com>

    * scm/uim-module-manager.scm (prepare-installed-im-list) : Reset
      im-list at the beginning.

2006-11-19 Etsushi Kato <ek.kato@gmail.com>

    * helper/toolbar-common-gtk.c (command_entry) : Don't use
      GTK_STOCK_EDIT on GTK+ version below 2.6.0.

2006-11-18 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * doc/COMPATIBILITY
      - Update

2006-11-18 Etsushi Kato <ek.kato@gmail.com>

    * qt/toolbar-applet-kde.c (init) : Use UTF-8 codeset for gettext.

2006-11-16 Etsushi Kato <ek.kato@gmail.com>

    * qt/toolbar-common-quimhelpertoolbar.h (class QUimHelperToolbar)
      - Add some tool icons.
    * qt/toolbar-common-quimhelpertoolbar.cpp
      - (ACTION_ICONDIR) : Use 16x16.
      - (QUimHelperToolbar::QUimHelperToolbar) : Use some more tool
        icons.
      - (QUimHelperToolbar::addExecImSwitcherButton)
      - (QUimHelperToolbar::addExecPrefButton)
      - (QUimHelperToolbar::addExecDictButton)
      - (QUimHelperToolbar::addExecInputPadButton)
      - (QUimHelperToolbar::addExecHandwritingInputPadButton)
      - (QUimHelperToolbar::addExecHelpButton)
        - Update strings for tooltips and use icons.

2006-11-16 Etsushi Kato <ek.kato@gmail.com>

    * helper/toolbar-common-gtk.c
      - (command_entry) : Use icons.  Patched by Shun-ichi TAHARA.
      - (helper_toolbar_prop_label_update) : Removed.
      - (helper_toolbar_parse_helper_str) : Remove
        "prop_label_update" parse.
      - (toolbar_new) : Use uim-icon for the initial button.
    * helper/toolbar-applet-gnome.c
      - (exec_dic)
      - (exec_pad)
      - (exec_hand)
      - (exec_help)
      - (uim_menu_verbs)
      - (uim_menu_xml)
        - Enable additional items in a command menu.  Patched by
          Shun-ichi TAHARA.
    * helper/input-pad-ja.c
      - (alphabet_capital)
      - (alphabet_small)
      - (numbers)
      - (symbols)
      - (katakana)
      - (kana_symbols)
      - (kigou)
      - (unit)
      - (academic)
      - (greek_capital)
      - (greek_small)
      - (cyrillic_capital)
      - (cyrillic_small)
      - (line)
      - (create_symbol_tab)
      - (create_greek_tab)
      - (create_cyrillic_tab)
      - (create_hiragana_tab)
      - (create_katakana_tab)
      - (create_symbol_tab)
      - (create_greek_tab)
      - (create_cyrillic_tab)
      - (input_table_create)
        - Reorganized by Shun-ichi TAHARA.
    * po/ja.po : Update.

2006-11-16 Etsushi Kato <ek.kato@gmail.com>

    * qt/immodule-qtextutil.cpp
      - (QUimTextUtil::QUimTextUtil) : Initialize mPreeditSaved.
      - (QUimTextUtil::deletePrimaryTextInQLineEdit)
        - Fix deletion with a preedit in the text.
      - (QUimTextUtil::QTextEditPositionBackward)
      - (QUimTextUtil::QTextEditPositionForward)
        - Check preedit state.
      - (QUimTextUtil::savePreedit)
      - (QUimTextUtil::restorePreedit)
        - New.
    * qt/immodule-qtextutil.h
      - (class QUimTextUtil) : Add savePreedit(), restorePreedit(),
        mPreeditSaved members.

2006-11-15 Etsushi Kato <ek.kato@gmail.com>

    * qt/immodule-qtextutil.cpp : Cosmetic changes.

2006-11-15 Etsushi Kato <ek.kato@gmail.com>

    * gtk/text-util.c : Cosmetic changes.

2006-11-15 Etsushi Kato <ek.kato@gmail.com>

    * gtk/text-util.c
      - (delete_text_in_gtk_text_view)
      - (delete_selection_in_gtk_text_view)
        - More bug fixes.

2006-11-15 Etsushi Kato <ek.kato@gmail.com>

    * qt/immodule-quiminputcontext.cpp (QUimInputContext::saveContext)
      - Add check for composing state.

2006-11-15 Etsushi Kato <ek.kato@gmail.com>

    * qt/immodule-quiminputcontext.h (class QUimInputContext)
    * qt/immodule-quiminputcontext.cpp
      - Add saveContext() and restoreContext().
    * qt/immodule-qtextutil.cpp (deletePrimaryTextInQTextEdit)
      - Support text deletion with a preedit string.

2006-11-15 Etsushi Kato <ek.kato@gmail.com>

    * qt/immodule-qtextutil.cpp
      - (QUimTextUtil::acquirePrimaryTextInQTextEdit)
      - (QUimTextUtil::deletePrimaryTextInQTextEdit)
        - Bug fix.

2006-11-15 Etsushi Kato <ek.kato@gmail.com>

    * gtk/text-util.c (acquire_text_in_gtk_text_view) : Bug fix.

2006-11-15 Etsushi Kato <ek.kato@gmail.com>

    * qt/immodule-qtextutil.cpp
      - (QUimTextUtil::deleteSelectionTextInQTextEdit)
    * gtk/text-util.c
      - (delete_selection_in_gtk_text_view)
        - Bug fix.

2006-11-15 Etsushi Kato <ek.kato@gmail.com>

    * qt/immodule-qtextutil.cpp
      - (QUimTextUtil::acquirePrimaryTextInQTextEdit)
      - (QUimTextUtil::acquireSelectionTextInQTextEdit)
        - Use Qt::PlainText for text acquitision.

2006-11-14 Etsushi Kato <ek.kato@gmail.com>

    * gtk/text-util.c
      - (acquire_text_in_gtk_text_view)
      - (im_uim_acquire_primary_text)
      - (im_uim_acquire_selection_text)
      - (im_uim_acquire_clipboard_text)
      - (delete_text_in_gtk_entry)
      - (delete_text_in_gtk_text_view)
      - (delete_selection_in_gtk_entry)
      - (delete_selection_in_gtk_text_view)
        - Return -1 on negative value for the text extent specifier
          other than UTextExtent_Full/Line.

2006-11-14 Masahito Omote <omote@utyuuzin.net>

    * gtk-im-uim.c (im_module_create): Fix segv when uim_init() failed.

2006-11-14 Etsushi Kato <ek.kato@gmail.com>

    * qt/Makefile.am
      - (noinst_HEADERS) : Add immodule-qtextutil.h.
      - (MOC_FILES) : Add immodule-qtextutil.moc.
      - (libquiminputcontextplugin_la_SOURCES) : Add
        immodule-qtextutil.cpp, immodule-qtextutil.h.
    * qt/immodule-quiminputcontext.h
      (class QUimInputContext)
      - Make getPreeditString() and getPreeditCursorPosition() public.
      - Add textUtil().
      - Add mTextUtil.
    * qt/immodule-quiminputcontext.cpp
      - Include "immodule-qtextutil.h".
      - (QUimInputContext::createUimContext) : Set text acquisition
        callbacks.
      - (QUimInputContext::getPreeditCursorPosition) : Don't return 0
        with cwin->isAlwaysLeftPosition().
    * qt/immodule-qtextutil.h
    * qt/immodule-qtextutil.cpp
      - New file.
      - (class QUimTextUtil) : New.
        - Text acquisition/deletion functions for QLineEdit and
          QTextEdit with ugly code (QTextEdit is far from flexible).
        - For the text deletion with UTextAreaPrimary in QTextEdit, it
          only supports with no-preedit state.

2006-11-13 Etsushi Kato <ek.kato@gmail.com>

    * scm/prime.scm (prime-subkeymap-child-context)
      - Fix bug #8984.

2006-11-13 Etsushi Kato <ek.kato@gmail.com>

    * gtk/text-util.c (im_uim_delete_selection_text) : Return -1 if
      the widget is neither gtkentry nor gtktextview.

2006-11-13 Etsushi Kato <ek.kato@gmail.com>

    * gtk/text-util.c (im_uim_acquire_clipboard_text) : Bug fix.

2006-11-12 Etsushi Kato <ek.kato@gmail.com>

    * gtk/key-util-gtk.c (im_uim_convert_keyevent) : Add gtk+ version
      check.

2006-11-11 Etsushi Kato <ek.kato@gmail.com>

    * gtk/gtk-im-uim.c
      - (delete_text_cb)
    * gtk/text-util.h
    * gtk/text-util.c
      - (im_uim_delete_primary_text)
      - (im_uim_delete_selection_text)
        - Use IMUIMContext * as 1st arg.

2006-11-10 Etsushi Kato <ek.kato@gmail.com>

    * gtk/text-util.c
    * gtk/text-util.h
      - New file.
    * gtk/gtk-im-uim.c
      - Include "text-util.h".
      - (acquire_text_in_gtk_text_view)
      - (delete_text_in_gtk_entry)
      - (delete_text_in_gtk_text_view)
      - (delete_selection_in_gtk_entry)
      - (delete_selection_in_gtk_text_view)
        - Move into text-acquisition.c
      - (acquire_primary_text)
      - (acquire_selection_text)
      - (acquire_clipboard_text)
      - (delete_primary_text)
      - (delete_selection_text)
        - Move into text-utils.c and renamed with im_uim_ prefix.
    * gtk/Makefile.am (IM_UIM_SOURCES)
      - Add text-util.[ch].

2006-11-10 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim.h
      - (uim_reset_context, uim_focus_in_context, uim_focus_out_context,
        uim_place_context, uim_displace_context): Fix ambiguous English
        expressions

2006-11-10 Etsushi Kato <ek.kato@gmail.com>

    * scm/lazy-load.scm : Follow the change in register-im.

2006-11-10 Etsushi Kato <ek.kato@gmail.com>

    * scm/byeoru.scm
    * scm/m17nlib.scm
    * scm/prime.scm
    * scm/generic.scm
    * scm/direct.scm
    * scm/anthy.scm
    * scm/skk.scm
    * scm/tutcode.scm
    * scm/mana.scm
    * scm/spellcheck.scm
    * scm/latin.scm
    * scm/hangul.scm
    * scm/canna.scm
    * scm/scim.scm
      - Follow the change in register-im.

2006-11-09 Etsushi Kato <ek.kato@gmail.com>

    * gtk/gtk-im-uim.c (acquire_clipboard_text) : Support
      UTextOrigin_Cursor and UTextOrigin_Beginning.  See
      http://lists.freedesktop.org/archives/uim/2006-November/001582.html

2006-11-09 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit add the focus and input position relocation
      notifications API (bug #7729). See doc/COMPATIBILITY for further
      information. The interfaces may be changed based on further
      discussions
    
    * uim/uim.h
      - (uim_reset_context): Revise requirements for reset handler
      - (uim_focus_in_context, uim_focus_out_context, uim_place_context,
        uim_displace_context): New function
    * scm/im.scm
      - (record im): Add members focus-in-handler, focus-out-handler,
        place-handler, displace-handler
      - (register-im): Follow the change of 'record im'
      - (focus-in-handler, focus-out-handler, place-handler,
        displace-handler): New procedures
    * doc/COMPATIBILITY
      - Add new section "Focus activity and input position relocation
        notifications"

2006-11-09 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim.h
      - Modify specifications about the text acquisition API
    * doc/COMPATIBILITY
      - Add new section "Text acquisition and injection API"
    * RELNOTE
    * NEWS
      - Update

2006-11-09 Etsushi Kato <ek.kato@gmail.com>

    * qt/toolbar-common-uimstateindicator.cpp
    (UimStateIndicator::propListUpdate) : Show toolbar as in toolbar
      for GTK+.

2006-11-08 Etsushi Kato <ek.kato@gmail.com>

    * NEWS : Just update for test.

2006-11-08 Etsushi Kato <ek.kato@gmail.com>

    * helper/toolbar-common-uimstateindicator.h
    (QHelperToolbarButton::QHelperToolbarButton) : setAutoRaise true.

2006-11-07 Etsushi Kato <ek.kato@gmail.com>

    * qt/toolbar-standalone-qt.h (class UimToolbarDraggingHandler) :
      Add offsetX and offsetY member.
    * qt/toolbar-standalone-qt.cpp
      - (UimToolbarDraggingHandler::mousePressEvent)
      - (UimToolbarDraggingHandler::mouseMoveEvent)
        - Use correct geometry position for mouse dragging.

2006-11-07 Etsushi Kato <ek.kato@gmail.com>

    * qt/toolbar-common-uimstateindicator.h
      - (BUTTON_SIZE) : Update.
      - (ICON_SIZE) : New.
    * qt/toolbar-standalone-qt.cpp
      - Include "toolbar-common-uimstateindicator.h" for BUTTON_SIZE.
      - (TOOLBAR_MARGIN_SIZE) : New.
      - (UimStandaloneToolbar::UimStandaloneToolbar) : Set margin for
        QUimHelperToolbar.
      - (UimToolbarDraggingHandler::sizeHint) : Update.
    * qt/toolbar-common-uimstateindicator.cpp
      - Include <qimage.h>.
      - (UimStateIndicator::propListUpdate)
      - (QHelperPopupMenu::insertHelperItem)
        - Use scaled icon with 16x16 pixels.
    * qt/toolbar-common-quimhelpertoolbar.cpp
      - Include <qimage.h>.
      - (QUimHelperToolbar::QUimHelperToolbar)
        - Use scaled icon with 16x16 pixels.

2006-11-07 Etsushi Kato <ek.kato@gmail.com>

    * qt/toolbar-standalone-qt.h
      - (class UimStandaloneToolbar) : Add slotToolbarDoubleClicked()
        and toolbar member.
      - (class UimToolbarDraggingHandler) : Add handleDoubleClicked()
        and mouseDoubleClickEvent() member.
    * qt/tooolbar-standalone-qt.cpp
      - (UimStandaloneToolbar::UimStandaloneToolbar) : Connect to
        handleDoubleClicked() signal.
      - (UimStandaloneToolbar::slotToolbarDoubleClicked) : New.
        Hide/show the toolbar with double click.
      - (UimToolbarDraggingHandler::sizeHint) : Set minimal height.
      - (UimToolbarDraggingHandler::mousePressEvent)
      - (UimToolbarDraggingHandler::mouseReleaseEvent)
        - Change pointer icon.
      - (UimToolbarDraggingHandler::mouseDoubleClickEvent) : Check
        double click.

2006-11-07 Etsushi Kato <ek.kato@gmail.com>

    * helper/toolbar-standalone.c
      - Indentation fixes.
      - (button_press_event_cb) : Use GDK_FLEUR for grab cursor.

2006-11-06 Etsushi Kato <ek.kato@gmail.com>

    * helper/toolbar-standalone-gtk.c
      - (button_press_event_cb) : Handle 2BUTTON_PRESS to hide/show
        the toolbar (Masatake Yamato <jet@gyve.org>, bug #8911).
      - (button_release_event_cb) : Return unless dragging.
      - (main)
        - Cosmetic changes.
        - Use toolbar as a data in connecting to button-press-event.

2006-11-04 Etsushi Kato <ek.kato@gmail.com>

    * uim/anthy.c
      - (anthy_version_minor)
      - (get_anthy_version)
        - Support 8158memm-type of version string.

2006-10-24 Etsushi Kato <ek.kato@gmail.com>

    * xim/convdisp.cpp
      - (ConvdispOv::update_icxatr)
      - (ConvdispOv::check_atr)
        - Add workaround for FlashPlayer9 beta (tested with 9.0 d55).

2006-10-23 Etsushi Kato <ek.kato@gmail.com>

    * doc/COMPATIBILITY : Update.

2006-10-23 Etsushi Kato <ek.kato@gmail.com>

    * xim/ximim.cp (XimIM_impl::forward_event) : Add workaround for
      a buggy application (flashplayer plugin).

2006-10-23 Etsushi Kato <ek.kato@gmail.com>

    * xim/ximic.cpp (icxatr::set_atr) : Don't set ICA_Fontset atr mask
      unless fontset is created.

2006-10-22 Etsushi Kato <ek.kato@gmail.com>

    * uim/uim.h (UKey) : Move newly added keys to the end for avoiding
      ABI incompatibility.
    * qt/pref-customwidgets.cpp
      - (KeyGrabDialog::setKeyStr)
      - (unicodeKeyToSymStr)
    * qt/immodule-quiminputcontext.cpp
      - (unicodeToUKey)
    * helper/pref-gtk-keytab.h
      - (key_tab)
    * scm/anthy.scm
      - (kana-keys?)
    * scm/japanese-kana.scm
      - (ja-kana-hiragana-rule)
      - (ja-kana-katakana-rule)
      - (ja-kana-halfkana-rule)
        -  Follow the changes in r3936.

2006-10-22 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit rename some keys recently added. See this message
      for further information.
      http://lists.freedesktop.org/archives/uim/2006-October/001567.html
    
    * uim/uim.h
      - (enum UKey):
        * Rename some keys
        * Add UKey_Henkan
    * uim/uim-key.c
      - (KEYBUF_SIZE, ISASCII): New macro
      - (key_tab): Rename some keys
      - (keycode_to_sym, handle_key): Make meaningful with the macros

2006-10-21 Etsushi Kato <ek.kato@gmail.com>

    * scm/latin.scm (latin-proc-raw-state) : Unset raw-commit flag to
      show deadkeys at the first key stroke of them.

2006-10-20 Etsushi Kato <ek.kato@gmail.com>

    * scm/anthy.scm : Experimental implementation of "Kana key"
      handling for Kana layout keyboard.  Synchronization of
      Latin/Kana layout depending on the input state will be
      needed to be implemented.
    
      - (action_anthy_roma)
      - (action_anthy_kana)
      - (action_anthy_azik)
        - Set string for "yen" in the preedit.
      - (anthy-make-raw-string) : Add sanity check for char-update.
      - (kana-keys?) : New.
      - (anthy-non-composing-symbol?) : New.  Determine symbol keys
        used for kana composing.
      - (anthy-proc-input-state-no-preedit)
      - (anthy-proc-input-state-with-preedit)
        - Use anthy-non-composing-symbol? instead of symbol? for raw
          commit.
        - Add symbol key handling for rk-context and raw-ustr.
      - (anthy-proc-transposing-state)
      - (anthy-proc-converting-state)
        - Use anthy-non-composing-symbol? instead of symbol?

2006-10-20 Etsushi Kato <ek.kato@gmail.com>

    * scm/japanese-kana.scm
      - (ja-kana-hiragana-rule)
      - (ja-kana-katakana-rule)
      - (ja-kana-halfkana-rule)
        - Assume "yen" key as prolongedsound.
        - Enable kana keys.
    * scm/japanese.scm
      - (ja-rk-rule-basic) : Add "yen" symbol.  Leave hankaku symbol
        is zenkaku yen since uim-anthy is written in EUC-JP.
      - (ja-wide) : Change to return input character itself instead of
        #f if the wide character is not found.
      - (japanese-roma-set-yen-representation) : New.  Sting for "yen"
        used in rk-pending.

2006-10-20 Etsushi Kato <ek.kato@gmail.com>

    * scm/latin.scm : Experimental implementation of deadkey and
      compose key handling.  Now rk-context can handle keys other than
      ASCII code using its symbol string.  If the key is needed to be
      shown in a preedit area with rk-pending, set its representation
      with set-symbol-value!.
    
      - (latin-multi-key?) : Disable.  Force to use Multi_key instated.
      - (latin-compose-rule) : Add sequences with deadkeys.
      - (action_latin_input) : Set symbol value of deadkeys which is
        used for preedit string.
      - (latin-proc-composing-state)
        - Fix backspace key handling.
        - Use Multi_key and deadkeys in the procedure.
      - (dead-keys?) : New.
      - (latin-proc-raw-state) : Use deadkeys.
    * scm/rk.scm
      - (rk-backspace)
      - (rk-delete)
        - Add handling with symbol keys which cannot be shown in the
          preedit are (e.g. Multi_key).
      - (rk-pending) : Don't include keysym without its representation.

2006-10-20 Etsushi Kato <ek.kato@gmail.com>

    * uim/uim.h (UKey) : Use UKey_Kana_TSU instead of UKey_Kana_TU.
    * uim/uim-key.c (key_tab) : Use kana-TSU, voicedsound,
      semivoicedsound instead of kana-TU, kana-voicedsound,
      kana-semivoicedsound respectively.
    * qt/pref-customwidgets.cpp (unicodeKeyToSymStr)
    * qt/immodule-quiminputcontext.cpp (unicodeToUKey)
    * helper/pref-gtk-keytab.h (key_tab)
      - Follow the changes.

2006-10-19 Etsushi Kato <ek.kato@gmail.com>

    * helper/pref-gtk-keytab.h : Added.

2006-10-19 Etsushi Kato <ek.kato@gmail.com>

    * qt/pref-customwidgets.cpp (unicodeKeyToSymStr) : Add kana key
      handling.
    * helper/pref-gtk-custom-widgets.c (key_pref_set_value) : Simplify
      with uim_pref_get_keysym().
    * helper/Makefile.am (uim_pref_gtk_SOURCES) : Add
      pref-gtk-keytab.h.
    * helper/pref-gtk-keytab.h : New file.
    * uim/uim-key.c (get_sym) : Fix warning arised with r3923.

2006-10-19 Etsushi Kato <ek.kato@gmail.com>

    * qt/pref-custom-widgets.h (class KeyGrabDialog) : Add
      pressed_unichar member.
    * qt/pref-customwidgets.cpp
      - (unicodeKeyToSymStr) : New.  Check only "yen" for now.
      - (KeyGrabDialog::KeyGrabDialog)
      - (KeyGrabDialog::keyPressEvent)
        - Set pressed_unichar.
      - (KeyGrabDialog::setKeyStr) : Handle unicode keys.

2006-10-19 Etsushi Kato <ek.kato@gmail.com>

    * qt/immodule-quiminputcontext.cpp
      - (katakanaUnicodeToSym) : Rename to unicodeToUKey.
      - (unicodeToUKey) : Renamed from katakanaUnicodeToSym.
      - (QUimInputContext::filterEvent) : Simplify Unicode key
        handling.

2006-10-18 Etsushi Kato <ek.kato@gmail.com>

    * helper/pref-gtk-custom-widgets.c (key_pref_set_value) : Handle
      more keys.

2006-10-18 Etsushi Kato <ek.kato@gmail.com>

    * qt/pref-customwidgets.cpp (KeyGrabDialog::setKeyStr) : Handle
      more keys.
    * qt/immodule-quiminputcontext.cpp
      - (QUimInputContext::filterEvent) : Ditto.
      - (katakanaUnicodeToSym) : New.
    * gtk/key-util-gtk.c (im_uim_convert_keyevent) : Handle more keys.
    * gtk/ximserver.cpp (keyState::check_key) : Ditto.

2006-10-18 Etsushi Kato <ek.kato@gmail.com>

    * uim/uim.h (UKey)
    * uim/uim-key.c (key_tab)
      - Fix "chi" according to X11/GTK+.

2006-10-18 Etsushi Kato <ek.kato@gmail.com>

    * uim/uim.h (UKey) : Keysym addtions.  See
      http://lists.freedesktop.org/archives/uim/2006-October/001564.html.
    * uim/uim-key.c
      - (key_tab) : Add symbols corresponding to the additional
        keysyms.
      - (get_sym) : Don't walk through all the table if found.
      - (keycode_to_sym) : Enable fast path.
      - (handle_key) : Enlarge keybuf.

2006-10-11 Etsushi Kato <ek.kato@gmail.com>

    * gtk/gtk-im-uim.c
      - (acquire_text_in_gtk_text_view) : New.
      - (acquire_primary_text) : Handle GtkTextView specifically.
      - (acquire_selection_text)
        - Re added.
        - Handle GtkTextEntry and GtkTextView specifically.
        - Handle UTextExtent_Line.
        - Handle UTextCursor appropriately.
      - (acquire_clipboard_text) : Support only UTextOrigin_end.
      - (acquire_text_cb) : Use acquire_selection_text() again.
      - (delete_text_in_gtk_entry) : New.
      - (delete_text_in_gtk_text_view) : Ditto.
      - (delete_primary_text) : Handle GtkTextEntry and GtkTextView
        specifically.
      - (delete_selection_in_gtk_entry) : New.
      - (delete_selection_in_gtk_text_view) : Ditto.
      - (delete_selection_text) : Handle GtkEntry and GtkTextView
        specifically.

2006-10-10 Etsushi Kato <ek.kato@gmail.com>

    * uim/uim-func.c : Fix comment.

2006-10-09 Etsushi Kato <ek.kato@gmail.com>

    * gtk/gtk-im-uim.c
      - (acquire_primary_text) : Support non-negative numbers,
        UTextExtent_Full, and UTextExtent_Line for text extent.
      - (acquire_selection_text) : Removed.
      - (acquire_clipboard_text)
        - Merge acquire_selection_text().
        - Implemented GTK+'s clipboard handling.
        - UTextExtent_Line handling is not implemented.
        - This function fails if origin is UTextOrigin_Cursor.
      - (acquire_text_cb) : Use acquire_clipboard_text() upon
        UTextArea_Selection.
      - (delete_primary_text) : New.  Separated from delete_text_cb()
        and add comments.
      - (delete_selection_text) : Ditto.
      - (delete_text_cb) : Simplify using delete_primary_text() and
        delete_selection_text().

2006-10-09 Etsushi Kato <ek.kato@gmail.com>

    * gtk/gtk-im-uim.c
      - (acquire_selection_text) : Set former and latter NULL.
      - (acquire_clipboard_text) : Ditto.
      - (acquire_text_cb) : Ditto for UTextArea_Unspecified.

2006-10-09 Etsushi Kato <ek.kato@gmail.com>

    * gtk/gtk-im-uim.c
      - (acquire_text_cb) : Separate primary text handling into
        acquire_primary_text().
      - (acquire_primary_text) : New.  Copied from acquire_text_cb().
      - (acquire_selection_text) : New.  Need implementation.
      - (acquire_clipboard_text) : Ditto.

2006-10-09 Etsushi Kato <ek.kato@gmail.com>

    * uim/uim-func.c (im_acquire_text)
      - Fix to return uim_scm_f() is callback returns error.
      - Use '() for ustr-new if string is NULL or "".

2006-10-09 Etsushi Kato <ek.kato@gmail.com>

    * scm/byeoru.scm
    * scm/m17nlib.scm
    * scm/generic.scm
    * scm/prime.scm
    * scm/direct.scm
    * scm/anthy.scm
    * scm/skk.scm
    * scm/lazy-load.scm
    * scm/im.scm
    * scm/tutucode.scm
    * scm/mana.scm
    * scm/spellcheck.scm
    * scm/latin.scm
    * scm/hangul.scm
    * scm/canna.scm
    * scm/scim.scm
      - Add input-string-handler for register-im.

2006-10-08 Etsushi Kato <ek.kato@gmail.com>

    * uim/uim-internal.h
    * uim/uim-func.c
    * uim/uim.c
      - Rename conv and reverse_conv member of uim_context according to
        http://lists.freedesktop.org/archives/uim/2006-October/001539.html

2006-10-08 Etsushi Kato <ek.kato@gmail.com>

    * scm/im.scm
      - (im-acquire-text) : Replace assoc with assq and bug fix.
      - (im-delete-text) : Replace assoc with assq.

2006-10-08 Etsushi Kato <ek.kato@gmail.com>

    * gtk/gtk-im-uim.c (delete_text_cb) : Return -1 if
      UTextExtent_Full or UTextExtent_Line is required for former_len
      or latter_len.

2006-10-08 Etsushi Kato <ek.kato@gmail.com>

    * gtk/gtk-im-uim.c (delete_text_cb) : Update test implementation.

2006-10-08 Etsushi Kato <ek.kato@gmail.com>

    * gtk/gtk-im-uim.c
      - (request_surrounding_text_cb, delete_surrounding_text_cb) :
         Deleted.
      - (acquire_text_cb) : New.  Test implementation.
      - (delete_text_cb) : Ditto.
      - (im_module_create) : Replace uim_set_surrounding_text_cb with
        uim_set_text_acquisition_cb.
    * scm/im.scm
      - (im-acquire-text) : Wrapper for im-acquire-text-internal in
        uim-func.c.
      - (im-delete-text) : Wrapper for im-delete-text in uim-func.c
    * uim/uim-internal.h
      - (surrounding_text) : Removed.
      - (uim_context_)
        - Remove request_surrounding_text_cb and
          delete_surrounding_text_cb.
        - Add acquire_text_cb and delete_text_cb.
        - Remove surrounding member.
    * uim/uim-func.c
      - (im_acquire_text) : Update implementation.
      - (im_delete_text) : Ditto.
      - (uim_init_im_subrs) : Use wrapper for im_acquire_text and
        im_delete_text.
    	* uim/uim.c
    	  - (uim_create_context) : Update initialization of uim_context.
    	  - (uim_set_surrounding_text_cb) : Removed.
    	  - (uim_set_text_acquisition_cb) : New.
    	  - (uim_input_string) : New.

2006-10-07 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit replace surrounding text API with generalized text
      acquisition API based on this discussion
      http://lists.freedesktop.org/archives/uim/2006-October/001542.html
    
    * uim/uim.h
      - (enum UTextArea, enum UTextOrigin, enum UTextExtent): New type
      - (uim_set_text_acquisition_cb, uim_input_string): New function
      - (uim_set_surrounding_text_cb, uim_set_surrounding_text): Removed
    * uim/uim-func.c
      - (im_request_surrounding, im_get_surrounding,
        im_delete_surrounding): Removed
      - (im_acquire_text, im_delete_text): New static function
      - (uim_init_im_subrs):
        * Remove registration of im-request-surrounding and im-get-surrounding
        * Add registration of im-acquire-text and im-delete-text
    * scm/im.scm
      - (text-area-id-alist, text-origin-alist, text-extent-alist): New
        variable
      - (record im): Add member input-string-handler
      - (input-string-handler): New procedure

2006-10-03 Etsushi Kato <ek.kato@gmail.com>

    * uim/uim.h (uim_set_surrounding_text_cb) : Update comment about
      delete_cb, and change return value of request_cb from void to
      int.
    * uim/uim-internal.h
      - (surrouding_text) : New.
      - (uim_context_) : Add reverse_conv and surrounding member, and
        change return value of request_surrounding_text_cb.
    * uim/uim-func.c
      - (im_set_encoding) : Handle uc->reverse_conv.
      - (im_request_surrounding) : Return proper value.
      - (im_get_surrounding) : New.
      - (im_delete_surrounding) : Return proper value.
      - (uim_init_im_subrs) : Export im_get_surrounding as
        im-get-surrounding in scheme side.
    * uim/uim.c
      - (uim_create_context) : Initialize uc->reverse_conv and
        uc->surrounding.
      - (uim_release_context) : Reset uc->reverse_conv.
      - (uim_set_surrounding_text_cb) : Change return value of
        request_cb.
      - (uim_set_surrounding_text) : Implement.
    * gtk/gtk-im-uim.c
      - (request_surrounding_text_cb)
      - (delete_surrounding_text_cb)
        - New.
      - (im_module_create) : Set surrounding text callbacks.

2006-09-26 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * pixmaps/Makefile.am
      - (GENERATED_SVGS): New variable
      - (clean-gensvg): New target
      - Make generated SVG files cleanable

2006-09-26 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit replace pixmaps/ with inputmethod-icons-1.1.1 (although
      almost icons are identical to original ones). To make the filenames
      synchronized with the inputmethod-icons package, some files have
      been prefixed with 'scim-'. But since install procedure renames
      them, no uim programs are affected with the renamings. And to follow
      future update of the inputmethod-icons package easily, all icon
      files except for large taiyaki.xcf have been copied into pixmaps/
      without renamings. Developers, commit inputmethod-icons repository
      first to update any icons
    
    * configure.ac
      - Add AM_MAINTAINER_MODE to make rsvg(1) unneeded completely
    * qt/toolbar-common-quimhelpertoolbar.cpp
      - (QUimHelperToolbar::QUimHelperToolbar): Replace switcher-icon.png
        with im_switcher.png
    * helper/toolbar-common-gtk.c
      - (command_entry, init_icon): Ditto
    * helper/toolbar-applet-gnome.c
      - (uim_menu_xml): Ditto
    * pixmaps/Makefile.am
      - Follow the icon files reorganization
      - Enclose PNG files generation into "if MAINTAINER_MODE"
      - (SCIM_PNGS, SCIM_ORIGINATED_PNGS, GENERATED_PNGS): New variable
      - (clean-genpng): New target
    * pixmaps/README
    * pixmaps/AUTHORS
      - Replace with inputmethod-icons-1.1.1's
    * pixmaps/COPYING
      - Removed and replaced with inputmethod-icons-1.1.1's COPYING.BSDL
    * pixmaps/COPYING.BSDL
    * pixmaps/COPYING.LGPL
    * pixmaps/ChangeLog
    * pixmaps/LIST
    * pixmaps/im_switcher.svg
    * pixmaps/scim-anthy.png
    * pixmaps/scim-canna.png
    * pixmaps/scim-prime.png
    * pixmaps/scim-skk.png
    * pixmaps/scim-wnn.png
      - New file imported from inputmethod-icons-1.1.1
    * pixmaps/switcher-icon.png
    * pixmaps/anthy.png
    * pixmaps/canna.png
    * pixmaps/prime.png
      - Removed to be replaced with equivalent files of
        inputmethod-icons-1.1.1's
    * pixmaps/indication-id.txt
      - Update
    
    * COPYING
      - Follow the COPYING file update of pixmaps/
    * RELNOTE
    * NEWS
      - Update

2006-09-25 Etsushi Kato <ek.kato@gmail.com>

    * scm/anthy.scm (anthy-make-raw-string) : Simplify.

2006-09-23 Etsushi Kato <ek.kato@gmail.com>

    * Add workaround if $HOME is not set (bug #8405).
    
    * scm/init.scm (load-user-conf) : Don't load ~/.uim if $HOME is
      not set.
    * scm/plugin.scm
      - (uim-plugin-lib-load-path) : Don't add ~/.uim/plugin if $HOME
        is not set.
      - (uim-plugin-scm-load-path) : Ditto.
      - (load-enabled-modules) : Don't load ~/.uim.d/plugin/loader.scm
        if $HOME is not set.
    * scm/im-custom.scm (eb-dic-path) : Check whether $HOME is set.
    * scm/custom-rt.scm (custom-file-path) : Ditto.
    * scm/skk-custom.scm
      - (skk-personal-dic-filename)
      - (skk-uim-personal-dic-filename)
        - Ditto.
    * uim/uim-custom.c (uim_conf_path) : Ditto.

2006-09-13 Etsushi Kato <ek.kato@gmail.com>

    * helper/dict-canna-cclass.h : Cosmetic changes.
    * helper/dict-canna-cclass.c
      - (find_desc_from_code_with_type)
      - (find_code_from_desc)
        - Fix use of 'type'.
    * helper/dict-word-win-gtk.c
      - (word_window_set_word) : Fix to set cclass text after
        selecting combobox.
      - (word_window_cclass_reset) : Fix indent.

2006-09-03 Konosuke Watanabe <sasugaanija@gmail.com>

    * emacs/uim-key.el (uim-this-command-keys) : Add a workaround for
      Emacs22's this-command-keys strange behaviour.

2006-09-02 Etsushi Kato <ek.kato@gmail.com>

    * helper/dict-canna-cclass.c (substantive_code) : Fix #T39.

2006-08-30 Etsushi Kato <ek.kato@gmail.com>

    * helper/toolbar-systray-gtk.c
      - (main)
      - (embeedded_cb)
        - Show icon after embedded.

2006-08-25 Etsushi Kato <ek.kato@gmail.com>

    * scm/canna.scm
      - (canna-candidate-type-upper-halfwidth-alnum)
      - (canna-candidate-type upper-fullwidth-alnum)
        - New.
      - (canna-make-raw-string)
      - (canna-make-whole-raw-string)
        - Use upper? argument.
      - (canna-rotate-transposing-alnum-type)
      - (canna-rotate-segment-transposing-alnum-type)
        - New.  Rotate alphabetic case in strings.
      - (canna-proc-transposing-state)
      - (canna-transposing-text)
        - Enable rotation of the alphabetic case in strings.
        - Cosmetic changes.
      - (canna-get-raw-candidate) : Check whether to get upper case.
      - (canna-set-segment-transposing)
        - Enable rotation of the alphabetic case in strings.
        - Fix check for return value of member.
    * scm/anthy.scm
    * scm/mana.scm
      - Same changes as in canna.scm.

2006-08-22 Etsushi Kato <ek.kato@gmail.com>

    * scm/prime.scm (prime-update-key-press) : Don't send command in
      the application mode.

2006-08-22 Etsushi Kato <ek.kato@gmail.com>

    * scm/m17nlib.scm (m17nlib-update-candidate) : Don't select
      a candidate after deactivation.

2006-08-18 Etsushi Kato <ek.kato@gmail.com>

    * scm/m17nlib.acm (m17nlib-construct-key) : Fix symbol key
      handling.  Thanks to Masaki Yatsu for reporting.

2006-08-14 Etsushi Kato <ek.kato@gmail.com>

    * scm/prime.scm
      - (action_prime_mode_hiragana) : Check Japanese mode.
      - (action_prime_mode_english) : New action for English mode.
    * scm/prime-custom.scm
      - (prime-input-mode-indication-alist) : Add
        action_prime_mode_english.

2006-08-14 Etsushi Kato <ek.kato@gmail.com>

    * gtk/uim-cand-win-gtk.c (uim_cand_win_gtk_init)
    * helper/candwin-gtk.c (candidate_window_init)
      - Use smaller font size for label string.

2006-08-14 Etsushi Kato <ek.kato@gmail.com>

    * gtk/uim-cand-win-gtk.c (uim_cand_win_gtk_set_candidates) :
      Don't set nul string into empty row.

2006-08-14 Etsushi Kato <ek.kato@gmail.com>

    * NEWS : Fix typo.

2006-08-14 Etsushi Kato <ek.kato@gmail.com>

    * RELNOTE : Update.

2006-08-14 Etsushi Kato <ek.kato@gmail.com>

    * po/fr.po
    * po/ko.po
    * po/ja.po
    * po/uim.pot
      - Update.

2006-08-14 Etsushi Kato <ek.kato@gmail.com>

    * scm/prime.scm
      - (prime-language-toggle-key?)
      - (prime-expand-segment-key?)
      - (prime-shrink-segment-key?)
      - (prime-altspace-key?)
      - (prime-english-next-candidate-key?)
      - (prime-english-direct-key?)
        - Make key definition customizable.
    * scm/prime-key-custom.scm
      - (prime-shrink-segment-key)
      - (prime-expand-segment-key)
      - (prime-english-next-candidate-key)
      - (prime-english-direct-key)
        - Put these setting in prime-keys3.
    * scm/prime-custom.scm
      - (language)
      - (english)
        - New custom group.
      - (prime-custom-default-language) : Put into language group.
      - (prime-language-toggle-key)
      - (prime-altspace-key)
        - Moved from prime.scm.

2006-08-13 Etsushi Kato <ek.kato@gmail.com>

    * gtk/gtk-im-uim.c (cand_activate_cb)
    * helper/candwin-gtk.c (candwin_activate)
      - Stop using slow g_slist_append().

2006-08-13 Etsushi Kato <ek.kato@gmail.com>

    * NEW : Update.

2006-08-13 Etsushi Kato <ek.kato@gmail.com>

    * uim.h
    * uim-internal.h
    * uim-func.c
    * uim.c
      - Sorry, revert mis-commit in r3833.

2006-08-13 Etsushi Kato <ek.kato@gmail.com>

    * uim/prime.c
      - (PRIME_UNIX_SOCKET_PREFIX)
      - (prime_get_ud_path)
        - Use macro for the pathname.
      - (prime_read_msg_from_ud) : Retry upon EAGAIN or EINTR.
      - (prime_lib_init) : Cosmetic change.

2006-08-13 Etsushi Kato <ek.kato@gmail.com>

    * scm/prime.scm (prime-custom-init) : Handle error condition.

2006-08-12 Etsushi Kato <ek.kato@gmail.com>

    * scm/prime-custom.scm (prime-use-unixdomain?) : Set #t by default.

2006-08-12 Etsushi Kato <ek.kato@gmail.com>

    * uim/prime.c
      - (clear_prime_fd) : New.
      - (prime_read_msg_from_ud) : Close connection if read(2) failed.
      - (prime_send_command) : Return meaning less string  if
        prime_read_msg_from_ud() failed.
      - (uim_plugin_instance_quit) : Use clear_prime_fd().

2006-08-12 Etsushi Kato <ek.kato@gmail.com>

    * uim/prime.c
      - (prime_init_ud) : Cosmetic change.
      - (prime_read_msg_from_ud) : Add sanity check.
      - (prime_lib_init) : Cosmetic changes.
      - (uim_plugin_instance_quit) : Close prime_fd.

2006-08-12 Etsushi Kato <ek.kato@gmail.com>

    * uim/prime.c
      - (prime_fd) : Initialize as -1.
      - (prime_lib_init) : Don't connect again and again.

2006-08-11 Etsushi Kato <ek.kato@gmail.com>

    * scm/prime.scm : Sync with prime.scm in prime-1.0.0.1.

2006-08-11 Etsushi Kato <ek.kato@gmail.com>

    * qt/immodule-quiminputcontext.cpp
      - (QUimInputContext::filterEvent) : Fix key handling with
        control modifier.
    * qt/immodule-quiminputcontext_compose.cpp
      - (Compose::handle_qkey) : Ditto.

2006-08-10 Etsushi Kato <ek.kato@gmail.com>

    * qt/immodule-candidatewindow.cpp (CandidateWindow::setPage) : Fix
      to not select a candidate unless it is selected.
    * qt/pref-qt.cpp : Don't show debug messages.
    * qt/candwin-qt.cpp
      - Ditto.
      - (CandidateWindow::setPage) : Same fix as in
        immodule-candidateiwndow.cpp.

2006-08-10 Etsushi Kato <ek.kato@gmail.com>

    * scm/prime.scm (prime-update-key-press) : Don't get preedition in
      prime-mode-latin.

2006-08-10 Etsushi Kato <ek.kato@gmail.com>

    * uim/prime.c
      - Cosmetic changes generally.
      - (prime_read_msg_from_ud) : Don't use uim_helper_fd_readable(),
        and simply use block read to improve performance.
      - (uim_plugin_instance_quit) : Cleanup prime_ud_path and
        use_unix_domain_socket.

2006-08-04 Etsushi Kato <ek.kato@gmail.com>

    * configure.ac
    * uim/uim.h
      - Post release bump version.

2006-08-03 Etsushi Kato <ek.kato@gmail.com>

    * configure.ac : Update message for KDE applet.

2006-08-03 Etsushi Kato <ek.kato@gmail.com>

    * NEWS : Update.

2006-08-03 Etsushi Kato <ek.kato@gmail.com>

    * Bug fix for resizing uim-toolbar-qt and uim_panelapplet.
    
    * qt/toolbar-standalone-qt.h
      - (class UimStandaloneToolbar) : Add slotToolbarResized slot.
    * qt/toolbar-standalone-qt.cpp
      - (UimStandaloneToolbar::UimStandaloneToolbar) : Connect
        to toolbarResized signal.
      - (UimStandaloneToolbar::slotToolbarResized) : New slot.
    * qt/toolbar-common-uimstateindicator.h
      - (class UimStateIndicator) : Add indicatorResized signal.
    * qt/toolbar-common-uimstateindicator.cpp
      - (UimStateIndicator::propListUpdate) : Emit indicatorResized
        signal when number of buttons is changed.
    * qt/toolbar-common-quimhelpertoolbar.h
      - (class QUimHelperToolbar) : Add slotIndicatorResized slot and
        toolbarResized signal.
    * qt/toolbar-common-quimhelpertoolbar.cpp
      - (QUimHelperToolbar::QUimHelperToolbar) : Connect to
        indicatorResized signal.
      - (QUimHelperToolbar::slotIndicatorResized) : New slot.
    * qt/toolbar-applet-kde.h (class UimApplet)
      - Remove resizeEvent().
      - Add slotToolbarResized slot.
    * qt/toolbar-applet-kde.cpp
      - (UimApplet::UimApplet) : Connect to toolbarResized signal.
      - (UimApplet::resizeEvent) : Removed.
      - (UimApplet::slotToolbarResized) : New slot.

2006-08-02 Etsushi Kato <ek.kato@gmail.com>

    * qt/toolbar-common-quimhelpertoolbar.cpp
      - (QUimHelperToolbar::~QUimHelperToolbar) : Revert redundant
        change in r3773.

2006-08-02 Etsushi Kato <ek.kato@gmail.com>

    * qt/toolbar-common-uimstateindicator.h
      - (class UimStateIndicator) : Remove propLabelUpdate().
    * qt/toolbar-common-uimstateindicator.cpp
      - (UimStateIndicator::parseHelperStr) : Don't parse
        "prop_label_update".
      - (UimStateIndicator::propListUpdate)
        - Reuse buttons to reduce flicker.
        - Plug leak in popupmenus.
      - (UimStateIndicator::propLabelUpdate) : Removed.

2006-08-02 Etsushi Kato <ek.kato@gmail.com>

    * NEWS
    * RELNOTE
      - Update.

2006-08-01 Etsushi Kato <ek.kato@gmail.com>

    * replace/os_dep.h
      - (uim_getpeereid)
      - (uim_setenv)
      - (uim_unsetenv)
        - Define uim_* since all of the replace function is exported
          in libuim (because of removing -export-symbols-regex in
          uim-1.1.1).
    * uim/libtool-version.mk : Update.
    * qt/Makefile.am
      - (uim_im_switcher_qt_SOURCES)
      - (uim_im_switcher_qt_LDADD)
      - Remove NEED_SETENV_C section since all of replace function
        is exported in libuim.
    * uim/Makefile.am (uim_module_manager_LDADD) : Remove
      libreplace.la.

2006-07-31 Etsushi Kato <ek.kato@gmail.com>

    * qt/pref-customwidgets.cpp (KeyGrabDialog::setKeyStr) : Handle
      MetaButton state.

2006-07-31 Etsushi Kato <ek.kato@gmail.com>

    * replace/os_dep.h : Fix typo in strlcpy.

2006-07-29 Etsushi Kato <ek.kato@gmail.com>

    * helper/dict-canna.c (parse_canna_priv_dic_buf) : Suppress
      compiler warning (thanks to AWASHIRO ikuya).

2006-07-29 Konosuke Watanabe <sasugaanija@gmail.com>

    * scm/prime.scm
     - (prime-mode-set)
      - Bug fix: uim hangs up when the mode is switched before context
       initialization.

2006-07-29 Konosuke Watanabe <sasugaanija@gmail.com>

    * emacs/uim-var.el
     - Add a new variable "uim-candidate-display-appendix" to enable
      to display appendixes.
    * emacs/uim-candidate.el
     - Support "uim-candidate-display-appendix"

2006-07-28 Konosuke Watanabe <sasugaanija@gmail.com>

    * emacs/candidate.c
     - Bug fix: The 1st candidate is always displayed as selected one
       at the beginning of the input prediction.

2006-07-28 Konosuke Watanabe <sasugaanija@gmail.com>

    * emacs/uim-candidate.el
     - Bug fix: Candidates who have appendix are displayed incorrectly.

2006-07-26 Etsushi Kato <ek.kato@gmail.com>

    * scm/japanese.scm
      - (ja-space) : Revert change in r3779 for compatibility reason.
      - (ja-alnum-space) : New.
    * scm/anthy.scm (anthy-proc-input-state-no-preedit)
    * scm/canna.scm (canna-proc-input-state-no-preedit)
    * scm/mana.scm (mana-proc-input-state-no-preedit)
      - Follow the changes.

2006-07-26 Etsushi Kato <ek.kato@gmail.com>

    * NEWS
    * RELNOTE
      - Merge r3781:3782 from branch 1.2.

2006-07-26 Etsushi Kato <ek.kato@gmail.com>

    * scm/japanese.scm (ja-space) : Add element for halfwidth-alnum
      and fullwidth-alnum mode.
    * scm/anthy.scm (anthy-proc-input-state-no-preedit)
    * scm/canna.scm (canna-proc-input-state-no-preedit)
    * scm/mana.scm (mana-proc-input-state-no-preedit)
      - Commit appropriate space character in halfwidth and fullwidth
        alnum mode.

2006-07-26 Etsushi Kato <ek.kato@gmail.com>

    * qt/immodule-plugin.cpp (UimInputContextPlugin::create) : Use
      LC_CTYPE for uim_get_default_im_name().

2006-07-26 Etsushi Kato <ek.kato@gmail.com>

    * qt/toolbar-applet-kde.cpp (UimApplet::~UimApplet) : Don't call
      uim_quit().

2006-07-26 Etsushi Kato <ek.kato@gmail.com>

    * pixmaps/Makefile.am (install-data-hook) : Workaround for some
      specific version of automake.

2006-07-26 Etsushi Kato <ek.kato@gmail.com>

    * configure.ac : Update.

2006-07-26 Etsushi Kato <ek.kato@gmail.com>

    * configure.ac
      - Support applet for KDE.
      - (applet)
      - (gnome-applet)
        - Rename applet gnome-applet.
      - (APPLET)
      - (APPLET_GNOME)
        - Rename to APPLET_GNOME.
      - (kde-applet)
        - New.  Perform very simple check for KDE include directory.
      - (KDE_PREFIX)
      - (KDE_LIB_DIR)
      - (KDE_DATA_DIR)
      - (KDE_INCLUDE_DIR)
      - (APPLET_KDE)
        - New.
      - Make qt/uimapplet.desktop from qt/uimapplet.desktop.in.
    * qt/toolbar-applet-kde.h
    * qt/toolbar-applet-kde.cpp
    * qt/uimapplet.desktop.in
      - New.
    * qt/Makefile.am
      - Create uim_panelapplet.so.
      - Install uimapplet.desktop.
    * qt/toolbar-common-uimstateindicator.h
      - (class UimStateIndicator) : Add getNumButtons() member.
    * qt/toolbar-common-uimstateindicator.cpp
      - (UimStateIndicator::~UimStateIndicator) : Bug fix.
      - (UimStateIndicator::getNumButtons) : New.
    * qt/toolbar-common-quimhelpertoolbar.h
      - (class QUimHelperToolbar)
        - Make slotExecPref() as public.
        - Add new member getNumButtons(), m_indicator,
          m_nr_exec_buttons.
    * qt/toolbar-common-quimhelpertoolbar.cpp
      - (QUimHelperToolbar::QUimHelperToolbar) : Set m_indicator and
        initialize m_nr_exec_buttons.
      - (QUimHelperToolbar::~QUimHelperToolbar) : Plug leak.
      - (QUimHelperToolbar::getNumButtons) : New.
      - (QUimHelperToolbar::addExecImSwitcherButton)
      - (QUimHelperToolbar::addExecPrefButton)
      - (QUimHelperToolbar::addExecDictButton)
      - (QUimHelperToolbar::addExecInputPadButton)
      - (QUimHelperToolbar::addExecHandwritingInputPadButton)
      - (QUimHelperToolbar::addExecHelpButton)
        - Increment m_nr_exec_buttons.
    * helper/Makefile.am : Follow the rename in configure.ac.

2006-07-25 Etsushi Kato <ek.kato@gmail.com>

    * po/POTFILES.in : Update.

2006-07-21 Etsushi Kato <ek.kato@gmail.com>

    * NEWS : Update.

2006-07-21 Etsushi Kato <ek.kato@gmail.com>

    * scm/latin.scm (action_latin_input) : Update description.
    
    * po/fr.po
    * po/ko.po
    * po/ja.po
    * po/uim.pot
      - Update.

2006-07-21 Etsushi Kato <ek.kato@gmail.com>

    * doc/COMPATIBILITY : Update.

2006-07-21 Etsushi Kato <ek.kato@gmail.com>

    * uim/uim.h (UKey)
    * uim/uim-key.c (key_tab)
    * emacs/key.c (convert_keyname_e2u)
    * gtk/key-util-gtk.c (im_uim_convert_keyevent)
    * helper/pref-gtk-custom-widgets.c (key_pref_set_value)
    * qt/pref-custom-widgets.cpp (KeyGrabDialog::setKeyStr)
    * qt/immodule-quiminputcontext.cpp (QUimInputContext::filterEvent)
    * xim/xim/ximserver.cpp (keyState::check_key)
      - Support some keys in Japanese keyboard.
    * fep/key.c : Update.  But these keys are not used in uim-fep.
    * uim/libtool-version.mk : Bump REVISION.

2006-07-21 Etsushi Kato <ek.kato@gmail.com>

    * configure.ac : Update a help string for --enable-dict.

2006-07-20 Etsushi Kato <ek.kato@gmail.com>

    * NEWS
    * RELNOTE
      - Update.
    * scm/japanese.scm
      - Add comment about ja-space.

2006-07-20 Etsushi Kato <ek.kato@gmail.com>

    * xim/ximim.cpp (XimIM::set_encoding) : Use revised EUC encoding
      name only for iconv.

2006-07-20 Etsushi Kato <ek.kato@gmail.com>

    * scm/plugin.scm (load-module-conf) : Fix for using and and set!.

2006-07-20 Etsushi Kato <ek.kato@gmail.com>

    * scm/im-switcher.scm (imsw-actions)
    * scm/im-custom.scm (imsw-reconfigure)
      - Fix bug #7532.

2006-07-20 Etsushi Kato <ek.kato@gmail.com>

    * immodule-quiminputcontext.h (class QUimInputContext) : Remove
      unused definition committed in r3748.

2006-07-19 Masahito Omote <omote@utyuuzin.net>

    * configure.ac: Stop clearing CFLAGS and LDFLAGS.

2006-07-19 Etsushi Kato <ek.kato@gmail.com>

    * xim/ximim.cpp (XimIM::set_encoding) : Fix indentation.

2006-07-19 Etsushi Kato <ek.kato@gmail.com>

    * xim/ximim.cpp (XimIM::set_encoding) : Workaround for Solaris 10
      (bug #7558, KIHARA Hideta).

2006-07-19 Etsushi Kato <ek.kato@gmail.com>

    * scm/tutcode-key-custom.scm (tutcode-kana-toggle-key) : Use
      <IgnoreShift> (bug #7568, KIHARA Hideto).

2006-07-19 Etsushi Kato <ek.kato@gmail.com>

    * RELNOTE : Update.

2006-07-19 Etsushi Kato <ek.kato@gmail.com>

    * scm/anthy-key-custom.scm (anthy-next-prediction-key)
      - Add C-i.

2006-07-19 Etsushi Kato <ek.kato@gmail.com>

    * NEWS : Update.

2006-07-18 Etsushi Kato <ek.kato@gmail.com>

    * scm/anthy.scm
      - Experimental implementation to enable inputting digits even
        when anthy-select-prediction-by-numeral-key? is #t.  Thanks
        Jae-hyeon for your idea.
      - (anthy-move-prediction-in-page) : Pass through numeral key
        if its number is equal to the previously selected index.
      - (anthy-prediction-select-non-existing-index?) : New.
      - (anthy-proc-prediction-state)
        - Reset preedit upon cancel-key if no prediction index is
          selected.
        - In case anthy-select-prediction-by-numeral-key? is #t and
          numeral key is not filtered with above reason in
          anthy-move-prediction-in-page, reset prediction state and
          append the character to the preedit.

2006-07-18 Etsushi Kato <ek.kato@gmail.com>

    * scm/anthy.scm
      - (anthy-move-prediction-in-page)
      - (anthy-prediction-keys-handled?)
        -  Pass through numeral keys not in the prediction window.

2006-07-18 Etsushi Kato <ek.kato@gmail.com>

    * scm/anthy.scm
      - (anthy-predicting-state-preedit)
        - Use only one segment.
      - (anthy-set-candidate-index-handler)
       - Update preedit for input prediction.

2006-07-18 Etsushi Kato <ek.kato@gmail.com>

    * gtk/gtk-im-uim.h
      - New. Move definition of IM_UIMContext from gtk-im-uim.c.
    * gtk/gtk-im-uim.c
      - (im_uim_commit_string) : Renamed from commit_string().
      - (im_uim_filter_keypress)
      - (im_uim_reset)
      - (im_uim_finalize)
      - (im_module_create)
      - (im_module_init)
      - (im_module_exit)
        - Support X11's compose mechanism.  See
          http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=377808.
    * gtk/compose.c
    * gtk/compose.h
      - New.  Ported from uim-xim.
    * gtk/key-util-gtk.h
      - Remove include <glib.h>.
    * gtk/key-util-gtk.c
      - Include <glib.h> here.
    * gtk/Makefile.am
      - Update IM_UIM_SOURCES.
    
    * qt/immodule-quiminputcontext.h
    * qt/immodule-quiminputcontext.cpp
      - (QUimInputContext::QUimInputContext)
      - (QUimInputContext::~QUimInputContext)
      - (QUimInputContext::filterEvent)
      - (QUimInputContext::reset)
        - Support X11's compose mechanism if Q_WS_X11.
    * qt/immodule-quiminputcontext_compose.h
    * qt/immodule-quiminputcontext-compose.cpp
      - New.  Ported from uim-xim.
    * qt/Makefile.am
      - (noinst_HEADERS)
      - (libquiminputcontextplugin_la_SOURCES)
        - Update.

2006-07-16 Etsushi Kato <ek.kato@gmail.com>

    * scm/anthy.scm (anthy-prediction-keys-handled?) : Bug fix for
      next/prev page-key.

2006-07-16 Etsushi Kato <ek.kato@gmail.com>

    * scm/latin.scm
      - Cosmetic chagnes.
      - (action_latin_input) : Use "L" label.

2006-07-15 Etsushi Kato <ek.kato@gmail.com>

    * scm/latin.scm
      - (latin-widgets)
      - (default-widget_latin_input_mode)
      - (latin-input-mode-actions)
      - (action_latin_input)
      - (latin-configure-widgets)
      - (latin-context-new)
        - Use widgets and actions.  Related to bug #7532.
      - (latin-context-rec-spec)
        - Remove unused cell.
      - (latin-context-flush) : Reset rk-context.
      - (latin-update-preedit) : Fix for raw commit.
      - (latin-commit) : Fix in committing pending characters.
      - (latin-proc-composing-state) : Simplify.
      - (latin-release-key-handler) : Pass key release unless in
        composing state.
      - (latin-reset-handler) : Use latin-context-flush.
      - (latin-get-candidate-handler)
      - (latin-set-candidate-handler)
        - Removed.

2006-07-15 Etsushi Kato <ek.kato@gmail.com>

    * uim/anthy.c (commit_nth_prediction) : Follow Anthy's support.

2006-07-14 Etsushi Kato <ek.kato@gmail.com>

    * scm/anthy-custom.scm : Add custom hook for
      anthy-use-implicit-commit-prediction?.

2006-07-14 Etsushi Kato <ek.kato@gmail.com>

    * po/fr.po
    * po/ko.po
      - Update with removing fuzzy translations.
    * po/ja.po
    * po/uim.pot
      - Update.

2006-07-14 Etsushi Kato <ek.kato@gmail.com>

    * scm/anthy.scm (anthy-proc-input-state-with-preedit)
    * scm/canna.scm (canna-proc-input-state-with-preedit)
    * scm/mana.scm (mana-proc-input-state-with-preedit)
      - Don't append symbol keys which are not used in the state to ustr.

2006-07-14 Etsushi Kato <ek.kato@gmail.com>

    * scm/canna.scm
    * scm/mana.scm
      - Still fix copy and pasted codes in r3736, sorry.

2006-07-14 Etsushi Kato <ek.kato@gmail.com>

    * scm/canna.scm : Fix copy and pasted code in r3736.

2006-07-14 Etsushi Kato <ek.kato@gmail.com>

    * scm/anthy.scm
      - (anthy-proc-input-state-no-preedit)
      - (anthy-proc-input-state-with-preedit)
        - Pass mode transition keys if it is
          already in the mode.
    * scm/canna.scm
    * scm/mana.scm
      - Ditto.

2006-07-13 Etsushi Kato <ek.kato@gmail.com>

    * gtk/uim-cand-win-gtk.h : Add prototype of
      uim_cand_win_gtk_get_window_pos_type().
    * gtk/gtk-im-uim.c
      - Remove prop_label related code.
      - (layout_candwin) : New.
      - (toplevel_window_candidate_cb)
      - (cand_activate_cb)
      - (cand_select_cb)
      - (cand_shift_page_cb)
        - Simplify using layout_candwin().
      - (update_candwin_pos_type) : New.
      - (parse_helper_str) : Call update_candwin_pos_type() upon
        custom update/reload.
      - (im_uim_set_cursor_location) : Update the position of
        candidate window.
    * gtk/uim-cand-win-gtk.c
      - Include <stdlib.h>.
      - (uim_cand_win_gtk_get_window_pos_type) : New.  Separated
        from uim_cand_win_gtk_set_candidate().
      - (uim_cand_win_gtk_init) : Initialize cwin->position
        appropriately.
      - (uim_cand_win_gtk_set_candidates) : Move code to check
        the type of candidate window position into
        uim_cand_win_gtk_get_window_pos_type(), and don't do this
        every time.

2006-07-13 Etsushi Kato <ek.kato@gmail.com>

    * scm/anthy.scm (anthy-predicting-state-preedit) : Change position
      of the cursor.

2006-07-13 Etsushi Kato <ek.kato@gmail.com>

    * scm/japanese.scm (ja-consonant-syllable-table) : Fix "w".

2006-07-13 Etsushi Kato <ek.kato@gmail.com>

    * scm/anthy-custom.scm (anthy-use-implicit-commit-prediction?) :
      New setting.  Default is #t.
    * scm/anthy.scm
      - (anthy-update-preedit) : Treat predicting state separately.
      - (anthy-prediction-keys-handled?) : Don't reset
        predicting state even when the key is not part of predicting
        keys.
      - (anthy-proc-prediction-state) : Check
        anthy-use-implicit-commit-prediction?
      - (anthy-reset-prediction-window) : Reset predicting state.
      - (anthy-context-transposing-state-preedit) : Cosmetic change.
      - (anthy-predicting-state-preedit) : New.

2006-07-13 Etsushi Kato <ek.kato@gmail.com>

    * scm/anthy-key-custom.scm
      - Update description.
      - (anthy-kana-toggle-key)
      - (anthy-alkana-toggle-key)
        - Assign advanced subgroup.
      - (anthy-next-prediction-key)
      - (anthy-prev-prediction-key)
        - Assign advanced subgroup.
    * scm/anthy-custom.scm
      - (anthy-use-mode-transition-keys-in-off-mode?) : New.
    * scm/anthy.scm
      - (anthy-begin-input) : Check
        anthy-use-mode-transition-keys-in-off-mode? (see [Anthy-dev
        3051]).
    
    * scm/canna-key-custom
      - Update description.
      - (canna-kana-toggle-key)
      - (canna-alkana-toggle-key)
        - Assign advanced subgroup
    * scm/canna-custom.scm
      - (canna-advanced) : New group.
      - (cannaserver) : Use this as a subgroup in canna-advanced.
      - (canna-use-mode-transition-keys-in-off-mode?) : New.
    * scm/canna.scm : Same changes as in anthy.scm.
    
    * scm/mana-key-custom.scm : Same changes as in
      canna-key-custom.scm.
    * scm/mana-custom.scm
      - (mana-advanced) : New group.
      - (mana-use-mode-transition-keys-in-off-mode?) : New.
    * scm/mana.scm : Same changes as in anthy.scm

2006-07-11 Etsushi Kato <ek.kato@gmail.com>

    * scm/anthy-key-custom.scm
    * scm/canna-key-custom.scm
    * scm/mana-key-custom.scm
      - Add mode-transition attribute to hiragana, katakana, halfkana,
        halfwidth-alnum, fullwidth-alnum, kana-toggle, and
        alkana-toggle keys.

2006-07-11 Etsushi Kato <ek.kato@gmail.com>

    * scm/anthy.scm (anthy-proc-transposing-state)
      - Fix check for the return value of member.
      - Don't commit implicitly with some keys.
    * scm/canna.scm (canna-proc-transposing-state)
    * scm/mana.scm (mana-proc-transposing-state)
      - Ditto.

2006-07-10 Etsushi Kato <ek.kato@gmail.com>

    * scm/anthy-key-custom.scm
      - (anthy-next-prediction-key) : Add "down" and "C-n".
      - (anthy-prev-prediction-key) : New.  Set
        generic-prev-candidate-key by default.
    * scm/anthy.scm
      - (anthy-prediction-keys-handled?) : Handle prev-candidate-key.
      - (anthy-learn-prediction-string) : Call
        anthy-lib-commit-nth-prediction.
    * uim/anthy.c
      - (commit_nth_prediction) : New.  Not yet implemented in anthy.
      - (uim_plugin_instance_init) : Export commit_nth_prediction.

2006-07-09 Etsushi Kato <ek.kato@gmail.com>

    * scm/anthy.scm
      - (anthy-prediction-keys-handled?) : Changed to be called only
        in the anthy-proc-prediction-state.
      - (anthy-proc-prediction-state) : Follow the change.
      - (anthy-proc-input-state-with-preedit) : Don't check prediction
        keys in this state.
      - (anthy-check-prediction) : Set context-predicting even if no
        prediction candidate is selected.

2006-07-08 Etsushi Kato <ek.kato@gmail.com>

    * scm/anthy-key-custom.scm (anthy-next-prediction-key) : New.
    * scm/anthy-custom.scm
      - (anthy-advanced) : New group.
      - (prediction) : New group.
      - (anthy-use-with-vi?) : Move to anthy-advanced group.
      - (anthy-use-prediction?) : New setting.  Only enabled if
        anthy-use-candidate-window?.
      - (anthy-select-prediction-by-numeral-key?) : New.  Depend
        custom-activity on anthy-use-prediction?.
    * scm/anthy.scm
      - (anthy-context-rec-spec) : Prediction support.
      - (anthy-flush) : Flush prediction.
      - (anthy-proc-input-state-no-preedit) : Indentation fix.
      - (anthy-proc-transposing-state) : Ditto.
      - (anthy-move-prediction) : New.  Mostly copied from
        anthy-move-candidate.
      - (anthy-move-prediction-in-page) : Ditto.
      - (anthy-prediction-keys-handled?) : New.  Handle prediction
        related keys.
      - (anthy-proc-prediction-state) : New.  Handle prediction
        related keys, cancel keys, and commit keys only.  Otherwise,
        use anthy-proc-input-state.
      - (anthy-proc-input-state-with-preedit) : Handle prediction.
      - (anthy-reset-prediction-window) : New.
      - (anthy-check-prediction) : New.
      - (anthy-proc-input-state) : Handle prediction.
      - (anthy-get-prediction-string) : New.
      - (anthy-learn-prediction-string) : New.  Not implemented in
        anthy yet.
      - (anthy-do-commit-prediction) : New.
      - (anthy-press-key-handler) : Handle predicting state.
      - (anthy-get-candidate-handler) : Support prediction candidate.
      - (anthy-set-candidate-index-handler) : Ditto.
    * uim/anthy.c
      - (set_prediction_src_string)
      - (get_nr_predictions)
      - (get_nth_prediction)
        - Export prediction related functions to scheme side even
          anthy doesn't support it.

2006-07-07 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/skk.scm
      - (action action_skk_latin): Replace ja_direct with
        ja_halfwidth_alnum to make icons natural to SKK users
    * scm/skk-custom.scm
      - (action action_skk_latin): Ditto
    * scm/tutcode.scm
      - (action action_tutcode_direct): Ditto

2006-07-07 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * tools/gnuify-changelog.pl
      - (%hackers): Fix a typo

2006-07-07 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * AUTHORS
      - Fix a typo

2006-07-07 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * configure.ac
      - Fix ${prefix} substitution error on $datadir in config.h caused by
        the $datarootdir recently introduced in autoconf. This workaround
        should be fixed again in proper way
    * pixmaps/Makefile.am
      - (pixmapsdir): Fix inappropriate substitution

2006-07-07 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * pixmaps/direct.svg
    * pixmaps/direct_input.svg
    * pixmaps/im_subst.svg
    * pixmaps/ja_azik.svg
    * pixmaps/ja_direct.svg
    * pixmaps/ja_fullwidth_alnum.svg
    * pixmaps/ja_halfkana.svg
    * pixmaps/ja_halfwidth_alnum.svg
    * pixmaps/ja_hiragana.svg
    * pixmaps/ja_kana.svg
    * pixmaps/ja_katakana.svg
    * pixmaps/ja_nicola.svg
    * pixmaps/ja_pocketbell.svg
    * pixmaps/ja_romaji.svg
    * pixmaps/off.svg
    * pixmaps/on.svg
    * pixmaps/prime_mode_application.svg
    * pixmaps/skk.svg
    * pixmaps/tcode.svg
    * pixmaps/tutcode.svg
    * pixmaps/unknown.svg
      - Update my signature

2006-07-07 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * pixmaps/ja_direct.svg
      - Change visual from "_A" to "--" in accordance with [Anthy-dev 3024]

2006-07-07 Etsushi Kato <ek.kato@gmail.com>

    * uim/uim.h : Bump version.

2006-07-07 Etsushi Kato <ek.kato@gmail.com>

    * NEWS : Merge r3689 from branch 1.1.

2006-07-07 Etsushi Kato <ek.kato@gmail.com>

    * AUTHORS : Update.

2006-07-07 Etsushi Kato <ek.kato@gmail.com>

    * scm/japanese-kana.scm (ja-kana-hankana-rule) : Removed.

2006-07-07 Etsushi Kato <ek.kato@gmail.com>

    * scm/japanese.scm
      - Fix typo in comments.
      - (ja-type-hankana)
      - (ja-type-latin)
      - (ja-type-wide-latin)
        - Removed.

2006-07-07 Etsushi Kato <ek.kato@gmail.com>

    * pixmaps/Makefile.am : Replace ja_halfwidth_katakana with
      ja_halfkana.
    * pixmaps/ja_halfwidth_katakana.svg : Rename to ja_halfkana.svg.
    * pixmaps/ja_halfkana.svg : Renamed.

2006-07-07 Etsushi Kato <ek.kato@gmail.com>

    * scm/canna.scm
    * scm/canna-custom.scm
    * scm/mana.scm
    * scm/mana-custom.scm
    * scm/skk.scm
    * scm/skk-custom.scm
      - Rename the action indicator name ja_halfwidth_katakana to
        ja_halfkana.

2006-07-07 Etsushi Kato <ek.kato@gmail.com>

    * scm/util.scm
      - (multi-segment-type-hiragana)
      - (multi-segment-type-katakana)
      - (multi-segment-type-hankana)
      - (multi-segment-make-index-list)
      - (multi-segment-make-string)
      - (multi-segment-make-left-string)
      - (multi-segment-make-right-string)
      - (multi-segment-opposite-kana)
        - Removed since canna changed to use ustr.

2006-07-07 Etsushi Kato <ek.kato@gmail.com>

    * scm/japanese.scm (load-kana-table) : Update.

2006-07-07 Etsushi Kato <ek.kato@gmail.com>

    * canna-key-custom.scm
    * mana-key-custom.scm
      - Remove obsolete keys (wide-latin-key, hanakaku-kana-key).

2006-07-07 Etsushi Kato <ek.kato@gmail.com>

    * scm/mana.scm (mana-proc-input-state-no-preedit) : Fix typo.

2006-07-07 Etsushi Kato <ek.kato@gmail.com>

    * uim/slib.c
      - (strcons)
      - (dbg_expand_file_name)
        - Cast must_malloc().

2006-07-06 Etsushi Kato <ek.kato@gmail.com>

    * uim/slib.c (must_malloc) : Change return type to void *.
    (gc_mark_and_sweep) : Suppress compiler warning.

2006-07-06 Etsushi Kato <ek.kato@gmail.com>

    * uim/uim-func.c (im_return_str_list) : Suppress compiler warning
      (http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=375212).

2006-07-06 Etsushi Kato <ek.kato@gmail.com>

    * scm/anthy.scm (anthy-proc-input-state-with-preedit)
    * scm/canna.scm (canna-proc-input-state-with-preedit)
    * scm/mana.scm (mana-proc-input-state-with-preedit)
      - Fix raw-ustr handling with kill-key and kill-backward-key.

2006-07-06 Etsushi Kato <ek.kato@gmail.com>

    * scm/mana-custom.scm
    * scm/mana-key-custom.scm
    * scm/mana.scm
      - Sync with changes in anthy*.scm of r3670:3673 and r3674:3676.

2006-07-06 Etsushi Kato <ek.kato@gmail.com>

    * scm/canna-custom.scm
    * scm/canna-key-custom.scm
    * scm/canna.scm
      - Sync with changes in anthy*.scm of r3670:3673 and r3675:3676.

2006-07-06 Etsushi Kato <ek.kato@gmail.com>

    * scm/anthy.scm (action_anthy_halfwidth_alnum) : Fix indentation.
    (action_anthy_fullwidth_alnum) : Fix to set context-on #t.

2006-07-05 Etsushi Kato <ek.kato@gmail.com>

    * scm/anthy-key-custom.scm
      - (anthy-on-key)
      - (anthy-off-key)
        - Remove C-j.

2006-07-05 Etsushi Kato <ek.kato@gmail.com>

    * pixmaps/Makefile.am : Delete ja_ascii_with_preedit.{svn,png}
      entries.
    * pixmaps/ja_ascii_with_preedit.svg : Remove.

2006-07-05 Etsushi Kato <ek.kato@gmail.com>

    * scm/japanese-kana.scm
      - Rename ja-kana-hankana-rule as ja-kana-halfkana-rule, and
        leave it as a alias.
    * scm/japanese.scm
      - Rename symbols using latin, wide-latin, hankana as
        halfwidth-alnum, fullwidth-alnum, and halfkana respectively as
        described in [anthy-dev: 3023, 3024].  Old symbols are saved
        as aliases.
      - (ja-type-direct) : New.
    * scm/anthy.scm
      - Rename symbols using latin, wide-latin, hankana as
        halfwidth-alnum, fullwidth-alnum, and halfkana respectively as
        described in [anthy-dev: 3023, 3024].
      - Rename symbols using ascii-with-preedit as (halfwidth_)alnum.
      - (anthy-type-direct)
        - New.
      - (anthy-prepare-activation)
        - Removed and divided into anthy-prepare-input-rule-activation
          and anthy-prepare-input-mode-activation.
      - (anthy-prepare-input-rule-activation)
      - (anthy-prepare-input-mode-activation)
        - New.  Commit preedit string appropriately.
      - (action_anthy_hiragana)
      - (action_anthy_katakana)
      - (action_anthy_halfkana)
      - (action_anthy_halfwidth_alnum)
      - (action_anthy_direct)
      - (action_anthy_fullwidth_alnum)
      - (action_anthy_roma)
      - (action_anthy_kana)
      - (action_anthy_azik)
        - Update using new prepare-activation and use new indicators.
      - (anthy-context-rec-spec)
        - Remove wide-latin.
        - Rename ascii-with-preedit as alnum.
        - Add alnum-type.
      - (anthy-toggle-ascii-with-preedit?)
        - Removed.
      - (anthy-context-alkana-toggle)
        - New.
      - (anthy-flush)
        - Don't reset alnum state.
      - (anthy-begin-input)
        - Check begin-input keys here.  See [anthy-dev: 3023] about
          the state transition.
      - (anthy-proc-raw-state)
        - Check keys in anthy-begin-input.
      - (anthy-proc-input-state-no-preedit)
        - Fix indentation.
        - Use new key definitions.
        - Support fullwidth alnum input on the preedit.
      - (anthy-proc-input-state-with-preedit)
        - Handle anthy-commit-as-opposite-kana-key only if
          anthy-context-alnum if #f.
        - Handle new keys.
        - Handle anthy-kana-toggle-key only if anthy-context-alnum is
          #f.
        - Support fullwidth alnum input on the preedit.
      - (anthy-context-change-kana-mode!)
      - (anthy-get-raw-candidate)
      - (anthy-input-state-preedit)
        - Indentation fix.
      - (anthy-proc-converting-state)
        - Don't check anthy-begin-conv-with-ascii-mode-key.
      - (anthy-proc-wide-latin)
        - Removed.
      - (anthy-press-key-handler)
      - (anthy-release-key-handler)
        - Follow the removal of wide-latin mode.
    * scm/anthy-custom.scm (anthy-input-mode-indication-alist)
      - Change indicators as described in [anthy-dev: 3023].
    * scm/anthy-key-custom.scm
      - (anthy-keys4) : New group.
      - (anthy-transpose-as-latin-key)
        - Renamed as anthy-transpose-as-halfwidth-alnum-key.
      - (anthy-transpose-as-wide-latin-key)
        - Renamed as anthy-transpose-as-fullwidth-alnum-key
      - (anthy-transpose-as-hankana-key)
        - Renamed as anthy-transpose-as-hankana-key.
      - (anthy-latin-key)
        - Renamed as anthy-off-key.
      - (anthy-wide-latin-key)
        - Renamed as anthy-fullwidth-alnum-key.
      - (anthy-hankaku-kana-key)
        - Renamed as anthy-halfkana-key.
      - (anthy-hiragana-key)
      - (anthy-katakana-key)
      - (anthy-halfwidth-alnum-key)
      - (anthy-alkana-toggle-key)
        - New.
      - (anthy-begin-conv-with-ascii-mode-key)
      - (anthy-ascii-mode-on-key)
      - (anthy-ascii-mode-off-key)
        - Removed.

2006-07-04 Etsushi Kato <ek.kato@gmail.com>

    * helper/toolbar-common-gtk.c (calc_menu_position) : Bug fix.

2006-07-03 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * RELNOTE
      - Update

2006-07-03 Etsushi Kato <ek.kato@gmail.com>

    * pixmaps/Makefile.am (SVGS) : Add ja_ascii_with_preedit.svg.
    (SVG_PNGS) : Add ja_ascii_with_preedit.png.
    * pixmaps/ja_ascii_with_preedit.svg : New indicator icon.

2006-07-03 Etsushi Kato <ek.kato@gmail.com>

    * scm/japanese.scm (ja-space) : New.
    * scm/anthy.scm (anthy-proc-input-state-no-preedit) : Use ja-space
      rule for comitting a space.
    * scm/canna.scm (canna-proc-input-state-no-preedit) : Ditto.
    * scm/mana.scm (mana-proc-input-state-no-preedit) : Ditto.

2006-06-29 Etsushi Kato <ek.kato@gmail.com>

    * scm/mana-key-custom.scm (mana-ascii-mode-off-key) : Fix typo.

2006-06-29 Etsushi Kato <ek.kato@gmail.com>

    * scm/anthy-key-custom.scm
      - (anthy-begin-conv-with-ascii-mode-key)
      - (anthy-ascii-mode-on-key)
      - (anthy-ascii-mode-off-key)
        - New.
    * scm/anthy-custom.scm
      - (anthy-input-mode-indication-alist)
        - Add action for ascii_with_preedit.
    * scm/anthy.scm
      - (action_anthy_hiragana)
      - (action_anthy_katakana)
      - (action_anthy_hankana)
        - Add check for ascii-with-preedit.
        - Don't flush context if the context is already on.
      - (action_anthy_ascii_with_preedit)
        - New.
      - (anthy-context-rec-spec)
        - Add ascii-with-preedit member.
      - (anthy-toggle-ascii-with-preedit?)
        - New.  Toggle ascii-with-preedit mode.
      - (anthy-flush)
        - Reset ascii-with-preedit.
      - (anthy-proc-input-state-no-preedit)
        - Check ascii-mode-on/off keys.
        - Insert appropriate element to ustr according to ascii mode.
      - (anthy-proc-input-state-with-preedit)
        - Begin conversion with ascii-with-preedit.
        - Don't fix raw-ustr to valid rome in ascii-with-preedit.
        - Check ascii-mode-on/off keys.
        - Don't process "n1" sequence hack in ascii-with-preedit.
        - Insert appropriate element to ustr according to ascii mode.
      - (anthy-proc-converting-state)
        - Ignore anthy-begin-conv-with-ascii-mode-key in the state.
    
    * scm/canna-key-custom.scm
    * scm/canna-custom.scm
    * scm/canna.scm
      - Sync with anthy.
    
    * scm/mana-key-custom.scm
    * scm/mana-custom.scm
    * scm/mana.scm
      - Ditto.

2006-06-29 Etsushi Kato <ek.kato@gmail.com>

    * emacs/helper.c (helper_im_changed) : Change return type to
      int, and check focus.
    * emacs/helper.c (helper_handler) : Check focus.
    * emacs/uim-el-agent.c (cmd_helper) : Don't check focus here.
      Some messages need to be evaluated even without focus.

2006-06-26 Etsushi Kato <ek.kato@gmail.com>

    * scm/anthy.scm (anthy-proc-input-state-with-preedit)
    * scm/canna.scm (canna-proc-input-state-with-preedit)
    * scm/mana.scm (mana-proc-input-state-with-preedit)
      - Fix inserting raw-str.

2006-06-25 Etsushi Kato <ek.kato@gmail.com>

    * scm/canna.scm
      - (canna-make-whole-raw-string)
      - (canna-get-raw-str-seq)
      - (canna-get-raw-candidate)
        - Same fix as anthy.scm in r3647.
    * scm/mana.scm
      - (mana-make-whole-raw-string)
      - (mana-get-raw-str-seq)
      - (mana-get-raw-candidate)
        - Ditto.

2006-06-25 Etsushi Kato <ek.kato@gmail.com>

    * scm/anthy.scm (anthy-make-whole-raw-string) : Stop modifying rkc
      and set pending char at the correct place.  Most part is
      separated into anthy-get-raw-str-seq.
    (anthy-get-raw-str-seq) : New.
    (anthy-get-raw-candidate) : Use anthy-get-raw-str-seq to fix the
      treatment of pending char.

2006-06-24 Etsushi Kato <ek.kato@gmail.com>

    *  scm/canna.scm (canna-commit-string) : Call
       canna-lib-reset-conversion if all the segments are transposing
       one.

2006-06-24 Etsushi Kato <ek.kato@gmail.com>

    * uim/canna.c
    * uim/anthy.c
      - (get_unconv_candidate) : New.  Get the reading of the current
        segment.
      - (uim_plugin_instance_init) : Export get_unconv_candidate for
        scheme side.
    * scm/canna-key-custom.scm
      - (canna-transpose-as-latin-key)
      - (canna-transpose-as-wide-latin-key)
        - New key definition.
    * scm/anthy.scm : Enable segment transposing with latin and
      wide-latin characters.
      - (anthy-candidate-type-latin)
      - (anthy-candidate-type-wide-latin)
        - New.
      - Don't use multi-segment-* in general.
      - (anthy-make-whole-string) : Fix for kana input rule.
      - (anthy-make-raw-string) : Indentation fix.
      - (anthy-make-whole-raw-string) : Stop using
        ja-raw-string-list-to-valid roma.  Instead, valid roma is
        revised in the processing of backspace key.
      - (anthy-proc-input-state-with-preedit)
        - Fix roma sequence as described above.
        - Don't handle anthy-transpose-as-latin-key? and
          anthy-transpose-as wide-latin-key? with kana input-rule.
      - (anthy-proc-input-state-with-preedit)
        - Fix raw-str handling in processing
          anthy-beginning-of-preedit-key? and anthy-end-of-preedit-key?
        - Fix for adding raw-str when return type of rk-push-key! is a
          list.
      - (anthy-get-raw-candidate) : New.  Get latin and wide latin
        candidate.  Still need to fix for Hiragana "vu" handling.
      - (anthy-converting-state-preedit)
      - (anthy-get-commit-string)
      - (anthy-commit-string)
        - Enable to use latin and wide latin candidate.
      - (anthy-set-segment-transposing)
      - (anthy-proc-converting-state)
        - Handle anthy-transpose-as-wide-latin-key? and
          anthy-transpose-as-latin-key?.
    * scm/mana.scm Enable segment-transposing as in anthy.scm.
      - Don't use multi-segment-* in general.
      - (make-get-raw-candidate) : New.  Make hiragana, katakana,
        hanakana, latin, and wide-latin candidate.
      - (mana-get-nth-candidate) : Use mana-get-raw-candidate.
      - (mana-candidate-type-katakana)
      - (mana-candidate-type-hiragana)
      - (mana-candidate-type-hankana)
      - (mana-candidate-type-latin)
      - (mana-candidate-type-wide-latin)
        - New as in anthy.
      - (mana-make-whole-string)
      - (mana-make-raw-string)
      - (mana-proc-input-state-with-preedit)
        - Same fix as in anthy.scm.
      - (mana-get-commit-path)
      - (mana-do-commit)
      - (mana-move-candidate)
        - Check for transposing candidate.
      - (mana-set-segment-transposing) : New as in anthy.scm.
      - (mana-proc-converting-state) : Same changes as in anthy.scm.
    * scm/canna.scm : Use ustr instead of multi-segment procedure and
      enable segment transposing including latin and wide-latin
      characters as in anthy and mana.
      - Stop using multi-segment-*.
      - (canna-type-hiragana)
      - (canna-type-katakana)
      - (canna-type-hankana)
      - (canna-type-latin)
      - (canna-type-wide-latin)
      - (canna-candidate-type-katakana)
      - (canna-candidate-type-hiragana)
      - (canna-candidate-type-hankana)
      - (canna-candidate-type-latin)
      - (canna-candidate-type-wide-latin)
        - New.  Copied from anthy/mana.
      - (canna-context-rec-spec)
      - (canna-context-new)
      - (canna-flush)
        - Update to use ustr.
      - (canna-opposite-kana)
      - (canna-append-string)
      - (canna-pushback-preedit-segment-rec)
        - Removed.
      - (canna-make-whole-string)
      - (canna-make-raw-string)
      - (canna-make-whole-raw-string)
      - (canna-separator)
      - (canna-get-raw-candidate)
      - (canna-correct-segment-cursor)
      - (canna-set-segment-transposing)
        - New.  Copied from anthy/mana.
      - (canna-update-preedit)
      - (canna-begin-conv)
      - (canna-has-preedit?)
      - (canna-proc-input-state-with-preedit)
      - (canna-context-confirm-kana!)
      - (canna-context-transposing-state-preedit)
      - (canna-transposing-text)
      - (canna-compose-state-preedit)
      - (canna-input-state-preedit)
      - (canna-get-commit-string)
      - (canna-commit-string)
      - (canna-do-commit)
      - (canna-context-segment)
      - (canna-resize-segment)
      - (canna-move-segment)
      - (canna-move-candidate)
      - (canna-move-candidate-in-page)
      - (canna-proc-compose-state)
      - (canna-get-candidate-handler)
      - (canna-set-candidate-index-handler)
        - Update to follow anthy/mana.
      - (canna-cancel-conv) : New.
      - (canna-proc-input-state-no-preedit) : Use ustr.
      - (canna-proc-transposing-state)
        - Handle wide-latin and latin as well.
        - Fix to reset the state while committing the string using keys
          other than commit-key.
    * scm/japanese.scm
      - (ja-consonant-table) : Rename to ja-consonant-syllable-table.
      - (ja-consonant-syllable-table) : Renamed.  Add syllables
        corresponding consonant character.
      - (ja-default-small-tsu-roma) : Use "ltu".
      - (ja-vowel?) : Rename to ja-vowel.
      - (ja-consonant?) : Rename to ja-consonant-to-syllable.
      - (ja-raw-string-to-valid-roma)
      - (ja-raw-string-list-to-valid-roma)
        - Removed.
      - (ja-fix-deleted-raw-str-to-valid-roma!)
      - (list-seq-contained?)
      - (ja-join-vu)
      - (ja-find-kana-list-from-rule)
      - (ja-make-kana-str-list)
      - (ja-type-hiragana)
      - (ja-type-katakana)
      - (ja-type-hankana)
      - (ja-type-latin)
      - (ja-type-wide-latin)
      - (ja-opposite-kana)
      - (ja-make-kana-str)
        - New.

2006-06-21 Etsushi Kato <ek.kato@gmail.com>

    * Fix bug #502.
    * scm/anthy.scm
      - (anthy-space-key) : New.
      - (anthy-proc-input-state-no-preedit)
        - Handle space key appropriately according to kana mode.
        - Don't treat shift-space as space.
        - Fix the use of rk-pending.
      - (anthy-proc-wide-latin) : Don't use ja-direct.
    * scm/mana.scm : Same changes as in anthy.scm.
    * scm/canna.scm : Ditto.
    * scm/skk.scm (skk-proc-state-wide-latin): Don't use ja-direct.
    * scm/japanese.scm
      - (ja-wide-rule) : Move space char from ja-direct-rule.
      - (ja-direct-rule) : Set null by default.

2006-06-20 Etsushi Kato <ek.kato@gmail.com>

    * helper/dict-canna.c
    * helper/dict-canna.h
      - Cosmetic changes.
    * helper/dict-canna-cclass.h
      - Don't include <glib.h>.

2006-06-20 Etsushi Kato <ek.kato@gmail.com>

    * scm/canna.scm (canna-begin-conv) : Check return value of
      canna-lib-begin-conversion to prevent hangup in case
      disconnect from cannaserver happens.

2006-06-18 Etsushi Kato <ek.kato@gmail.com>

    * helper/dict-canna.c
      - (dict_canna_add_entry_to_priv_dic)
      - (dict_canna_delete_entry_from_priv_dic)
      - (uim_dict_canna_open)
      - (uim_dict_canna_refresh)
        - RkInitialize and RkFinalize atomically since IM plugin may
          call finalize in a different context.

2006-06-17 Etsushi Kato <ek.kato@gmail.com>

    * helper/dict-canna.c
      - Fix include "dict-canna-cclass.h".
      - (g_context_num) : Removed.  Use CANNA_STD_CONTEXT instead.
      - (dict_canna_init) : Simplify.
    * helper/dict-canna.h
      - (CANNA_STD_CONTEXT) : Define as 0.

2006-06-17 Etsushi Kato <ek.kato@gmail.com>

    * helper/dict-anthy.c : Include <config.h>.

2006-06-17 Etsushi Kato <ek.kato@gmail.com>

    * dict-word-list-win-gtk.c (activate_url) : Comment out debug
      message.

2006-06-17 Etsushi Kato <ek.kato@gmail.com>

    * helper/dict-word-list-win-gtk.c
      - (activate_url) : New.
      - (help_about_action_cb) : Update.
    * helper/dict-main-gtk.c
      - (setup_default_icon) : New.
      - (main) : Set window icon.
    * helper/uim-dict-ui.xml.in
      - Add a separator in the DictionaryMenu.

2006-06-17 Etsushi Kato <ek.kato@gmail.com>

    * helper/dict-canna.c
      - (dict_canna_add_entry_to_priv_dic)
      - (dict_canna_delete_entry_from_priv_dic)
        - Oops, don't use asprintf.

2006-06-17 Etsushi Kato <ek.kato@gmail.com>

    * configure.ac : Forgot to commit this file in r3627.

2006-06-17 Etsushi Kato <ek.kato@gmail.com>

    * configure.ac
      - (UI_XML_ANTHY_START)
      - (UI_XML_ANTHY_END)
      - (UI_XML_CANNA_START)
      - (UI_XML_CANNA_END)
      - (AC_CONFIG_FILES)
        - Auto generate helper/uim-dict-ui.xml from
          uim-dict-ui.xml.in.
    * helper/dict-canna.c (uim_dict_canna_open) : Set initial
      ref_count 0.
    * helper/dict-dict.c : Include <config.h>.
    * helper/dict-anthy.c
      - (dict_anthy_exit) : Workaround for libanthydic.so in
        anthy-7811.
      - (uim_dict_anthy_open) : Set initial ref_count 0.
    * helper/uim-dict-ui.xml : Rename to uim-dict-ui.xml.in.
    * helper/uim-dict-ui.xml.in
      - Renamed from uim-dict-ui.xml.
      - Set dictionary menu at compile time.
    * helper/dict-dict.h (DictEnumDictionaryType) : Moved from
      dict-word-list-win-gtk.h.
    * helper/dict-word-list-win-gtk.c
      - Include "uim-stdint.h".
      - (activate_radio_action) : New.  Callback for dictionary
        selection.
      - (menu_action_entries) : Add dictionary selection menu.
      - (dictionary_entries) : New.
      - (n_dictionary_entries) : Ditto.
      - (warn_dict_open) : Chang the warning message.
      - (word_list_window_init) : Set radio_action.
      - (dict_set_property)
        - Set radio button if PROP_DICTIONARY_TYPE is set.
        - Don't exit even if dict is NULL.
      - (help_about_action_cb) : Use easy way if gtk+ >= 2.6.0.
    * helper/dict-word-list-win-gtk.h
      - (DictEnumDictionaryType) : Move to dict-dict.h.
      - Export dict_window_destroy_cb().
    * helper/dict-word-list-view-gtk.c (word_list_view_destroy) :
      Indentation fix.
    * helper/dict-word-win-gtk.c
      - (word_window_add)
      - (word_window_response)
        - Unref dict when closing itself.
      - (idle_wordwin_destroy) : Indentation fix.
    * helper/dict-main-gtk.c
      - Include "dict-word-list-view-gtk.h".
      - (input_method)
      - (g_startup_dictionary)
        - Renamed.
      - Remove enum of input methods.
      - (parse_arg) : Follow the rename.
      - (create_window_anthy)
      - (create_window_canna)
        - Return NULL if dict is NULL on WORD_WINDOW_MODE_EDIT.
        - Don't call uim_dict_unref() after getting new window on
          WORD_WINDOW_MODE_ADD.
      - (window_destroy_cb)
      - (dict_window_destroy_cb)
        - Renamed and export.
      - (create_window) : Follow the removal of input method enum and
        window_destroy_cb.
    * helper/Makefile.am (EXTRA_DIST) : Follow the rename in
      uim-dict-ui.xml.

2006-06-17 Etsushi Kato <ek.kato@gmail.com>

    * scm/canna.scm (canna-reset-handler) : Make sure to call
      canna-lib-reset-conversion when canna-context-state if #t.

2006-06-17 Etsushi Kato <ek.kato@gmail.com>

    * scm/canna.scm (canna-update-preedit) : Don't send unwanted
      update-preeedit in commit-raw mode.

2006-06-16 Etsushi Kato <ek.kato@gmail.com>

    * helper/dict-word-list-win-gtk.c (word_list_key_press_cb) : No
      need handle GDK_return since "row-activated" signal process the
      key.

2006-06-16 Etsushi Kato <ek.kato@gmail.com>

    * helper/dict-word-list-win-gtk.c
      - (word_list_row_activated_cb) : New.
      - (word_list_window_init) : Connect to "row-activated" signal to
        the child of word_list.
      - (word_list_button_press_cb) : Don't handle double click here.
      - (word_list_row_activated_cb) : Handle double click here instead.

2006-06-16 Etsushi Kato <ek.kato@gmail.com>

    * helper/dict-word-list-view-gtk.c (word_list_view_init) : Set
      columns resizable and sortable.

2006-06-16 Etsushi Kato <ek.kato@gmail.com>

    * scm/canna-key-custom.scm (canna-hankaku-kana-key) : Set empty by
      default.

2006-06-16 Etsushi Kato <ek.kato@gmail.com>

    * helper/dict-canna.c
    * helper/dict-canna.h
      - New file to support Canna private dictionary.
    * helper/dict-dict.c
      - (classes) : Add uim_dict_class_canna if defined USE_CANNA.
    * helper/dict-word-list-win-gtk.c
      - (dict_set_property) : Canna support.
    * helper/dict-word-win-gtk.c
      - (word_window_new) : Disable frequency widget if canna.
      - (word_window_add) : Set word type appropriately.
      - (button_cclass_browse_clicked_cb) : Create cclass_dialog
        appropriately.
    * helper/dict-main-gtk.c
      - (create_window_canna) : New.
      - (create_window) : Support Canna.
    * Makefile.am
      - (uim_dict_gtk_SOURCES)
      - (uim_dict_gtk_LDADD)
      - (uim_dict_gtk_CPPFLAGS)
        - Canna support for uim-dict-gtk.

2006-06-16 Etsushi Kato <ek.kato@gmail.com>

    * helper/dict-word-list-win-gtk.c
      - (dict_enum_dictionary_type_get_type)
      - (word_list_window_class_init)
      - (word_list_window_new)
        - Fix mis-commit in r3616.

2006-06-16 Etsushi Kato <ek.kato@gmail.com>

    * helper/dict-canna.c
    * helper/dict-canna.h
    * helper/dict-canna-cclass.c
    * helper/dict-canna-cclass.h
      - Rename dict-canna.[ch] to dict-canna-cclass.[ch].
    * helper/dict-dict.c
      - (uim_dict_class_anthy) : Enclosed with ifdef USE_ANTHY.
      - (uim_dict_add_word) : Change to return 1 if success, as in
        uim_dict_change_word() and uim_dict_remove_word().
    * helper/dict-anthy.c
      - (dict_anthy_add_priv_dic_with_flags) :  Follow the change in
        uim_dict_add_word().
      - (dict_anthy_delete_priv_dic) : Return reversed value not in
        uim_dict_anthy_remove_word() but in here.
      - (uim_dict_anthy_open) : Don't initialize libanthy unless
        identifiers matches.
      - (uim_dict_anthy_add_word) : Follow the change in
        uim_dict_add_word().
      - (uim_dict_anthy_change_word) : Fix to return correct value.
      - (uim_dict_anthy_remove_word) : Just return
        dict_anthy_delete_priv_dic().
    * helper/dict-word-list-win-gtk.ci
      - (dict_enum_dictionary_type_get_type)
        - New.  Enable to handle dictionaries other than Anthy.
      - (word_list_window_class_init) : Set property.
      - (word_list_window_init) : Don't open a dictionary here.
      - (dict_get_property) : New.
      - (dict_set_property)	: Open a dictionary here.
      - (dict_get_dictionary_type) : Return dictionary type.
      - (word_list_window_new) : Use dictionary type for a argument.
    * helper/dict-word-list-win-gtk.h
      - (DictEnumDictionaryType) : New.
      - (_WordListWindow) : Add dictionary_type member.
    * helper/dict-cclass-dialog.c
    * helper/dict-cclass-dialog.h
      - Follow the rename in dict-canna-cclass.h.
    * helper/dict-word.c
      - Include more headers.
      - (dict_identifier_to_word_type)
      - (dict_identifier_to_support_type)
        - New.  Utility functions.
    * helper/dict-word.h
      - (uim_word_type) : Add WORD_TYPE_UNKNOWN.
      - Export dict_identifier_to_word_type() and
        dict_identifier_to_support_type().
    * helper/dict-word-win-gtk.c
      - (word_window_add) : Follow the change in uim_dict_add_word().
    * helper/dict-main-gtk.c
      - Show help.
      - (create_window_anthy) : Follow the change in
        word_list_window_new().
    * helper/Makefile.am
      - (uim_dict_gtk_SOURCES)
      - (uim_dict_gtk_LDADD)
        - Separate with if ANTHY.
      - (uim_dict_gtk_CPPFLAGS)
        - Ditto. Define USE_ANTHY if ANTHY.

2006-06-16 Etsushi Kato <ek.kato@gmail.com>

    * configure.ac : Bump version.

2006-06-15 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * RELNOTE
      - Update

2006-06-14 Etsushi Kato <ek.kato@gmail.com>

    * scm/canna-key-custom.scm (canna-kana-toggle-key) : Remove 'q'
      key since it conflicts with hiragana 'ta' in kana-mode
      ([Anthy-dev: 2997]).

2006-06-14 Etsushi Kato <ek.kato@gmail.com>

    * qt/pref-customwidgets.cpp (CustomKeyEdit::slotKeyButtonClicked)
      - Bug fix for removing the last item.

2006-06-12 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * AUTHORS
    * tools/gnuify-changelog.pl
    * pixmaps/AUTHORS
    * pixmaps/COPYING
      - Update my signature

2006-06-09 Etsushi Kato <ek.kato@gmail.com>

    * replace/strlcpy.c : Return 0 if dst or src is NULL.
    * replace/strlcat.c : Ditto.
    * uim/anthy.c : #include <config.h>.

2006-06-07 Etsushi Kato <ek.kato@gmail.com>

    * uim/skk.c (search_line_from_server) : Fix wrong use of strlcat
      again...
    (search_line_from_file) : Revert to original code (r3576) and add
      comment.

2006-06-07 Etsushi Kato <ek.kato@gmail.com>

    * uim/skk.c (search_line_from_server) : Update fix for wrong
      commit in r3578.
    (search_line_from_file) : Use strlcpy instead of strlcat.

2006-06-07 Etsushi Kato <ek.kato@gmail.com>

    * xim/compose.cpp : One more fix for wrong commit in r3578.

2006-06-07 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * configure.ac
      - Add check for bzero(3)
    * uim/prime.c
    * uim/skk.c
      - Include strings.h for bzero(3)

2006-06-07 Etsushi Kato <ek.kato@gmail.com>

    * fep/escseq.c : Correct a wrong fix in r3581.

2006-06-06 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/anthy.c
      - (get_anthy_version): Fix a logical typo on strlcpy

2006-06-06 Etsushi Kato <ek.kato@gmail.com>

    * uim/skk.c : One more fix for commit in r3578.

2006-06-06 Etsushi Kato <ek.kato@gmail.com>

    * xim/ximserver.cpp : Resolve wrong fix in r3582.

2006-06-06 Etsushi Kato <ek.kato@gmail.com>

    * uim/skk.c : One more fix for commit in r3578.

2006-06-06 Etsushi Kato <ek.kato@gmail.com>

    * uim/uim-compat-scm.c : One more fix for commit in r3578.

2006-06-06 Etsushi Kato <ek.kato@gmail.com>

    * One more fix for commit in r3578.

2006-06-06 Etsushi Kato <ek.kato@gmail.com>

    * Fix commit in r3578.  strlcpy, strlcat are not just replace
      functions of strncpy, strncat.

2006-06-06 Etsushi Kato <ek.kato@gmail.com>

    * replace/os_dep.h : Export strlcpy and strlcat as uim_strlcpy and
      uim_strlcat if these function are not os native because these
      function is used in uim's IM modules.
    * fep/Makefile.am (uim_fep_tick_LDADD) : Add libreplace.la.
    * uim/uim-module-manager.c (concat) : Bug fix.
    * uim/Makefile.am (uim_helper_server_LDADD) : Add libreplace.la.

2006-06-06 Masahito Omote <omote@utyuuzin.net>

    * strlcpy.c and strlcat.c are added to replace/. These codes are derived from
      NetBSD with a bit change. On *BSD, native strlcpy and strlcat are used.
      .
      Message to all comitters:
        * Use strlcpy instead of strcpy and strncpy.
        * Use strlcat instead of strcat.
      - configure.ac: Add strlcpy and strlcat to AC_REPLACES_FUNCS.
      - replace/Makefile.am: Add strlcpy.c and strlcat.c.
      - replace/os_dep.h: Add strlcpy and strlcat.
      - replace/strlcpy.c: New function strlcpy derived from NetBSD.
      - replace/strlcat.c: New function strlcat derived from NetBSD.
      - fep/callbacks.c: Use strlcat and strlcpy.
      - fep/escseq.c: Ditto.
      - fep/udsock.c: Ditto.
      - fep/uim-fep-tick.c: Ditto.
      - fep/draw.c: Ditto.
      - uim/uim-util.c: Ditto.
      - uim/prime.c: Ditto.
      - uim/uim-helper-client.c: Ditto.
      - uim/uim-compat-scm.c: Ditto.
      - uim/uim-helper-server.c: Ditto.
      - uim/anthy.c: Ditto.
      - uim/uim-module-manager.c: Ditto.
      - uim/skk.c: Ditto.
      - uim/slib.c: Ditto.
      - xim/locale.cpp: Ditto.
      - xim/compose.cpp: Ditto.
      - xim/ximserver.cpp: Ditto.
      - xim/ximpacket.cpp: Ditto.

2006-06-06 Etsushi Kato <ek.kato@gmail.com>

    * scm/latin.scm (latin-multi-key?) : Use IgnoreShift.

2006-06-06 Etsushi Kato <ek.kato@gmail.com>

    * xim/ximserver.cpp (keyState::check_key) : Forward Multi_key.

2006-06-06 Etsushi Kato <ek.kato@gmail.com>

    * NEWS : Update.

2006-06-06 Etsushi Kato <ek.kato@gmail.com>

    * qt/immodule-qhelpermanager.h (class QUimHelperManager) : Add
      send_im_change_whole_desktop static member.
    * immodule-qhelpermanager.cpp
    (QUimHelperManager::parseHelperStrImChange) : Set
      custom-preserved-default-im-name as in gtk+ immodule.
    (QUimHelperManager::send_im_change_whole_desktop) : New.
    * immodule-quiminputcontext.h : #include "uim/uim-im-switcher.h".
    (class QUimInputContext) : Add switch_app_global_im_cb and
      switch_system_global_im_cb static members.  Add
      switch_app_global_im and switch_system_global_im members.
    * immodule-quiminputcontext.cpp
    (QUimInputContext::createUimContext) : Set callback functions for
      uim_set_im_switch_request_cb().
    (QUimInputContext::switch_app_global_im_cb) : New.
    (QUimInputContext::switch_system_global_im_cb) : Ditto.
    (QUimInputContext::switch_app_global_im) : New.  Just ported from
      gtk+ immodule.
    (QUimInputContext::switch_system_global_im) : Ditto.

2006-06-06 Etsushi Kato <ek.kato@gmail.com>

    * qt/immodule-quiminputcontext_with_slave.cpp
    (QUimInputContextWithSlave::filterEvent) : Process key handling
      with uim context before qt's simple context.

2006-06-06 Etsushi Kato <ek.kato@gmail.com>

    * NEWS : Update.

2006-06-06 Etsushi Kato <ek.kato@gmail.com>

    * qt/immodule-quiminputcontext_with_slave.cpp
    * qt/immodule-quiminputcontext_with_slave.h
      - (QUimInputContextWithSlave::filterEvent) : Change argument
        type as const QEvent*.  This fixes bug #3988.

2006-06-05 Etsushi Kato <ek.kato@gmail.com>

    * helper/Makefile.am (EXTRA_DIST) : Use uim-dict-ui.xml
      instead of $(uim_dict_ui_DATA) to put it in the distribution
      even when --enable-dict is not specified.
    * NEWS : Update.

2006-06-04 Etsushi Kato <ek.kato@gmail.com>

    * scm/m17nlib.scm : Fix key handling.  Also fix bug #2621.
    (m17nlib-construct-modifier) : Add shift and control mask
      appropriately.  Handle super and hyper modifiers.
    (m17nlib-construct-key) : New procedure separated from
      m17nlib-translate-ukey-to-mkey.  Handle the keys with control
      modifier properly.
    (m17nlib-translate-ukey-to-mkey) : Use m17nlib-construct-key.

2006-06-04 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit fix a GC bug that causes SEGV
    
    * NEWS
      - Update
    * uim/test-gc.c
      - Follow the stack protection functions change. All tests have been
        passed
    * uim/uim-scm.h
      - (uim_scm_gc_current_stack_ptr): New variable decl
      - (uim_scm_gc_protect_stack_ptr): Follow the type change of
        uim_scm_gc_protect_stack()
      - (UIM_SCM_GC_PROTECTED_CALL_INTERNAL): Follow the stack protection
        functions chage
      - (uim_scm_gc_current_stack): New macro
      - (scm_gc_current_stack_internal): New function decl
      - (scm_gc_protect_stack_internal): Change arg
    * uim/uim-scm.c
      - (uim_scm_gc_current_stack_ptr): New variable
      - (uim_scm_gc_protect_stack_ptr): Follow the type change of
        uim_scm_gc_protect_stack()
      - (uim_scm_gc_current_stack_internal): New function
      - (uim_scm_gc_protect_stack_internal): Separate stack_start
        acquisition

2006-06-04 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/test-gc.c
      - New file
      - Add stack protection tests (failed and fix needed)
    * uim/Makefile.am
      - (noinst_PROGRAMS): Add test-gc
      - Add rules for test-gc

2006-06-04 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * po/uim.pot
    * po/ja.po
    * po/ko.po
    * po/fr.po
      - Update

2006-06-03 Etsushi Kato <ek.kato@gmail.com>

    * configure.ac : Fix typo.

2006-06-03 Etsushi Kato <ek.kato@gmail.com>

    * pixmaps/Makefile.am (install-data-hook) : Check the existence of
      m17n icon before making symlink
      (reported by dai at http://vdr.jp/d/20060603.html#p02).

2006-06-02 Etsushi Kato <ek.kato@gmail.com>

    * NEWS : Fix typo.

2006-06-02 Etsushi Kato <ek.kato@gmail.com>

    * scm/anthy.scm : Let anthy-set-segment-transposing available only
    for Anthy >= 7802 since it is still snapshot version.

2006-06-02 Etsushi Kato <ek.kato@gmail.com>

    * tools/gnuify-changelog.pl : Update my address.

2006-06-02 Etsushi Kato <ek.kato@gmail.com>

    * INSTALL
    * NEWS
      - Update.

2006-06-02 Etsushi Kato <ek.kato@gmail.com>

    * scm/antly.scm : Support hankaku-katakana conversion in
      Anthy-7802.

2006-05-31 Etsushi Kato <ek.kato@gmail.com>

    * scm/latin.scm (latin-compose-rule) : Update with automatically
      generated list from en_US.UTF-8/Compose.
    (latin-commit) : Flush rk context all time.
    (latin-proc-composing-state) : Don't commit character when user
      input sequence doesn't match the rule.

2006-05-31 Etsushi Kato <ek.kato@gmail.com>

    * scm/latin.scm (latin-commit-key?) : Remove 32.
    (latin-proc-composing-state) : Improve space key handling and
      remove debug print.

2006-05-27 Etsushi Kato <ek.kato@gmail.com>

    * helper/toolbar-standalone-gtk.c (size_request_cb) : Resize only
      when it needs to shrink.

2006-05-26 Etsushi Kato <ek.kato@gmail.com>

    * po/ja.po : Update Project-Id-Version.
    * po/ko.po : Ditto.
    * qt/chardict/po/ja.po : Ditto.
    * po/fr.po : Delete fuzzy translations.
    * po/uim.pot : Update.

2006-05-25 Etsushi Kato <ek.kato@gmail.com>

    * pixmaps/configure-qt.png : Removed (bug #6951).
    * pixmaps/Makefile.am (NATIVE_PNGS) : Remove configure-qt.png.
    * configure.ac : Check KDE's icon dir.
    * qt/toolbar-common-quimhelpertoolbar.cpp : Use KDE's
      configure.png for pref icon.

2006-05-24 Etsushi Kato <ek.kato@gmail.com>

    * xim/ximserver.cpp (InputContext::review_im) : Fix for the
      context with legacy encoding.

2006-05-23 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * pixmaps/direct_input.svg
      - Add copyright information

2006-05-23 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * pixmaps/byeoru.svg
    * pixmaps/direct.svg
    * pixmaps/direct_input.svg
    * pixmaps/im_subst.svg
    * pixmaps/ja_azik.svg
    * pixmaps/ja_direct.svg
    * pixmaps/ja_fullwidth_alnum.svg
    * pixmaps/ja_halfwidth_alnum.svg
    * pixmaps/ja_halfwidth_katakana.svg
    * pixmaps/ja_hiragana.svg
    * pixmaps/ja_kana.svg
    * pixmaps/ja_katakana.svg
    * pixmaps/ja_nicola.svg
    * pixmaps/ja_pocketbell.svg
    * pixmaps/ja_romaji.svg
    * pixmaps/ko_direct.svg
    * pixmaps/ko_hangulchar.svg
    * pixmaps/ko_hangulword.svg
    * pixmaps/off.svg
    * pixmaps/on.svg
    * pixmaps/prime_mode_application.svg
    * pixmaps/skk.svg
    * pixmaps/tcode.svg
    * pixmaps/tutcode.svg
    * pixmaps/unknown.svg
      - Add copyright information. See http://dublincore.org/documents/dcmi-terms/
    * pixmaps/AUTHORS
      - Add comment about metadata

2006-05-23 Etsushi Kato <ek.kato@gmail.com>

    * uim/m17nlib.c (get_input_method_short_desc) : Strip the string
      in a description if it encounters '\n' (see
      http://www.m17n.org/mlarchive/m17n-lib-ja/200605/msg00001.html).

2006-05-22 Etsushi Kato <ek.kato@gmail.com>

    * uim/m17nlib.c (get_input_method_short_desc) : Don't use
      m17n's IM description if it contains non-English word.

2006-05-22 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * helper/pref-gtk-custom-widgets.c
      - (DEFAULT_OLIST_WINDOW_WIDTH, DEFAULT_OLIST_WINDOW_HEIGHT,
        DEFAULT_KEYCONF_WINDOW_WIDTH, DEFAULT_KEYCONF_WINDOW_HEIGHT): New
        macro
      - (choose_olist_clicked_cb):
        * Replace window size value with the macros
        * Change size 280*220 to 480*350 to be conveniently capable of IM
          lists
      - (choose_key_clicked_cb): Replace window size value with the macros

2006-05-22 Etsushi Kato <ek.kato@gmail.com>

    * configure.ac
      - Require m17n-lib >= 1.3.1.
      - Check isascii().
    * INSTALL : Update
    * uim/m17nlib.c (get_input_method_short_desc) : Replace non-ascii
      char with space.

2006-05-22 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/m17nlib.c
      - (get_input_method_short_desc): Enclose the message by N_()
    * po/POTFILES.in
      - Add m17lib.c
    * po/uim.pot
    * po/ja.po
    * po/ko.po
    * po/fr.po
      - Update

2006-05-22 Etsushi Kato <ek.kato@gmail.com>

    * uim/m17nlib.c : Change lang code for IM with 't' in m17n-lib to
      "" instead of "*".

2006-05-22 Etsushi Kato <ek.kato@gmail.com>

    * qt/chardict/Makefile.am : Enclose SUBDIRS with if QT.

2006-05-22 Etsushi Kato <ek.kato@gmail.com>

    * configure.ac : Bump required version of m17n-lib and check
      m17n-db directory.
    * INSTALL : Update.
    * pixmaps/Makefile.am : Add install-data-hook to install symlinks
      for m17n-db icons (bug #6972).
    * scm/m17nlib.scm (m17nlib-register) : Get IM description from
      m17n-lib (bug #6972).
    * uim/m17nlib.c
      - (buffer_for_converter) : Enlarge buffer to get IM description.
      - (pushback_input_method) : Set "*" for lang in im_array if
        m17n-lib return 't'.
      - (init_m17nlib) : Set lang code properly.
      - (get_input_method_name) : Follow the above changes.
      - (get_input_method_lang) : Ditto.
      - (get_input_method_short_desc) : New.  Return modified string
        from m17n-lib's IM description (bug #6972).
      - (find_im_by_name) : Follow the changes in lang in im_array.
      - (uim_plugin_instance_init) : Add
        m17nlib-lib-nth-input-method-short-desc interface.

2006-05-22 Etsushi Kato <ek.kato@gmail.com>

    * uim/m17nlib.c : Code cleanup.
      - (max_input_contexts) : Rename to nr_input_contexts.
      - (nr_input_contexts) : Renamed.
      - (get_left_of_cursor) : Plug leak.
      - (get_right_of_cursor) : Ditto.
      - (find_im_by_name) : Change argument type from char * to const
        char *.
      - (fill_new_candidates) : Remove redundant code.
      - (same_candidatesp) : Change argument type.

2006-05-21 Etsushi Kato <ek.kato@gmail.com>

    * configure.ac
      - Replace pkg-config with $PKG_CONFIG.
      - Check libpanel-applet version to use
        panel_applet_set_background_widget().
    * helper/toolbar-applet-gnome.c (uim_applet_new) : Enclose
      panel_applet_set_background_widget() with #if
      LIBPANEL_APPLET_HAVE_SET_BACKGROUND_WIDGET.

2006-05-21 Konosuke Watanabe <sasugaanija@gmail.com>

    * emacs/uim-el-agent.c
     - Add 'QUIT' command for debugging
    * emacs/uim-helper.el
    * emacs/uim.el
     - Invalidate process-filter of uim-el-helper-agent temporarily before
      waiting data arrival at buffer of uim-el-agent.

2006-05-21 Etsushi Kato <ek.kato@gmail.com>

    * helper/toolbar-applet-gnome.c : Revise the fix for bug #6963.
      - (applet_background_changed_cb) : Removed.
      - (uim_applet_new) : Use libpanel-applet's functionality.

2006-05-21 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * pixmaps/unknown.svg
      - New file
    * pixmaps/Makefile.am
      - (SVGS): Add unknown.svg
      - (SVG_PNGS): Add unknown.png
    * pixmaps/indication-id.txt
    * pixmaps/AUTHORS
      - Update

2006-05-21 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/im-switcher.scm
      - (imsw-actions): Fix a parenthesis typo

2006-05-21 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * configure.ac
      - Add abs_srcdir, abs_builddir, abs_top_srcdir and abs_top_builddir
        propagation
    * scm/Makefile.am
      - Fix environemnt variable settings for uim-module-manager with the
        absolute paths
    * scm/im-switcher.scm
      - (imsw-actions): Fix enabled but not-loaded IM registering

2006-05-21 Etsushi Kato <ek.kato@gmail.com>

    * helper/toolbar-applet-gnome.c : Fix bug #6983 (Masaki Oita).
      - (applet_background_changed_cb) : New.  Respond to background
        changes (pixmaps, colors).
      - (uim_applet_new) : Connect to "change_background" signal.

2006-05-21 Jae-hyeon Park <jhyeon@gmail.com>

    * helper/toolbar-applet-gnome.c
      - (display_about_dialog): changed a message
    * scm/byeoru-key-custom.scm
      - In the description of byeoru-conversion-key,
        changed "Chinese" to "Chinese characters"
    * po/uim.pot
    * po/fr.po
    * po/ja.po
    * po/ko.po
      - updated

2006-05-21 Etsushi Kato <ek.kato@gmail.com>

    * qt/chardict/po/Makefile.in.in
    * po/Makefile.in.in
    * uim.pc.in
      - Add datarootdir (Bug #6973).

2006-05-21 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/im-switcher.scm
      - (imsw-actions): Fix IM ordering with enabled-im-list

2006-05-21 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * configure.ac
      - enable -Werror by default only if --enable-debug

2006-05-21 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * helper/toolbar-applet-gnome.c
      - (display_help_dialog, display_about_dialog): Modify messages
    * po/uim.pot
    * po/ja.po
    * po/ko.po
    * po/fr.po
      - Update

2006-05-21 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * helper/candwin-gtk.c
    * helper/dict-canna.c
    * helper/dict-cclass-dialog.c
    * helper/dict-main-gtk.c
    * helper/dict-word-win-gtk.c
    * helper/dict-word.h
    * helper/eggtrayicon.c
    * helper/eggtrayicon.h
    * helper/im-switcher-gtk.c
    * helper/input-pad-ja.c
    * helper/pref-gtk-custom-widgets.c
    * helper/pref-gtk.c
    * helper/toolbar-common-gtk.c
    * helper/toolbar-standalone-gtk.c
    * helper/toolbar-systray-gtk.c
      - Cosmetic changes

2006-05-21 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * README
    * RELNOTE
      - Update for uim 1.1.0-alpha

2006-05-21 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim.h
      - (UIM_VERSION_MAJOR, UIM_VERSION_MINOR, UIM_VERSION_PATCHLEVEL,
        UIM_VERSION_REQUIRE): New macro
    * doc/COMPATIBILITY
      - Add new section "Version numbers for conditional compilation"

2006-05-20 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * pixmaps/im_subst.svg
      - Change color tone
    
    * pixmaps/README
      - Fix a typo

2006-05-20 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit close bug #6952
    
    * pixmaps/COPYING
      - Add copyright holders for icons created by or contributed to uim
        project
    * pixmaps/README
      - New file
      - Describe about scim-imengine-icons and license issues
    * COPYING
      - Add license information about the icons

2006-05-20 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * pixmaps/COPYING
      - New file just imported from
        scim-imengine-icons-1.0.0. Modification will follow

2006-05-20 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * helper/GNOME_UimApplet.server.in.in
      - Modify messages to be natural as a part of the desktop
        environment.  i.e. ordinary desktop user does not recognize what
        "uim applet" means
    * po/ja.po
      - Update and translate the applet messages
    * po/uim.pot
    * po/ko.po
    * po/fr.po
      - Update

2006-05-19 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit close bug #6088
    
    * configure.ac
      - Add AC_DISABLE_STATIC
    * uim/Makefile.am
      - Add a comment about bug #6088

2006-05-19 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/pyload.scm
      - Fix language of pyunihan from "zh_CN" to "zh"

2006-05-19 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/im.scm
      - (system-available-im-list, installed-im-list): Rename
        system-available-im-list to installed-im-list
    * scm/uim-module-manager.scm
      - (update-installed-modules-scm):
        * Follow the renaming
        * Define enabled-im-list by installed-im-list in the generated
          code to express logical meaning
    * scm/im-custom.scm
      - (usable-im-list): Follow the renaming

2006-05-19 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit cleanup module management codes
    
    * scm/lazy-load.scm
      - (stub-im-generate-stub-im-list): Change generated code
        organization
    * scm/im-custom.scm
      - (custom-installed-im-list): Removed
      - (custom enabled-im-list, custom toggle-im-alt-im): Follow the
        removal of custom-installed-im-list and replace with new
        stub-im-list
      - Require all modules at bottom of the file. This reorder
        custom-group headers displayed on the left of uim-pref
    * scm/uim-module-manager.scm
      - (stub-im-list): New variable (dummy definition)
      - (prepare-installed-im-list): New procedure based on
        custom-installed-im-list
      - (update-loader-scm): Change generated code organization. It
        defines 'record stub-im' and 'stub-im-list' for useful module
        management
      - (update-installed-modules-scm): Follow the changes
    * scm/manage-modules.scm
      - Removed
    * scm/Makefile.am
      - Cleanup
      - (SCM_FILES): Remove manage-modules.scm
    * uim/uim-module-manager.c
      - (write_installed_modules_scm): Replace 0 with EXIT_SUCCESS

2006-05-19 Etsushi Kato <ek.kato@gmail.com>

    * configure.ac : Require use_gtk2_4 for use_pref.

2006-05-19 Etsushi Kato <ek.kato@gmail.com>

    * configure.ac : Check whether X11 uses new modular system.

2006-05-19 Etsushi Kato <ek.kato@gmail.com>

    * scm/anthy.scm : Support rotate Hiragana and Katakana conversion
      in anthy-proc-converting-state as well.
      - (anthy-candidate-type-katakana) : New.
      - (anthy-candidate-type-hiragana) : Ditto.
      - (anthy-candidate-type-hankana) : Ditto.  Not yet supported by
        anthy.
      - (anthy-set-segment-transposing) : Enable rotation.

2006-05-19 Etsushi Kato <ek.kato@gmail.com>

    * scm/anthy.scm
      - (anthy-lib-version) Rename to anthy-version.
      - (anthy-version) : Renamed from anthy-lib-version.
    * uim/anthy.c
      - (libanthy_version_major) : Rename to anthy_version_major.
      - (anthy_version_major) : Renamed from libanthy_version_major.
      - (libanthy_version_minor) : Rename to anthy_version_minor.
      - (anthy_version_minor) : Renamed from libanthy_version_minor.
      - (get_libanthy_version) : Rename to get_anthy_version().
      - (get_anthy_version) : Renamed from get_libanthy_version.

2006-05-19 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * helper/toolbar-common-gtk.c
      - (helper_toolbar_prop_list_update,
        helper_toolbar_prop_label_update): Fix untranslated tooltip of
        toolbar buttons

2006-05-19 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * pixmaps/ja_hiragana.svg
    * pixmaps/ja_katakana.svg
    * pixmaps/ja_halfwidth_katakana.svg
    * pixmaps/ja_halfwidth_alnum.svg
    * pixmaps/ja_fullwidth_alnum.svg
      - Fix color leak around the center dot of width guide

2006-05-19 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * pixmaps/uim-gray.png
    * pixmaps/im_subst.svg
      - New file
    * pixmaps/Makefile.am
      - (IM_SUBST_SVGS, IM_SUBST_PNGS): New variable
      - (NATIVE_PNGS): Add uim-gray.png
      - (SVGS): Add im_subst.svg and $(IM_SUBST_SVGS)
    * pixmaps/AUTHORS
      - Update

2006-05-18 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * pixmaps/uim-icon.png
      - Rename to uim-icon64.png
    * pixmaps/uim-icon64.png
      - Renamed from uim-icon.png
    * pixmaps/uim-icon48.png
      - New file (scaled down from uim-icon64.png)
    * pixmaps/Makefile.am
      - (NATIVE_PNGS):
        * Remove uim-icon.png
        * Add uim-icon{48,64}.png
      - (PNGS): Add uim-icon.png
      - Copy uim-icon48.png as uim-icon.png to make gnome-control-center
        looks proper

2006-05-18 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * po/uim.pot
    * po/ja.po
    * po/ko.po
    * po/fr.po
      - Update

2006-05-18 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim.desktop.in.in
      - Modify messages
    * scm/im-custom.scm
      - (custom imsw-propagation): Rename to imsw-coverage
      - (custom imsw-coverage):
        * Renamed from imsw-propagation
        * Modify messages
    * scm/im-switcher.scm
      - (imsw-actions): Follow the renaming of imsw-propagation
    * qt/switcher-qt.cpp
      - (UimImSwitcher::createGUI): Ditto
    * helper/im-switcher-gtk.c
      - (enum switcher_coverage): New type
      - (changing_way, coverage): Rename changing_way to coverage
      - (toggle_changing_way): Rename to toggle_coverage
      - (toggle_coverage):
        * Renamed from toggle_changing_way
        * Replace the magic numbers
      - (change_input_method): Replace the magic numbers
      - (create_switcher):
        * Modify messages
        * Follow the renaming of toggle_changing_way

2006-05-18 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit add per-context im-toggle feature and also fix bug #6949
    
    * scm/im.scm
      - (toggle-im-preserved-im, toggle-im-preserved-widget-states,
        toggle-im-alt-preserved-widget-states): Removed
      - (toggle-im): Rewrite to per-context version
      - (toggle-state-rec-spec): New variable
      - (record toggle-state): New record
      - (reset-toggle-context!, context-primary-im?,
        context-primary-im-name): New procedure
      - (context-rec-spec): Add new field 'toggle-state'
      - (key-press-handler): Follow the toggle-im change
    * scm/im-switcher.scm
      - (context-update-widget-states-orig): New alias
      - (context-update-widget-states!): New override procedure
      - (widgets-refresh-switcher-widget): New procedure split from
        context-refresh-switcher-widget!
      - (context-refresh-switcher-widget!): Add toggle-state support
    * scm/im-custom.scm
      - (custom toggle-im-alt-im): Add set-hook to reflect new value
    * NEWS
      - Update

2006-05-18 Etsushi Kato <ek.kato@gmail.com>

    * pixmaps/uim-dict.svg : Replaced with public domain one.
    * pixmaps/AUTHORS : Update.

2006-05-18 Etsushi Kato <ek.kato@gmail.com>

    * gtk/gtk-im-uim.c
    * gtk/uim-cand-win-gtk.c
    * helper/dict-word-win-gtk.c
      - Fix bug #6839.

2006-05-17 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/anthy.scm
    * scm/anthy-custom.scm
    * scm/canna.scm
    * scm/canna-custom.scm
    * scm/mana.scm
    * scm/mana-custom.scm
    * scm/skk.scm
    * scm/skk-custom.scm
      - Replace the iconic-label "A" for AZIK with "Z"

2006-05-17 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * NEWS
      - Rewrite to enduser-friendly description
      - Update
    * RELNOTE
      - New file
    * Makefile.am
      - (EXTRA_DIST): Add RELNOTE

2006-05-17 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * INSTALL
      - Remove rsvg(1) from requirements
    * pixmaps/Makefile.am
      - (dist-hook):
        * New target
        * Check rsvg(1) existence
    
    * pixmaps/indication-id.txt
      - Update

2006-05-17 Etsushi Kato <ek.kato@gmail.com>

    * INSTALL
    * NEWS
      - Update.

2006-05-17 Etsushi Kato <ek.kato@gmail.com>

    * helper/dict-word.c : Plug leak.

2006-05-17 Etsushi Kato <ek.kato@gmail.com>

    * helper/dict-word-list-view-gtk.c : Fix bug #6839.

2006-05-17 Etsushi Kato <ek.kato@gmail.com>

    * qt/candwin-qt.cpp
    * qt/pref-qt.cpp
    * qt/qtgettext.h
    * qt/chardict/qtgettext.h
    * qt/immodule-quiminputcontext.cpp
    * qt/toolbar-standalone-qt.cpp
    * qt/switcher-qt.cpp
    * qt/toolbar-common-uimstateindicator.cpp
    * helper/dict-word-list-win-gtk.c
    * helper/dict-cclass-dialog.c
    * helper/pref-gtk-custom-widgets.c
    * helper/dict-word-list-view-gtk.c
    * helper/eggtrayicon.c
    * helper/im-switcher-gtk.c
    * helper/pref-gtk.c
    * helper/dict-main-gtk.c
      - Fix bug #6839.

2006-05-17 Etsushi Kato <ek.kato@gmail.com>

    * helper/dict-word-list-view-gtk.h
    * uim/scim.cpp
      - Use <config.h> (bug #6839).

2006-05-17 Etsushi Kato <ek.kato@gmail.com>

    * gtk/caret-state-indicator.c
    * gtk/key-util-gtk.c
    * replace/strsep.c
    * replace/setenv.c
    * replace/getpeereid.c
    * helper/toolbar-common-gtk.c
    * fep/uim-fep.c
    * fep/draw.h
    * fep/uim-fep.h
    * fep/str.c
    * fep/read.c
    * fep/helper.c
    * fep/callbacks.c
    * fep/read.h
    * fep/escseq.c
    * fep/key.c
    * fep/udsock.c
    * fep/uim-fep-tick.c
    * fep/draw.c
      - Use <config.h> (bug #6839).

2006-05-17 Etsushi Kato <ek.kato@gmail.com>

    * AUTHORS : Update my email address.

2006-05-16 Konosuke Watanabe <sasugaanija@gmail.com>

    * emacs/uim-helper.el
    * emacs/uim-el-helper-agent.c
     - Discard redundant 'focus_in' messages at uim-el-helper-agent.

2006-05-16 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit fix bug #6925
    
    * scm/im-switcher.scm
      - (imsw-register-widget): Add duplicate call guard
      - (imsw-add-im-switcher-widget): Remove the duplicate call guard for
        imsw-register-widget
      - (context-refresh-switcher-widget!): Add imsw-register-widget invocation
    * scm/im-custom.scm
      - (imsw-reconfigure): Add a comment about imsw-register-widget

2006-05-16 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/slib.c
      - (vload, lreadtk): Replace (unsinged char) cast with (int) for libc
        ctype functions. nosuke, please revert this if Solaris still
        complains
    * uim/uim-scm.c
      - (uim_scm_init): Ditto
    * uim/agent.c
      - (main): Ditto

2006-05-16 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * xim/Makefile.am
      - (uim_xim_CPPFLAGS): Fix overriding order of include paths

2006-05-16 Etsushi Kato <ek.kato@gmail.com>

    * uim/anthy.c : Remove debug print in the previous commit.

2006-05-16 Etsushi Kato <ek.kato@gmail.com>

    * uim/anthy.c : Add code to get libanthy's version.
      - #include <string.h> and <ctype.h>
      - (libanthy_version_major) : New.  Contains string of major
        version as "7100".
      - (libanthy_version_minor) : New.  Contains string of minor
        version as "b".
      - (anthy_version) : New.  Return libanthy's version as ("7100"
        . "b").
      - (get_libanthy_version) : New.  Set version string to
        libanthy_version_major and libanthy_version_minor.
      - (init_anthy_lib) : Indentation fixes.  Get libanthy's version
        here.
      - (get_nth_candidate) : Just indentation fixes.
      - (uim_anthy_plugin_instance_init) : Export
        "anthy-lib-get-anthy-version" for scheme side.
    * scm/anthy.scm : Enable katakana and hiragana conversion in
      converting-state with libanthy (>= 7710).
      - (anthy-lib-version) : New.
      - (anthy-context-new) : Set libanthy's version while
        initializing libanthy.
      - (anthy-move-candidate) : Reset segment-transposing state.
      - (anthy-set-segment-transposing) : New.  Use hiragana and
        katakana conversion in anthy (>= 7710).
      - (anthy-proc-converting-state) : Handle hiragana and katakana
        conversion.

2006-05-15 Etsushi Kato <ek.kato@gmail.com>

    * helper/dict-word.h (_uim_word) : Add cclass_native to
      distinguish cclass_code (uim-dict's notification) and native
      code (like #T02 in anthy).
    (word_append) : Change to use both cclass_code and cclass_native
      for arguments.
    * helper/dict-canna.h (_category_code) : Constify code, desc, and
      example.
    (find_desc_from_code) : Change return type as const.  Use only
      code as a argument.
    (find_desc_from_code_with_type) : New.
    (find_code_from_desc) : Change return type as const.
    * helper/dict-canna.c (find_desc_from_code) : Rewrite.
    (find_desc_from_code_with_type) : New.  Rename from old
      find_desc_from_code.
    (find_code_from_desc) : Change the argument name appropriately.
    (find_cclass_type_from_code) : Follow the constification and
      rename of the function.
    (find_cclass_type_from_desc) : Follow the constification.
    * helper/dict-anthy.c (dict_anthy_init) : Indentation fixes.
    (dict_anthy_read_priv_dic_list) : Ditto.  Use
      find_desc_from_code_with_type() and follow the modification of
      word_append().
    (dict_anthy_add_priv_dic_with_flags) : Indentation fixes.
    (dict_anthy_delete_priv_dic) : Ditto.
    (uim_dict_anthy_add_word) : Follow the changes in uim_word.
    (uim_dict_anthy_remove_word) : Ditto.  Fix return value.
    * helper/dict-word-list-win-gtk.c (edit_remove_word_action_cb) :
      Refresh word list at the removal.
    (edit_edit_word_action_cb) : Connect to "word-added" signal to
      refresh word list.
    * helper/dict-word.c (word_append) : Follow the change in
      uim_word.
    * helper/dict-word-list-view-gtk.c (word_list_view_init) : Set
      rules_hit for the tree_view.
    * helper/dict-word-win-gtk.c (word_window_add) : Follow the
      changes in constification and uim_word.
    (word_window_cclass_reset) : Follow the constification.
    (button_cclass_browse_clicked_cb) : Ditto.  Also follow the rename
      of find_desc_from_code().

2006-05-14 Jae-hyeon Park <jhyeon@gmail.com>

    * AUTHORS
      - changed email address of Jae-hyeon Park
    * pixmaps/AUTHORS
    * pixmaps/Makefile.am
      - added info on byeoru.svg, ko_direct.svg, ko_hangulchar.svg, and
        ko_hangulword.svg
    * pixmaps/byeoru.svg
    * pixmaps/ko_direct.svg
    * pixmaps/ko_hangulchar.svg
    * pixmaps/ko_hangulword.svg
      - New icons for uim-byeoru
    * po/ja.po
      - corrected a message on Hangul to Chinese character conversion
      - the English word "Chinese" appears to be misleading
    * po/ko.po
      - added and modified translations
    * scm/byeoru-symbols.scm
      - added symbols from the "Halfwidth and Fullwidth Forms" section
        of the Unicode chart (from U+FF00 to U+FFEF), except those
        irrelevant to the Korean language
    * scm/byeoru.scm
      - changed utf-8 to utf8
      - changed label of hangulword input mode

2006-05-13 Etsushi Kato <ek.kato@gmail.com>

    * pixmaps/Makefile.am : Add uim-dict.svg.
    * pixmaps/uim-dict.svg : New.  Based on
      http://commons.wikimedia.org/wiki/Image:X-office-address-book.svg.
    * pixmaps/AUTHORS : Update.
    * qt/toolbar-common-quimhelpertoolbar.h
    (class QUimHelperToolbar) : Add m_dicticon.
    * qt/qt/toolbar-common-quimhelpertoolbar.cpp : Use uim-dict icon
      for m_dicticon.
    * helper/toolbar-common-gtk.c : Use uim-dict icon.
    * helper/toolbar-applet-gnome.c (display_about_dialog) : Simplify
      the about string.
    * helper/GNOME_UimApplet.server.in.in : Update the description.

2006-05-12 Etsushi Kato <ek.kato@gmail.com>

    * uim/uim-custom.c (custom_file_path) : Fix wrong use of %ld for
      UIM_EVAL_FSTRING3 since uim_sizeof_sexp_str() doesn't support
      it, which breaks saving the custom setting.

2006-05-12 Etsushi Kato <ek.kato@gmail.com>

    * configure.ac : Update description of '--enable-dict'.

2006-05-12 Etsushi Kato <ek.kato@gmail.com>

    * helper/dict-canna.c : Fix category of some word types in
      substantive_code[] ([Anthy-dev 2932]), and add some examples
      from Canna37p3/dic/ideo/grammar/main.code.

2006-05-12 Etsushi Kato <ek.kato@gmail.com>

    * helper/uim-dict-ui.xml : New file from ui_info[] in
      dict-word-list-win-gtk.c.
    * helper/dict-word-list-win-gtk.c (ui_info) : Move into
      uim-dict-ui.xml.
    (word_list_window_init) : Use gtk_ui_manager_add_ui_from_file
      instead of gtk_ui_manager_add_ui_from_string.
    * helper/Makefile.am (EXTRA_DIST) : Add uim-dict-ui.xml.
    (uim_dict_gtk_CPPFLAGS) : Add $(helper_defs).
    (uim_dict_uidir) : New for uim-dict-ui.xml.
    (uim_dict_ui_DATA) : Ditto.

2006-05-11 Konosuke Watanabe <sasugaanija@gmail.com>

    * uim/uim-custom.c
     - Cast 'pid_t' into 'int' so as to suppress compiler
       warning on 32bit Solaris8.

2006-05-11 Konosuke Watanabe <sasugaanija@gmail.com>

    * uim/uim-scm.c
    * uim/agent.c
    * uim/slib.c
    * xim/util.cpp
     - Cast argument to isdigit-family functions into
       'unsigned char' so as to suppress compile warning on
       Solaris8.

2006-05-11 Konosuke Watanabe <sasugaanija@gmail.com>

    * fep/key.c
     - Remove redundant condition so as to suppress compiler warning
       on ARM gcc.

2006-05-11 Etsushi Kato <ek.kato@gmail.com>

    * scm/anthy.scm (anthy-proc-converting-state) : Add FIXME comment.

2006-05-11 Etsushi Kato <ek.kato@gmail.com>

    * helper/Makefile.am : Check ANTHY for uim-dict-gtk and add
      ANTHY_LIBS into uim_dict_gtk_LDADD.
    * helper/dict-anthy.c
      - Remove dynamic loading code, but link with the shared library
        instead (bug #5638).
      - (dict_anthy_exit) : Call anthy_dic_util_quit().
      - (uim_dict_anthy_close) : Call dict_anthy_exit().
    * helper/dict-word-list-win-gtk.c (help_about_action_cb) :
      Workaround for the warning on C89 string length limit.  But
      still remain the problem on line 139...

2006-05-11 Konosuke Watanabe <sasugaanija@gmail.com>

    * uim/slib.c
     - Suppress alloca definition error on Solaris.

2006-05-11 Etsushi Kato <ek.kato@gmail.com>

    * helper/Makefile.am : Remove GNOME2 flags.

2006-05-11 Etsushi Kato <ek.kato@gmail.com>

    * xim/connection.cpp
    * xim/ximtrans.cpp
    * xim/compose.cpp
    * xim/ximic.cpp
    * xim/util.cpp
    * xim/ximim.cpp
    * xim/convdisp.cpp
    * xim/ximpacket.cpp
      - Fix #include "config.h" (bug #6839).
    * xim/helper.cpp
    * xim/canddisp.cpp
    * xim/locale.cpp
    * xim/main.cpp
    * xim/ximserver.cpp
      - Ditto.
      - Don't #define _GNU_SOURCE here since r3357 added
        AC_GNU_SOURCE.

2006-05-11 Etsushi Kato <ek.kato@gmail.com>

    * configure.ac
      - Show the default value of some options.
      - Remove unused '--without-gnome2' option.
      - Fix broken '--default-toolkit' option.
      - Add '--enable-pref' option (bug #2315).  Default is yes.
      - Add '--enable-warnings-into-error' option which adds '-Werror'
        flag into CFLAGS and CXXFLAGS (default is yes).
    * helper/Makefile.am : Correspond to '--enable-pref'.
    * qt/Makefile.am : Ditto.

2006-05-10 Masanari Yamamoto <h013177b@ice.nuie.nagoya-u.ac.jp>

    * xim/Makefile.am (uim_xim_CPPFLAGS) : Add -I$(top_builddir).

2006-05-10 Masanari Yamamoto <h013177b@ice.nuie.nagoya-u.ac.jp>

    * scm/mana.scm : Add the support of lerning the commit strings.
      (mana-get-commit-path) : Renamed from mana-get-commit-string.
      (mana-get-nth-path) : Renamed from mana-get-nth-candidate.
      (mana-learn) : New function.

2006-05-10 Masanari Yamamoto <h013177b@ice.nuie.nagoya-u.ac.jp>

    * fep/uim-fep.h : Add prototype of _debug_write.
    * fep/escseq.c (print_attr) : Remove.
    * fep/str.{c,h} : Some refactorings.

2006-05-09 Konosuke Watanabe <sasugaanija@gmail.com>

    * uim/uim-func.c
    * uim/skk.c
    * uim/uim-helper-client.c
    * uim/uim-helper-server.c
     - Suppress alloca / bzero definition errors on Solaris.

2006-05-08 Konosuke Watanabe <sasugaanija@gmail.com>

    * emacs/context.c
     - Fix compile error of context.c committed on r3395.

2006-05-08 Konosuke Watanabe <sasugaanija@gmail.com>

    * uim-key.el
    * uim-keymap.el
    * uim.el
     - Improve menu-bar and tool-bar handling on GNU Emacs

2006-05-08 Konosuke Watanabe <sasugaanija@gmail.com>

    * emacs/preedit.c
    * emacs/preedit.h
    * emacs/context.c
     - Keep preedit-mode when either candidates or preedit strings
       exist in uim-el-agent.
    * emacs/uim-el-agent.c
     - Output preedit strings and candidates whether libuim
       processes the input key.

2006-05-08 Konosuke Watanabe <sasugaanija@gmail.com>

    * emacs/uim-key.el
     - Fix bug; uim.el falls into infinite loop when C-x key is pressed
       on prime

2006-05-08 Etsushi Kato <ek.kato@gmail.com>

    * qt/chardict/chardict-chargridview.cpp : Suppress compiler
      warning.

2006-05-07 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * pixmaps/prime.png
      - Trim resolution from 68*53 to 64*64. No colored pixels are lost
        even if very subtle
      - Adjust dot position to get better result on a scaling-down. Now
        you can see the taiyaki's mouth on 16*16 pixels

2006-05-07 Konosuke Watanabe <sasugaanija@gmail.com>

    * Makefile.am
     - Add uim-el-types.h

2006-05-07 Konosuke Watanabe <sasugaanija@gmail.com>

    * uim-el-types.h
     - New file
     - Aggregate structures' declaration
    * callback.h
    * candidate.h
    * context.h
    * encoding.h
    * helper.h
    * key.h
    * output.h
    * preedit.h
    * prop.h
    * uim-el-agent.h
     - include uim-el-types.h
    * callback.c
    * context.c
    * helper.c
    * uim-el-helper-agent.c
     - Add support of "custom_reload_notify"
     - revert helper_send_im_change_whole_desktop

2006-05-07 Etsushi Kato <ek.kato@gmail.com>

    * helper/pref-gtk.c (delete_event_cb) : Fix bug #6836.

2006-05-07 Etsushi Kato <ek.kato@gmail.com>

    * fep/key.c (escape_sequence2key) : Fix parentheses.

2006-05-07 Konosuke Watanabe <sasugaanija@gmail.com>

    * uim.el
    * uim-var.el
    * uim-key.el
     - Rewrite function key-map lookup part
     - Improve prefix argument support
     - Remove uim-replace-keyvec-with-functionkeymap and
       uim-lookup-function-key-map (unused)
    * uim-keymap.el
     - Fix escape keymap

2006-05-07 Etsushi Kato <ek.kato@gmail.com>

    * xim/ximtrans.cpp : Fix compiler warning.
    * xim/ximserver.cpp : Ditto.

2006-05-07 Etsushi Kato <ek.kato@gmail.com>

    * qt/pref-customwidgets.cpp
    * qt/immodule-quiminputcontext.cpp
    * qt/toolbar-standalone-qt.cpp
    * qt/immodule-candidatewindow.cpp
      - Suppress compiler warnings about unused parameter.

2006-05-07 Etsushi Kato <ek.kato@gmail.com>

    * qt/chardict/chardict-unicodeviewwidget.cpp : Use uint for
      unicode character.
    * qt/chardict/chardict-bushuviewwidget.cpp : Bug fix for reading
      EUC-JP encoded text.

2006-05-07 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * configure.ac
      - Add check for rsvg(1)
    * pixmaps/Makefile.am
      - (EXTRA_DIST): Remove $pixmaps_DATA
      - (pixmaps_DATA): Replace with dist_pixmaps_DATA
      - (SVGS, SVG_PNGS, NATIVE_PNGS, PNGS, dist_pixmaps_DATA): New
        variable
      - (.svg.png, clean-svgpng): New target
    * pixmaps/direct.svg
    * pixmaps/direct_input.svg
    * pixmaps/ja_azik.svg
    * pixmaps/ja_direct.svg
    * pixmaps/ja_fullwidth_alnum.svg
    * pixmaps/ja_halfwidth_alnum.svg
    * pixmaps/ja_halfwidth_katakana.svg
    * pixmaps/ja_hiragana.svg
    * pixmaps/ja_kana.svg
    * pixmaps/ja_katakana.svg
    * pixmaps/ja_nicola.svg
    * pixmaps/ja_pocketbell.svg
    * pixmaps/ja_romaji.svg
    * pixmaps/off.svg
    * pixmaps/on.svg
    * pixmaps/prime_mode_application.svg
    * pixmaps/skk.svg
    * pixmaps/tcode.svg
    * pixmaps/tutcode.svg
      - New file
    * pixmaps/skk.png
      - Removed
    * pixmaps/AUTHORS
    * pixmaps/indication-id.txt
      - Update

2006-05-06 Konosuke Watanabe <sasugaanija@gmail.com>

    * xim/connection.cpp
     - Add #include "uim/uim-stdint.h" to declare `uintptr_t'

2006-05-06 Konosuke Watanabe <sasugaanija@gmail.com>

    * emacs/Makefile.am
     - Add uim-el-helper-agent.

2006-05-06 Konosuke Watanabe <sasugaanija@gmail.com>

    * Add new external process "uim-el-helper-agent" to process
      messages from uim-helper-server immediately.
    * Now input with uim-input-pad-ja is available.
    
    * emacs/uim-helper.el
     - New file
     - Functions to process helper messages.
    * emacs/uim-var.el
     - Add new variables for helper message processing.
    * emacs/uim.el
     - Add new response message type "h" for uim-el-helper-agent.
     - Start up uim-el-helper-agent.
     - Fix indentation.
    * emacs/callback.c
    * emacs/callback.h
     - Stop immediate output of committed string in callback function.
       Keep it in buffer and output at end of each iteration.
     - Remove helper_send_im_change_whole_desktop calling from
       switch_system_global_im_cb.
    * emacs/commit.c
    * emacs/commit.h
     - Remove do_commit and add new functions to stack committed strings.
    * emacs/context.c
    * emacs/context.h
     - Add new global variable "focused" for simplification of
       uim focus managing.
     - Add new function for committed string output.
     - Remove calls of uim_helper_client_focus_out and
       uim_helper_client_focus_in and add helper_send_message instead.
    * emacs/helper-message.c
    * emacs/helper-message.h
     - New file
     - Provide simple encode/decode function.
      * For passing multibyte characters to uim-el-helper-agent
        through Emacs...
    * emacs/helper.c
    * emacs/helper.h
     - Remove helper_send_im_change_whole_desktop.
     - Simplify helper_handler.
     - Remove direct communication with helper_server.
    * emacs/output.c
    * emacs/output.h
     - Remove output_enable flag.
     - Now a_printf and a_putchar are same as printf and putchar.
    * emacs/prop.c
    * emacs/prop.h
     - Remove direct communication with helper_server.
    * emacs/uim-el-agent.c
    * emacs/uim-el-agent.h
     - Add new command "HELPER" and "NOP"
     - Restructure command handler.
     - Remove helper-server related codes.
    * emacs/uim-el-helper-agent.c
    * emacs/uim-el-helper-agent.h
     - New file
     - Receive messages from uim-helper-server and output them to STDOUT.
     - Read commands from STDIN and send them to uim-helper-server.

2006-05-06 Konosuke Watanabe <sasugaanija@gmail.com>

    * emacs/uim-key.el
     - Apply proposed patch at bug #6603 (by Shun-ichi TAHARA)
     - Fix indentation.

2006-05-06 Konosuke Watanabe <sasugaanija@gmail.com>

    * emacs/uim-leim.el
     - Fix incorrect variable name which causes an error at IM switching.

2006-05-06 Konosuke Watanabe <sasugaanija@gmail.com>

    * emacs/uim-util.el
     - Enable uim-vertical-motion-exec on Emacs-22.x since its
       vertical-motion function is unreliable.
     - Fix typo.

2006-05-06 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim.h
    * uim/uim-internal.h
      - Fix 'extern "C" {' location (#include directives should be
        excluded)
    
    * helper/candwin-gtk.c
      - Fix #include <glib/gprintf.h> with <glib.h> as the synopsis of the
        glib reference manual instructs
    * gtk/gtk-im-uim.c
      - Add #include <glib.h> which replace implicit glib.h inclusion of
        r3367

2006-05-06 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * examples/uim-custom/uim-custom-variable.c
      - (inspect_custom): Fix a member dereference

2006-05-05 Masahito Omote <omote@utyuuzin.net>

    * uim/uim-func.c (uim_sizeof_sexp_str): Fix segv because of my mistake.

2006-05-05 Masahito Omote <omote@utyuuzin.net>

    * This commit fixes warnings when compiling with gcc-4.1.
      - configure.ac: Use $ac_cv_c_compiler_gnu and $ac_cv_cxx_compiler_gnu
        to check whether using gcc or not.
      - fep/str.c: Remove glibc hack.
      - uim/uim-util.c: Remove glibc hack.
      - uim/slib.c:
        + Remove glibc hack.
        + Supress warnings.
      - uim/uim-func.c: Comment out unused va_arg(ap, int).
      - xim/connection.cpp: Supress warning.
      - examples/uim-custom/uim-custom-variable.c: Supress warning.

2006-05-05 Etsushi Kato <ek.kato@gmail.com>

    * scm/prime.scm : Comment out debug messages (bug #5909).

2006-05-05 Etsushi Kato <ek.kato@gmail.com>

    * gtk/gtk-im-uim-c : Remove redundant #include <glib/gprintf.h>.

2006-05-04 Masahito Omote <omote@utyuuzin.net>

    * This commit is the same as r3324. From this commit, -Werror is enabled.
      Thus compilation error can be happened.
      - gtk/gtk-im-uim.c: Supress warning.
      - emacs/prop.c: Ditto
      - helper/pref-gtk-custom-widgets.c: Ditto.
      - helper/eggtrayicon.c: Ditto.
      - helper/im-switcher-gtk.c: Ditto.
      - uim/m17nlib.c: Ditto.
      - uim/slib.c: Ditto.
      - confiugre.ac: Add -Werror and -pipe to CFLAGS and CXXFLAGS.
    * Static linking option for anthy plugin is added. You can enable it by adding
      --enable-anthy-static in configure. If problem, please revert.
      - uim/anthy.c: Adding support for static linking option.
      - uim/Makefile.am: Ditto
      - uim/uim.c: Ditto.
      - configure.ac: Add --enable-anthy-static option.

2006-05-04 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/im-switcher.scm
      - (imsw-propagation): Removed and replaced with custom variable
      - Remove unneeded FIXME comment
    * scm/im-custom.scm
      - (custom-group menu-imsw): New custom group
      - (custom toolbar-show-action-based-switcher-button?): Change
        subgroup to menu-imsw
      - (custom imsw-propagation): New custom variable

2006-05-04 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/im.scm
      - (context-focused?): New procedure
    * scm/im-switcher.scm
      - (context-refresh-switcher-widget!): Propagate widget-conf only if
        focused (does not work yet)

2006-05-03 Etsushi Kato <ek.kato@gmail.com>

    * scm/canna.scm
    * scm/canna-key-custom.scm
      - Enable rotate transposing state as in uim-anthy committed on
        r3361 and r3362.
    * scm/mana.scm
    * scm/mana-key-custom.scm
      - Ditto.
    * scn/anthy.scm (anthy-proc-transposing-state) : Fix indentation.

2006-05-03 Etsushi Kato <ek.kato@gmail.com>

    * scm/anthy-key-custom.scm : Use "Muhenkan" key as a rotate
      transposing state key (bug #6604, Shun-ichi TAHARA).

2006-05-03 Etsushi Kato <ek.kato@gmail.com>

    * scm/anthy.scm : Add a functionality to rotate transposing state
      proposed by Shun-ichi TAHARA (bug #6604).
    (anthy-proc-transposing-state) : Handle rotation of the
      transposing state.  Handle anthy-begin-conv-key? and
      anthy-cancel-key?
    (anthy-proc-input-state-with-preedit) : Don't set
      anthy-proc-transposing-state here, and set in
      anthy-proc-transposing-state instead.
    (anthy-context-transposing-state-preedit) : Use preedit-reverse
      instaed of preedit-underline for the transposing text.
    (anthy-proc-converting-state) : Handle transposing keys.

2006-05-03 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-scm.c
      - Include uim-stdint.h
      - (uim_scm_gc_protect_stack_internal): Suppress "returning local
        address" warning

2006-05-02 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * configure.ac
      - Specify more safe file on AC_CONFIG_SRCDIR
      - Replace AM_CONFIG_HEADER with AC_CONFIG_HEADERS
      - Add 'dist-bzip2' option to AM_INIT_AUTOMAKE
      - Reorder macros in accordance with the recommended layout

2006-05-02 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim.c
    * uim/uim-util.c
    * uim/uim-scm.c
    * uim/uim-module-manager.c
    * uim/uim-internal.h
    * uim/uim-helper.c
    * uim/uim-custom.c
    * uim/uim-compat-scm.c
    * uim/slib.c
    * uim/skk.c
    * uim/siod.h
    * uim/prime.c
    * uim/plugin.c
    * uim/mana.c
    * uim/m17nlib.c
    * uim/intl.c
    * uim/canna.c
      - Fix #include "config.h" with <config.h>
      - Fix location of #include <config.h>
      - See "Configuration Header Files" section of autoconf.info about
        the change. Please follow this in other directories also

2006-05-02 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * m4/ax_create_stdint_h.m4
      - New file
    * m4/Makefile.am
      - (EXTRA_DIST): Add ax_create_stdint_h.m4
    * configure.ac
      - Add AX_CREATE_STDINT_H
      - Add AC_GNU_SOURCE
    * uim/Makefile.am
      - (DISTCLEANFILES):
        * New variable
        * Add uim-stdint.h
    * fep/str.c
      - Remove direct definition of __USE_XOPEN which replaced with
        AC_GNU_SOURCE
    
    * uim/plugin.c
      - Include uim-stdint.h
      - (plugin_load): Suppress warning
    
    * uim/uim-scm.c
      - (uim_scm_gc_protect_stack_internal): Ditto
    
    * uim/m17nlib.c
      - (pushback_input_method): Ditto
    
    * uim/mana.c
      - (mana_ipc_send_command, eucjp_string_length): Ditto
    
    * uim/uim-util.c
      - (string_prefixp_internal): Modify a coding style

2006-04-22 Masahito Omote <omote@utyuuzin.net>

    * This commit fixes some warnings because of misprogramming. This commit
      have some dirty hack (especially in fep/*). If some problem happens,
      please revert them.
     - gtk/test/entry.c: Add prototypes.
     - gtk/caret-state-indicator.c:
       + change #include order.
       + (caret_state_indicator_update): Set value got from g_list_remove.
     - fep/str.c
       + strwidth (str_byte, nr_wchars): Change type to size_t from int.
       + byte2width:
         o (n, str_byte, nr_wchars): Change type to size_t from int.
         o Fix bugs not allocating '\0' termination.
         o Add dirty hack in mbsrtowcs caller because of glibc's stupid
           implementation.
       + byte2width:
         o (n, str_byte, nr_wchars): Change type to size_t from int.
         o Fix bugs not allocating '\0' termination.
         o Add dirty hack in mbsrtowcs caller because of glibc's stupid
           implementation.
     - str.h: Sync with the str.c's change.
     - fep/callbacks.c
       + (strlen): Cast to int for comparing with signed int parameters.
     - fep/escseq.c:
       + (strlen): Ditto.
     - helper/toolbar-common-gtk.c:
       + (register_icon): Set value got from g_list_append.
     - uim/uim-custom.c
       + Remove redifinition of uim_custom_key_list_free. This prototype is already
         defined in uim-custom.h).
     - uim/uim-util.c:
       + string_prefixp_internal: Add dirty hack for glibc's stupid implementation.
       + iterate_lists:
         - (rest, rests): Initialize as null list.
     - uim/m17nlib.c: Surround #if 0 in unused functions.
     - uim/plugin.c: Change substition of dlopen.
     - uim/slib.c: Add dirty hack for glibc's stupid implementation.

2006-04-20 Etsushi Kato <ek.kato@gmail.com>

    * emacs/key.c
    * fep/key.c
    * gtk/key-util-gtk.c
    * helper/im-switcher-gtk.c
    * helper/pref-gtk-custom-widgets.c
    * helper/pref-gtk.c
    * helper/toolbar-standalone-gtk.c
    * qt/immodule-quiminputcontext.cpp
    * qt/pref-customwidgets.cpp
    * scm/m17nlib.scm
    * scm/scim.scm
    * uim/uim-key.c
    * uim/uim.h
    * xim/ximserver.cpp
      - Add 'Kanji' and 'Hiragana_Katakana' key handling (Bug #6605,
        Shun-ichi TAHARA).

2006-04-13 Masanari Yamamoto <h013177b@ice.nuie.nagoya-u.ac.jp>

    * fep/helper.c (helper_handler) : Handler commit_string as UTF-8 if
      charset specifier is not available. Thanks nosuke.

2006-04-12 Jae-hyeon Park <jhyeon@gmail.com>

    * scm/byeoru-symbols.scm
      - Added all the Box Drawing symbols in the Unicode chart
        (from U+2500 to U+257F)

2006-04-06 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * gnuify-changelog.pl
      - Move to tools
    * tools/gnuify-changelog.pl
      - Update yusuke's address
    * Makefile.am
      - (.PHONY):
        * Remove ChangeLog
        * Add FORCE
      - (FORCE): New phony target
      - (ChangeLog):
        * Follow the script move
        * Depend on FORCE instead of being a phony target
    * configure.ac
      - Add -Wredundant-decls to CFLAGS

2006-04-04 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * AUTHORS
      - Update

2006-04-02 Konosuke Watanabe <sasugaanija@gmail.com>

    * emacs/output.c : Fix backslash escape.

2006-04-02 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/plugin.c
      - (plugin_unload_internal): Replace macros deprecated in r3218 with
        perl -i -pe 's/\b(N?(FALSE|TRUE)P)\b/UIM_SCM_\1/g' *.c
    * uim/intl.c
      - (intl_bind_textdomain_codeset): Ditto
    * uim/uim-func.c
      - (im_shift_page_candidate): Ditto
    * uim/uim-util.c
      - (rk_find_seq, rk_find_partial_seq, rk_expect_seq, c_setenv,
        iterate_lists, iterate_lists, find_tail): Ditto
    * uim/skk.c
      - (find_cand_array_lisp, skk_get_entry, skk_get_nth_candidate,
        skk_get_nr_candidates, make_comp_array_from_cache,
        find_comp_array_lisp, skk_get_completion, skk_get_nth_completion,
        skk_get_nr_completions, skk_clear_completions, skk_get_dcomp_word,
        skk_commit_candidate, skk_purge_candidate): Ditto
    * doc/COMPATIBILITY
      - Update

2006-04-02 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-scm.h
      - (UIM_SCM_FALSEP, UIM_SCM_NFALSEP): New macro
      - (FALSEP, NFALSEP):
        * Mark as deprecated
        * Redefined as alias to UIM_SCM_FALSEP() and UIM_SCM_NFALSEP()
      - (TRUEP, NTRUEP): Mark as deprecated
    * uim/uim-scm.c
      - (uim_scm_c_bool, uim_scm_load_file, uim_scm_string_equal): Follow
        the deprecation
    * uim/uim-compat-scm.c
      - (uim_scm_symbol_value_int_internal,
        uim_scm_symbol_value_str_internal, uim_scm_c_str_failsafe): Ditto
      - (uim_scm_symbol_value):
        * Ditto
        * Fix incorrect TRUEP() with NFALSEP()
    * doc/COMPATIBILITY
      - Add new section "Deprecate truth predicates for uim-scm"

2006-03-31 Etsushi Kato <ek.kato@gmail.com>

    * gtk/gtk-im-uim.c (on_client_widget_grab_notify) : Fix bug #6345.*

2006-03-30 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/Makefile.am
      - (libuim_la_LDFLAGS, libuim_custom_la_LDFLAGS): Remove
        -export-symbols-regex. See the added comment for the detail

2006-03-25 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * configure.ac
      - Add check for execv, execvp, strdup, snprintf
    * uim/uim-ipc.c
      - (uim_ipc_open_command_with_option): Replace unneeded execvp(3)
        with execv(3) for fullpath execution. This change only affects
        semantic sanity. The previous execvp(3)'ed code does not have a
        security problem since it certainly contains absolute path prefix
        which contains slash. The execvp(3) specification ensures that the
        command name is treated as absolute path without any path
        searching if a slash character is contained in the command argument.

2006-03-25 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/Makefile.am
      - (libuim_la_LDFLAGS, libuim_custom_la_LDFLAGS): Add missing
        -export-dynamic to increase portability
      - (libuim_custom_la_LIBADD): Add missing libuim.la

2006-03-20 Etsushi Kato <ek.kato@gmail.com>

    * helper/toolbar-common-gtk.c (popup_prop_menu) : Bug fix.

2006-03-20 Masahito Omote <omote@utyuuzin.net>

    * uim.desktop.in.in: Remove 'MimeType=text/plain'.
      (See http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=345711)

2006-03-12 Etsushi Kato <ek.kato@gmail.com>

    * qt/toolbar-common-uimstateindicator.h (class QHelperPopupMenu) :
      Use indicationIdStr as an argument for insertHelperItem.
    * qt/toolbar-common-uimstateindicator.cpp : Include "config.h" for
      UIM_PIXMAPSDIR.
    (ICONDIR) : New.
    (UimStateIndicator::propListUpdate) : Follow the change in icon
      support to helper protocol.
    (QHelperPopupMenu::insertHelperItem) : Use indicationIdStr as an
      argument and draw its icon if possible.

2006-03-05 Masanari Yamamoto <h013177b@ice.nuie.nagoya-u.ac.jp>

    * configure.ac : Add check for sys/termios.h.
    * fep/callbacks.c
      (switch_app_global_im_cb) : New function.
      (switch_system_global_im_cb) : New function.
      (prop_label_update_cb) : Remove.
    * fep/helper.c (helper_handler) : Remove handling of prop_label_get.

2006-03-03 Etsushi Kato <ek.kato@gmail.com>

    * xim/ximserver.cpp : Indentation fixes.

2006-03-03 Etsushi Kato <ek.kato@gmail.com>

    * emacs/callback.c (switch_app_global_im_cb) : Fix the behavior as
      intended.
    (switch_system_global_im_cb) : Ditto.
    * emacs/helper.c (helper_send_im_change_whole_desktop) : Fix
      message.

2006-03-02 Konosuke Watanabe <sasugaanija@gmail.com>

    * Suppor new API for Context-originated IM switching of
     other contexts
    
    * emacs/callback.c
    * emacs/callback.h
      - Add switch_app_global_im_cb and switch_system_global_im_cb.
    * emacs/helper.c
    * emacs/helper.h
      - Add helper_send_im_change_whole_desktop.
      - Remove redundant function calls from helper_im_changed.
    * emacs/context.c
    * emacs/context.h
      - Move method for burst-switching of the IM of contexts
       from helper.c to new function (switch_context_im_all).

2006-03-02 Konosuke Watanabe <sasugaanija@gmail.com>

    * emacs/prop.c
    * emacs/uim-leim.el
    * emacs/uim-var.el
    * emacs/uim.el
      - Improve IM status displayed on mode-line.

2006-03-02 Etsushi Kato <ek.kato@gmail.com>

    * xim/ximserver.cpp (changeContext) : Return immediately if IM of
      the context is not changed.

2006-03-02 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-func.c
      - (switch_im, switch_app_global_im, switch_system_global_im): Make
        the argument raw-context acceptable with retrieve_uim_context()
      - (uim_init_im_subrs): Rename uim-switch-im to im-switch-im
    * scm/im-switcher.scm
      - (imsw-actions):
        * Follow the renaming
        * Pass raw context instead of its ID
        * Remove some comments that explained in uim.h
    * scm/im.scm
      - (switch-im, toggle-im): Follow the renaming
    * doc/COMPATIBILITY
      - Add new section "Rename uim-switch-im to im-switch-im"
      - Update "Context-originated IM switching of other contexts"

2006-03-01 Etsushi Kato <ek.kato@gmail.com>

    * xim/ximserver.h (class InputContext) : Add
      switch_app_global_im() and switch_system_global_im() public
      member and switch_app_global_im_cb() and
      switch_system_global_im_cb() static member.
    * xim/ximserver.cpp (InputContext::createUimContext) : Set
      uim_set_im_switch_request_cb.
    (InputContext::switch_app_global_im) : New.
    (InputContext::switch_system_global_im) : Ditto.
    (InputContext::switch_app_global_im_cb) : Ditto.
    (InputContext::switch_system_global_im_cb) : Ditto.

2006-03-01 Etsushi Kato <ek.kato@gmail.com>

    * helper/toolbar-common-gtk.c (destroy_tooltips) : New.
    (popup_prop_menu) : Plug leak.
    (prop_button_destroy) : Ditto.
    (tool_button_destroy) : Ditto.

2006-03-01 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * gtk/gtk-im-uim.c
      - (switch_app_global_im_cb, switch_system_global_im_cb): New static
        function
      - (im_module_create): Register the new callbacks appeared in r3147
    * doc/COMPATIBILITY
      - Update "Context-originated IM switching of other contexts"

2006-03-01 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit add new optional uim API callback functions. Bridge
      developers, please support them.
    
    * uim/uim.h
      - (uim_set_im_switch_request_cb): New function decl
    * uim/uim-internal.h
      - (struct uim_context_): Add member 'switch_app_global_im_cb' and
        'switch_system_global_im_cb'
    * uim/uim-func.c
      - (switch_app_global_im, switch_system_global_im): New static function
      - (uim_init_im_subrs): Add initialization for
        im-switch-app-global-im and im-switch-system-global-im
    * uim/uim.c
      - (uim_create_context): Add initialization for the new members
      - (uim_set_im_switch_request_cb): New function
    * uim/libtool-version.mk
      - (libuim_version): Increment to 2:0:1
    * scm/im-switcher.scm
      - (imsw-propagation): New variable
      - (imsw-actions): Support the callbacks
    * doc/COMPATIBILITY
      - Add new section "Context-originated IM switching of other contexts"

2006-02-28 Masanari Yamamoto <h013177b@ice.nuie.nagoya-u.ac.jp>

    * fep/callbacks.c (prop_list_update_cb) :
      Use strwidth instead of strlen because label_width is a width of
      leaf_label.

2006-02-28 Etsushi Kato <ek.kato@gmail.com>

    * fep/callbacks.c (prop_list_update_cb) : Follow the changes in
      helper protocol.

2006-02-24 kzk <mover@hct.zaq.ne.jp>

    * uim.c
      - (uim_initialized): revert r3126. Excuse me for confusing. I thought
        gcc attached to Symbian M1000 SDK violates C Standard, but I found
        the bug at the other place. dmm...

2006-02-23 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/custom.scm
      - (key-list-strip-shift, key-list-strip-regular-shift): Simplify
    
    * scm/im-custom.scm
      - (usable-im-list): Cosmetic change
      - Simplify the get-hook for 'enabled-im-list

2006-02-23 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * test/test-action.scm
      - (testcase action): Follow the introduction of im-switcher.scm

2006-02-23 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit fix the startup-time absence of action-based IM
      switcher. Thanks nosuke for reporting
    
    * scm/im-switcher.scm
      - Remove load-time imsw-register-widget invocation
      - (imsw-add-im-switcher-widget): Invoke imsw-register-widget here
    * scm/im-custom.scm
      - (imsw-reconfigure): New procedure
      - Configure the set-hook for
        'toolbar-show-action-based-switcher-button? before the custom
        variable definition

2006-02-22 Konosuke Watanabe <sasugaanija@gmail.com>

    * emacs/callback.c
    * emacs/callback.h
    * emacs/context.c
    * emacs/helper.c
    * emacs/prop.c
    * emacs/prop.h
    * emacs/uim-el-agent.c
      - Remove prop_label related functions.

2006-02-22 Etsushi Kato <ek.kato@gmail.com>

    * helper/toolbar-common-gtk.c (popup_prop_menu) : Plug leak.
    (helper_toolbar_prop_label_update) : Ditto.
    
    * gtk/caret-state-indicator.c (caret-state-indicator.c) : Draw
      frame for the indicator labels.
    (caret_state_indicator_update) : Ditto.

2006-02-21 Etsushi Kato <ek.kato@gmail.com>

    * po/ja.po : Update.
    * helper/toolbar-applet-gnome.c : Ditto.

2006-02-21 Etsushi Kato <ek.kato@gmail.com>

    * helper/toolbar-common-gtk.c (popup_prop_menu) : Add icon to
      GtkCheckMenuItem.
    (prop_data_flush) : Delete icon data.
    (prop_button_append_menu) : Use icon_name as a argument.
    (helper_toolbar_prop_list_update) : Pass indication_id to
      prop_button_append_menu().
    (init_icon) : Register null icon.
    * pixmaps/Makefile.am : Add null.png.
    * pixmaps/null.png : New.  Transparent image just for padding.

2006-02-20 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/im-switcher.scm
      - Add FIXME comment

2006-02-20 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/im-switcher.scm
      - (context-refresh-switcher-widget!): New procedure
      - (imsw-add-im-switcher-widget): Support
        toolbar-show-action-based-switcher-button?
    * scm/im-custom.scm
      - (custom toolbar-show-action-based-switcher-button?): New custom
        variable. A set-hook for dynamic toolbar reconfiguration is also
        added
      - (custom 'toolbar-show-switcher-button?): Modify labels

2006-02-20 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit fix the corrupted menu labels of the action-based IM
      switcher. Thanks Etsushi
    
    * scm/im-switcher.scm
      - (imsw-actions): Remove inappropriate sender-side message translations
    * helper/toolbar-common-gtk.c
      - (safe_gettext): New static function
      - (helper_toolbar_prop_list_update): Translate iconic_label, label
        and tooltip_str by safe_gettext()
    * doc/HELPER-PROTOCOL
      - Describe about message translation for prop_list_get

2006-02-20 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit obsolete prop_label messages
    
    * uim/uim.h
      - (uim_set_prop_label_update_cb, uim_prop_label_update): Update
        the comment as 'obsoleted'
    * uim/uim-internal.h
      - (struct uim_context_): Remove members 'proplabelstr' and
        'prop_label_update_cb'
    * uim/uim-func.c
      - (im_update_prop_label): Removed
      - (uim_init_im_subrs): Remove registration of im-update-prop-label
    * uim/uim.c
      - (uim_create_context, uim_set_prop_label_update_cb,
        uim_prop_label_update): Remove
    * scm/action.scm
      - (context-propagate-prop-label-update): Removed
      - (context-propagate-widget-states): Remove
        context-propagate-prop-label-update invocation
    * test/test-action.scm
      - (test context-propagate-prop-label-update): Removed
      - (test context-propagate-widget-states): Modify prop-label tests
    * doc/COMPATIBILITY
      - Add new section "Obsolete prop_label handlings"
      - Remove description about 'prop_label_update' from section "Add
        icon support to helper protocol"
    * doc/HELPER-PROTOCOL
      - Remove description about 'prop_label_get' and 'prop_label_update'

2006-02-20 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * test/test-action.scm
      - (test indicator-new, test activity-indicator-new, test
        widget-state, test widget-update-state!, test
        widget-debug-message, test indication-compose-label, test
        indication-compose-branch, test indication-compose-leaf, test
        widget-compose-live-branch, test
        context-propagate-prop-label-update, test
        context-propagate-prop-list-update, test
        context-propagate-widget-states, test
        context-propagate-widget-configuration): Follow the recent helper
        message format changes

2006-02-19 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * doc/HELPER-PROTOCOL
      - Change field names appropriately. The message format itself is not
        changed

2006-02-19 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/im-switcher.scm
      - (imsw-actions):
        * Fix idname comparison
        * Add comment
      - (imsw-widget-codeset, imsw-add-im-switcher-widget): New procedure
      - (context-init-widgets!, context-list-replace-widgets!): Fix the
        duplicated button problem with imsw-add-im-switcher-widget. Thanks
        Etsushi for the report

2006-02-19 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim.c
      - (uim_initialized): Add a comment

2006-02-19 kzk <mover@hct.zaq.ne.jp>

    * uim/uim.c
      - (uim_initialized): initialize with 0

2006-02-18 Etsushi Kato <ek.kato@gmail.com>

    * uim/uim.c (uim_prop_list_update) : Add sanity check.
    (uim_prop_label_update) : Ditto.
    
    * xim/ximserver.cpp (InputContext::createUimContext) : Obsolete
      prop_label.
    (InputContext::get_caret_state_label_from_prop_list) : New.
    (InputContext::update_prop_list) : Simplify with
      get_caret_state_label_from_prop_list().
    * xim/main.cpp (xEventRead) : Remove redundant XFlush().
    * xim/ximserver.h (class InputContext) : Add
      get_caret_state_label_from_prop_list() private member.
    
    * gtk/gtk-im-uim.c (get_caret_state_label_from_prop_list) : New.
    (update_prop_list_cb) : Set caret state indicator with this
      callback.
    * gtk/caret-state-indicator.c : Include <string.h> for strcmp(3).
    (caret_state_indicator_paint_window) : Bug fix.
    (caret_state_indicator_new) : Use hbox as a container of state
      labels.
    (caret_state_indicator_update) : Add each label into the hbox
      separately.

2006-02-18 Etsushi Kato <ek.kato@gmail.com>

    * helper/toolbar-common-gtk.c
    (BUTTON_IM) : Removed.
    (im_menu_activate) : Ditto.
    (popup_im_menu) : Ditto.
    (button_pressed) : Follow the removal of the function.
    (helper_toolbar_prop_label_update) : Update icon.

2006-02-18 Etsushi Kato <ek.kato@gmail.com>

    * gtk/gtk-im-uim.c (parse_helper_str) : Obsolete prop_label.
    (im_uim_focus_in) : Ditto.

2006-02-18 Etsushi Kato <ek.kato@gmail.com>

    * gtk/gtk-im-uim.c (im_module_create) : Obsolete prop_label.
    (im_uim_finalize) : Call im_uim_set_client_window() with NULL to
      cleanup signals.

2006-02-18 Etsushi Kato <ek.kato@gmail.com>

    * helper/toolbar-common-gtk.c : Obsolete IM button.
    (OBJECT_DATA_IM_BUTTON)
    (im_data_flush)
    (im_button_append_menu)
    (helper_toolbar_im_list_updata)
      - Removed.
    (helper_toolbar_parse_helper_str) : Don't parse "focus_in" and
      "im_list".
    (toolbar_new) : Don't create IM button.

2006-02-18 Etsushi Kato <ek.kato@gmail.com>

    * pixmaps/Makefile.am : Add canna.png into pixmaps_DATA.
    * pixmaps/AUTHORS : New.
    * pixmaps/canna.png : New from scim-imengine-icons.tar.gz.

2006-02-18 Etsushi Kato <ek.kato@gmail.com>

    * pixmaps/Makefile.am : Add anthy.png,, prime.png, and skk.png into
      pixmaps_DATA.
    * pixmaps/anthy.png : New from scim-imengine-icons.tar.gz.
    * pixmaps/prime.png : Ditto.
    * pixmaps/skk.png : Ditto.

2006-02-18 Etsushi Kato <ek.kato@gmail.com>

    * helper/toolbar-common-gtk.c : Icon support for prop buttons.
    (uim_factory) : New.
    (uim_icon_list) : New.
    (prop_button_create) : Add indication_id as a argument and use
      button with a icon if possible.
    (prop_button_append_menu) : Cosmetic change.
    (helper_toolbar_prop_list_update) : Pass indication_id for
      prop_button_create().
    (is_icon_registered) : New.
    (register_icon) : Change return type as gboolean.  Initialization
      part is moved to init_icon().
    (init_icon) : New.
    (toolbar_new) : Follow changes in register_icon() and init_icon().

2006-02-18 Konosuke Watanabe <sasugaanija@gmail.com>

    * qt/Makefile.am
      - Fix a problem that uim-im-switcher-qt cannot be compiled
        on some environments which don't have setenv(3) such as
        Solaris8.

2006-02-18 Konosuke Watanabe <sasugaanija@gmail.com>

    * emacs/uim.el
    * emacs/prop.c
      - Add partial support of new helper protocol.

2006-02-17 Konosuke Watanabe <sasugaanija@gmail.com>

    * emacs/uim.el
      - Fix problem that buffer's first modified history is not
       recorded onto buffer-undo-list.

2006-02-17 Konosuke Watanabe <sasugaanija@gmail.com>

    * emacs/uim-leim.el
    * emacs/uim-var.el
    * emacs/uim.el
      - Add a function instead of kill-all-local-variables to
       reset only local variables which are provided by uim.el
      -  Move encoding initializing part to uim-mode-on
       to re-initialize encoding when uim-el-agent has been restarted.

2006-02-17 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/skk-custom.scm
      - (skk-input-mode-indication-alist): Strip multiplexed IM name on
        iconic-label of input mode
    * scm/prime-custom.scm
      - (prime-input-mode-indication-alist):
        * Ditto
        * Add action_prime_mode_application
    * NEWS
      - Update

2006-02-17 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/action.scm
    * scm/skk-custom.scm
    * scm/byeoru.scm
    * scm/m17nlib.scm
    * scm/prime.scm
    * scm/generic.scm
    * scm/mana-custom.scm
    * scm/anthy-custom.scm
    * scm/direct.scm
    * scm/anthy.scm
    * scm/canna-custom.scm
    * scm/skk.scm
    * scm/tutcode.scm
    * scm/mana.scm
    * scm/prime-custom.scm
    * scm/canna.scm
    * scm/scim.scm
      - Rename all indication-id in action definitions appropriately
    * pixmaps/Makefile.am
      - (EXTRA_DIST): Add indication-id.txt
    * pixmaps/indication-id.txt
      - New file
      - List indication-ids

2006-02-17 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/skk.scm
      - (action action_skk_hiragana, action action_skk_katakana, action
        action_skk_hankana, action action_skk_latin, action
        action_skk_wide_latin): Strip multiplexed IM name on iconic-label
        of input mode
    * scm/tutcode.scm
      - (action action_tutcode_direct, action action_tutcode_hiragana,
        action action_tutcode_katakana): Ditto

2006-02-17 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit make helper protocol incompatible with former
      ones. Helper program developers, please read doc/HELPER-PROTOCOL and
      follow the changes
    
    * doc/HELPER-PROTOCOL
      - Revise 'prop_label_update' and 'prop_list_update'
    * doc/COMPATIBILITY
      - Add new section "Add icon support to helper protocol"
    * scm/action.scm
      - (indication-compose-label, indication-compose-leaf): Add
        indication-id into the message
    * helper/toolbar-common-gtk.c
      - (command_entry_len): Change type to guint
      - (helper_toolbar_check_custom, right_click_menu_create): Follow the
        type change of command_entry_len
      - (has_n_strs): New static function
      - (helper_toolbar_prop_list_update):
        * Follow the protocol change
        * Make protocol interpretation meaningful
        * Fix crash on invalid message
      - (helper_toolbar_prop_label_update):
        * Follow the protocol change
        * Make protocol interpretation meaningful

2006-02-15 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * helper/toolbar-common-gtk.c
      - (regist_icon, register_icon): Rename regist_icon() to register_icon()
      - (im_button_append_menu): Change coding style
      - Cosmetic changes

2006-02-15 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit add action-based IM switcher feature
    
    * scm/im-switcher.scm
      - New file
      - (imsw-indication-id-alist, imsw-iconic-label-alist,
        imsw-default-iconic-label): New variable
      - (imsw-indication-id, imsw-iconic-label, imsw-actions,
        imsw-register-widget): New procedure
      - (context-init-widgets-orig, context-list-replace-widgets-orig):
        New alias
      - (context-init-widgets!, context-list-replace-widgets!): New
        procedure overrides the same-name one in action.scm
      - Register widget 'widget_im_switcher
    * scm/Makefile.am
      - (SCM_FILES): Add im-switcher.scm

2006-02-15 Konosuke Watanabe <sasugaanija@gmail.com>

    * emacs/uim.el
    Suppress the illegal cursor movement after undo command execution.
    This problem appears on Emacs-22 only.

2006-02-14 Konosuke Watanabe <sasugaanija@gmail.com>

    * emacs/uim.el
    Fix mark activity in transient-mark-mode.

2006-02-08 Konosuke Watanabe <sasugaanija@gmail.com>

    * emacs/uim.el
     - Support auto-fill-mode.

2006-02-08 Konosuke Watanabe <sasugaanija@gmail.com>

    * emacs/context.c
    * emacs/context.h
    * emacs/encoding.c
    * emacs/helper.c
    * emacs/im.c
    * emacs/uim-el-agent.c
    * emacs/uim-el-agent.h
    * emacs/uim-leim.el
    * emacs/uim-var.el
    * emacs/uim.el
     - Simplify language and encoding managing.

2006-02-08 Etsushi Kato <ek.kato@gmail.com>

    * gtk/gtk-im-uim.c : Update comment.

2006-02-08 Etsushi Kato <ek.kato@gmail.com>

    * scm/anthy.scm (anthy-proc-input-state-with-preedit) : Handle
      "n1" sequence as in skk.scm.
    * scm/canna.scm (canna-proc-input-state-with-preedit) : Ditto.
    * scm/mana.scm (mana-proc-input-state-with-preedit) : Ditto.

2006-02-07 Etsushi Kato <ek.kato@gmail.com>

    * scm/im-custom.scm (toolbar-show-switcher-button?) : Set #f
      because IM switch is now available from a toolbar.

2006-02-07 Etsushi Kato <ek.kato@gmail.com>

    * helper/toolbar-applet-gnome.c : Indentation fixes.
    (uim_menu_xml) : Fix labels to be translated.
    (display_about_dialog) : Draw icon.

2006-02-07 Etsushi Kato <ek.kato@gmail.com>

    * helper/toolbar-common-gtk.c (calc_menu_position) : Fix menu
      position.

2006-02-06 Etsushi Kato <ek.kato@gmail.com>

    * gtk/gtk-im-uim.c (IMUIMContext) : Add comment about event_rec.
    (event_key_equal) : New.
    (init_event_key_rec) : New.
    (store_event_key) : New.
    (im_uim_filter_keypress) : Use event_key_equal instead of just
      comparing the time as a paranoia check.
    (im_uim_init) : Initialize event_rec totally.
    (handle_key_on_toplevel) : Store all event attributes.

2006-02-05 Etsushi Kato <ek.kato@gmail.com>

    * gtk/gtk-im-uim.c : Add toplevel event hack removed in r3014
      again for OOo 2.0 gtk plugin.

2006-02-04 Etsushi Kato <ek.kato@gmail.com>

    * xim/canddisp.cpp (Canddisp::show_caret_state) : Set terminator
      properly.

2006-02-04 Etsushi Kato <ek.kato@gmail.com>

    * xim/ximserver.cpp (InputContext::update_prop_list) : Show caret
      state indicator with this function instead of
      InputContext::update_prop_label.
    (InputContext::update_prop_label) : Ditto.

2006-02-03 Etsushi Kato <ek.kato@gmail.com>

    * helper/toolbar-common-gtk.c (popup_im_menu) : Remove inefficient
      g_list_nth_data().
    (popup_prop_menu) : Ditto.

2006-02-03 Etsushi Kato <ek.kato@gmail.com>

    * gtk/gtk-im-uim.c : Don't set candwin's text widget as
      a cur_toplevel.
    (cwin_list) : New.
    (update_cur_toplevel) : Check candwin's text_view.
    (im_uim_init) : Update cwin_list.
    (im_uim_finalize) : Ditto.

2006-02-03 Etsushi Kato <ek.kato@gmail.com>

    * gtk/gtk-im-uim.c (im_uim_finalize) : Add #if IM_UIM_USE_TOPLEVEL
      missing in r3090.

2006-02-03 Etsushi Kato <ek.kato@gmail.com>

    * gtk/gtk-im-uim.c (im_uim_finalize) : Remove signal handlers on
      finalize.

2006-02-03 Etsushi Kato <ek.kato@gmail.com>

    * gtk/gtk-im-uim.c (configuration_changed_cb) : New.  Send IM
      list if it is a focused context.
    (im_module_create) : Set configuration_changed_cb.
    * xim/helper.h : Make send_im_list global.
    * xim/helper.cpp : Ditto.
    * xim/ximserver.cpp (InputContext::configuration_changed) : Send
      IM list if focused.

2006-02-02 Etsushi Kato <ek.kato@gmail.com>

    * helper/toolbar-common-gtk.c : Enable IM selection from toolbar.
    (OBJECT_DATA_IM_BUTTON) : New.
    (OBJECT_DATA_BUTTON_TYPE) : Ditto.
    (im_menu) : Ditto.
    (BUTTON_IM) : New enum.
    (BUTTON_PROP) : Ditto.
    (BUTTON_TOOL) : Ditto.
    (im_menu_activate) : New.
    (popup_im_menu) : Ditto.
    (popup_prop_menu) : Recreate prop menu to flush old contents.
    (prop_button_pressed) : Rename to button_pressed.  Handle
      im_button, prop_button, and tool_button at once.
    (prop_button_release) : Rename argument.
    (tool_button_pressed_cb) : Removed.
    (prop_button_create) : Set the type for buttons.  Follow the
      renaming.
    (helper_toolbar_prop_list_update) : Ditto.
    (im_data_flush) : New.
    (im_button_append_menu) : New.
    (helper_toolbar_im_list_update) : New.
    (helper_toolbar_parse_helper_str) : Handle "focus_in" and
      "im_list" messages.
    (uim_toolbar_get_im_list) : New.
    (regist_icon) : Register "uim-icon".
    (toolbar_new) : Create IM menu button.  Get IM list at the
      startup.
    * helper/toolbar-systray-gtk.c (embedded_cb) : Get IM list.
    (main) : Cosmetic changes.

2006-02-02 Etsushi Kato <ek.kato@gmail.com>

    * helper/toolbar-common-gtk.c : Reflect custom toolbar settings
      on the fly.
    (_CommandEntry) : Rename pref_button_show_symbol member to
      custom_button_show_symbol.  Add show_button member.
    (helper_toolbar_prop_list_update) : Don't call
      uim_scm_symbol_value_bool every time.
    (helper_toolbar_check_custom) : New.
    (helper_toolbar_parse_helper_str) : Handle "custom_reload_notify"
      and update settings.
    (toolbar_new) : Initialize toolbar settings.

2006-02-02 Etsushi Kato <ek.kato@gmail.com>

    * helper/toolbar-common-gtk.c (popup_prop_menu) : Destroy old menu
      items to plug leak.

2006-02-02 Etsushi Kato <ek.kato@gmail.com>

    * helper/toolbar-common-gtk.c (popup_pop_menu) : New.  Mostly
              moved from prop_button_released.
    (prop_button_pressed) : Popup menu with button 1.
    (prop_button_released) : Don't popup menu.
    (tool_button_pressed) : Don't exec command at button-press.
    (tool_button_clicked_cb) : New.  Exec command here.
    (helper_toolbar_prop_list_update) : Connect clicked signal.

2006-02-02 Etsushi Kato <ek.kato@gmail.com>

    * helper/toolbar-common-gtk.c
      - Reorder functions to remove static prototypes.
      - Massive renaming about functions and variables.
      - Indentation fixes.
    (BUTTON_WIDTH) : Removed.
    (BUTTON_HEIGHT) : Ditto.
    (OBJECT_DATA_MENU_BUTTONS) : Rename to OBJECT_DATA_PROP_BUTTONS.
    (OBJECT_DATA_TOOL_BUTTONS) : New.
    (menu_quit_activated) : Rename to right_click_menu_quit_activated.
    (menu_activated) : Rename to right_click_menu_activated.
    (prop_right_button_pressed) : Rename to right_button_pressed.
    (prop_menu_activate) : Rename local variable.  Use "prop_action"
      instead of "prop_name".
    (prop_button_pressed) : Cleanup.
    (prop_button_released) : Rename local variables.  Use
      "prop_action" instead of "prop_name".
    (toolbar_button_press_cb) : Rename to tool_button_pressed_cb and
      cleanup.
    (prop_data_flush) : Use "prop_action" instead of "prop_name".
    (button_destroy) : Rename to prop_button_destroy.
    (tool_button_destroy) : New.
    (menu_button_create) : Rename to prop_button_create.
    (menu_button_append_menu) : Rename to prop_button_append_menu.
      Use "prop_action" instead of "prop_name".
    (append_button) : Rename to append_prop_button.
    (append_tool_button) : New.
    (get_charset) : Simplify.
    (helper_toolbar_prop_list_update) : Distinguish prop_buttons and
      tool_buttons.  Cleanup name of local variables.
    (helper_toolbar_prop_label_update) : Plug leak and fix behavior.
    (helper_icon_prop_list_update) : Removed.
    (helper_icon_parse_helper_str) : Ditto.
    (fd_read_cb) : Simplify.
    (toolbar_new) : Rename local variable.

2006-02-02 Etsushi Kato <ek.kato@gmail.com>

    * helper/toolbar-systray-gtk.c : #include "uim/uim-helper.h" for
      uim_helper_client_get_prop_list().

2006-02-01 Etsushi Kato <ek.kato@gmail.com>

    * helper/toolbar-systray-gtk.c (embedded_cb) : New.  Connect to
      uim helper.
    (main) : Create toolbar with all icons again.  Get icons
      information after "embedded" signal to prevent getting incorrect
      size of icons.
    * helper/toolbar-common-gtk.c : Rename TYPE_TOOLBAR to
      TYPE_STANDALONE.
    (uim_helper_toolbar_new) : Rename to uim_toolbar_standalone_new.
    (uim_helper_trayicon_new) : Rename to uim_toolbar_trayicon_new.
      Use all icons as in other types of toolbar.
    (uim_helper_applet_new) : Rename to uim_toolbar_applet_new.
    (check_helper_connection) : Rename to
      uim_toolbar_check_helper_connection and remove static qualifier.
    (prop_button_released) : Follow the rename in
      check_helper_connection.
    (toolbar_new) : Don't connect to uim-helper at this time with
      TYPE_ICON.
    * helper/toolbar-standalone-gtk.c : Follow the rename in
      toolbar-common-gtk.c
    * helper/toolbar-applet-gnome.c : Ditto.

2006-02-01 Etsushi Kato <ek.kato@gmail.com>

    * helper/toolbar-systray-gtk.c (main) : Revert r3061 since it
      causes the character indicating input state unreadable.

2006-02-01 Etsushi Kato <ek.kato@gmail.com>

    * helper/toolbar-systray-gtk.c (main) : Use
      uim_helper_toolbar_new() instead of uim_helper_trayicon_new() to
      show all the icons.

2006-01-31 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * tools/trim-src.sh
      - Add fep, emacs, replace subdirs
      - Add more rewriting rules

2006-01-30 Etsushi Kato <ek.kato@gmail.com>

    * NEWS : Update.
    * gtk/key-util-gtk.c : Enclose #include <gdk/gdkx.h> with
      GDK_WINDOWING_X11.

2006-01-29 Etsushi Kato <ek.kato@gmail.com>

    * (_IMUIMContext) : Remove in_toplevel and event_rec member.
    (grab_widget) : New static variable.
    (remove_cur_toplevel) : New.  Remove toplevel key handler.
    (update_in_toplevel) : Rename to update_cur_toplevel.
    (update_cur_toplevel) : Update toplevel key handler.
    (on_client_widget_hierarchy_changed) : Follow the rename.
    (on_client_widget_grab_notify) : New.
    (update_client_widget) : Set grab_notify handler.  Follow the
      rename.
    (im_uim_filter_keypress) : Check grab instead of event time.
    (im_uim_focus_in) : Use update_cur_toplevel().
    (im_uim_focus_out) : Use remove_cur_toplevel().
    (im_uim_init) : Update.
    (handle_key_on_toplevel) : Don't store event time.

2006-01-28 Etsushi Kato <ek.kato@gmail.com>

    * gtk/gtk-im-uim.c : Again, use toplevel key event by default.
    (im_uim_focus_in) : Disconnect signal before connecting to new
      one.

2006-01-28 Etsushi Kato <ek.kato@gmail.com>

    * gtk/gtk-im-uim.c : Use snooper by default.

2006-01-27 Etsushi Kato <ek.kato@gmail.com>

    * gtk/gtk-im-uim.c
      - Reorder functions to get rid of static prototypes.
      - Rename functions which have im_uim prefix but not used for
        class function.
      - Add im_uim prefix for class functions which lack the prefix.
    (im_uim_commit_string) : Rename to commit_string.
    (im_uim_commit_cb) : Rename to commit_cb.
    (focus_in) : Rename to im_uim_focus_in.
    (focus_out) : Rename to im_uim_focus_out.
    (set_use_preedit) : Rename to im_uim_set_use_preedit.
    (set_client_window) : Rename to im_uim_set_client_window.
    (im_uim_send_im_list) : Rename to send_im_list.
    (im_uim_helper_disconnect_cb) : Rename to helper_disconnect_cb.
    (im_uim_parse_helper_str_im_change) : Rename to
      parse_helper_str_im_change.
    (im_uim_parse_helper_str) : Rename to parse_helper_str.
    (filter_keypress) : Rename to im_uim_filter_keypress.
    (uim_key_snoop) : Rename to key_snoop.

2006-01-27 Etsushi Kato <ek.kato@gmail.com>

    * gtk/gtk-im-uim.c (im_uim_init) : Initialize event_rec.time.
    (handle_key_on_toplevel) : No need to record hardware_keycode
      for now.

2006-01-27 Etsushi Kato <ek.kato@gmail.com>

    * gtk/gtk-im-uim.c (handle_key_on_toplevel) : No need to call
      gtk_window_activate_key() since it will be called later.

2006-01-26 Etsushi Kato <ek.kato@gmail.com>

    * gtk/gtk-im-uim.c (filter_keypress) : Don't check keycode.

2006-01-26 Etsushi Kato <ek.kato@gmail.com>

    * gtk/gtk-im-uim.c : Disable snooper by default.  Instead, bind
      key event at the toplevel widget.
    (cur_toplevel) : New static variable for IM_UIM_USE_TOPLEVEL.
    (cur_key_press_handler_id) : Ditto.
    (cur_key_release_handler_id) : Ditto.
    (_IMUIMContext) : Remove unused toplevel member.  Add widget,
      in_toplevel, and event_rec for IM_UIM_USE_TOPLEVEL.
    (focus_in) : Connect to key-press and key-release event of
      toplevel widget if IM_UIM_USE_TOPLEVEL.
    (focus_out) : Remove key handler for toplevel.
    (update_in_toplevel) : New.  Update in_toplevel if define
      IM_UIM_USE_TOPLEVEL.
    (widget_for_window) : New.  Get top level widget for gdkwindow.
    (on_client_widget_hierarchy_changed) : New.  Call
      update_in_toplevel().
    (update_client_widget) : New for IM_UIM_USE_TOPLEVEL.
    (set_client_window) : Call update_client_window() if define
      IM_UIM_USE_TOPLEVEL.
    (im_uim_init) : Initialize variables for IM_UIM_USE_TOPLEVEL.
    (handle_key_on_toplevel) : New.

2006-01-25 Jae-hyeon Park <jhyeon@gmail.com>

    * scm/byeoru.scm
      - Renamed (byeoru-graphic-key?) to (byeoru-non-control-key?).

2006-01-25 Etsushi Kato <ek.kato@gmail.com>

    * xim/ximim.cpp (XimIM_impl::forward_event) : Reply even if
      the type of incoming event is not known.

2006-01-24 Etsushi Kato <ek.kato@gmail.com>

    * helper/eggtrayicon.c : Sync with revision 1.8 from libegg.
    * helper/eggtrayicon.h : Sync with revision 1.5 from libegg.

2006-01-23 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * po/uim.pot
    * po/ja.po
    * po/ko.po
    * po/fr.po
      - Update

2006-01-23 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/byeoru.scm
      - (byeoru-graphic-key?): New procedure
      - (byeoru-key-to-candidates, byeoru-feed-romaja-key): Simplify with
        byeoru-graphic-key?
      - Please reform this with your intention, Jae-hyeon

2006-01-22 Etsushi Kato <ek.kato@gmail.com>

    * xim/locale.cpp
    * xim/helper.cpp
    * xim/main.cpp
    * xim/canddisp.cpp
      - Enclose #define _GNU_SOURCE.

2006-01-22 Jae-hyeon Park <jhyeon@gmail.com>

    * scm/byeoru.scm
      - Moved shift key check routine from (byeoru-feed-hangul-key)
        to (byeoru-key-to-candidates).  This enables input of key
        combinations such as Ctrl-Shift-T and Alt-Shift-< in Hangul mode.

2006-01-21 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * qt/qtgettext.h
      - (mygettext): New macro copied from _()
      - (_): Simplify with mygettext()
      - (N_): Stop converting to QString to be similar to original N_()
    * qt/pref-customwidgets.cpp
      - (CustomPathnameEdit::CustomPathnameEdit):
        * Fix runtime translation and xgettext handling
        * Change button labels
        * Describe the reason for labels
    * helper/pref-gtk-custom-widgets.c
      - (add_custom_type_pathname): Ditto

2006-01-21 Etsushi Kato <ek.kato@gmail.com>

    * helper/pref-gtk-custom-widgets.c (add_custom_type_pathname) :
      Set button label appropriately.

2006-01-21 Etsushi Kato <ek.kato@gmail.com>

    * qt/pref-customwidgets.cpp
    (CustomPathnameEdit::CustomPathnameEdit) : Set button label as
      intended.
    (CustomPathnameEdit::slotPathnameButtonClicked) : Use appropriate
      dialog corresponding to the type of pathname.

2006-01-21 Etsushi Kato <ek.kato@gmail.com>

    * qt/pref-customwidgets.cpp (CustomPathnameEdit::update) : Follow
      the change in uim-custom's pathname structure.
    (CustomPathnameEdit::setDefault) : Ditto.
    (CustomPathnameEdit::slotCustomTextChanged) : Ditto.

2006-01-21 Etsushi Kato <ek.kato@gmail.com>

    * helper/pref-gtk-custom-widgets.h : Create UimPrefFileEntry
      custom widget, which has GtkEntry and filetype attribute.
    * helper/pref-gtk-custom-widgets.c : Follow the changes in
      uim-custom's pathname structure.
    (uimpref_file_entry_get_type) : New for UimPrefFileEntry widget.
    (uimpref_file_entry_class_init) : Ditto.
    (uimpref_file_entry_init) : Ditto.
    (uimpref_file_entry_new) : Ditto.
    (custom_entry_changed_cb) : Follow the change in custom pathname
      structure.
    (sync_value_string) : Ditto.
    (custom_pathname_button_clicked_cb) : Ditto.  Now distinguish
      regular file and directory when opening a dialog.
    (add_custom_type_pathname) : Create UimPrefFileEntry instead of
      GtkEntry.
    (uim_pref_gtk_set_default_value) : Follow the change in custom
      pathname structure.

2006-01-21 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-util.c
      - (is_setugidp, setugidp): Rename is_setugidp to setugidp
      - (uim_init_util_subrs):
        * Follow the function renaming
        * Rename Scheme procedure name is-set-ugid? to setugid?
    * scm/init.scm
      - (load-user-conf): Follow the renaming
    * scm/plugin.scm
      - (uim-plugin-lib-load-path, uim-plugin-scm-load-path,
        load-module-conf, load-enabled-modules): Ditto
    * scm/skk.scm
      - (skk-read-personal-dictionary, skk-save-personal-dictionary):
        Ditto
    * scm/custom-rt.scm
      - (require-custom, custom-reload-user-configs): Ditto
    * doc/COMPATIBILITY
      - Add new section "Rename is-set-ugid? to follow the Scheme naming
        convention"

2006-01-20 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-util.h
      - (is_setugid): Removed
    * uim/uim-internal.h
      - (uim_issetugid): New function decl
    * uim/uim-helper.c
      - (is_setugid): Rename to uim_issetugid
      - (uim_issetugid):
        * Renamed from is_setugid()
        * Change return type to uim_bool
        * Simplify
      - (uim_helper_get_pathname): Follow the renaming
    * uim/uim-ipc.c
      - (uim_ipc_open_command_with_option): Ditto
    * uim/uim-util.c
      - (is_setugidp): Ditto
    * uim/uim.c
      - (uim_init_scm): Ditto
    * doc/COMPATIBILITY
      - Add section "Hide unintentionally exposed is_setugid()"

2006-01-20 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim.h
      - Revise the description about uim_bool to prevent misuses
    * gtk/gtk-im-uim.c
      - (im_uim_commit_string, update_prop_label_cb): Fix invalid boolean
        test expression for uim_bool. Although it is invalid, no problem
        will be occurred since the value is exactly UIM_TRUE or UIM_FALSE
        in this case
    * uim/prime.c
      - (use_unix_domain_socket): Change type to uim_bool
      - (prime_lib_init): Fix the invalid expression likewise
    * uim/uim-helper.c
      - (uim_helper_is_setugid): Simplify

2006-01-20 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/custom.scm
      - (custom-pathname?, custom-range): Fix broken pathname handling
    * test/test-custom.scm
      - All tests are passed
      - Update pathname tests
      - (testcase custom custom-pathname): New testcase
      - (test custom-pathname-type): New test

2006-01-20 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * doc/COMPATIBILITY
      - Add section "File type information of pathname custom type"

2006-01-20 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/libtool-version.mk
      - (libuim_version, libuim_custom_version): Update for uim 1.1.0

2006-01-20 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit complement the rest part for bug #5666. Test
      modification and doc/COMPATIBILITY update follows
    
    * scm/custom.scm
      - (custom-pathname?): Add check for pathname-type attr
      - (custom-pathname-type): New procedure
    * scm/im-custom.scm
      - (custom eb-dic-path): Follow the change of pathname type
    * scm/skk-custom.scm
      - (custom skk-dic-file-name, custom skk-personal-dic-filename,
        custom skk-uim-personal-dic-filename): Ditto
    * uim/uim-custom.c
      - (uim_custom_pathname_get): Support the pathname type

2006-01-20 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit change the custom API as said in bug
      #5666. Corresponding Scheme part is not changed yet.
    
    * uim/uim-custom.h
      - (enum UCustomPathnameType, struct uim_custom_pathname): New type
      - (union uim_custom_value): Change type of as_pathname to struct
        uim_custom_pathname *
    * uim/uim-custom.c
      - (uim_custom_pathname_get, uim_custom_pathname_new,
        uim_custom_pathname_free): New static function
      - (uim_custom_value_internal, uim_custom_value_free,
        uim_custom_set): Follow the changes

2006-01-20 Etsushi Kato <ek.kato@gmail.com>

    * xim/canddisp.cpp
    * xim/connection.cpp
    * xim/convdisp.cpp
    * xim/helper.cpp
    * xim/locale.cpp
    * xim/main.cpp
    * xim/util.cpp
    * xim/ximtrans.cpp
    * xim/ximic.cpp
    * xim/ximim.cpp
    * xim/ximpacket.cpp
    * xim/ximserver.cpp
      - Cosmetic changes, suppress compilation time warnings of unused
        parameters, and some optimizations about STL containers.

2006-01-20 Etsushi Kato <ek.kato@gmail.com>

    * helper/candwin-gtk.c : Fix comment.
    (tree_selection_changed) : Check cwin pointer as intended.

2006-01-20 Etsushi Kato <ek.kato@gmail.com>

    * helper/helper-candwin-gtk.c : Rename to candwin-gtk.c.
    * helper/candwin-gtk.c : Renamed from helper-candwin-gtk.c.
    * helper/Makefile.am : Follow the rename.  Remove obsolete
      install hooks.

2006-01-19 Etsushi Kato <ek.kato@gmail.com>

    * helper/im-switcher-gtk.c (create_switcher) : Set default focus
      to tree view.
    (reload_im_list) : Change return type of the function, and return
      FALSE to enable IM selection by cursor key.

2006-01-19 Etsushi Kato <ek.kato@gmail.com>

    * gtk/key-util-gtk.c (im_uim_init_modifier_keys) : Plug leak.

2006-01-18 Etsushi Kato <ek.kato@gmail.com>

    * xim/ximserver.cpp : Simplify mod key handling.
    (gShiftMask) : Removed.
    (gLockMask) : Ditto.
    (gControlMask) : Ditto.
    (keyState::keyState) : Follow the changes in member variables.
    (keyState::check_key) : Simplify.
    (keyState::revise_mod) : Removed.
    (keyState::reset) : Follow the change in member variables.
    (check_modifier) : Don't handle shift and control keys.
    (init_modifier_keys) : Ditto.
    * xim/ximserver.h (class keyState) : Remove revise_mod(), mAltOn,
      mMetaOn, mHyperOn, mSuperOn members.  Add mModState and
      mPreModState members.

2006-01-18 Etsushi Kato <ek.kato@gmail.com>

    * helper/pref-gtk.c (create_pref_window) : Suppress warning.

2006-01-18 Etsushi Kato <ek.kato@gmail.com>

    * gtk/gtk-im-uim.c : Include "key-util-gtk.h" for converting gdk's
      key to uim's key.
    (convert_keyval) : Removed.
    (convert_modifier) : Ditto.
    (filter_keypress) : Use im_uim_convert_keyevent() instead of
      convert_keyval() and convert_modifier().
    (uim_key_snoop) : Ditto.
    (im_module_init) : Initialize modifier mappings with
      im_uim_init_modifier_keys().
    * gtk/key-util-gtk.c : New file.
    (im_uim_convert_keyevent) : New.  Reorganized from
      convert_keyval() and convert_modifier() in gtk-im-uim.c.  If
      compiled with gdk-x11, it treats MOD[1-5] modifier keys
      according to X11's keysym.
    (check_modifier) : Utility for converting X keysym to uim's
      modifier key.
    (im_uim_init_modifier_keys) : New.  Initialize modifier mappings
      if compiled with gdk-x11.
    * gtk/key-util-gtk.h : New file.
    * gtk/Makefile.am : Add key-util-gtk.c and key-util-gtk.h into
      IM_UIM_SOURCES.
    
    * helper/pref-gtk.c : Include "key-util-gtk.h" for using
      im_uim_init_modifier_keys().
    (main) : Initialize modifier key mappings.
    * helper/pref-gtk-custom-widgets.c : Include "key-util-gtk.h" for
      converting gdk's key to uim's key.
    (KeyPrefWin) : Change types of grabbed_key_val and
      grabbed_key_state from guint to gint.
    (key_pref_set_value) : Change argument as uim's key value and
      modifier value instead of gdk's values, and handle "Meta",
      "Super", and "Hyper" modifiers.
    (grab_win_key_press_cb) : Convert gdk's key into uim's key and
      put these values into key_pref_win.grabbed_key_{val,state}.
    (grab_win_key_release_cb) : Call im_uim_convert_keyevent() on
      key release event.
    (key_choose_entry_key_press_cb) : Convert gdk's key to uim's
      before key_pref_set_value().
    (key_choose_entry_key_release_cb) : New.  Call
      im_uim_convert_keyevent() on key release.
    (choose_key_clicked_cb) : Connect key release event of key_entry.
    * helper/Makefile.am : Add gtk/key-util-gtk.{c,h} into
      uim_pref_gtk_SOURCES.

2006-01-18 Etsushi Kato <ek.kato@gmail.com>

    * po/ja.po : Update translation by Daichi Kawahata (bug #5638).

2006-01-08 Konosuke Watanabe <sasugaanija@gmail.com>

    * emacs/callback.c
    * emacs/candidate.c
    * emacs/candidate.h
    * emacs/context.c
    * emacs/context.h
    * emacs/helper.c
    * emacs/helper.h
    * emacs/im.c
    * emacs/im.h
    * emacs/preedit.c
    * emacs/preedit.h
    * emacs/prop.c
    * emacs/prop.h
    * emacs/uim-candidate.el
    * emacs/uim-el-agent.c
    * emacs/uim-key.el
    * emacs/uim-keymap.el
    * emacs/uim-leim.el
    * emacs/uim-preedit.el
    * emacs/uim-util.el
    * emacs/uim-var.el
    * emacs/uim.el
      - Keep the position of cursor whether unfocused or not
       while candidates or preedit strings are displayed.
      - Support prime-pseudo-mode-cursor partially.
      - Add a command to obtain current IM name.
      - Move focus/unfocus handling functions to context.c.
      - Reorganize uim_agent_context structure and its related
       functions.
      - Fix memory leaking at buffer killing.

2006-01-08 Konosuke Watanabe <sasugaanija@gmail.com>

    * emacs/uim.el
      - Add uim-update-font to update font-faces when buffer font
       has been changed.

2006-01-08 Konosuke Watanabe <sasugaanija@gmail.com>

    ---(7)---
    * emacs/uim-candidate.el
    * emacs/uim-keymap.el
      - Remove unnecessary functions and comments.

2006-01-08 Konosuke Watanabe <sasugaanija@gmail.com>

    * emacs/uim-keymap.el
    * emacs/uim-leim.el
    * emacs/uim.el
      - Abolish uim-copy-toggle-key to simplify the key bind.

2006-01-08 Konosuke Watanabe <sasugaanija@gmail.com>

    * emacs/uim-preedit.el
    * emacs/uim-var.el
      - Abolish overwriting overlay for preedit strings.

2006-01-08 Konosuke Watanabe <sasugaanija@gmail.com>

    * emacs/uim-candidate.el
      - Fix font-face related problem on XEmacs that the face
       is sometimes applied to a line before the preedit strings.

2006-01-08 Konosuke Watanabe <sasugaanija@gmail.com>

    * emacs/uim.el
      - Support kbd-macro on XEmacs.
      - Fix undo-history after execute kbd-macro.
        undo-history of kbd-macro exection is now recorded
       atomically.

2006-01-08 Konosuke Watanabe <sasugaanija@gmail.com>

    * emacs/uim-util.el
      - Apply workaround wrapper for vertical-motion to Emacs-21.3.50.

2006-01-08 Konosuke Watanabe <sasugaanija@gmail.com>

    * emacs/uim-keymap.el
      - Support mouse wheel with modifier keys.

2006-01-04 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * gnuify-changelog.pl
      - (%hackers): Add new committers

2006-01-02 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * fep/COPYING
      - Fix copyright

2006-01-02 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * qt/immodule-quiminputcontext_with_slave.cpp
    * qt/immodule-subwindow.h
    * qt/pref-customwidgets.h
    * qt/candwin-qt.cpp
    * qt/immodule-plugin.cpp
    * qt/immodule-qhelpermanager.h
    * qt/immodule-quiminputcontext.h
    * qt/pref-qt.cpp
    * qt/toolbar-standalone-qt.h
    * qt/switcher-qt.h
    * qt/immodule-candidatewindow.h
    * qt/toolbar-common-uimstateindicator.h
    * qt/toolbar-common-quimhelpertoolbar.h
    * qt/immodule-subwindow.cpp
    * qt/pref-customwidgets.cpp
    * qt/qtgettext.h
    * qt/chardict/qtgettext.h
    * qt/chardict/chardict-chargridview.h
    * qt/chardict/chardict-qt.cpp
    * qt/chardict/chardict-bushuviewwidget.cpp
    * qt/chardict/chardict-unicodeviewwidget.cpp
    * qt/chardict/chardict-qt.h
    * qt/chardict/chardict-unicodeviewwidget.h
    * qt/chardict/chardict-bushuviewwidget.h
    * qt/chardict/po/ja.po
    * qt/chardict/chardict-chargridview.cpp
    * qt/immodule-quiminputcontext_with_slave.h
    * qt/immodule-qhelpermanager.cpp
    * qt/immodule-quiminputcontext.cpp
    * qt/toolbar-standalone-qt.cpp
    * qt/switcher-qt.cpp
    * qt/candwin-qt.h
    * qt/immodule-candidatewindow.cpp
    * qt/toolbar-common-uimstateindicator.cpp
    * qt/pref-qt.h
    * qt/toolbar-common-quimhelpertoolbar.cpp
    * gtk/uim-eb.c
    * gtk/gtk-im-uim.c
    * gtk/uim-cand-win-gtk.h
    * gtk/uim-eb.h
    * gtk/caret-state-indicator.c
    * gtk/uim-cand-win-gtk.c
    * gtk/caret-state-indicator.h
    * emacs/output.c
    * emacs/preedit.h
    * emacs/callback.h
    * emacs/output.h
    * emacs/im.c
    * emacs/im.h
    * emacs/candidate.c
    * emacs/candidate.h
    * emacs/uim-util.el
    * emacs/debug.c
    * emacs/encoding.c
    * emacs/COPYING
    * emacs/encoding.h
    * emacs/debug.h
    * emacs/uim-keymap.el
    * emacs/uim-var.el
    * emacs/uim-key.el
    * emacs/uim-preedit.el
    * emacs/README.ja
    * emacs/uim.el
    * emacs/README
    * emacs/helper.c
    * emacs/prop.c
    * emacs/uim-candidate.el
    * emacs/helper-server.c
    * emacs/context.c
    * emacs/uim-el-agent.c
    * emacs/helper.h
    * emacs/prop.h
    * emacs/commit.c
    * emacs/helper-server.h
    * emacs/key.c
    * emacs/context.h
    * emacs/uim-el-agent.h
    * emacs/uim-leim.el
    * emacs/callback.c
    * emacs/preedit.c
    * emacs/uim-debug.el
    * emacs/commit.h
    * emacs/key.h
    * COPYING
    * fep/uim-fep.c
    * fep/draw.h
    * fep/uim-fep.h
    * fep/str.c
    * fep/read.c
    * fep/str.h
    * fep/callbacks.c
    * fep/helper.c
    * fep/read.h
    * fep/escseq.c
    * fep/callbacks.h
    * fep/helper.h
    * fep/key.c
    * fep/escseq.h
    * fep/udsock.c
    * fep/uim-fep-tick.c
    * fep/draw.c
    * fep/key.h
    * fep/udsock.h
    * replace/os_dep.h
    * po/fr.po
    * po/ko.po
    * po/ja.po
    * po/uim.pot
    * helper/dict-util.c
    * helper/toolbar-systray-gtk.c
    * helper/dict-canna.c
    * helper/dict-util.h
    * helper/dict-dict.c
    * helper/dict-anthy.c
    * helper/dict-canna.h
    * helper/dict-anthy.h
    * helper/dict-dict.h
    * helper/toolbar-common-gtk.c
    * helper/toolbar-standalone-gtk.c
    * helper/dict-word-list-win-gtk.c
    * helper/dict-cclass-dialog.c
    * helper/toolbar-applet-gnome.c
    * helper/dict-word-list-win-gtk.h
    * helper/pref-gtk-custom-widgets.c
    * helper/dict-cclass-dialog.h
    * helper/dict-word.c
    * helper/pref-gtk-custom-widgets.h
    * helper/dict-word-list-view-gtk.c
    * helper/dict-word.h
    * helper/dict-word-list-view-gtk.h
    * helper/dict-word-win-gtk.c
    * helper/im-switcher-gtk.c
    * helper/pref-gtk.c
    * helper/dict-word-win-gtk.h
    * helper/helper-candwin-gtk.c
    * helper/dict-main-gtk.c
    * helper/input-pad-ja.c
    * test/test-db.scm
    * test/test-key.scm
    * test/uim-test-utils.scm
    * test/test-slib.scm
    * test/test-example.scm
    * test/test-lazy-load.scm
    * test/test-ustr.scm
    * test/test-custom-rt.scm
    * test/template.scm
    * test/test-plugin.scm
    * test/run-test.scm
    * test/test-im.scm
    * test/test-uim-test-utils.scm
    * test/test-uim-util.scm
    * test/test-intl.scm
    * test/test-custom.scm
    * test/test-util.scm
    * test/test-action.scm
    * test/test-i18n.scm
    * scm/skk-custom.scm
    * scm/hangul2.scm
    * scm/hangul3.scm
    * scm/init.scm
    * scm/byeoru.scm
    * scm/m17nlib.scm
    * scm/mana-key-custom.scm
    * scm/prime.scm
    * scm/generic.scm
    * scm/util.scm
    * scm/action.scm
    * scm/anthy-key-custom.scm
    * scm/mana-custom.scm
    * scm/anthy-custom.scm
    * scm/pyunihan.scm
    * scm/plugin.scm
    * scm/byeoru-key-custom.scm
    * scm/tutcode-key-custom.scm
    * scm/direct.scm
    * scm/byeoru-custom.scm
    * scm/canna-key-custom.scm
    * scm/i18n.scm
    * scm/viqr.scm
    * scm/japanese-azik.scm
    * scm/anthy.scm
    * scm/skk-dialog.scm
    * scm/canna-custom.scm
    * scm/pyload.scm
    * scm/skk.scm
    * scm/zaurus.scm
    * scm/lazy-load.scm
    * scm/ustr.scm
    * scm/tcode.scm
    * scm/japanese-kana.scm
    * scm/uim-sh.scm
    * scm/im.scm
    * scm/tutcode.scm
    * scm/prime-key-custom.scm
    * scm/generic-key-custom.scm
    * scm/custom.scm
    * scm/mana.scm
    * scm/uim-db.scm
    * scm/spellcheck.scm
    * scm/ipa-x-sampa.scm
    * scm/prime-custom.scm
    * scm/generic-custom.scm
    * scm/pinyin-big5.scm
    * scm/manage-modules.scm
    * scm/byeoru-dic.scm
    * scm/latin.scm
    * scm/skk-editor.scm
    * scm/rk.scm
    * scm/im-custom.scm
    * scm/hangul.scm
    * scm/canna.scm
    * scm/uim-module-manager.scm
    * scm/spellcheck-custom.scm
    * scm/skk-key-custom.scm
    * scm/japanese.scm
    * scm/key.scm
    * scm/load-action.scm
    * scm/scim.scm
    * scm/byeoru-symbols.scm
    * scm/custom-rt.scm
    * uim/agent.c
    * uim/uim.h
    * uim/uim-custom.c
    * uim/uim-sh.c
    * uim/uim-ipc.c
    * uim/uim-util.c
    * uim/uim-custom.h
    * uim/uim-custom-enabler.c
    * uim/m17nlib.c
    * uim/uim-util.h
    * uim/prime.c
    * uim/mana.c
    * uim/spellcheck.c
    * uim/uim-encoding.h
    * uim/uim-helper-client.c
    * uim/uim-im-switcher.h
    * uim/uim-compat-scm.c
    * uim/scim.cpp
    * uim/editline.c
    * uim/plugin.c
    * uim/uim-compat-scm.h
    * uim/editline.h
    * uim/plugin.h
    * uim/intl.c
    * uim/uim-helper.c
    * uim/uim-internal.h
    * uim/uim-scm.c
    * uim/uim-helper-server.c
    * uim/uim-helper.h
    * uim/uim-scm.h
    * uim/uim-key.c
    * uim/canna.c
    * uim/iso-639-1.def
    * uim/uim-func.c
    * uim/anthy.c
    * uim/uim-module-manager.c
    * uim/skk.c
    * uim/uim.c
    * xim/locale.cpp
    * xim/connection.cpp
    * xim/ximpn.h
    * xim/xim.h
    * xim/connection.h
    * xim/compose.cpp
    * xim/ximtrans.cpp
    * xim/ximic.cpp
    * xim/compose.h
    * xim/util.cpp
    * xim/helper.cpp
    * xim/util.h
    * xim/ximim.cpp
    * xim/helper.h
    * xim/ximserver.cpp
    * xim/main.cpp
    * xim/convdisp.cpp
    * xim/ximpacket.cpp
    * xim/canddisp.cpp
    * xim/ximserver.h
    * xim/canddisp.h
    * xim/convdisp.h
    * xim/xdispatch.h
    * examples/uim-custom/uim-custom-update.c
    * examples/uim-custom/uim-custom-variable.c
    * examples/uim-custom/uim-custom-dump.c
      - Update copyright by following script
        svn ls -R | egrep -v '/$' | xargs perl -i -pe 's/\b(200\d)([,-\s]+200\d)*\s+uim\b/\1-2006 uim/'

2005-12-29 Etsushi Kato <ek.kato@gmail.com>

    * util.scm : Don't define uim-color here.  It will be setup with
      uim-custom.  Change reversed-preedit-background for
      uim-color-atok.
    * im-cutustom.scm : Add hook for uim-color.

2005-12-25 Etsushi Kato <ek.kato@gmail.com>

    * xim/main.cpp (main_loop) : Add comment and safety check (but
      this shouldn't happen).

2005-12-24 Etsushi Kato <ek.kato@gmail.com>

    * NEWS : Update.

2005-12-24 Etsushi Kato <ek.kato@gmail.com>

    * configure.ac : Bump version to 1.1.0 for trunk.

2005-12-24 Etsushi Kato <ek.kato@gmail.com>

    * xim/main.cpp (main_loop) : Workaround for g++-4.x.

2005-12-23 Etsushi Kato <ek.kato@gmail.com>

    * NEWS : Update.

2005-12-23 Etsushi Kato <ek.kato@gmail.com>

    * po/ko.po : Remove just "fuzzy" confirmed by Jae-hyeon.

2005-12-22 Etsushi Kato <ek.kato@gmail.com>

    2005-12-20 Konosuke Watanabe
    * Sync uim-el 0.0.6-beta4 (bug #5284).
    
    * emacs/uim-el-agent.c (cmd_label) : New.
    (check_prop) : Rename to check_prop_list_label().
    (check_prop_list_label) : Renamed from check_prop().
    (process_command) : Handle "LABEL".
    * emacs/uim-el-agent.h : Remove check_prop().
    * emacs/uim-var.el : Update version.
    (uim-send-recv-again) : New.
    * emacs/uim.el (uim-update-im-label) : New.
    (uim-process-agent-output) : Update IM label again at the end.

2005-12-20 Etsushi Kato <ek.kato@gmail.com>

    * gtk/gtk-im-uim.c (_IMUIMContext) : Add new member preedit_window
      and preedit_handler_id.
    (set_use_preedit) : Enable to switch the mode even within a
      context.
    (show_preedit) : Indentation fix.
    (im_uim_init) : Initialize preedit_window and preedit_handler_id.
    (im_uim_finalize) : Finalize preedit_window and
      preedit_handler_id.

2005-12-20 Etsushi Kato <ek.kato@gmail.com>

    * scm/anthy.scm
    * scm/mana.scm
    * scm/canna.scm
      - Revert changes in r2658.

2005-12-20 Etsushi Kato <ek.kato@gmail.com>

    * gtk/gtk-im-uim.c (_IMUIMContext) : New member prev_preedit_len.
    (preedit_strlen) : New.  Count strlen in the whole preedit
      segments.
    (update_cb) : Check preedit string length and emit "preedit_start"
      and "preedit_end" signal appropriately.  Most of gtk+ widgets
      don't need these signals, but gvim uses them.
    (im_uim_init) : Initialize prev_preedit_len.

2005-12-19 Masanari Yamamoto <h013177b@ice.nuie.nagoya-u.ac.jp>

    * If {anthy,mana}-use-with-vi? flag is set, undo don't work on gvim.
      commit-raw flag exists only for optimization.
      Removing commit-raw flag fix the bug.
    
    * scm/anthy.scm
    - (anthy-context-rec-spec) : Remove commit-raw.
    - (anthy-commit-raw) : Ditto.
    - (anthy-update-preedit) : Ditto.
    - (anthy-proc-input-state-no-preedit) : Ditto.
    * scm/mana.scm
    - (mana-context-rec-spec) : Remove commit-raw.
    - (mana-commit-raw) : Ditto.
    - (mana-update-preedit) : Ditto.
    - (mana-proc-input-state-no-preedit) : Ditto.
    * scm/canna.scm
    - (canna-context-rec-spec) : Remove commit-raw.
    - (canna-commit-raw) : Ditto.

2005-12-19 Etsushi Kato <ek.kato@gmail.com>

    2005-12-19 Jae-hyeon Park
    * po/ko.po : Minor text modification.
    * scm/byeoru-dic.scm : Sorted so that EUC-KR letters come before
      non-EUC-KR letters.  This is helpful for non-Unicode
      applications.

2005-12-19 Etsushi Kato <ek.kato@gmail.com>

    * gtk/gtk-im-uim.c (im_uim_init) : Initialize
      uic->carete_state_indicator.
    * gtk/gtk/caret-state-indicator.c (caret_state_indicator_update) :
      Add sanity check.
    (caret_state_indicator_set_cursor_location) : Ditto.
    (caret_state_indicator_set_timeout) : Ditto.

2005-12-19 Etsushi Kato <ek.kato@gmail.com>

    * gtk/gtk-im-uim.c : Just cosmetic changes and update comments.
      No code is changed.
    (update_prop_list_cb) : Replace tmp with prop_list.
    (update_prop_label) : replace tmp with prop_label.
    (helper_read_cb) : Replace tmp with msg.
    * gtk/caret-state-indicator.c : Cosmetic changes.
    * gtk/caret-state-indicator.h : Ditto.

2005-12-18 Etsushi Kato <ek.kato@gmail.com>

    * NEWS : Update.

2005-12-18 Etsushi Kato <ek.kato@gmail.com>

    * gtk/gtk-im.uim.c : Cosmetic changes generally.
    (im_uim_finalize) : Use GPOINTER_TO_UINT instead of
      GPOINTER_TO_INT for timeout-tag.
    (commit_string_from_other_process) : Update comment.
    * gtk/caret-state-indicator.c (caret_state_indicator_timeout) :
      Cosmetic changes.  Reset timeout-tag here.
    (caret_state_indicator_new) : Indentation fix.
    (caret_state_indicator_set_timeout) : Remove old timeout source if
      it is not processed yet.  Use GUINT_TO_POINTER appropriately
      for timeout-tag.
    * gtk/caret-state-indicator.h : Cosmetic change.

2005-12-17 Etsushi Kato <ek.kato@gmail.com>

    * uim/skk.c (is_setugid) : New.
    (skk_dic_open) : Check setugid here.
    (look_popen) : Don't call uim_helper_is_setugid() each time.

2005-12-17 Etsushi Kato <ek.kato@gmail.com>

    * uim/skk.c : Include "uim-helper.h" for is
      uim_helper_is_setugid().
    (look_popen) : Use fullpath command when setugid.

2005-12-17 Etsushi Kato <ek.kato@gmail.com>

    * uim/skk.c (look_get_comp) : Oops. Fix r2630.

2005-12-17 Etsushi Kato <ek.kato@gmail.com>

    * uim/skk.c (look_get_top_word) : Don't pass string which contains
      other than alphabet character to look_popen().
    (look_get_comp) : Ditto.

2005-12-16 Etsushi Kato <ek.kato@gmail.com>

    * scm/skk.scm (skk-append-string-list-to-context-head) : Check
      Settou-ji.  See [Anthy-dev 2721].

2005-12-16 Etsushi Kato <ek.kato@gmail.com>

    * NEWS : Update.

2005-12-16 Etsushi Kato <ek.kato@gmail.com>

    * fr.po
    * ja.po
    * ko.po
    * uim.pot
      - Update.

2005-12-16 Etsushi Kato <ek.kato@gmail.com>

    * scm/canna.scn (canna-proc-compose-state) : Fix behavior with
      canna-backspace-key?.
    * scm/canna-custom.scm (custom-activate-canna-server-name?) : Fix
      short description.

2005-12-16 Etsushi Kato <ek.kato@gmail.com>

    * NEWS : Update.

2005-12-16 Etsushi Kato <ek.kato@gmail.com>

    * qt/chardict/po/ja.po
    * qt/chardict/po/uim-chardict-qt.pot
    * po/fr.po
    * po/ja.po
    * po/ko.po
    * po/uim.pot
      - Update.

2005-12-16 Etsushi Kato <ek.kato@gmail.com>

    * uim/skk.c (look_get_comp) : Cleanup.

2005-12-16 Etsushi Kato <ek.kato@gmail.com>

    * configure.ac : Fix check for canna.

2005-12-16 kzk <mover@hct.zaq.ne.jp>

    * helper/pref-gtk.c
      - (quit_confirm): fixed typo
    * qt/pref-qt.cpp
      - (UimPrefDialog::confirmQuit): fixed typo

2005-12-15 Etsushi Kato <ek.kato@gmail.com>

    * qt/pref-customwidgets.cpp : Hack to enable file dialog to select
      both files and directories.  I think uim-custom should
      distinguish pathname and filename for GUI toolkit.
    (CustomPathnameEdit::slotPathnameButtonClicked) : Set default mode
      to QFileDialog::ExistingFile.
    (CustomPathnameEdit::slotFileDialogFilterSelecte) : New.  Set mode
      to QFileDialog::Directory if "Directories" filter is selected.
    * qt/pref-customwidgets.h (class CustomPathnameEdit) : Add
      slotFileDialogFilterSelected() and m_fileDailog memeber.

2005-12-14 Etsushi Kato <ek.kato@gmail.com>

    * po/fr.po
    * po/ja.po
    * po/ko.po
    * po/uim.pot
      - Update.

2005-12-14 Etsushi Kato <ek.kato@gmail.com>

    * uim/skk.c (look_get_comp) : Skip words already existed in the
      personal dictionary cache.

2005-12-14 Etsushi Kato <ek.kato@gmail.com>

    * uim/skk.c (look_popen) : Suppress error message.
    (look_get_top_word) : Don't read to the end.

2005-12-14 Etsushi Kato <ek.kato@gmail.com>

    * Add functionality to use UNIX look command for completion in
      latin conversion state of uim-skk.
    
    * scm/skk-custom.scm (skk-use-look?) : New custom setting.
      Default is #f.
    * scm/skk.scm (skk-get-nth-completion) : Check skk-use-look?
      for getting completion.
    (skk-append-string) : Ditto.
    (skk-begin-completion) : Ditto.
    (skk-commit-with-conv-completion) : Ditto.
    (skk-proc-state-kanji) : Ditto.
    (skk-change-completion-index) : Ditto.
    (skk-proc-state-completion) : Ditto.
    * uim/skk.c : Define LOOK_COMMAND.
    (skk_dic_open) : Set SIGPIPE, SIG_IGN here.
    (make_comp_array_from_cache) : Use use_look_ argument and get
      completion with look.
    (find_comp_array) : Use use_look_ argument.
    (find_comp_array_lisp) : Ditto.
    (skk_get_completion) : Ditto.
    (skk_get_nth_completion) : Ditto.
    (skk_get_nr_completion) : Ditto.
    (skk_get_dcomp_word) : Ditto.  Get completion using look.
    (look_popen) : New.  Call popen() for look and return fp.
    (look_get_top_word) : Return lisp str using look.
    (look_get_comp) : Add completion words array using look.
    (uim_plugin_instance_init) : Follow the changes in arguments.
    (open_skkserv) : Don't call signal(SIGPIPE, SIG_IGN) here.

2005-12-14 Etsushi Kato <ek.kato@gmail.com>

    * scm/skk.scm (skk-commit-with-conv-completion) : Fix argument for
      skk-lib-get-dcomp-word.

2005-12-14 Etsushi Kato <ek.kato@gmail.com>

    * scm/skk.scm (skk-reset-dcomp-word sc) : New.
    (skk-append-string) : Set dcomp-word here.
    (skk-flush) : Use skk-reset-dcomp-word.
    (skk-proc-state-direct) : Remove dcomp-word related code.  These
      are handled in skk-append-string now.
    (skk-proc-state-kanji) : Ditto.
    (skk-back-to-kanji-state) : Use skk-reset-dcomp-word.
    (skk-proc-state-completion) : Ditto.

2005-12-13 Etsushi Kato <ek.kato@gmail.com>

    * scm/skk.scm (skk-proc-state-kanji) : Reset dcomp with
      skk-special-midashi-key?

2005-12-13 Masanari Yamamoto <h013177b@ice.nuie.nagoya-u.ac.jp>

    * fep/draw.c (draw_commit_and_preedit) : Call put_cursor_normal to
    show cursor.

2005-12-13 Etsushi Kato <ek.kato@gmail.com>

    * xim/ximserver.cpp (InputContext::createUimContext) : Add sanity
      check for the return value of uim_create_context().

2005-12-13 Etsushi Kato <ek.kato@gmail.com>

    * COPYING : Update.

2005-12-13 Etsushi Kato <ek.kato@gmail.com>

    * COPYING : Fix indent.

2005-12-13 Etsushi Kato <ek.kato@gmail.com>

    * COPYING : Update.

2005-12-13 Etsushi Kato <ek.kato@gmail.com>

    * NEWS : Update.

2005-12-13 Etsushi Kato <ek.kato@gmail.com>

    * qt/pref-customwidgets.cpp (CustomSpinBox::CustomSpinBox) : Set
    its range at the constructor.  Without setting the range before
    connect, the value will be set 99 if it is greater than 99.

2005-12-12 Etsushi Kato <ek.kato@gmail.com>

    * scm/skk.scm (skk-back-to-kanji-state) : Second try to fix
      [Anthy-dev 2689].

2005-12-12 Etsushi Kato <ek.kato@gmail.com>

    * scm/skk.scm (skk-back-to-kanji-state) : Fix a bug reported on
      [Anthy-dev 2689].

2005-12-12 Etsushi Kato <ek.kato@gmail.com>

    * po/uim.pot : Update.
    * po/fr.po : Ditto.
    * po/ja.po : Ditto.
    * po/ko.po : Ditto.

2005-12-12 Etsushi Kato <ek.kato@gmail.com>

    * qt/pref-qt.cpp (UimPrefDialog::createMainWidgets) : Use gettext
      for "Apply".
    (confirmQuit) : Change default to "No".

2005-12-12 Etsushi Kato <ek.kato@gmail.com>

    * NEWS : Update.

2005-12-12 Etsushi Kato <ek.kato@gmail.com>

    * NEWS : Update.

2005-12-12 Etsushi Kato <ek.kato@gmail.com>

    * uim/intl.c : Already #include "config.h" at the top.

2005-12-12 kzk <mover@hct.zaq.ne.jp>

    * qt/pref-qt.cpp
      - (UimPrefDialog::checkDotUimFile): delete pointer for avoiding
        memory leak.
    
      - (QConfirmDialog::setupWidgets): fix invalid layouting which
        causes SEGV in destructor

2005-12-12 kzk <mover@hct.zaq.ne.jp>

    * uim/uim-module-manager.c
      - (main): use EXIT_FAILURE as an argument of exit(3) and print error
      message when requiring "uim-module-manage.scm" fails.
    
    * fep/uim-fep.c
      - (init_uim): use EXIT_FAILURE as an argument of exit(3)
    * fep/str.c
      - (init_str): Ditto
    * fep/udsock.c
      - (init_recvsocket): Ditto
    * helper/dict-word-list-win-gtk.c
      - (word_list_window_init): Ditto
    * helper/im-switcher-gtk.c
      - (main): Ditto
    * helper/helper-candwin-gtk.c
      - (read_cb): Ditto
    * helper/dict-main-gtk.c
      - (main): Ditto
    * uim/agent.c
      - (init_agent): Ditto. exit(0) is invalid for this situation.
    * uim/slib.c
      - (my_err): Ditto

2005-12-11 Etsushi Kato <ek.kato@gmail.com>

    * uim/Makefile.am : Clean up.

2005-12-11 Etsushi Kato <ek.kato@gmail.com>

    * configure.ac : Set 'no-xml' for intltool.

2005-12-10 Etsushi Kato <ek.kato@gmail.com>

    * qt/pref-qt.cpp (UimPrefDialog::slotApply) : Use
      uim_custom_broadcast_reload_request() as in uim-pref-gtk.
    * qt/immodule-qhelpermanager.cpp
    (QUimHelperManager::parseHelperStr) : Handle
      "custom_reload_notify" message.

2005-12-09 Etsushi Kato <ek.kato@gmail.com>

    2005-12-09 Konosuke Watanabe
    * emacs/uim-preedit.el
      - Support underline-reversed face.

2005-12-09 Etsushi Kato <ek.kato@gmail.com>

    2005-12-09 Konosuke Watanabe
    * emacs/uim-key.el
    * emacs/uim-keymap.el
    * emacs/uim.el
      - Support mouse wheel.

2005-12-09 Etsushi Kato <ek.kato@gmail.com>

    2005-12-09 Konosuke Watanabe
    * emacs/uim-key.el
    * emacs/uim.el
      - Support numeric keypad.

2005-12-09 Etsushi Kato <ek.kato@gmail.com>

    2005-12-09 Konosuke Watanabe
    * emacs/uim-candidate.el
      - Improve candidate displaying of Emacs-20.x and XEmacs which
        don't enlarge echo region automatically.

2005-12-09 Etsushi Kato <ek.kato@gmail.com>

    2005-12-09 Konosuke Watanabe
    * emacs/uim-candidate.el
    * emacs/uim-key.el
    * emacs/uim-keymap.el
    * emacs/uim-preedit.el
    * emacs/uim-var.el
    * emacs/uim.el
      - Support candidates without preedit string.

2005-12-09 Etsushi Kato <ek.kato@gmail.com>

    * po/uim.pot
    * po/fr.po
    * po/ja.po
    * po/ko.po
      - Update.

2005-12-09 Etsushi Kato <ek.kato@gmail.com>

    * qt/pref-qt.h (class UimPrefDialog) : Add confirmQuit() member.
    * qt/pref-qt.cpp (UimPrefDialog::slotSelectionChanged) : Don't
      confirm according to [Anthy-dev 1795].
    (UimPrefDialog::confirmQuit) : New.
    (UimPrefDialog::slotCancel) : Confirm at slotCancel according to
      [Anthy-dev 1795].

2005-12-09 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/mana-custom.scm
      - (mana-im-name-label): s/mana/Mana/ See [Shinji-devel 37]
    * scm/mana-key-custom.scm
      - s/mana/Mana/ for all messages
    * po/uim.pot
    * po/fr.po
    * po/ko.po
    * po/ja.po
      - Update

2005-12-09 Etsushi Kato <ek.kato@gmail.com>

    * qt/pref-qt.cpp (UimPrefDialog::checkDotUimFile) : Use gettext
      properly.

2005-12-09 Etsushi Kato <ek.kato@gmail.com>

    * emacs/callback.h
    * emacs/callback.c
    * emacs/encoding.h
    * emacs/encoding.c
    * emacs/context.h
    * emacs/context.c
    * emmacs/prop.c
      - Handle configuration_changed_cb().  Bug #5284. comment #3.

2005-12-09 Etsushi Kato <ek.kato@gmail.com>

    * helper/pref-gtk-custom-widgets.c (add_custom_type_pathname) :
      Fix sensitivity.

2005-12-09 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * NEWS
      - Update
    * configure.ac
      - s/uim-el/uim.el/

2005-12-09 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/libtool-version.mk
      - New file
    * uim/Makefile.am
      - Follow the introduction of libtool-version.mk
      - (EXTRA_DIST): Remove config.h.in since it is automatically listed
        to distfiles

2005-12-09 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * doc/00INDEX
      - Update. Thanks the anonymous reporter

2005-12-09 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * emacs/README.jp
      - Rename to README.ja
    * emacs/README.ja
      - Renamed from README.jp. Thanks the anonymous reporter
    * emacs/Makefile.am
      - (EXTRA_DIST): Follow the renaming

2005-12-09 Etsushi Kato <ek.kato@gmail.com>

    * scm/skk-custom.scm : Revert part of r2461 which is not related
      to skkserv.

2005-12-08 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/im-custom.scm
    * scm/skk-custom.scm
    * scm/canna-custom.scm
      - Add lacking activity hooks
    * helper/pref-gtk-custom-widgets.c
      - Add FIXME comment about pathname widget. Anyone, please fix it
        before 1.0.0

2005-12-08 Etsushi Kato <ek.kato@gmail.com>

    * po/uim.pot
    * po/fr.po
    * po/ja.po
    * po/ko.po
      - Update.

2005-12-08 Etsushi Kato <ek.kato@gmail.com>

    * qt/pref-qt.cpp (UimPrefDialog::checkDotUimFile) : Sync message with
      gtk+'s tool.

2005-12-08 Etsushi Kato <ek.kato@gmail.com>

    * helper/dict-util.c
    * helper/dict-canna.c
    * helper/dict-util.h
    * helper/dict-dict.c
    * helper/dict-anthy.c
    * helper/dict-canna.h
    * helper/dict-anthy.h
    * helper/dict-cclass-dialog.c
    * helper/dict-word-list-win-gtk.h
    * helper/dict-cclass-dialog.h
    * helper/dict-word.c
    * helper/dict-word.h
    * helper/dict-word-list-view-gtk.h
      - Update copyright.
    * helper/dict-word-list-win-gtk.c : Update copyright.  Include
      <stdlib.h> for exit(3).
    * helper/dict-word-list-view-gtk.c : Update copyright.
    (word_list_view_init) : Fix typo in comment.
    (word_list_view_class_init) : Fix typo.
    * helper/dict-main-gtk.h : Remove empty file from repository.

2005-12-08 Etsushi Kato <ek.kato@gmail.com>

    * scm/skk-key-custom.scm (skk-new-completion-from-current-comp-key) :
      Use skk-keys2 and skk-keys-completion group.

2005-12-08 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/byeoru-key-custom.scm
      - (custom-group byeoru-keys): Separate into byeoru-keys1 and
        byeoru-keys2 to prevent window size expansion of uim-pref
      - (custom-group byeoru-keys1, custom-group byeoru-keys2): New custom
        group
      - Follow the change for each custom variables
    * scm/canna-custom.scm
      - Make cannaserver primary group to prevent window size expansion of
        uim-pref
    * scm/skk-key-custom.scm
      - (custom-group skk-keys-dcomp): New custom group
      - Modify messages
      - (custom skk-new-completion-from-current-comp-key, custom
        skk-begin-conv-with-completion-key, custom
        skk-commit-with-conv-completion-key): Move to skk-keys-dcomp
        subgroup from skk-keys-completion
    * po/uim.pot
    * po/fr.po
    * po/ko.po
    * po/ja.po
      - Update

2005-12-08 Etsushi Kato <ek.kato@gmail.com>

    * NEW : Update.

2005-12-08 Etsushi Kato <ek.kato@gmail.com>

    * qt/switcher-qt.cpp (UimImSwitcher::parseHelperStrImList) : Bug
      fix for handling IM lang with "", and use of translation.

2005-12-08 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/im-custom.scm
    * scm/canna-custom.scm
    * scm/mana-custom.scm
    * scm/prime-custom.scm
      - Modify message
    * po/uim.pot
    * po/fr.po
    * po/ko.po
    * po/ja.po
      - Update

2005-12-08 Etsushi Kato <ek.kato@gmail.com>

    * qt/switcher-qt.cpp (main) : Don't use XIM for itself.

2005-12-08 Etsushi Kato <ek.kato@gmail.com>

    * NEWS : Update.

2005-12-08 Etsushi Kato <ek.kato@gmail.com>

    * uim.desktop.in.in
    * scm/latin.scm
      - Fix typo (Bug #5285 Daichi Kawahata)

2005-12-08 Etsushi Kato <ek.kato@gmail.com>

    * AUTHORS : Fix Omote-san's address.

2005-12-08 Etsushi Kato <ek.kato@gmail.com>

    * helper/dict-word-list-win-gtk.c : Fix typo in previous commit...

2005-12-08 Etsushi Kato <ek.kato@gmail.com>

    * helper/dict-main-gtk.c (create_window_anthy) : Return NULL if
      uim_dict_open() failed.
    * helper/dict-word-list-win-gtk.c (warn_dic_open) : New.
    (word_list_window_init) : Show warning and exit if uim_dict_open()
    failed.
    * helper/dict-anthy.c : Support darwin's dynamic library for
      anthydic.
    (uim_dict_anthy_open) : Check return value of dict_anthy_init().

2005-12-08 Etsushi Kato <ek.kato@gmail.com>

    2005-12-08 Jae-hyeon Park
    * po/ko.po : Minor text modifications.

2005-12-08 Etsushi Kato <ek.kato@gmail.com>

    * po/LINGUAS : Add ko.
    * po/uim.pot : Update.
    * po/fr.po : Ditto.
    * po/ja.po : Ditto.
    * po/ko.po : New translation by Jae-hyeon Park.

2005-12-08 Etsushi Kato <ek.kato@gmail.com>

    2005-12-08 Jae-hyeon Park
    * scm/byeoru.scm : Now checks shift key bit in key-state only when
      an latin alphabet key is pressed since uim.el does not provide
      shift key information if "!" key is pressed for example.  Uses
      ucs-to-utf8-string in util.scm instead of
      byeoru-ucs-to-utf-8-string.  Underlines a word being converted.
      Input mode label changed.
    * scm/byeoru-custom.scm (byeoru-im-long-desc) : Update.

2005-12-08 Etsushi Kato <ek.kato@gmail.com>

    * po/ja.po : Update according to new rule.

2005-12-08 Etsushi Kato <ek.kato@gmail.com>

    * qt/Makefile.am : Fix dependency of pref-qt.h reported on
      [Anthy-dev 2684].

2005-12-07 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * po/ja.po
      - Update

2005-12-07 Masanari Yamamoto <h013177b@ice.nuie.nagoya-u.ac.jp>

    * qt/chardict/chardict-qt.cpp: Add #include <locale.h> for LC_ALL.

2005-12-07 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * po/ja.po
      - Update

2005-12-07 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * po/ja.po
      - Update

2005-12-07 Etsushi Kato <ek.kato@gmail.com>

    * REAME : Port r2411 from 1.0 branch.
    * qt/Makefile.am : Port 2410 from 1.0 branch.

2005-12-07 Etsushi Kato <ek.kato@gmail.com>

    * po/ja.po : More update.

2005-12-07 Etsushi Kato <ek.kato@gmail.com>

    * po/ja.po : Update for more consistency.

2005-12-07 Etsushi Kato <ek.kato@gmail.com>

    * po/ja.po : Update.

2005-12-07 Etsushi Kato <ek.kato@gmail.com>

    * qt/toolbar-common-quimhelpertoolbar.cpp
    (QUimHelperToolbar::QUimHelperToolbar) : Sync messages with gtk+'s
      one.
    * po/fr.po : Update.
    * po/ja.po : Fix consistency and merge Daichi Kawahata's ver. 3
      (Bug #5246).
    * po/Makevars : Update.
    * po/uim.pot : Update.
    * scm/mana-key-custom.scm
    * scm/canna-key-custom.scm
    * scm/skk-key-custom.scm
      - Update message on vi-escape-key.

2005-12-07 Etsushi Kato <ek.kato@gmail.com>

    * qt/chardict/Makevars : Update.

2005-12-07 Etsushi Kato <ek.kato@gmail.com>

    * qt/chardict/po/LINGUAS : Fix file format.
    * qt/chardict/po/Makevars : Update bug report address.

2005-12-07 Etsushi Kato <ek.kato@gmail.com>

    * po/fr.po : Update and remove fuzzy.
    * po/ja.po : Just update.  Need to fix language name /
      charactor name ambiguity.
    * po/POTFILES.in : Remove qt/chardict*.
    * po/uim.pot. : Update.

2005-12-07 Etsushi Kato <ek.kato@gmail.com>

    * qt/Makefile.am : Move chardict related entries to
      qt/chardict/Makefile.am.
    * qt/chardict/ : New.
    * qt/chardict/Makefile.am : Ditto.
    * qt/chardict-*.{cpp,h} : Move to qt/chardict.
    * qt/bushu.t : Ditto.
    * qt/chardict/chardict-*.{cpp.h} : Moved from qt.  Invoke
      setlocale() and bindtextdomain() at top of main().
    * qt/chardict/bushu.t : Moved from qt.
    * qt/chardict/qtgettext.h : New.
    * qt/chardict/po/ : Ditto.
    * qt/chardict/po/LINGUAS : New.  Translate ja only for now.
    * qt/chardict/po/remove-potcdate.sin : New.
    * qt/chardict/po/Makefile.in.in : Ditto.
    * qt/chardict/po/ja.po : New.  Moved chardict related translations
      from po/ja.po.
    * qt/chardict/po/Makevars : New.
    * qt/chardict/po/POTFILES.in : Ditto.
    * qt/chardict/po/uim-chardict-qt.pot : Ditto.
    * configure.ac : Update for qt/chardict.

2005-12-06 Etsushi Kato <ek.kato@gmail.com>

    * fep/uim-fep.c : Fix compilation on IRIX (Bug #5247 Daichi
      Kawahata).

2005-12-05 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * po/uim.pot
    * po/fr.po
      - Update
    * po/ja.po
      - Update or revert to old translation in accordance with the new
        rule

2005-12-05 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * po/ja.po
      - Add writing rules and preferable translation for terms. Please
        don't touch po subdirectory for a while.

2005-12-05 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/skk-custom.scm
    * scm/anthy-key-custom.scm
    * scm/anthy-custom.scm
    * scm/byeoru-custom.scm
      - Modify message. Please don't touch po subdir for a while

2005-12-05 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * po/ja.po
      - Back again to r2373

2005-12-05 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * po/ja.po
      - Temporarily revert to r2257 with UTF-8 encoding, to separate
        EUC-JP -> UTF-8 conversion and message update

2005-12-05 Etsushi Kato <ek.kato@gmail.com>

    * po/uim.pot : Update.
    * po/fr.po : Ditto.
    * po/ja.po : Update translation by Daichi Kawahata (Bug #5246).
      Commiters, please revise if you find any problem.

2005-12-05 Etsushi Kato <ek.kato@gmail.com>

    * uim.spec.in : Update.
    * configure.ac : Add uim.spec and uim.desktop.in and remove
      uim.desktop from AC_CONFIG_FILES.
    * uim.desktop.in : Removed.
    * uim.desktop.in.in : New.  Moved from uim.desktop.in.
    * Makefile.am : Use INTLTOOL to produce uim.desktop.  Bug #5246
      (Daichi Kawahata).
    * po/POTFILES.in : Update (Bug #5246 Daichi Kawahata).

2005-12-05 Etsushi Kato <ek.kato@gmail.com>

    * INSTALL : Copy an install note from
      http://uim.freedesktop.org/wiki/InstallUIM

2005-12-04 Etsushi Kato <ek.kato@gmail.com>

    * xim/compose.cpp (XimIM::get_compose_filename) : Use fallback
      directory for compose files on x86_64 Linux.

2005-12-04 Etsushi Kato <ek.kato@gmail.com>

    * scm/skk-key-custom.scm (skk-next-completion-key) : Bug fix.

2005-12-03 Etsushi Kato <ek.kato@gmail.com>

    * scm/skk-custom.scm (skk-candidate-op-count) : Change default
      value.
    (skk-nr-candidate-max) : Ditto.

2005-12-03 Etsushi Kato <ek.kato@gmail.com>

    * scm/skk-custom.scm (skk-candidate-selection-style) : Set
      'ddskk-like as default.

2005-12-03 Etsushi Kato <ek.kato@gmail.com>

    * autogen.sh : Update comment.

2005-12-03 Etsushi Kato <ek.kato@gmail.com>

    * config.guess
    * config.sub
    * ltmain.sh
      - Removed since these files are not needed on the repository.

2005-12-03 Etsushi Kato <ek.kato@gmail.com>

    * NEWS : Update.

2005-12-03 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * NEWS
      - Remove ancient information

2005-12-02 Etsushi Kato <ek.kato@gmail.com>

    * doc/COMPATIBILITY : Update.

2005-12-02 Etsushi Kato <ek.kato@gmail.com>

    * uim/Makefile.am : Update -version-info of libuim and
      libuim_custom to 1:0:1.

2005-12-02 Etsushi Kato <ek.kato@gmail.com>

    * doc/HELPER-ROTOCOL : Add charset_specifier to "commit_string".
    
    * xim/compose.cpp : Move declaration of mb_string_to_utf8 to
      ximserver.h.
    (mb_string_to_utf8) : Remove static qualifier.
    * xim/ximserver.h : Move mb_string_to_utf8 declaration from
      compose.cpp.
    * xim/helper.cpp : Handle charset.

2005-12-01 kzk <mover@hct.zaq.ne.jp>

    * qt/immodule-qhelpermanager.cpp
      - (QUimHelperManager::parseHelperStr): handle charset of the
        "commit_string" helper message. This change doesn't affect
        the current behavior.

2005-12-01 Takuro Ashie <ashie@homa.ne.jp>

    * configure.ac: Add checks for Anthy library.
    * uim/Makefile.am: Add ANTHY_LIBS for anthy plugin.
    * uim/anthy.c: Remove dynamic linking code.
      (struct anthy_api): Remove.
      (get_anthy_api): Ditto.
      (init_anthy_lib): Rename api.hoge to anthy_hoge.
      (create_context): Ditto.
      (release_context): Ditto.
      (set_string): Ditto.
      (get_nr_segments): Ditto.
      (get_nr_candidates): Ditto.
      (get_nth_candidate): Ditto.
      (get_segment_length): Ditto.
      (resize_segment): Ditto.
      (commit_segment): Ditto.
      (set_prediction_src_string): Ditto.
      (get_nr_predictions): Ditto.
      (get_nth_prediction): Ditto.
      (uim_plugin_instance_quit): Ditto.

2005-11-30 Etsushi Kato <ek.kato@gmail.com>

    * configure.ac : Add NETLIBS for inet_aton() since Solaris 9 needs
      -lresolv for the function.  Cosmetic changes about some
      messages.
    * uim/Makefile.am : Add NETLIBS for libuim_skk_la_LIBADD.

2005-11-30 Etsushi Kato <ek.kato@gmail.com>

    * configure.ac : Modify AC_CONFIG_FILES.
    * Makefile.am
      - Remove gtk_entry and qedittest and put them into test
        directories of each toolkit.
      - Update EXTRA_DIST.
    * entry.c : Move to gtk/test.
    * test.sh.in : Ditto.
    * qedittest.cpp : Move to qt/test.
    * gtk/Makefile.am : Add SUBDIRS test.
    * gtk/test/ : New.
    * gtk/test/Makefile.am : New
    * gtk/test/entry.c : Moved from topdir.
    * gtk/test/test.sh.in : Moved and update.
    * qt/Makefile.am : Add SUBDIRS test.
    * qt/test/ : New.
    * qt/test/Makefile.am : New.
    * doc/Makefile.am : Update EXTRA_DIST.

2005-11-30 Etsushi Kato <ek.kato@gmail.com>

    * replace/os_dep.h : Cosmetic change.

2005-11-30 Etsushi Kato <ek.kato@gmail.com>

    * configure.ac : Bump version and use AM_INIT_AUTOMAKE(1.8.3).
      Add simple check for mana.
    * scm/Makefile.am : Include mana into module_names conditionally.
    * uim/Makefile.am : Build libuim-mana.so conditionally.

2005-11-30 Etsushi Kato <ek.kato@gmail.com>

    * uim/skk.c (parse_dic_line) : Support setsubi-ji with okuri.

2005-11-30 Masanari Yamamoto <h013177b@ice.nuie.nagoya-u.ac.jp>

    * scm/Makefile.am (module_names): Add "mana".

2005-11-30 kzk <mover@hct.zaq.ne.jp>

    * autogen.sh
      - revert change at r2281 and add a comment

2005-11-30 kzk <mover@hct.zaq.ne.jp>

    * autogen.sh
      - revert the change of r2269
        On my Ubuntu Breezy machine, default aclocal and automake
        version is still 1.4 (1.4-p6). So, we need to specify the
        version number.

2005-11-30 Masanari Yamamoto <h013177b@ice.nuie.nagoya-u.ac.jp>

    * uim/mana.c
    * scm/mana.scm
    * scm/mana-custom.scm
    * scm/mana-key-custom.scm
     - New file.
    * uim/Makefile.am
    * scm/Makefile.am
     - Add uim-mana.

2005-11-29 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * README.ja
    * INSTALL.ja
      - Removed since obsolete and it may mislead users
    
    * INSTALL
    * README
      - Remove obsolete descriptions
      - Add pointer URLs although they are also containing obsolete
        information

2005-11-29 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * AUTHORS
      - Update
    
    * RELEASING
      - move to doc/RELEASING

2005-11-29 Masanari Yamamoto <h013177b@ice.nuie.nagoya-u.ac.jp>

    * uim/uim-ipc.c
      - (open_pipe_rw): Grand child close pipe_fd[0,1] before dup2 because if
        pipe_fd[0,1] contains 0 or 1, executed process losts stdin or
        stdout.

2005-11-29 Etsushi Kato <ek.kato@gmail.com>

    2005-11-29 Konosuke Watanabe
    * emacs/README
    * emacs/README.jp
      - Update.

2005-11-29 Etsushi Kato <ek.kato@gmail.com>

    2005-11-29 Konosuke Watanabe
    * emacs/callback.c
    * emacs/context.c
    * emacs/helper.c
    * emacs/im.c
    * emacs/preedit.h
    * emacs/prop.c
      - Remove some old comments.

2005-11-29 Etsushi Kato <ek.kato@gmail.com>

    2005-11-29 Konosuke Watanabe
    * emacs/*
      - Update copyright.

2005-11-29 Etsushi Kato <ek.kato@gmail.com>

    * AUTHORS : Add Konosuke Watanabe.

2005-11-28 Etsushi Kato <ek.kato@gmail.com>

    * emacs/Makefile.am : Use lisp_DATA.
    * xim/Makefile.am : Move EXTRA_DIST out of 'if XIM'.
    * autogen.sh : Remove version specifier.

2005-11-28 Etsushi Kato <ek.kato@gmail.com>

    * scm/skk.scm (skk-back-to-kanji-state) : Don't reset dcomp-word.

2005-11-28 Etsushi Kato <ek.kato@gmail.com>

    * emacs/Makefile.am : Add $(uimel_target) as EXTRA_DIST.

2005-11-27 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/canna.c
      - Remove #include <dlfcn.h>
      - (LIBCANNA_SO): Removed

2005-11-27 Etsushi Kato <ek.kato@gmail.com>

    * scm/im.scm (toggle-im) : Bug fix.

2005-11-27 Etsushi Kato <ek.kato@gmail.com>

    * doc/Makefile.am : Remove XIM-SERVER from EXTRA_DIST.
    * po/POTFILES.in : Remove scm/hk.scm.

2005-11-27 Etsushi Kato <ek.kato@gmail.com>

    * doc/XIM-SERVER : Move to xim/README.
    * xim/README : Moved from doc/XIM-SERVER and update some note.

2005-11-27 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * doc/COMPATIBILITY
      - Add new section "Removal of obsolete constant definitions"
    * uim/uim.h
      - (enum UKeyModifier): Remove UKey_Shift, UKey_Control, UKey_Alt,
        UKey_Meta, UKey_Pseudo0, UKey_Pseudo1
      - (enum UPreeditAttr): Remove UPeAttr_None, UPeAttr_UnderLine,
        UPeAttr_Reverse, UPeAttr_Cursor, UPeAttr_Separator

2005-11-27 Etsushi Kato <ek.kato@gmail.com>

    * scm/skk.scm (skk-proc-state-completion) : Set dcomp-word with
      skk-new-completion-from-current-comp-key.

2005-11-27 Etsushi Kato <ek.kato@gmail.com>

    * emacs/Makefile.am : Revert r2259 since these file are already
      set as DIST_COMMON.

2005-11-27 Etsushi Kato <ek.kato@gmail.com>

    * emacs/Makefile.am : Add COPYING INSTALL README for EXTRA_DIST.

2005-11-27 Etsushi Kato <ek.kato@gmail.com>

    * Merge Konosuke Watanabe's uim-el
    (http://garakuta.homelinux.org/~nosuke/tsubo/uim-el.html).
    
    * configure.ac : Support --enable-emacs.
    * Makefile.am : Ditto.
    * emacs/
    * emacs/COPYING
    * emacs/INSTALL
    * emacs/Makefile.am
    * emacs/README
    * emacs/README.jp
    * emacs/callback.c
    * emacs/callback.h
    * emacs/candidate.c
    * emacs/candidate.h
    * emacs/commit.c
    * emacs/commit.h
    * emacs/context.c
    * emacs/context.h
    * emacs/debug.c
    * emacs/debug.h
    * emacs/encoding.c
    * emacs/encoding.h
    * emacs/helper-server.c
    * emacs/helper-server.h
    * emacs/helper.c
    * emacs/helper.h
    * emacs/im.c
    * emacs/im.h
    * emacs/key.c
    * emacs/key.h
    * emacs/output.c
    * emacs/output.h
    * emacs/preedit.c
    * emacs/preedit.h
    * emacs/prop.c
    * emacs/prop.h
    * emacs/uim-candidate.el
    * emacs/uim-debug.el
    * emacs/uim-el-agent.c
    * emacs/uim-el-agent.h
    * emacs/uim-key.el
    * emacs/uim-keymap.el
    * emacs/uim-leim.el
    * emacs/uim-preedit.el
    * emacs/uim-util.el
    * emacs/uim-var.el
    * emacs/uim.el
      - New file.

2005-11-26 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * po/ja.po
      - Update

2005-11-26 Etsushi Kato <ek.kato@gmail.com>

     * scm/skk.scm (proc-state-completion) : Don't reset dcomp-word
       with skk-cancel-key again.

2005-11-25 Etsushi Kato <ek.kato@gmail.com>

    * scm/skk.scm (skk-append-string-list-to-context-head) : New
      function mostly copied from skk-string-list-to-context-head.
    (skk-append-list-to-context-head) : Removed.
    (skk-string-list-to-context-head) : Use
      skk-append-string-list-to-context-head.
    (skk-commit-with-conv-completion) : Remove initialization while
      setting context-head.
    (skk-proc-state-kanji) : Ditto.
    (skk-proc-state-completion) : Ditto.

2005-11-24 Etsushi Kato <ek.kato@gmail.com>

    * scm/skk.scm (skk-commit-with-conv-completion) : Change behavior
      according to [anthy-dev: 2654].
    (skk-proc-state-kanji) : Ditto in
      skk-begin-conv-with-completion-key.

2005-11-23 Etsushi Kato <ek.kato@gmail.com>

    * xim/ximserver.cpp (init_modifier_keys) : Initialize
      gXNumLockMask.

2005-11-23 Etsushi Kato <ek.kato@gmail.com>

    * xim/main.cpp (ProcXEvent) : Handle MappingNotify.
    * xim/ximserver.cpp : Remove redundant include file.

2005-11-22 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit removes obsolete 'table' API and implementation
    
    * configure.ac
      - Remove the option --enable-compat-table
    * Makefile.am
      - (SUBDIRS): Remove 'tables'
    * uim/Makefile.am
      - (libuim_la_SOURCES): Remove uim-table.c
    * uim/uim-internal.h
      - (uim_init_table_subrs): Removed
    * uim/uim.c
      - (uim_init_scm): Remove uim_init_table_subrs()
    * scm/Makefile.am
      - (SCM_FILES): Remove hk.scm
    * tables
    * tables/japanese-tutcode.table
    * tables/korean-hangul2.table
    * tables/japanese-kana.table
    * tables/korean-hangul3.table
    * tables/japanese-azik.table
    * tables/japanese-roma.table
    * tables/japanese-tcode.table
    * tables/Makefile.am
    * scm/hk.scm
    * uim/uim-table.c
      - Removed

2005-11-22 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * Update some Korean-related descriptions in accordance with the
      information.
      http://lists.freedesktop.org/archives/uim/2005-November/001373.html
    
    * scm/byeoru-custom.scm
      - (byeoru-im-short-desc): Modify description
      - (byeoru-im-long-desc): New variable
    * scm/hangul.scm
      - Modify descriptions for hangul2 and hangul3 IMs
    * po/uim.pot
    * po/ja.po
    * po/fr.po
      - Update

2005-11-22 Etsushi Kato <ek.kato@gmail.com>

    * po/POTFILES.in : Add scm/byeoru*.scm and scm/skk-dialog.scm.
    * po/uim.pot : Update.
    * po/ja.po : Ditto.
    * po/fr.po : Ditto.

2005-11-21 Etsushi Kato <ek.kato@gmail.com>

    * scm/skk-key-custom.scm (skk-keys-latin-conv) : New subgroup.
    (skk-latin-conv-key) : Apply skk-keys-latin-conv attribute.
    (skk-conv-wide-latin-key) : Ditto.
    (skk-conv-opposite-case-key) : Ditto.
    
    * po/ja.po : Update.

2005-11-21 Etsushi Kato <ek.kato@gmail.com>

    * scm/skk.scm (skk-commit-with-conv-completion) : Disable
      completion if there is no dcomp-word.  See [Anthy-dev: 2643,
      2646].
    (skk-proc-state-kanji) : Disable completion in
      skk-begin-conv-with-completion-key if dcomp-word is not
      available.  This behavior is different from ddskk's.
    (skk-proc-state-completion) : Reset dcomp-word before going back
      to kanji-state.

2005-11-21 Etsushi Kato <ek.kato@gmail.com>

    * scm/Makefile.am (SCM_FILES) : Add byeoru.scm, byeoru-dic.scm,
      byeoru-symbols.scm, byeoru-custom.scm, and
      byeoru-key-custom.scm.
    (module_names) : Add byeoru module.
    * scm/byeoru.scm : New file for a Hangul input method.
      Contributed by Jae-hyeon Park.
    * scm/byeoru-key-custom.scm : Ditto.
    * scm/byeoru-custom.scm : Ditto.
    * scm/byeoru-dic.scm : Ditto.
    * scm/byeoru-symbols.scm : Ditto.

2005-11-21 Masanari Yamamoto <h013177b@ice.nuie.nagoya-u.ac.jp>

    * scm/canna-key-custom.scm : Remove generic-on-key from definition of
      canna-begin-conv-key.
    * scm/skk-key-custom.scm : Add "<Alt>tab" to
      skk-new-completion-from-current-comp-key because uim-fep recoginize
      C-i as tab.

2005-11-21 Masanari Yamamoto <h013177b@ice.nuie.nagoya-u.ac.jp>

    * fep/callbacks.c
    (configuration_changed_cb) : New function called when IM is switched.
    (init_callbacks) : Call uim_set_configuration_changed_cb to regist
      configuration_changed_cb.

2005-11-21 Etsushi Kato <ek.kato@gmail.com>

    * po/uim.pot : Update.
    * po/fr.po : Ditto.
    * po/ja.po : Ditto.

2005-11-21 Etsushi Kato <ek.kato@gmail.com>

    * uim/skk.c (compare_and_merge_skk_line) : Merge state of lines.
    
    * scm/skk-key-custom.scm (skk-conv-alt-case-key) : Rename to
      skk-conv-opposite-case-key.
    (skk-opposite-case-key) : Renamed from skk-conv-alt-case-key.
    * scm/skk.c (skk-conv-alt-case) : Rename to
      skk-conv-opposite-case.
    (skk-conv-opposite-case) : Renamed from skk-conv-alt-case.
    (skk-proc-state-kanji) : Follow the rename.

2005-11-20 Etsushi Kato <ek.kato@gmail.com>

    * uim/skk.c (skk_get_nth_completion) : Return "" if no completion
      word is found instead of uim_scm_null_list().
    (skk-begin-completion-key) : Add
      skk-new-completion-from-current-comp-key.
    * scm/skk-key-custom.scm
      (skk-new-completion-from-current-comp-key) : New key definition.
    (skk-begin-completion-key) : Add
      skk-new-completion-from-current-comp-key.
    (skk-begin-conv-with-completion-key) : Move category from
      skk-keys2 into skk-keys3.
    (skk-commit-with-conv-completion-key) : Ditto.
    * scm/skk.scm (skk-begin-completion) : Follow ddskk's behavior.
    (skk-do-update-preedit) : Follow the changed in
      skk-begin-completion.
    (skk-proc-state-completion) : Handle
      skk-new-completion-from-current-comp-key?

2005-11-20 Etsushi Kato <ek.kato@gmail.com>

    * uim/skk.c : Include <arpa/inet.h> for inet_aton().
    (has_numeric_in_head) : New function.
    (skk_get_entry) : Handle non-numeric entries even if numeric
      conversion option is enabled.
    (skk_get_nth_candidate) : Ditto.
    (skk_get_nr_candidates) : Ditto
    (skk_get_completion) : Ditto.
    (skk_get_nth_completion) : Ditto.
    (skk_get_nr_completions) : Ditto.
    (skk_clear_completions) : Ditto.
    (skk_get_dcomp_word) : Ditto.
    (skk_commit_candidate) : Ditto.
    (skk_purge_candidate) : Ditto.

2005-11-19 Etsushi Kato <ek.kato@gmail.com>

    * scm/skk-key-custom.scm : Rename skk-commit-alt-case key as
      skk-conv-alt-case-key.
    * scm/skk.scm (skk-proc-state-kanji) : Follow the rename.

2005-11-19 Etsushi Kato <ek.kato@gmail.com>

    * scm/skk-key-custom.scm (skk-commit-alt-case-key) : New custom
      key definition.
    * scm/skk.scm (skk-conv-alt-case) : New function.
    (skk-proc-state-kanji) : Handle skk-commit-alt-case-key in latin
      conversion state.

2005-11-18 Masahito Omote <omote@utyuuzin.net>

     r2176@minamo:  omote | 2005-11-19 08:26:59 +0900
     * uim/skk.c: Oops, hostaddr.sin_addr is correct, not hostaddr.sin_addr.s_addr.

2005-11-18 Masahito Omote <omote@utyuuzin.net>

     r2175@minamo:  omote | 2005-11-19 08:17:47 +0900
     * uim/skk.c: Use inet_aton. hostname can starts with 0-9 (not numeric IP
       address, for example 192.168.0.1.isp.example.jp). inet_aton functions appeared  in 4.3BSD. Thus portability problem does not exist.

2005-11-17 Etsushi Kato <ek.kato@gmail.com>

    * uim/skk.c (skk_line) : Rename need_save member to state.
    (alloc_skk_line) : Follow the rename.
    (copy_skk_line) : Ditto.
    (make_comp_array_from_cache) : Exclude some entries for
      completion as in r1906.
    (skk_get_dcomp_word) : Ditto.
    (skk_commit_candidate) : Follow the rename.
    (learn_word_to_cand_array) : Ditto.
    (parse_dic_line) : Ditto.
    (skk_save_personal_dictionary) : Ditto.

2005-11-16 Etsushi Kato <ek.kato@gmail.com>

    * scm/skk-key-custom.scm (skk-commit-with-conv-completion-key) :
      New custom key setting.  The default is Contol-Alt-j.
    * scm/skk.scm (skk-commit-with-conv-completion) : New function.
      Commit the first candidate converted from completed word.  See
      [Anthy-dev: 2627].
    (skk-proc-state-kanji) : Fix indent.  Check
      skk-commit-with-conv-completion-key.

2005-11-15 Etsushi Kato <ek.kato@gmail.com>

    * scm/skk.scm (skk-get-nth-completion) : Enable completion with
      numeric conversion.
    (skk-begin-completion) : Ditto.
    (skk-proc-state-direct) : Ditto.
    (skk-proc-state-direct) : Ditto.
    (skk-change-completion-index) : Ditto.
    (skk-proc-state-completion) : Ditto.
    * uim/skk.c (find_comp_array_lisp) : Use numeric_conv_ argument to
      support numeric conversion with completion.
    (skk_get_completion) : Ditto.
    (skk_get_nth_completion) : Ditto.
    (skk_get_nr_completion) : Ditto.
    (skk_clear_completion) : Ditto.
    (skk_get_dcomp_word) : Ditto.
    (restore_numeric) : New function to merge numeric list to str.
    (uim_plugin_instance_init) : Update.

2005-11-15 Etsushi Kato <ek.kato@gmail.com>

    * uim/skk.c (find_cand_array_lisp) : Check whether to use numeric
      conversion here.
    (skk_get_entry) : Update with using numeric_conv_ argument.
    (replace_numeric) : New.  Divided from skk_replace_numeric().
    (skk_replace_numeric) : Most of the function is separated into
      replace_numeric().
    (skk_get_nth_candidate) : Change to handle numeric list
      internally.
    (skk_get_nr_candidates) : Ditto.
    (skk_commit_candidate) : Ditto.
    (skk_purge_candidate) : Ditto.
    (skk_learn_word) : Use numeric_conv_ argument.
    (uim_plugin_instance_init) : Update.
    * scm/skk.scm (skk-get-nth-candidate) : Simplify numeric
      conversion conditions.
    (skk-prepare-commit-string) : Ditto.
    (skk-purge-candidate) : Ditto.
    (skk-begin-conversion) : Ditto.
    (skk-check-candidate-window-begin) : Ditto.
    * scm/skk-editor.scm (skk-editor-commit-raw) : Ditto.

2005-11-15 Etsushi Kato <ek.kato@gmail.com>

    * scm/skk.scm (skk-string-list-to-context-head) : Fix # character.

2005-11-14 Etsushi Kato <ek.kato@gmail.com>

    * scm/skk.scm (skk-proc-state-kanji) : Handle
      skk-begin-conv-with-completion-key.
    * scm/skk-key-custom.scm (skk-begin-conv-with-completion-key) :
      New custom key setting.

2005-11-14 Etsushi Kato <ek.kato@gmail.com>

    * scm/im-custom.scm (toggle-im-key) : Remove "<Alt> ".

2005-11-14 Etsushi Kato <ek.kato@gmail.com>

    * scm/skk.scm (skk-proc-state-completion) : Reset dcomp-word with
      skk-cancel-key?

2005-11-14 Etsushi Kato <ek.kato@gmail.com>

    * scm/skk.scm (skk-back-to-kanji-state) : Reset dcomp-word.

2005-11-14 Etsushi Kato <ek.kato@gmail.com>

    * scm/skk.scm (skk-proc-state-direct) : Fix to use
      skk-context-kana-mode for getting dcomp-word.
    (skk-proc-state-kanji) : Ditto.
    * uim/skk.c (skk_get_dcomp_word) : Renamed from
      skk_get_dcomp_entry as intended.
    (skk_get_dcomp_entry) : Rename to skk_get_dcomp_word.

2005-11-13 Etsushi Kato <ek.kato@gmail.com>

    * Support ddskk's skk-dcomp-activate equivalent functionality.
    
    * uim/skk.c (skk_get_dcomp_word) : New function used with
      skk-dcomp-activate?
    (update_personal_dictionary_cache_with_file) : Fix indent.
    (skk_substring) : New function.  Temporary hack for substring.
    (uim_plugin_instance_init) : Add skk-lib-get-dcomp-word and
      skk-lib-substring.
    * scm/skk.scm (skk-style-spec) : Add skk-preedit-attr-dcomp.
    (skk-style-uim) : Ditto.
    (skk-style-ddskk-like) : Ditto.
    (skk-preedit-attr-dcomp) : New.
    (skk-context-rec-spec) : Add dcomp-word symbol.
    (skk-flush) : Reset skk-context-dcomp-word.
    (skk-get-string-by-mode) : Add comment.
    (skk-dcomp-word-tail) : New.  Get substring of dynamically
      completed word from skk-context-head.
    (skk-do-update-preedit) : Add comments and support
      skk-dcomp-activate?
    (skk-rk-pending?) : New.  Wrapper for checking rk-context-seq.
    (skk-proc-state-direct) : Use skk-rk-pending?  Support
      skk-dcomp-activate?
    (skk-proc-state-kanji) : Ditto.
    (skk-proc-state-okuri) : Use skk-rk-pending? instead of
      rk-pending.
    * scm/skk-custom.scm (skk-dcomp-activate?) : New custom setting
      for dynamic completion.  Default is #f.

2005-11-10 Etsushi Kato <ek.kato@gmail.com>

    * uim/skk.c : Include "config.h" to get DATADIR.  Define
      SKK_JISYO_S, and define USE_SKK_JISYO_S_BUF by default.
      SKK-JISYO.S will be used as a buffer for word completion as in
      ddskk.
    (make_comp_array_from_cache) : Revert changes in r1906.
    (parse_dic_line) : Use is_personal argument.
    (read_dictionary_file) : Rename from read_personal_dictionary,
      and use is_personal argument.  Change return type from uim_lisp
      to int.
    (read_personal_dictionary) : Rename to read_dictionary_file.
    (skk_read_personal_dictionary) : Read SKK-JISYO.S as a cache if
      USE_SKK_JISYO_S_BUF is defined.
    (update_personal_dictionary_cache_with_file) : Rename from
      update_personal_dictionary_cache and use is_personal argument.
      If the file is a system dictionary, append differential lines at
      the bottom of the cache.
    (update_personal_dictionary_cache) : Rename to
      update_personal_dictionary_cache_with_file.
    (skk_save_personal_dictionary) : Update.

2005-11-09 Etsushi Kato <ek.kato@gmail.com>

    * gtk/gtk-im-uim.c (update_prop_label_cb) : Add sanity check for
      updating caret state indicator.

2005-11-09 Etsushi Kato <ek.kato@gmail.com>

    * uim/skk.c (skk_dic) : Rename skkserv_ok member to skkserv_state,
      and use SKK_SERV_USE and SKK_SERV_CONNECTED mask for it.
    (open_dic) : Use di->skkserv_state instead of di->skkserv_ok.
    (search_line_from_server) : Retry skkserv connection if
      disconnected or connection is not available.
    (find_cand_array) : Use skkserv_state.  Unset ca->is_used flag
      if skkserv connection is not available.
    (uim_plugin_instance_quit) : Use skkserv_state.
    (open_skkserv) : Change return value as SKK_SERV_CONNECTED.
    (reset_is_used_flag_of_cache) : New function.
    (skkserv_disconnected) : New function.

2005-11-07 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/slib.c
      - (lreadstring, string_prin1): Support R6RS(SRFI-75) and C89
        compliant escape sequences \a, \b, \v, \f

2005-11-07 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * test/test-util.scm
      - (test R6RS(SRFI-75) and C89 compliant escape sequences of Gauche):
        New test
      - (test string-escape): Add some tests for additional escape
        sequences

2005-11-07 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * doc/UNIT-TEST
      - Update

2005-11-06 Etsushi Kato <ek.kato@gmail.com>

    * scm/skk.scm (skk-proc-state-direct) : Enable ddskk compatible
      behavior about mistypes in starting kanji-state, e.g. "kAnnji"
      for "Kannji".
    (skk-rk-push-key-match-without-new-seq) : New function.  Check
      whether current key press matches with the rk rule without any
      additional rk sequence.
    (skk-proc-state-kanji) :  Enable ddskk compatible behavior about
      mistypes in okuri-gana, e.g. "ArukU" for "AruKu".

2005-11-06 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/uim-sh.scm
      - (uim-sh-loop, activate-editline): Fix invalid eval form

2005-11-06 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * test/uim-test-utils.scm
      - (UIM-SH-MULTILINE-ERROR): New variable
      - Set environment variable LIBUIM_VERBOSE to 2 to enable backtrace
      - (uim-sh-read): Fix broken multi-line error receiving by replacing
        misused select(3)
      - (uim-sh-read-error): New procedure

2005-11-05 Jun Inoue <jun.lambda@gmail.com>

    * uim/uim-scm.h
      - (UIM_SCM_NOINLINE): use __noinline__ to workaround buggy linux
        kernel headers.

2005-11-05 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * test/test-im.scm
      - (testcase im im-management): Exclude m17n-en-ispell from
        enabled-im-list to fallback to direct IM

2005-11-05 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit fixes unstable result of the testing framework
    
    * doc/COMPATIBILITY
      - Add new section "Verbose level of backtrace has been changed"
    * uim/uim-scm.c
      - (uim_scm_init): Change default verbose level to 2 from 0
    * uim/slib.c
      - (my_err): Change verbose level for show_backtrace() to 2 from 1

2005-11-05 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * test/run-test.scm
      - (main): Exclude test-example.scm from test

2005-11-05 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * test/run-test.scm
      - Add copyright header

2005-11-05 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * test/test-custom.scm
      - (test custom-choice-label, test custom-choice-desc): Cosmetic change

2005-11-05 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * test/test-lazy-load.scm
      - (test register-stub-im): Fix broken uim-sh interaction

2005-11-05 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * test/test-custom.scm
      - (test custom-choice-label, test custom-choice-desc): Follow the
        specification change in r588, r590

2005-11-05 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * test/test-custom.scm
      - (test custom-list-groups): Fix lacking predefined subgroups
      - (test define-custom (choice), test define-custom (key), test
        custom-groups): Fix lacking implicit 'main' subgroup changed in r559

2005-11-05 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * test/test-custom.scm
      - (test define-custom (group)): New test. It tests updated features
        committed in r559 and r1862 of new repository

2005-11-05 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * test/test-custom.scm
      - (testcase custom custom-group, test define-custom (choice),
        testcase custom methods, testcase custom interfaces): Define
        subgroups referred from subsequent define-custom's to follow the
        specification change in r1862 (existence check of subgroup at
        define-custom)

2005-11-05 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/custom.scm
      - Cosmetic change

2005-11-05 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * test/test-util.scm
      - (test string-escape): New test
    * scm/util.scm
      - (string-escape): Add brief description

2005-11-05 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * doc/Makefile.am
      - Add UNIT-TEST
    
    * test/Makefile.am
      - Add template.scm and test-example.scm

2005-11-05 Etsushi Kato <ek.kato@gmail.com>

    * scm/skk.scm : Fix a bug in completion using latin-conv and
      Setsubi-ji.  Thanks to (key/clefs) for reporting this.
    (skk-proc-state-kanji) : Using proper list for Settou-ji.
    (skk-string-list-to-context-head) : Check latin-conv state and
      Setsubi-ji.
    (skk-proc-state-converting) : Use proper list for Setsubi-ji.

2005-11-04 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * test/uim-test-utils.scm
      - Add version checking for GaUnit

2005-11-04 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * test/uim-test-utils.scm
      - Add copyright header
    
    * test/test-example.scm
    * test/template.scm
      - Fill last paragraph. No words are not rewritten

2005-11-04 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * doc/00INDEX
      - Add UNIT-TEST
    * doc/UNIT-TEST
      - New file
      - Describe basic usage of the unit testing framework
    * test/template.scm
      - New file
    * test/test-example.scm
      - New file

2005-11-04 kzk <mover@hct.zaq.ne.jp>

    * uim/anthy.c
      - (struct anthy_api): add member set_prediction_string,
        get_prediction_stat, get_prediction
      - (get_anthy_api): dlsy "anthy_set_prediction_string",
        "anthy_get_prediction_stat", "anthy_get_prediction"
      - (set_prediction_src_string,
         get_nr_predictions,
         get_nth_prediction): new function
      - (uim_plugin_instance_init): init subr
        "anthy-lib-set-prediction-src-string",
        "anthy-lib-get-nr-predictions",
        "anthy-lib-get-nth-prediction"

2005-11-04 kzk <mover@hct.zaq.ne.jp>

    * uim/anthy.c
      - include <anthy/anthy.h>
      - (anthy_context): removed and now we use (anthy_context_t) instead
        of (struct anthy_context *)
      - (anthy_conv_stat, anthy_segment_stat): removed
      - (anthy_api)
        - (set_string, get_stat, get_segment_stat,
           get_segment, commit_segment): change return type

2005-11-03 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/plugin.c
      - (UIM_VLEVEL_PLUGIN): New macro
      - (debug_plugin): Removed
      - (DPRINTFN): Reflect uim's verbose level
      - (plugin_load): Replace 1st arg of DPRINTFN '0' with UIM_VLEVEL_PLUGIN

2005-10-31 Etsushi Kato <ek.kato@gmail.com>

    * uim/skk.c (make_comp_array_from_cache) : Don't use pre-commited
      entry for completion.

2005-10-26 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/util.scm
      - (try-load, try-require): Add a comment about the file existence check

2005-10-26 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * configure.ac
      - Revert incomplete pthread-related codes as notified in [Anthy-dev
        2571]
    * uim/uim-internal.h
      - (UIM_DEFINE_MUTEX, UIM_DEFINE_MUTEX_STATIC, UIM_LOCK_MUTEX,
        UIM_UNLOCK_MUTEX, UIM_EVAL_FSTRING1_WITH_MUTEX,
        UIM_EVAL_FSTRING2_WITH_MUTEX, UIM_EVAL_FSTRING3_WITH_MUTEX): Ditto
    * uim/uim.c
      - (mtx_initing_or_quiting, mtx_context_array, get_context_id,
        put_context_id, uim_find_context, uim_init, uim_quit): Ditto

2005-10-23 Etsushi Kato <ek.kato@gmail.com>

    * doc/COMPATIBILITY : Add description about
      uim_set_configuration_changed_cb.

2005-10-22 Etsushi Kato <ek.kato@gmail.com>

    * scm/im.scm : Add input method toggle functionality.
    (toggle-im-preserved-im) : New variable.
    (toggle-im-preserved-widget-states) : Ditto.
    (toggle-im-alt-preserved-widget-states) : Ditto.
    (toggle-im) : New function.  Toggle two input methods with
      preserving their widget states.
    (key-press-handler) : Check toggle-im-key?.
    * scm/im-custom.scm : Add new custom settings for im-toggle.
    (enable-im-toggle?) : New setting.  It is enabled by default.
    (toggle-im-key) : New key setting for im-toggle, dependent on
      enable-im-toggle? activity.
    (toggle-im-alt-im) : Alternative IM for im-toggle, dependent on
      enable-im-toggle? activity.

2005-10-22 Etsushi Kato <ek.kato@gmail.com>

    * xim/ximserver.h (class InputContext) : Add
      configuration_changed() public member.  Add
      configuration_changed_cb() static member.  Add review_im()
      private member.
    * xim/ximserver.cpp : Include uim-im-switcher.h.
    (InputContext::createUimContext) : Set configuration_changed_cb.
    (InputContext::configuration_changed) : New function.  Call
      review_im() to check input method.
    (InputContext::review_im) : New function.  Review newly switched
      input method if it is matched with a encoding of the client.
    (InputContext::configuration_changed_cb) : New.
    * xim/main.cpp (reload_uim) : Don't print information.

2005-10-22 Etsushi Kato <ek.kato@gmail.com>

    * uim/uim.h (uim_set_configuration_changed_cb) : New API.  Set
      a callback function which is called when configuration of the
      input context is changed.
    * uim/uim-internal.h (uim_context_) : Add void
      (*configuration_changed_cb)
    * uim/uim-func.c (switch_im) : Call configuration_changed_cb if
      exists.
    * uim/uim.c (uim_create_context) : Initialize
      uc->configuration_changed_cb.
    (uim_set_configuration_changed_cb) : New.

2005-10-21 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/action.scm
      - (context-current-widget-states, context-update-widget-states!):
        New procedure

2005-10-21 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/prime-custom.scm
      - (custom-group-label, custom-group-desc): Revert R5RS-incompatible
        and inappropriate responsibility error handling added in r1126
      - (define-custom): Add existence check for groups
    * scm/custom-rt.scm
      - (require-custom): Add a TODO comment

2005-10-21 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/prime-custom.scm
      - (custom prime-custom-default-language, custom
        prime-auto-register-mode): Remove misuse of primary-group 'global'
        as subgroup. Thanks the anonymous reporter

2005-10-17 Etsushi Kato <ek.kato@gmail.com>

    * xim/locale.cpp : Define _GNU_SOURCE at the top.
    * xim/helper.cpp : Ditto.
    * xim/ximserver.cpp : Ditto.
    * xim/main.cpp : Ditto.
    * xim/canddisop.cpp : Ditto.

2005-10-14 Etsushi Kato <ek.kato@gmail.com>

    * xim/util.h : Fix typo reported on [Anthy-dev 2533] by NOKUBI
      Takatsugu.

2005-10-07 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * AUTHORS
    * gnuify-changelog.pl
      - Add Jun Inoue as committer

2005-10-06 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit revises the stack protection API again. Thank you Jun
      Inoue for basic concepts and many ideas
    
    * uim/uim-scm.h
      - (uim_scm_uninlined_func_ptr): Removed
      - (UIM_SCM_GC_PROTECTED_FUNC_T, UIM_SCM_GC_PROTECTED_FUNC_DECL,
        UIM_SCM_GC_CALL_PROTECTED_FUNC,
        UIM_SCM_GC_CALL_PROTECTED_VOID_FUNC,
        UIM_SCM_GC_CALL_PROTECTED_FUNC_INTERNAL): Removed
      - (UIM_SCM_GC_PROTECTED_CALL, UIM_SCM_GC_PROTECTED_CALL_VOID,
        UIM_SCM_GC_PROTECTED_CALL_INTERNAL): New macro
    * uim/uim-scm.c
      - (uim_scm_uninlined_func_ptr): Removed
      - (uim_scm_c_int_internal, uim_scm_refer_c_str_internal,
        uim_scm_eval_internal, siod_init_subr_internal,
        uim_scm_eval_c_string_internal): Defined as normal function to
        follow the new API
      - (uim_scm_c_int, uim_scm_refer_c_str, uim_scm_eval,
        uim_scm_eval_c_string, siod_init_subr): Follow the new API
    * uim/uim-compat-scm.c
      - (uim_scm_symbol_value_int_internal,
        uim_scm_symbol_value_str_internal): Defined as normal function to
        follow the new API
      - (uim_scm_symbol_value_int, uim_scm_symbol_value_str): Follow the
        new API
    * uim/plugin.c
      - (plugin_unload_internal, uim_quit_plugin_internal): Defined as
        normal function to follow the new API
      - (plugin_unload, uim_quit_plugin): Follow the new API
    * uim/uim-custom.c
      - (literalize_string_internal, custom_cb_add_internal): Defined as
        normal function to follow the new API
      - (literalize_string, custom_cb_add): Follow the new API
    * uim/editline.c
      - (uim_editline_readline_internal): Defined as normal function to
        follow the new API
      - (uim_editline_readline): Follow the new API

2005-10-03 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-scm.h
      - (uim_scm_gc_protect_stack_ptr): Add volatile qualifier
      - (uim_scm_uninlined_func_ptr): New variable
      - (uim_scm_gc_ensure_uninlined_func_ptr,
        uim_scm_gc_ensure_uninlined_func_internal): Removed
      - Revise the description about the uninlining ensuring
    * uim/uim-scm.c
      - (uim_scm_gc_protect_stack_ptr): Add volatile qualifier
      - (uim_scm_uninlined_func_ptr): New variable
      - (uim_scm_gc_ensure_uninlined_func,
        uim_scm_gc_ensure_uninlined_func_ptr,
        uim_scm_gc_ensure_uninlined_func_internal): Removed
      - (UIM_SCM_GC_CALL_PROTECTED_FUNC_INTERNAL): Follow the change of
        uninlining ensuring method

2005-10-02 Etsushi Kato <ek.kato@gmail.com>

    * gtk/gtk-im-uim.c (im_uim_finalize) : Check tag > 0 for
      "timeout-tag" of caret state indicator.

2005-09-28 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * uim/uim-helper.c, uim/uim-helper.h:
     -(uim_helper_is_setugid): New function.
    * uim/uim-custom.c:
     -(uim_custom_load): Check added for setuid/setgid applications.
     -(uim_custom_save): Ditto.

2005-09-28 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * scm/custom-rt.scm:
      -(require-custom): Don't load user configration file if worked under
        setuid/setgid application.
     -(custom-reload-user-configs): Ditto.

2005-09-28 Etsushi Kato <ek.kato@gmail.com>

    * scm/rk.scm : Port r1633 from r5rs.

2005-09-27 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-scm-gc.c
      - Removed since the recent implementation change enables that the
        functions can be contained uim-scm.c and single object file
    * uim/uim-scm.c
      - (uim_scm_gc_protect_stack_ptr,
        uim_scm_gc_ensure_uninlined_func_ptr,
        uim_scm_gc_protect_stack_internal,
        uim_scm_gc_ensure_uninlined_func_internal): Moved from uim-scm-gc.c
    * uim/Makefile.am
      - (libuim_la_SOURCES): Remove uim-scm-gc.c

2005-09-25 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit reverts the experimental patch post in [Anthy-dev 2149]
      committed in r1027, since the problem is resolved at other place
    
    * uim/uim.c
      - (uim_quiting): Removed
      - (uim_quit): Remove uim_quiting handlings

2005-09-25 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/slib.c
      - (NEWCELL): Initialize dbg_info with NIL which originally intended

2005-09-25 Masanari Yamamoto <h013177b@ice.nuie.nagoya-u.ac.jp>

    * scm/anthy.scm:
     -(anthy-context-change-kana-mode!): New function.
     -(action_anthy_hiragana, action_anthy_katakana, action_anthy_hankana,
       action_anthy_kana, anthy-context-kana-toggle,
       anthy-proc-input-state-no-preedit): Replace
       anthy-context-set-kana-mode! with anthy-context-change-kana-mode!
     -(anthy-proc-transposing-state): Don't transpose to latin and wide
       latin if input rule is kana.
    
    * scm/canna.scm:
     -(canna-prepare-activation): Reset conversion if needed.
     -(canna-context-change-kana-mode!): New function.
     -(action_canna_hiragana, action_canna_katakana, action_canna_hankana,
       action_canna_kana, canna-context-kana-toggle,
       canna-proc-input-state-no-preedit): Replace
       canna-context-set-kana-mode! with canna-context-change-kana-mode!
     -(canna-proc-input-state-with-preedit, canna-input-state-preedit):
       Fix invalid arguments of multi-segment-make-*-string.
     -(canna-proc-input-state-with-preedit): Include pending string in
       commit string.

2005-09-24 Masanari Yamamoto <h013177b@ice.nuie.nagoya-u.ac.jp>

    * scm/m17nlib.scm
     -(m17nlib-update-candidate):
       Remove 2nd argument of im-deactivate-candidate-selector.

2005-09-24 Masanari Yamamoto <h013177b@ice.nuie.nagoya-u.ac.jp>

    * scm/japanese-kana.scm
     -(ja-kana-katakana-rule): Fix a wrong entry.
     -(ja-kana-hankana-rule): New rule.

2005-09-24 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-custom.c
    * uim/uim-ipc.c
    * uim/uim-util.c
    * uim/spellcheck.c
    * uim/uim-helper-client.c
    * uim/uim-compat-scm.c
    * uim/plugin.c
    * uim/intl.c
    * uim/uim-helper.c
    * uim/uim-scm.c
    * uim/uim-table.c
    * uim/uim-scm.h
    * uim/uim-key.c
    * uim/uim-func.c
    * uim/uim-module-manager.c
    * uim/Makefile.am
    * uim/uim.c
      - Replace 'uimint.h' with 'uim-internal.h'
        find . \( -name '*.h' -or -name '*.c' \) \
          -exec perl -i -pe 's/\buimint\.h\b/uim-internal.h/g' {} \;
    
    * uim/uim-internal.h
      - Replace _uimint_h_included_ with _uim_internal_h_included_
    * uim/uim-im-switcher.h
      - Fix a mis-replaced comment
    * uim/Makefile.am
      - (libuim_la_SOURCES): Replace forgotten context.h with uim-internal.h

2005-09-24 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * svn mv uimint.h uim-internal.h

2005-09-24 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit makes the GCC4-ready GC certainly workable on other
      compilers that performs the optimization like GCC4 (out-of-order
      variable layout in a frame).
    
      Although the codes are closely similar to the equivalent for
      SigScheme rescently implemented by me, I commit these codes under
      the copyright of uim as separately originated from me
    
    * uim/uim-scm.h
      - (uim_scm_gc_protect_stack_ptr,
        uim_scm_gc_ensure_uninlined_func_ptr): New variable decl
      - (uim_scm_gc_protect_stack_internal,
        uim_scm_gc_ensure_uninlined_func_internal): New function decl
      - (uim_scm_gc_protect_stack, uim_scm_gc_ensure_uninlined_func):
        Replace with alias to real function reflecting the enviroment by
        macro definition
    * uim/uim-scm-gc.c
      - (uim_scm_gc_protect_stack_ptr,
        uim_scm_gc_ensure_uninlined_func_ptr): New variable
      - (uim_scm_gc_protect_stack): Rename to
        uim_scm_gc_protect_stack_internal
      - (uim_scm_gc_protect_stack_internal): Renamed from
        uim_scm_gc_protect_stack
      - (uim_scm_gc_ensure_uninlined_func): Rename to
        uim_scm_gc_ensure_uninlined_func_internal
      - (uim_scm_gc_ensure_uninlined_func_internal): Renamed from
        uim_scm_gc_ensure_uninlined_func

2005-09-24 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-scm-gc.c
      - (uim_scm_gc_protect_stack): Add a comment

2005-09-24 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-scm.h
      - (uim_scm_gc_protect_stack, uim_scm_gc_ensure_uninlined_func):
        Complement missing and necessary UIM_SCM_NOINLINE

2005-09-24 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim.c
      - Revert r1558 since I think that its design is inappropriate. My
        opinion about it will be post soon

2005-09-23 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * uim/uim.c:
     -(mtx_uim_evaling): New mutex for eval lock.
     - All calling of UIM_EVAL_FSTRING1, UIM_EVAL_FSTRING2,
      UIM_EVAL_FSTRING3 were replaced with
      UIM_EVAL_FSTRING1_WITH_MUTEX, UIM_EVAL_FSTRING2_WITH_MUTEX,
      UIM_EVAL_FSTRING3_WITH_MUTEX to make uim reentrant.

2005-09-23 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * uim/uimint.h: Added new macros.
     - (UIM_EVAL_FSTRING1_WITH_MUTEX): eval formatted string with mutex lock.
     - (UIM_EVAL_FSTRING2_WITH_MUTEX): eval formatted string with mutex lock.
     - (UIM_EVAL_FSTRING3_WITH_MUTEX): eval formatted string with mutex lock.

2005-09-23 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/action.scm
      - (context-propagate-prop-label-update): Fix incorrect assumption
        about indicator of a widget reported in [Anthy-dev 2409]. This fix
        made custom indicator workable. But no codes of uim are broken by
        this bug since no IM is using custom indicator. Thanks Masanari
        Yamamoto for the reporting
    * test/test-action.scm
      - (test context-propagate-prop-label-update): Add new test for the
        fix

2005-09-23 Etsushi Kato <ek.kato@gmail.com>

    * uim/slib.c : Fix initialization of obj.dbg_info with
      -DDEBUG_SCM.
    * uim/plugin.c : Use -DDEBUG not -DDEBUG_SCM for debugging plugin.

2005-09-21 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * gtk/gtk-im-uim.c:
     - (get_charset): New function.
     - (commit_string_from_other_process): New function.
     - (im_uim_parse_helper_str): Call commit_string_from_other_process
       instead of emitting "commit" signal directly.

2005-09-21 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * uim/anthy.c, uim/skk.c, uim/m17nlib.c, uim/canna.c, uim/prime.c:
     - Removed a needless line '#include "uimint.h"'.

2005-09-21 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * uim/uimint.h: Restored disappered mutex functionalities.

2005-09-21 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * uim/uimint.h: Fixed wrongly replaced context.h. That
      should be _uimint_h_included_, not _uimint.h_included.

2005-09-21 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * uim/uim-custom.c, uim/uim-ipc.c, uim/uim-util.c, uim/m17nlib.c,
      uim/prime.c, uim/spellcheck.c, uim/uim-helper-client.c,
      uim/uim-im-switcher.h, uim/uim-compat-scm.c, uim/plugin.c,
      uim/intl.c, uim/uim-helper.c, uim/uimint.h, uim/uim-scm.c,
      uim/uim-scm.h, uim/uim-table.c, uim/canna.c, uim/uim-key.c,
      uim/uim-func.c, uim/anthy.c, uim/uim-module-manager.c,
      uim/skk.c, uim/uim.c: Replaced all context.h with uimint.h.

2005-09-21 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * uim/uimint.h: Renamed from context.h to reflect current condition correctly.

2005-09-20 Etsushi Kato <ek.kato@gmail.com>

    * Modify stack protection code since previous code (r1528)
      works on Linux but not on Mac OS X.
    
    * uim/uim-scm-gc.c (uim_scm_gc_protect_stack) : Return local
      address.
    (uim_scm_gc_unprotect_stack) : Use proper address.

2005-09-20 Etsushi Kato <ek.kato@gmail.com>

    * uim-scm-gc.c (uim_scm_gc_unprotect_stack) : Bug fix.

2005-09-19 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit complements lacking change of r1484
    
    * uim/context.h
      - Complements lacking change for #ifndef HAVE_PTHREAD_H in r1484
      - (UIM_NEW_MUTEX, UIM_NEW_MUTEX_STATIC): Rename to UIM_DEFINE_MUTEX*
      - (UIM_DEFINE_MUTEX): Renamed from UIM_NEW_MUTEX
      - (UIM_DEFINE_MUTEX_STATIC): Renamed from UIM_NEW_MUTEX_STATIC

2005-09-19 Etsushi Kato <ek.kato@gmail.com>

    * configure.ac : Don't use MOC-QT3 and UIC-QT3 as in branches/0.4.
    * qt/Makefile.am : Ditto. Add $(top_srcdir) and $(top_builddir) as
      include path again.

2005-09-19 Etsushi Kato <ek.kato@gmail.com>

    * configure.ac : Add #include "os_dep.h" in config.h.in and
      add replace and uim directories to INCLUDES.
    * replace/os_dep.h : New header file of function declarations of
      os dependent one.
    * replace/strsep.c : Remove uim_strsep as it is defined in
      os_dep.h.
    * replace/setenv.c : Move function declaration into os_dep.h.
    * replace/getpeereid.c : Don't include unused header files.
    * replace/Makefile.am : Add os_dep.h to libreplace_la_SOURCES.
      Remove redundant INCLUDES.
    * uim/uim-util.c : Remove function declaration of setenv().
    * xim/util.h : Remove function declaration of uim_strsep().
    * qt/Makefile.am : Remove redundant INCLUDES.

2005-09-18 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit enables UIM_SCM_GCC4_READY_GC by default. Please let me
      know if something has been unstabilized. If no problems are
      reported, I'll port this into r5rs and stable branch
    
    * uim/uim-scm.h
      - (UIM_SCM_GCC4_READY_GC): Defaults to 1
    * uim/uim-scm.c
      - (uim_scm_c_int, uim_scm_refer_c_str, uim_scm_eval, siod_init_subr,
        uim_scm_eval_c_string): Add UIM_SCM_GCC4_READY_GC support
      - (uim_scm_c_int_internal, uim_scm_refer_c_str_internal,
        uim_scm_eval_internal, siod_init_subr_internal,
        uim_scm_eval_c_string_internal): New static function
    * uim/uim-compat-scm.c
      - (uim_scm_symbol_value_int, uim_scm_symbol_value_str): Add
        UIM_SCM_GCC4_READY_GC support
      - (uim_scm_symbol_value_int_internal,
        uim_scm_symbol_value_str_internal): New static function
    * uim/uim-custom.c
      - (literalize_string, custom_cb_add): Add UIM_SCM_GCC4_READY_GC support
      - (literalize_string_internal, custom_cb_add_internal): New static
        function
    * uim/plugin.c
      - (plugin_unload, uim_quit_plugin): Add UIM_SCM_GCC4_READY_GC support
      - (plugin_unload_internal, uim_quit_plugin_internal): New static
        function
    * uim/editline.c
      - (uim_editline_readline): Add UIM_SCM_GCC4_READY_GC support
      - (uim_editline_readline_internal): New static function

2005-09-18 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/siod.h
      - (gc_protect): Move to slib.c
    * uim/slib.c
      - (gc_protect): Moved from siod.h

2005-09-18 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit fixes broken codes of r1515
    
    * uim/siod.h
      - (gc_protect): Define as alias of siod_gc_protect()
      - (siod_gc_protect): New prototype decl
      - (siod_gc_protect_stack, siod_gc_unprotect_stack): New prototype decl
    * uim/slib.c
      - (gc_protect): Rename to siod_gc_protect()
      - (siod_gc_protect):
        * Renamed from gc_protect()
        * Export as global function
      - (siod_gc_protect_stack, siod_gc_unprotect_stack): Export as global
        function
    * uim/uim-scm-gc.c
      - (uim_scm_gc_protect): Replace gc_protect() with siod_gc_protect()
      - (uim_scm_gc_protect_stack): Fix incorrect argument type of
        copy&pasted code

2005-09-18 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit adds the experimental GCC4-ready stack
      protection. Although the codes are closely similar to the equivalent
      for SigScheme rescently implemented by me, I commit these codes
      under the copyright of uim as separately originated from me
    
    * uim/uim-scm.h
      - (UIM_SCM_GCC4_READY_GC): New macro. It will be removed once the
        stability of the feature is confirmed
      - (UIM_SCM_NOINLINE, UIM_SCM_GC_PROTECTED_FUNC_T,
        UIM_SCM_GC_PROTECTED_FUNC_DECL, UIM_SCM_GC_CALL_PROTECTED_FUNC,
        UIM_SCM_GC_CALL_PROTECTED_VOID_FUNC,
        UIM_SCM_GC_CALL_PROTECTED_FUNC_INTERNAL): New macro
      - (uim_scm_gc_protect_stack): Change type definition of the version
        for #if UIM_SCM_GCC4_READY_GC
      - (uim_scm_gc_ensure_uninlined_func): New function
    * uim/uim-scm.c
      - (uim_scm_gc_protect, uim_scm_gc_protect_stack,
        uim_scm_gc_unprotect_stack): Enclose by #if !UIM_SCM_GCC4_READY_GC
    * uim/uim-scm-gc.c
      - New file
      - (uim_scm_gc_protect, uim_scm_gc_unprotect_stack): Moved from
        uim-scm.c
      - (uim_scm_gc_protect_stack):
        * Moved from uim-scm.c
        * Change the type definition and implementation for
          UIM_SCM_GCC4_READY_GC
      - (uim_scm_gc_ensure_uninlined_func): New function
    * uim/Makefile.am
      - (libuim_la_SOURCES): Add uim-scm-gc.c

2005-09-17 Masanari Yamamoto <h013177b@ice.nuie.nagoya-u.ac.jp>

    [bug fix] Make fails when top_builddir is not identical to top_srcdir.
    * uim/Makefile.am:
     -(libuim_la_LIBADD): Replace top_srcdir with top_builddir.
     -(uim_module_manager_LDADD): Ditto.

2005-09-17 Etsushi Kato <ek.kato@gmail.com>

    * replace/strsep.c : Put uim_setsep() only if
      !defined(HAVE_STRSEP) as previous versions.

2005-09-16 Masahito Omote <omote@utyuuzin.net>

     r1514@minamo:  omote | 2005-09-17 02:52:44 +0900
     * Sources in uim directory which come from outside of uim are put into
       'replace' directory. These sources are existing for the specific OSes
       that does not support certain functions such as setenv(), unsetenv(),
       getpeereid() and etc...
       .
       The purpose of this is to make it clear the origin of the sources - whether
       the source is created by uim originally or got from outside of uim, for
       example NetBSD.
    
     * Makefile.am, configure.ac: Add replace direcotry.
     * replace: New directory.
     * replace/setenv.c, replace/getpeereid.c, replace/strsep.c: moved from uim/.
     * uim/Makefile.am(libuim, uim-module-manager): Link against libreplace.la.
     * uim/uim-ipc.c: Move uim_helper_check_connection_fd from uim/getpeereid.c.

2005-09-16 Masanari Yamamoto <h013177b@ice.nuie.nagoya-u.ac.jp>

    [bug fix]
    * uim/uim.c:
     -(uim_switch_im): Call uim_update_preedit_segments to clear preedit.

2005-09-15 Etsushi Kato <ek.kato@gmail.com>

    * xim/canddisp.cpp : Define _GNU_SOURCE in order to use asprintf()
      with some buggy glibc version. Define DEFAULT_CANDWIN_PROG as
      NULL if no GUI frontend is available.

2005-09-15 TOKUNAGA Hiroyuki <tkng@xem.jp>

    This commit aims to fix segv bug. This bug appeared when caret_state_indicator_timeout was called
    after im_uim_finalize.
    
    * gtk/gtk-im-uim.c
     -(im_uim_finalize): Remove timeout function of caret-state-indicator.
    
    * gtk/caret-state-indicator.c
     -(caret_state_indicator_set_timeout): Store tag of g_timeout_add to caret-state-indicator.

2005-09-13 Etsushi Kato <ek.kato@gmail.com>

    * uim/uim-module-manager.cpp (read_module_list) : Removed because
      the function is unused.
    (write_module_list) : Ditto.
    * scm/uim-module-manager.scm (update-modules-file) : Ditto.

2005-09-13 Etsushi Kato <ek.kato@gmail.com>

    * xim/locale.cpp (locale_map) : Add some more locales from X.Org's
      locale.alias.

2005-09-12 Etsushi Kato <ek.kato@gmail.com>

    * Install uim-candwin-{gtk,qt} and uim-helper-server into
      libexecdir instead of bindir.
    
    * configure.ac : Define UIM_LIBEXECDIR as libexecdir.
    * qt/Makefile.am : Install uim-candwin-qt into libexecdir.
    * helper/Makefile.am : Install uim-candwin-gtk into libexecdir.
    * uim/Makefile.am : Install uim-helper-server into libexecdir.
    * uim/uim-ipc.c (uim_ipc_open_command_with_option) : Search
      UIM_LIBEXECDIR path when is_setugid is true.
    * uim/uim-helper-client.c (get_server_command) : Prepend
      UIM_LIBEXECDIR for command path.
    * xim/canddisp.cpp (candwin_command) : Prepend UIM_LIBEXECDIR
      for command path.

2005-09-12 Etsushi Kato <ek.kato@gmail.com>

    * xim/locale.cpp (locale_map) : Update.  These locales are check
      with glibc-2.3.90.
    * xim/main.cpp (init_supported_locales) : Fix segv even when there
      is no suitable locales in the system.  See
      http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=327711 and
      thanks to Alban Crequy.

2005-09-12 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit performs renaming only
    
    * uim/context.h
      - (UIM_NEW_MUTEX, UIM_NEW_MUTEX_STATIC): Rename to UIM_DEFINE_MUTEX*
        since the word 'NEW' may cause confusion about the functionality
        as if the mutex will be allocated on a heap
      - (UIM_DEFINE_MUTEX): Renamed from UIM_NEW_MUTEX
      - (UIM_DEFINE_MUTEX_STATIC): Renamed from UIM_NEW_MUTEX_STATIC
    * uim/uim.c
      - Rename mutexes since:
        * Name of mutexes should be consistent with each other
        * They should have 'mtx' in their name, but prefixing is YamaKen's
          way. If you prefer siffixing, please rename it again
      - (initing_or_quiting): Rename to mtx_initing_or_quiting
      - (mtx_initing_or_quiting): Renamed from initing_or_quiting
      - (context_array_mtx): Rename to mtx_context_array
      - (mtx_context_array): Renamed from context_array_mtx
      - Follow the ranaming of UIM_NEW_MUTEX_STATIC
      - (get_context_id, put_context_id, uim_find_context, uim_init,
        uim_quit): Follow the renaming of mutexes

2005-09-12 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/editline.c
      - (UIM_EDITLINE_SEPARATED_BUILD): New macro. Currently defined as 1
        to be compatible with previous code. If no distro packagers need
        this, please remove
      - Include editline.h and uim-compat-scm.h
    * uim/plugin.c
      - (plugin_load): Fix an invalid argument passing for DPRINTFN()

2005-09-12 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit disables the experimental mtime-aware user-config
      reloading feature. See the added comments of uim-custom.c for detail
    
    * uim/uim-custom.c
      - Disable UIM_CUSTOM_EXPERIMENTAL_MTIME_SENSING
      - Add description about the change
    * scm/custom-rt.scm
      - (custom-enable-mtime-aware-user-conf-reloading?): Change default
        to #f

2005-09-12 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit fixes broken custom update code that compatible with
      0.4.8 behavior, and refactors the experimental mtime-aware version
    
    * scm/custom-rt.scm
      - (custom-enable-mtime-aware-user-conf-reloading?): New variable
      - (custom-reload-group-syms): Rename to
        custom-group-conf-freshnesses since the name does not represent
        its actual content
      - (custom-group-conf-freshnesses): Renamed from
        custom-reload-group-syms
      - (prepend-new-reload-group-syms, update-gsym-mtime): Removed to be
        reorganized into custom-update-group-conf-freshness and
        custom-group-conf-updated?. The procedures must have 'custom-'
        prefix
      - (custom-update-group-conf-freshness, custom-group-conf-updated?):
        New procedure
      - (custom-load-updated-group-conf): Simplify
      - (require-custom): Record mtime of the file. This speeds first-time
        reloading of the experimental code
      - (custom-reload-configs): Rename to custom-reload-user-configs to
        make what it does clear
      - (custom-reload-user-configs):
        * Renamed from custom-reload-configs
        * Fix broken 0.4.8-compatible behavior (due to YamaKen's
          mis-remembering of what custom-reload-customs does)
        * Fix lacking hook handling
        * Fix lacking LIBUIM_VANILLA handling
        * Introduce custom-enable-mtime-aware-user-conf-reloading? to
          choose the two behaviors
        * Simplify the experimental mtime-aware version
        * Update the comment
    * uim/uim.c
      - (uim_prop_reload_configs): Follow the renaming of custom-reload-configs

2005-09-12 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/plugin.c
      - (plugin_load): Fix broken file loading when
        uim-plugin-lib-load-path or uim-plugin-scm-load-path is empty

2005-09-11 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * Makefile.am: Added the --with-libedit option to the rule 'releasetest'.

2005-09-11 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * uim/Makefile.am:
     -(uim_sh_SOURCES): Added editline.h.

2005-09-11 Etsushi Kato <ek.kato@gmail.com>

    * uim/uim-module-manager.scm (main) : Load path specific
      installed-modules.scm if --path option is specified.

2005-09-09 Etsushi Kato <ek.kato@gmail.com>

    * scm/uim-module-manager.scm (add-modules-to-module-list) :
      Fix to use symbol->string in showing warning.

2005-09-09 Etsushi Kato <ek.kato@gmail.com>

    * po/uim.pot : Update.
    * po/ja.po : Ditto.
    * po/fr.po : Ditto.

2005-09-08 Etsushi Kato <ek.kato@gmail.com>

    * uim/uim-module-manager.c (main) : Bug fix.

2005-09-08 Etsushi Kato <ek.kato@gmail.com>

    * uim/uim-module-manager.c : Add --unregister-all option
      according to [anthy-dev 2213].  Update usage.
    * scm/uim-module-manager.scm (unregister-all-modules) : Ditto.

2005-09-07 Masanari Yamamoto <h013177b@ice.nuie.nagoya-u.ac.jp>

    * configure.ac:
      - Add check for errno.h.
      - Remove check for pselect.
    * fep/read.c
      - (pselect_) replacement for pselect(2)

2005-09-07 Masanari Yamamoto <h013177b@ice.nuie.nagoya-u.ac.jp>

    * uim/uim.c: Include uim-util.h for is_setugid.
    * uim/uim-helper.c: Ditto.
    * uim/uim-ipc.c: Ditto.
    * uim/uim-func.c: Include uim-im-switcher.h for uim_switch_im.

2005-09-07 Etsushi Kato <ek.kato@gmail.com>

    * Proposed fix for bug #4363.
    * scm/im.scm (system-available-im-list) : New.
    * scm/im-custom.scm (usable-im-list) : New function to get the
      default value for enabled-im-list.
    * scm/uim-module-manager.scm (update-installed-modules-scm) :
      Define system-available-im-list as enabled-im-list.

2005-09-07 Etsushi Kato <ek.kato@gmail.com>

    * uim/uim-module-manager.c : Clean up the code for improving
      readability.
    (get_arguments) : Removed.
    (modulenames) : Ditto.
    (main) : Stop using global uim_lisp modulenames variable, and use
      char *module_names instead.
    * scm/uim-module-manager.scm : Follow the changes in
      uim/uim-module-mangager.c.  Stop using 'modules' file since
      it is sufficient to use installed-im-module-list for getting
      current information about the modules.
    (get-new-registered-module-list) : Rename to
      add-modules-to-module-list.
    (add-modules-to-module-list) : Renamed from
      get-new-registered-module-list.
    (remove-unregistered-modules) :	Rename to
      remove-modules-from-module-list.
    (remove-modules-from-module-list) : Renamed from
      remove-unregistered-modules).
    (register-modules) : Stop using get-arguments and use string
      "module-names" from C side instead.  Use
      installed-im-module-list as a current setting instead of reading
      modules file.
    (unregister-modules) : Ditto.
    (update-modules-installed-modules.scm-loader.scm) : Rename
      to update-all-files.
    (update-all-files) : Renamed from
      update-modules-installed-modules.scm-loader.scm.  Don't create
      modules file.
    (update-modules) : Rename to update-modules-file.
    (update-modules-file) : Renamed from update-modules.
    * scm/Makefile.am : Create installed-modules.scm and loader.scm using
      uim-module-manager.

2005-09-05 Masanari Yamamoto <h013177b@ice.nuie.nagoya-u.ac.jp>

    * typedef sig_t if it doesn't exist to compile on Solaris.

2005-09-05 Masanari Yamamoto <h013177b@ice.nuie.nagoya-u.ac.jp>

    * configure.ac: Add checks for sig_atomic_t and pselect.

2005-09-05 Masanari Yamamoto <h013177b@ice.nuie.nagoya-u.ac.jp>

    * fep/uim-fep.c
      - (reset_signal_handler): New function to reset signal settings.
      - (main_loop, signal_handler): Handle signals safely.
    * fep/read.c
      - (my_pselect): New function.
    * fep/callbacks.c
      - (set_candidate): Renamed from get_candidate.
      - (get_mode_str): Return current IM name and current mode name.
      - (prop_list_update_cb): Moved from helper.c.
        Parse helper message to get labels.
      - (prop_label_update_cb): Moved from helper.c.
    * fep/helper.c
      - (helper_handler): Convert encoding of commit_string from specified
        charset.

2005-09-04 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/util.scm
      - (toplevel-env): Removed
      - (interaction-environment): New procedure
      - (bitwise-or): Rename to bitwise-ior to conform to final SRFI-60
      - (bitwise-ior): Renamed from bitwise-or
      - (enclose-another-env): Rename to %%enclose-another-env to indicate
        implementation-specific low level procedure
      - (%%enclose-another-env): Renamed from enclose-another-env
      - (define-record): Replace toplevel-env with interaction-environment
    * scm/custom.scm
      - (define-custom, custom-set-value!): Replace toplevel-env with
        interaction-environment
    * scm/im-custom.scm
      - (custom-installed-im-list): Ditto
    * scm/key.scm
      - (define-key-internal): Ditto
    * scm/custom-rt.scm
      - (custom-set-value!, define-custom): Ditto
    * scm/hangul.scm
      - (hangul-proc-on-mode-with-preedit, hangul-proc-on-mode,
        hangul-key-press-handler): Replace enclose-another-env with
        %%enclose-another-env
    * test/test-util.scm
      - (test toplevel-env): Removed
      - (test interaction-environment): New test
      - (test enclose-another-env): Removed
      - (test %%enclose-another-env): New test
    * doc/COMPATIBILITY
      - Add new section "Obsolete some misc Scheme APIs"

2005-09-04 Etsushi Kato <ek.kato@gmail.com>

    * scm/generic.scm (generic-commit-by-numkey) : Fix to check the
      range.

2005-09-04 Etsushi Kato <ek.kato@gmail.com>

    * scm/generic.scm (generic-set-candidate-index-handler) : Update
      preedit.

2005-09-04 Etsushi Kato <ek.kato@gmail.com>

    * scm/generic.scm (generic-proc-input-state-without-preedit) :
      Handle generic-prev/next-candidate-key?.

2005-09-04 Etsushi Kato <ek.kato@gmail.com>

    * scm/generic.scm : Fix behavior on generic-proc-input-state not
      to handle prev-candidate-key? and next-candidate-key? with
      preedit.  Ignore symbol? and modifier-key-mask except
      shift-key-mask while having preedit.  Use "length" properly to
      the list in checking generic-prev-candidate-key? and
      generic-next-candidate-key?
    (generic-proc-input-state-without-preedit) : New. Separated from
      generic-proc-input-state.
    (generic-proc-input-state-with-preedit) : Ditto.
    * scm/hangul.scm (hangul-proc-on-mode-with-preedit) : New. Follow
      the changes in generic.scm.

2005-09-03 kzk <mover@hct.zaq.ne.jp>

    * configure.ac
      - fixed typo. Please don't copy&paste, tkng...

2005-09-02 Etsushi Kato <ek.kato@gmail.com>

    * scm/prime.scm : Replace t with else.  Also replace some #t in
      cond phrases with else.

2005-09-02 Etsushi Kato <ek.kato@gmail.com>

    * gtk/gtk-im-uim.c (im_uim_finalize) : Destroy
      caret_state_indicator at finalize.

2005-09-02 Etsushi Kato <ek.kato@gmail.com>

    * xim/ximic.cpp (XimIC::setFocus) : Move candidate window handling
      into InputContext::focusIn().
    * xim/ximserver.cpp (InputContext::focusIn) : Add candidate winow
      handling from XimIC::setFocus().

2005-09-01 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * uim/uim-func.c:
     -(switch_im): New function.
    
    * scm/im.scm:
     -(switch-im): Call switch_im instead of calling create-context.
      This is need because switching input method need C level preedit resetting,
      changing current_im_name, and so on.

2005-09-01 Etsushi Kato <ek.kato@gmail.com>

    * scm/prime.scm : Fix siod dependency partially.
      Use eq? for comparison of symbols, map instead of siod's
      mapcar, #t instead of t, and string-length instead of length for
      checking string length.  The patch was provided by Jun Inoue.
    * scm/hk.scm : Use map instead of mapcar.
    * scm/spellcheck.scm : Ditto.

2005-09-01 Etsushi Kato <ek.kato@gmail.com>

    * uim/uim.c (uim_find_context) : Fix change in r1360.  Unlock after
      return doesn't make sense.

2005-08-31 Etsushi Kato <ek.kato@gmail.com>

    * xim/ximserver.cpp (InputContext::~InputContext) : Cosmetic
      change.
    (InputContext::focusOut) : Improve behavior of
      a caret-state-indicator.
    (InputContext::clear_pe_stat) : New.  Renamed from
      clear_preedit() to avoid confusion.
    (InputContext::clear_preedit) : Really clear preedit.
    (InputContext::~InputContext) : Follow the rename of
      clear_preedit().
    (InputContext::clear_cb) : Ditto.
    (InputContext::clear) : Ditto.
    * xim/ximic.cpp (XimIC::unsetFocus) : Update comment following the
      changes in InputContext::focusOut().
    * xim/ximserver.h (class InputContext) : Add clear_pe_stat().
      Change protected to private since this class doesn't have any
      derived class.

2005-08-31 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * configure.ac: Fixed a typo. (MOC -> MOC_QT3).

2005-08-31 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * qt/Makefile.am: Use moc and uic in Qt3 explicitly, because Qt4 also has a moc/uic.
     - All MOC was replaced with MOC_QT3
     - All UIC was replaced with UIC_QT3

2005-08-31 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * configure.ac: Added checks for moc-qt3 and uic-qt3.

2005-08-31 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * uim/uim.c
     -(context_array_mtx): New mutex.
     -(get_context_id, put_context_id, uim_find_context): Added a lock by context_array_mtx.

2005-08-29 Masanari Yamamoto <h013177b@ice.nuie.nagoya-u.ac.jp>

    * scm/canna.scm
      (canna-begin-conv, canna-release-handler) : Add validation of
        canna-context-cc-id.
      (canna-proc-input-state-with-preedit) : Remove unnecessary reset.

2005-08-29 Masanari Yamamoto <h013177b@ice.nuie.nagoya-u.ac.jp>

    * fep/uim-fep.c (main_loop) :
      Revert the part of the changes of r1342 and r1343.
      Call update_backtick() every time user press keys.
    
    * fep/callbacks.c
      (press_key) : Revert to r1341.
      (START_CALLBACKS) : Merge to start_callbacks.
      (activate_cb, select_cb, shift_page_cb, deactivate_cb, commit_cb,
        clear_cb, pushback_cb, mode_update_cb) : Replace START_CALLBACKS
          with start_callbacks
    
    * fep/draw.c (draw, draw_statusline_*) : Call end_callbacks().
    
    * fep/udsock.c (init_recvsocket) : chmod socket.

2005-08-28 Masanari Yamamoto <h013177b@ice.nuie.nagoya-u.ac.jp>

    * fep/escseq.c (get_cursor_position) : bug fix. Second escape
      charactor is not treated.

2005-08-28 Masanari Yamamoto <h013177b@ice.nuie.nagoya-u.ac.jp>

    * fep/uim-fep.c (main_loop) : Fix the bug. I forgot to call end_callbacks.

2005-08-28 Masanari Yamamoto <h013177b@ice.nuie.nagoya-u.ac.jp>

    * fep/uim-fep.c
      (g_context) : New global variable renamed from
        s_context.
      (main_loop) :
        Don't call draw() if the return value of press_key
          indicates there is no need to draw.
        Call focus_in when any key is pressed.
        Add helper handling code.
      (main) : Call init_helper().
      (done) : Call quit_helper().
    
    * fep/callbacks.c
      (init_callbacks) : Remove 1st parameter.
      (press_key) : Change return type to int *.
      (START_CALLBACKS) : New macro.
      (end_callbacks) : Change return type to int.
      (activate_cb, select_cb, shift_page_cb, deactivate_cb, commit_cb,
        clear_cb, pushback_cb, mode_update_cb) : Call START_CALLBACKS first.
    
    * helper.c : New file.
    
    * helper.h : New file.
    
    * Makefile.am : Add helper.c and helper.h to uim_fep_SOURCES.

2005-08-28 Masanari Yamamoto <h013177b@ice.nuie.nagoya-u.ac.jp>

    * fep/uim-fep.c
      (init_uim) : Renamed from init_agent.
      (main) :
        unlink(s_path_setmode) before mkfifo(s_path_setmode).
        Add -f option.
      (main_loop) : s_setmode_fd is valid even if s_setmode_fd == 0.
      (usage) : Add -f option.

2005-08-28 Masanari Yamamoto <h013177b@ice.nuie.nagoya-u.ac.jp>

    * fep/draw.c (draw_statusline) : Draw mode str if mode str is changed.
    * fep/callbacks.c (get_mode_str) : Return empty string if
      uim_get_mode_name returns NULL.

2005-08-26 Etsushi Kato <ek.kato@gmail.com>

    * scm/anthy.scm (anthy-has-preedit?) : Use string-length instead of
      length.

2005-08-25 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * uim/uim.c:
     -(initing_or_quiting): New mutex to lock uim_init and uim_quit.
     -(uim_init, uim_quit): Locks added to be thread safe function.

2005-08-25 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * uim/context.h: Added new macros for pthread mutex.
     -(UIM_NEW_MUTEX, UIM_NEW_MUTEX_STATIC, UIM_LOCK_MUTEX,
       UIM_UNLOCK_MUTEX): New macros.

2005-08-25 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * configure.ac: Added a check for pthread.

2005-08-25 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * COPYING
     - Added a description about scm/py.scm.

2005-08-25 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * configure.ac: Version updated to 0.5.0.

2005-08-25 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * po/POTFILES.in:
     - scm/PY.scm is removed.
     - scm/py.scm is added.

2005-08-25 Etsushi Kato <ek.kato@gmail.com>

    * scm/anthy.scm (anthy-proc-input-state-no-preedit) : Fix
      parenthesis.
    (anthy-input-state-preedit) : Use string-length instead of length
      on (rk-pending rkc).

2005-08-25 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * scm/prime.scm:
     -(action_prime_mode_latin,'action_prime_mode_hiragana,
      action_prime_mode_wide_latin): Shorten short-description.

2005-08-24 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * uim/iso-639-1.def: Added a entry for Myanmar.

2005-08-24 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * uim/m17nlib.c:
     -(remap_lang_name): This function is removed because it's no longer used.
     -(pushback_input_method): Call uim_get_language_code_from_language_name instead of
       remap_lang_name.

2005-08-24 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * uim/iso-639-1.def:
     - Added new entry for Bengali and Byelorussian.
     - Fixed a typo. Divehi -> Dhivehi.

2005-08-24 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * uim/uim-util.c, uim/uim-util.h:
     -(uim_get_language_code_from_language_name): New function.

2005-08-24 Masanari Yamamoto <h013177b@ice.nuie.nagoya-u.ac.jp>

    * scm/canna.scm (canna-reset-handler)
    * scm/anthy.scm (anthy-reset-handler)
    * scm/skk.scm (skk-reset-handler)
     Revert the change of r1280 according to [Anthy-dev 2283].

2005-08-24 Etsushi Kato <ek.kato@gmail.com>

    * uim/skk.c (nth_candidate) : Remove unnecessary comments.
    (expand_str) : New.
    (get_purged_words) : Check closing double quotation appropriately
      and remove SIOD dependency.
    (purge_candidate) : Add comment.
    (eval_candidate_with_concat) : New.  Separated from
      skk_eval_candidate() and remove SIOD dependency.
    (skk_eval_candidate) : Simplify.

2005-08-23 Etsushi Kato <ek.kato@gmail.com>

    * scm/skk-custom.scm : Fix wrong use of '=' for comparing symbols.

2005-08-23 Etsushi Kato <ek.kato@gmail.com>

    * scm/skk.scm : Add missing style element.

2005-08-23 Etsushi Kato <ek.kato@gmail.com>

    * scm/skk.scm : Fix wrong use of '=' for comparing symbol.
    (skk-get-string) : Use string-length instead of length.
    (skk-proc-state-direct) : Fix return value.

2005-08-23 Etsushi Kato <ek.kato@gmail.com>

    * scm/skk.scm (skk-flush) : Cosmetic change.

2005-08-23 Etsushi Kato <ek.kato@gmail.com>

    * xim/connection.cpp (XConnection::writeProc) : Ignore SIGUSR1
      while XFlush().
    * xim/xim.h : Remove unused force_event().
    * xim/ximtrans.cpp : Ditto.
    * xim/main.cpp (reload_uim) : Revive focusIn() deleted in r1252,
      which is actually needed to set appropriate locale for the
      focused context.
    * xim/ximserver.cpp (XimServer::changeContext) : Update comment.

2005-08-22 Etsushi Kato <ek.kato@gmail.com>

    * scm/skk.scm (skk-flush) : Reset skk-context-child-context and
      skk-context-child-type after flushing the child context.

2005-08-22 Etsushi Kato <ek.kato@gmail.com>

     * scm/skk.scm (skk-flush) : Flush its child context too.
    (skk-begin-conversion) : Bind res as #f according to [anthy-dev
      2259].
    (skk-proc-state-okuri) : Ditto.

2005-08-22 Masanari Yamamoto <h013177b@ice.nuie.nagoya-u.ac.jp>

    * scm/canna.scm
      (canna-reset-handler) : Clear preedit and call canna-flush.
      (canna-flush) : Deactive candidate selector.
    
    * scm/anthy.scm (anthy-reset-handler) : Clear preedit.
    
    * scm/skk.scm (skk-reset-handler) : Clear preedit.

2005-08-22 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-util.c
      - (iterate_lists): Fix the fast path case permanently disabled. This
        fix only affects about performance in single-list cases. Former
        codes are slow, but safe.
    * test/test-uim-util.scm
      - (test iterate-lists): Add some tests for single-list cases, and
        single-null-list, multiple-null-list cases. All tests are passed

2005-08-21 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit cleanups the result of a bad coding habit
      (copy-and-pasting) appeared in r1254. As I said in [Anthy-dev 2251],
      this loosely written code naturally had a bug. Hiroyuki, please keep
      in mind good coding habit.
    
    * helper/pref-gtk.c
      - (USE_CHANGES_SENSITIVE_OK_BUTTON): New macro. Defaults to 0 since
        changes-sensitive OK button looks strange
      - (pref_apply_button, pref_ok_button): Make static
      - (uim_pref_gtk_mark_value_changed,
        uim_pref_gtk_unmark_value_changed): New function
      - (ok_button_clicked, apply_button_clicked, set_to_default_cb):
        * Replace the value-changed status handling with
          uim_pref_gtk_unmark_value_changed() and
          uim_pref_gtk_unmark_value_changed()
        * It has also fixed broken value-changed status handling
      - (create_setting_button_box):
        * Modify some messages
        * Make initial state of pref_ok_button configurable through
          USE_CHANGES_SENSITIVE_OK_BUTTON
    * helper/pref-gtk-custom-widgets.c
      - Remove external reference to pref_apply_button and pref_ok_button
      - Add external reference to uim_pref_gtk_mark_value_changed()
      - (custom_check_button_toggled_cb, custom_spin_button_value_changed,
        custom_entry_changed_cb, custom_combo_box_changed,
        olist_pref_up_button_clicked_cb,
        olist_pref_down_button_clicked_cb,
        olist_pref_left_button_clicked_cb,
        olist_pref_right_button_clicked_cb,
        key_pref_add_button_clicked_cb,
        key_pref_remove_button_clicked_cb): Unify the copy-and-pasted code
        with uim_pref_gtk_mark_value_changed()

2005-08-21 Masahito Omote <omote@utyuuzin.net>

    * plugin.c: Enable debug outputs. This commit does not harm when built without
      --enable-debug.

2005-08-21 Etsushi Kato <ek.kato@gmail.com>

    * xim/convdisp.cpp (update_default_xftfont) : Plug leak.

2005-08-21 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * Renamed scm/PY.scm as scm/PY-old.scm. This file is not yet removed as a measure
      when problem occurred, will be removed until 0.5.1.

2005-08-21 Etsushi Kato <ek.kato@gmail.com>

    * xim/convdisp.cpp (Convdisp::update_caret_state) : Check
      "bridge-show-input-state?" here.
    (ConvdispRw::update_preedit) : Call update_caret_state() at proper
      timing.
    (ConvdispOv::update_preedit) : Ditto.
    (ConvdispOv::update_icxatr) : Move check for
      "bridge-show-input-state?" into (Convdisp::update_caret_state).

2005-08-21 Masanari Yamamoto <h013177b@ice.nuie.nagoya-u.ac.jp>

    * uim/canna.c
      (canna_context): Remove current_cand_num, max_current_cand_num and
        current_segment_num. Add max_cand_num_list.
      (get_canna_context): Simplify.
      (init_canna_lib): Add initialization of max_cand_num_list.
      (_reset_conversion, _update_status): Replace id parameter with
        canna_context.
      (_update_status): Set the number of candidates for each segments to
        max_cand_num_list.
      (begin_conversion, resize_segment): Call _update_status instead of
        _update_segment.
      (get_nth_candidate): Don't call _update_segment to improve
        efficiency.

2005-08-21 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * helper/pref-gtk.c:
     -(create_setting_button_box): Added tooltips.

2005-08-21 Etsushi Kato <ek.kato@gmail.com>

    * qt/immodule-qhelpermanager.cpp
    (QUimHelperManager::update_prop_list_cb) : Don't update the status
      when disableFocusedContext is set.
    (QUimHelperManager::update_prop_label_cb : Ditto.

2005-08-21 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * This commit aims to disable apply/OK button when it doesn't have a effect.
    
    * helper/pref-gtk.c:
     -(pref_apply_button,pref_ok_button): Global variables which hold a reference
      to apply/OK button.
     -(create_setting_button_box): Changed to use pref_apply_button,pref_ok_button.
     -(create_group_widget): Stop calling of create_setting_button_box.
     -(create_pref_window): Call create_setting_button_box.
    
    * helper/pref-gtk-custom-widgets.c:
     -(custom_check_button_toggled_cb, custom_spin_button_value_changed, custom_entry_changed_cb,
       custom_combo_box_changed, olist_pref_up_button_clicked_cb, olist_pref_down_button_clicked_cb,
       olist_pref_left_button_clicked_cb, olist_pref_right_button_clicked_cb, key_pref_add_button_clicked_cb,
       key_pref_remove_button_clicked_cb): Enable apply/OK button if value was changed successfully.

2005-08-21 Etsushi Kato <ek.kato@gmail.com>

    * gtk/gtk-im-uim.c (update_prop_list_cb) : Don't update the status
      when disable_focused_context is set.
    (update_prop_label_cb) : Ditto.

2005-08-21 Etsushi Kato <ek.kato@gmail.com>

    * xim/ : Support "candidate-window-position" option for
      over-the-spot/Root-window style, and do some refactoring on
      move_candwin().
    
    * xim/xim.h (class XimIC) : Remove move_candwin().  Fix comment.
    * xim/ximic.cpp (XimIM::XimIC) : Initialize mConvdisp as NULL
      explicitly.
    (XimIC::move_candwin) : Removed.
    (XimIC::setFocus) : Call move_candwin() in m_kkContext->focusIn().
    * xim/ximserver.cpp (XimServer::customContext) : Check
      "candidate-window-position".
    (XimServer::reloadConfigs) : Ditto.
    (InputContext::InputContext) : Initialize mConvdisp as NULL
      explicitly.  Initialize new variable mCaretStateShow.
    (InputContext::focusIn) : Call move_candwin() and
      update_caret_state() here instead of XimIC::setFocus.
    (InputContext::update_prop_label) : Set mCaretStateShown if
      disp->show_caret_state() is called.
    (InptuContext::isCaretStateShown) : New.
    (check_candwin_pos_type) : New function to check
      "candidate-window-position" global option.
    * xim/main.cpp : Add XimServer::gCandWinPosType global variable.
    (reload_uim) : No need to call focusIn() for focusedContext.
    (main) : Check "candidate-window-position" at a startup.
    * xim/convdisp.cpp (Class PeLineWin) : Add public variable
      mCandWinXOff to support "candidate-window-position" option.
    (class ConvdispOv) : Remove update_caret_state() and set_im_lang()
      virtual member.  Add m_candwin_x_off and m_candwin_y_off
      variables to support "candidate-window-position".
    (class ConvdispRw) : Remove update_caret_state() virtual function.
    (class ConvdispOs) : Ditto.
    (PeLineWin::draw_segment) : Check candidate window position type.
    (Convdisp::update_caret_state) : Combined with ConvdispOv/Rw/Os's
      virtual function.  Don't call move_candwin() in this function.
    (ConvdispRw::update_preedit) : Call move_candwin() after
      clear_preedit() to reset candidate window position.
    (ConvdispRw::update_caret_state) : Removed.
    (ConvdispRw::move_candwin) : Don't move the window unless its
      context if focused.  Support "candidate-window-position".
    (ConvdispOv::ConvdispOv) : Initialize m_candwin_x_off and
      m_candwin_y_off.
    (ConvdispOv::set_im_lang) : Removed since the function is the same
      as one in the base class.
    (ConvdispOv::update_caret_state) : Ditto.
    (ConvdispOv::move_candwin) :  Don't move the window unless its
      context if focused.  Support "candidate-window-position".
    (ConvdispOv::clear_preedit) : Reset candidate window position
      offset.
    (ConvdispOv::update_icxatr) : Call move_candwin() explicitly if
      ICA_SpotLocation is changed.  unset_change_mask will be called
      in ConvdispOv::move_candwin().
    (ConvdispOv::layoutCharEnt) : Simplified a bit.  Support
      "candidate-window-position".
    (ConvdispOs::update_caret_state) : Removed.
    (ConvdispOs::move_candwin) : Don't move the window unless its
      context if focused.
    * xim/canddisp.cpp : Use nonblocking IO for candwin_r.
    * xim/ximserver.h : Typedef CandwinPosType for
      "candidate-window-position".  Add check_candwin_pos_type()
      prototype.
    (class InputContext) : Add new member isCaretStateShown() and
      mCaretStateShown.
    (class XimServer) : Add new member gCandWinPosType.
    * xim/convdisp.h (class Convdisp) : Now update_caret_state() is
      not a virtual function.

2005-08-20 Masanari Yamamoto <h013177b@ice.nuie.nagoya-u.ac.jp>

    * scm/canna.scm
      (canna-begin-conv): Don't convert if string is empty.
      (canna-proc-input-state-with-preedit): Call
        canna-context-confirm-kana! before move cursor.
      (canna-context-confirm-kana!): New function to convert pending
        charactors to preedit string if input rule is kana.
      (canna-transposing-text): Don't transpose if input rule is kana.
      (canna-init-handler): Set canna-init-lib-ok? to #t after
        canna-lib-init.

2005-08-20 Etsushi Kato <ek.kato@gmail.com>

    * xim/ximserver.cpp (XimServer::reloadConfigs) : Bug fix.
    - この行以下は無視されます --
    
    M    ximserver.cpp

2005-08-19 Etsushi Kato <ek.kato@gmail.com>

    * helper/helper-candwin-gtk.c (candidate_window_init) : Follow
      changes in r1178's gtk/uim-candwin-gtk.c.  Scale factor should
      be configurable.

2005-08-19 Etsushi Kato <ek.kato@gmail.com>

    * xim/helper.cpp (helper_str_parse) : Call
      Ximserver::reloadConfigs() instated of uim_prop_reload_configs()
      upon "custom_reload_notify".
    * xim/ximserver.cpp (XimServer::reloadConfigs) : New.
      uim_prop_reload_configs() is disabled by #if 0 for now.
    * xim/main.cpp (reload_uim) : Remove static.
    * xim/canddisp.cpp : Simplified using
      terminate_canddisp_connection().
    * xim/ximserver.h : Add reload_uim() declaration.
    (class XimServer) : Add reloadConfigs() member.
    
    * helper/helper-candwin-gtk.c : Frame added as
      gtk/uim-cand-win-gtk.c in r1177.

2005-08-18 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * scm/Makefile.am:
     - Added py.scm to EXTRA_DIST
     - Removed PY.scm from EXTRA_DIST
    
    * scm/pyload.scm
     - Use py.scm instead of PY.scm.

2005-08-18 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * scm/py.scm: New pinyin table. This file is licensed under LGPL.

2005-08-18 kzk <mover@hct.zaq.ne.jp>

    * trunk/qt/toolbar-common-uimstateindicator.cpp
      - (UimStateIndicator::slotStdinActivated): correct r1210's wrong memory release handling

2005-08-18 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * qt/toolbar-common-uimstateindicator.cpp:
     - (UimStateIndicator::slotStdinActivated): Fixed memory leaks.
      Since I'm not sure whether this change is appropriate, I don't commit
      this to branches/0.4. If you know that this is safe, please commit this
      change to 0.4 branch.

2005-08-15 Masanari Yamamoto <h013177b@ice.nuie.nagoya-u.ac.jp>

    * scm/anthy-key-custom.scm :
      Change place of anthy-transpose-as-hiragana-key.
    
    * scm/canna-key-custom.scm :
      Add following keys.
      canna-transpose-as-hiragana-key
      canna-transpose-as-katakana-key
      canna-transpose-as-hankana-key
      canna-next-page-key
      canna-prev-page-key
      canna-kill-key
      canna-kill-backward-key
      canna-vi-escape-key
    
    * scm/canna-custom.scm
      Add canna-select-candidate-by-numeral-key? and canna-use-with-vi?.
    
    * scm/canna.scm
      Add following features.
      transpose preedit
      page shift of candidate window
      kill preedit and kill-backward preedit
      vi-firendly mode
    
    * fep/uim-fep.c (usage) : show version information

2005-08-14 Masanari Yamamoto <h013177b@ice.nuie.nagoya-u.ac.jp>

    * scm/{anthy.scm, anthy-custom.scm, anthy-key-custom.scm}:
      New config option anthy-use-with-vi?.
      It is anthy version of skk-use-with-vi?.
    
    * scm/generic-key-custom.scm:
      Add "<Control>[" to generic-cancel-key.

2005-08-14 Masanari Yamamoto <h013177b@ice.nuie.nagoya-u.ac.jp>

    * scm/anthy.scm:
      add hiragana preedit-transposing
      (anthy-proc-transposing-state): unset commit-raw flag to update preedit
    
    * scm/anthy-key-custom.scm: add anthy-transpose-as-hiragana-key

2005-08-13 Etsushi Kato <ek.kato@gmail.com>

    * uim/uim-custom.c (file_content_is_same) : Tentative fix for
      avoid segv.

2005-08-13 Masanari Yamamoto <h013177b@ice.nuie.nagoya-u.ac.jp>

     * fep/uim-fep.c (main) : same as r1174

2005-08-10 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-sh.c
      - (main): Complement a missing #ifdef LIBEDIT

2005-08-10 Masahito Omote <omote@utyuuzin.net>

    * This commit enables line editing and history in uim-sh. You can use them
      by 'uim-sh -r editline'.
    * configure.ac: Merge from r5rs branch which support libedit.
    * uim/Makefile.am: Add editline.[ch] entry.
    * uim/editline.[ch]: New file for supporting libedit history and line editing.
    * uim/uim-sh.c: Add support of libedit.
    * scm/uim-sh.scm: Ditto.

2005-08-10 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * scm/latin.scm: Implemented Multi key support.
     -(latin-backspace-key?, latin-commit-key?, latin-multi-key?): New key definitions.
     -(latin-compose-rule): Removed needless "\\".
     -(latin-context-new, latin-context-flush, latin-update-preedit,
       latin-commit-raw, latin-commit, latin-proc-composing-state,
       latin-proc-raw-state, latin-press-key-handler, latin-release-key-handler,
       latin-reset-handler,latin-get-candidate-handler, latin-set-candidate-index-handler):
       New functions.

2005-08-10 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * gtk/uim-cand-win-gtk.c:
     -(uim_cand_win_gtk_init): Fontsize has been adjusted to 1.2 times.
       (Scale factor should be configrable in a few days.)

2005-08-10 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * gtk/uim-cand-win-gtk.c:
     -(uim_cand_win_gtk_init): Frame appended.

2005-08-09 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * gtk/caret-state-indicator.c: This commit aims to handle timout properly.
     -(get_current_time): New function.
     -(caret_state_indicator_timeout): Hide indicator only when time passes enough
       from the recent calling of timeout setting function.
     -(caret_state_indicator_set_timeout): Record called time.

2005-08-09 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * gtk/caret-state-indicator.c: Improved the appearance of state-indicator.
     -(caret_state_indicator_paint_window): New callback function to paint
       to dwaw square frame.
     -(caret_state_indicator_new): Connect above callback function.

2005-08-09 Masanari Yamamoto <h013177b@ice.nuie.nagoya-u.ac.jp>

     * fep/uim-fep.c (main) :
       change the values of UIM_FEP_SETMODE and UIM_FEP_GETMODE

2005-08-09 Etsushi Kato <ek.kato@gmail.com>

    * doc/HELPER-PROTOCOL : Fix typo.

2005-08-09 Etsushi Kato <ek.kato@gmail.com>

    * doc/HELPER-CANDWIN : Add description about "hide_caret_state".

2005-08-09 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-custom.c
      - (UIM_CUSTOM_EXPERIMENTAL_MTIME_SENSING): New macro
      - (file_content_is_same): Enclose by #ifdef
        UIM_CUSTOM_EXPERIMENTAL_MTIME_SENSING
      - (uim_custom_save_group):
        * Enclose the experimental code added in r1164
        * Add a comment about the code

2005-08-09 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-util.c
      - (get_file_mtime): Rename to file_mtime() to be consistent with
        other preexisting file-related function names
      - (file_mtime): Renamed from get_file_mtime()
      - (uim_init_util_subrs): Rename get-file-mtime with file-mtime to be
        consistent with other preexisting file-related procedure names
    * scm/custom-rt.scm
      - (update-gsym-mtime, custom-load-updated-group-conf): Replace
        get-file-mtime with file-mtime

2005-08-09 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit reverts the changes of r1163 and replace the procedure
      custom-reload-configs with preexisting custom-reload-configs which
      has same functionality
    
    * scm/custom.scm
      - (custom-call-all-hook-procs, custom-reload-customs): Move to
        custom-rt.scm
    * scm/custom-rt.scm
      - (custom-call-all-hook-procs, custom-reload-customs): Moved from
        custom.scm
      - (custom-file-path): New procedure
      - (custom-load-group-conf):
        * Move currently defined procedure to
          custom-load-updated-group-conf
        * Revert to r1162
        * Simplify with custom-file-path
        * Add a comment
      - (custom-load-updated-group-conf):
        * Renamed from custom-load-group-conf
        * Simplify with custom-file-path
      - (custom-reload-configs):
        * Make definition switcheable between 2 procedures
        * Make custom-reload-customs default
        * Replace custom-load-group-conf with custom-load-updated-group-conf
        * Add a comment about it
    
    * test/test-custom-rt.scm
    * test/test-custom.scm
      - Modify comments

2005-08-09 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * uim/uim-util.c: Oops, forgotten to commit this file.
     -(get_file_mtime): New function.

2005-08-09 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-custom.c
      - (uim_custom_broadcast_reload_request): Add the description
    
    * doc/HELPER-PROTOCOL
      - set-fill-column to 78

2005-08-09 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * helper/pref-gtk.c:
     -(ok_button_clicked, apply_button_clicked): Use uim_custom_broadcast_reload_request()
       instead of uim_custom_broadcast();

2005-08-09 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * scm/custom-rt.scm: This commit aims avoid needless reloading of config files.
      If a config file is not updated, then it would not be loaded while config reloading.
     -(custom-reload-group-syms): Now this list is an alist. Spec of each element
      is: (symbol-for-config-file . mtime-of-config-file)
      We should rename this variable with more proper name.
     -(prepend-new-reload-group-syms): New procedure.
     -(update-gsym-mtime): New procedure.
     -(custom-load-group-conf, custom-reload-configs): All function which used
      custom-reload-group-syms somewhile are modified.
      s/custom-reload-group-syms/(map car custom-reload-group-syms)/;

2005-08-08 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * uim/uim-custom.c: This commit aims to stop saving config file if nothing
      changed. As a result, we'll be able to avoid needless reloading of config files.
     -(file_content_is_same): New internal function.
     -(uim_custom_save_group): Don't change mtime of the file if nothing has
       been changed.

2005-08-08 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * scm/custom-rt.scm:
     -(custom-reload-configs): New procedure.

2005-08-08 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit reverts the removal of the prop_update_custom message
      functionality committed in r1160 and r1161 because:
    
      - The new message custom_reload_notify cannot replace some
        functionality of the prop_update_custom listed in below:
    
        * alter custom variables without saving files
    
        * alter a single custom variable
    
      - It's broken since the Scheme procedure custom-reload-configs is
        still lacking
    
      Please be conservertive when removing or alter an
      API functionality. Suggestion before such change at the mailinglist
      makes us happy.
    
    * uim/uim-custom.h
      - (uim_custom_broadcast_reload_request): New API function
    * uim/uim-custom.c
      - (uim_custom_broadcast_reload_request): New function
      - (uim_custom_broadcast): Revert the prop_update_custom
        functionality
    * gtk/gtk-im-uim.c
      - (im_uim_parse_helper_str): Ditto
    * xim/helper.cpp
      - (helper_str_parse): Ditto
    * doc/COMPATIBILITY
      - Add a new section "An experimental custom variable reloading API"

2005-08-08 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * gtk/gtk-im-uim.c:
     -(im_uim_parse_helper_str): Corresponded to custom_reload_notify.
    
    * xim/helper.cpp:
     -(helper_str_parse): Corresponded to custom_reload_notify.

2005-08-08 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * uim/uim.c, uim/uim.h
     -(uim_prop_reload_configs): New function to reload configrations.
    
    * uim/uim-custom.c
     -(uim_custom_broadcast): Send custom_reload_notify instead of
      prop_update_custom. This would be faster than prop_update_custom.
    
    * doc/HELPER=PROTOCOL
     - Added description for custom_reload_notify.

2005-08-07 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * uim/uim-helper-server.c: This commit aims to refactoring to improve readability.
     -(close_client): Renamed from free_client. close(fd) is also processed here.
     -(write_message): New function.
     -(read_message): New function.
     -(uim_helper_server_process_connection): Simplified with calling write_message
      and read_message.

2005-08-07 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * uim/uim-helper-server.c: This commit aims for refactoring.
     -(accept_new_connection): New function.
     -(uim_helper_server_process_connection): Replaced long acception code
      with accept_new_connection.

2005-08-07 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * uim/uim-helper-server.c:
     All 'serv_fd' are replaced with 'server_fd' for improvement of readability.
     -(init_server_fd): Renamed from init_serv_fd.

2005-08-07 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * configure.ac: Version updated to 0.4.8.

2005-08-07 Masanari Yamamoto <h013177b@ice.nuie.nagoya-u.ac.jp>

     escseq.c (put_save_cursor, put_restore_cursor):
     revert the change of r1138

2005-08-07 Masanari Yamamoto <h013177b@ice.nuie.nagoya-u.ac.jp>

     * fep/escseq.c (get_cursor_position) :
     parse cursor report by own routine instead of sscanf

2005-08-06 Etsushi Kato <ek.kato@gmail.com>

    * xim/convdisp.cpp (ConvdispOv::update_icxatr) : Invoke
      move_candwin() with proper timing.
    (ConvdispOv::update_caret_state) : Ditto.

2005-08-06 Etsushi Kato <ek.kato@gmail.com>

    * gtk/gtk-im-uim.c (helper_str_parse) : Move code for hiding a
      caret state indicator into focus_out().
    (focus_out) : Hide caret state indicator here.

2005-08-06 Etsushi Kato <ek.kato@gmail.com>

    * xim/helper.cpp (helper_str_parse) : Hide caret state upon
      receiving "focus_in".
    * gtk/gtk-im-uim.c (im_uim_parse_helper_str) : Ditto.

2005-08-06 Etsushi Kato <ek.kato@gmail.com>

    * xim/convdisp.cpp (ConvdispOv::update_icxatr) : Update caret
      state on focused context only.

2005-08-06 Masanari Yamamoto <h013177b@ice.nuie.nagoya-u.ac.jp>

     escseq.c (put_save_cursor, put_restore_cursor): reset attribute mode

2005-08-06 Etsushi Kato <ek.kato@gmail.com>

    * helper/helper-candwin-gtk.c (caret_state_hide) : New.
    (str_parse) : Handle "hide_caret_state" message.
    * xim/ximserver.cpp (XimServer::customContext) : Check
      "bridge-show-input-state?".
    * xim/convdisp.cpp (ConvdispOv::update_icxatr) : Ditto.
    * xim/canddisp.cpp (Canddisp::hide_caret_state) : New.
    * xim/canddisp.h (class Canddisp) : Add hide_caret_state().

2005-08-06 Masanari Yamamoto <h013177b@ice.nuie.nagoya-u.ac.jp>

     fep/uim-fep.c (my_forkpty) : unset ISTRIP flag of slave's termio

2005-08-06 Masanari Yamamoto <h013177b@ice.nuie.nagoya-u.ac.jp>

     uim/Makefile.am: add setenv.c to uim_module_manager_SOURCES

2005-08-06 Etsushi Kato <ek.kato@gmail.com>

    * doc/HELPER-CANDWIN : Update.

2005-08-06 Etsushi Kato <ek.kato@gmail.com>

    * xim/canddisp.cpp (Canddisp::show_caret_state) : Terminate
      helper candwin message properly.

2005-08-06 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * helper/eggtrayicon.c: Added a function prototype to fix warning.
     -(egg_tray_icon_new_for_xscreen): The prototype of this function is added.
       But this function is not reffered from other file directory, maybe we
       should mark this function static.

2005-08-06 Etsushi Kato <ek.kato@gmail.com>

    * helper/helper-candwin-gtk.c : Sync with updated
      caret-state-indicator.
    (candidate_window_init) : Set cursor_location here.
    (candwin_move) : Move code for cursor_location handling into
      candidate_window_init().
    (caret_state_show) : Use timeout value.
    (caret_state_update) : New function to update position of the
      indicator.
    * xim/ximserver.cpp (InputContext::candidate_update) : Show
      candidate explicitly.
    (InputContext::update_prop_label) : Use timeout value.
    * xim/convdisp.cpp (class ConvdispOv) : Add update_caret_state
      member.
    (class ConvdispRw) : Ditto.
    (class ConvdispOs) : Ditto.
    (ConvdispRw::update_caret_state) : New.
    (ConvdispOv::update_caret_state) : Ditto.
    (ConvdispOs::update_caret_state) : Ditto.
    (ConvdispOv::update_icxatr) : Call update_caret_state().
    * xim/canddisp.cpp (Canddisp::show_caret_state) : Use timeout
      value.
    (Canddisp::update_caret_state) : New.
    * xim/canddisp.h (class Canddisp) : Add update_caret_state member.
    * xim/convdisp.h (class Convdisp) : Ditto.

2005-08-06 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * scm/im-custom.scm:
     -(bridge-show-input-state-time-length): Described long description.

2005-08-05 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * configure.ac: Generate uim.desktop automatically.
    
    * uim.desktop.in: New file.
    
    * uim.desktop: Removed because it's already automatically
      generated file.

2005-08-05 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * scm/custom.scm:
     -(custom-group-label, custom-group-desc): Changed error messages a bit.
    
    * scm/im-custom.scm: Added a new custom group 'preedit'.

2005-08-05 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * scm/custom.scm: This commit will fix the bug #3953.
      See https://bugs.freedesktop.org/show_bug.cgi?id=3953 for more details.
     -(custom-group-label): Added a NULL check.
     -(custom-group-desc):  Added a NULL check.

2005-08-05 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * gtk/caret-state-indicator.c:
     -(caret_state_indicator_set_timeout): New function to set timeout.
     -(caret_state_indicator_update): Added NULL check for str.
    
    * gtk/gtk-im-uim.c:
     -(im_uim_commit_string): Update caret-state-indicator position when commit event occurred.
     -(update_prop_label_cb): Call caret_state_indicator_set_timeout to set timeout.

2005-08-05 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * scm/im-custom.scm:
     -(bridge-show-input-state-time-length): New config item.

2005-08-05 Masanari Yamamoto <h013177b@ice.nuie.nagoya-u.ac.jp>

     * fep/callbacks.c (init_callbacks) : use uim_iconv instead of iconv
    
     * key.c (escape_sequence2key) :
       add length parameter, because input string may contains NUL character

2005-08-05 Masanari Yamamoto <h013177b@ice.nuie.nagoya-u.ac.jp>

     * canna.c (create_context) :
       return valid context when RkGetDicList returns 0 to use imeproxy as cannaserver

2005-08-03 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * configure.ac: Updated version to 0.4.8beta1!

2005-08-03 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * helper/Makefile.am:
     - Changed temporary filename to GNOME_UimApplet.server.in.tmp
       to pass 'make releasetest'.

2005-08-03 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * uim/uim-util.c:
     -(-uim_init_util_subrs): Added a void qualifier.

2005-08-02 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * helper/im-switcher-gtk.c: Added a window icon.

2005-08-02 TOKUNAGA Hiroyuki <tkng@xem.jp>

    configure.ac: SCIM support should be disabled by default.

2005-08-02 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * uim/scim.cpp:
     -(push_symbol_key): Call ukey_mod_to_skey_mod to set modifier.

2005-08-02 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * po/stamp-po: Removed because it's an automatically
      generated file.

2005-08-02 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * uim/scim.cpp:
     -(uim_plugin_instance_init): Remove needless casts.

2005-08-02 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * uim/slib.c:
     -(init_subr, init_subr_0,init_subr_1, init_subr_2, init_subr_2n,
       init_subr_3, init_subr_4, init_subr_5, init_lsubr, init_fsubr,
       init_msubr): Added const.
    
    * uim/uim-scm.c, uim/uim-sch.h:
     -(uim_scm_init_subr_0, uim_scm_init_subr_1, uim_scm_init_subr_2,
       uim_scm_init_subr_3, uim_scm_init_subr_4, uim_scm_init_subr_5):
       Added const.

2005-08-01 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * uim/scim.cpp:
     -(init_scim): create_config require 1 char * argument
      for 1.2 series API.

2005-08-01 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * uim/scim.cpp: Main purpose of this commit is translation
      of modifiers correctly.
     -(init_scim): Fixed a typo.
     -(ukey_mod_to_skey_mod): New convert function from modifier of
      uim to modifier of scim.
     -(push_key): Call ukey_mod_to_skey_mod.
     -(push_symbol_key): Simplified a bit.

2005-08-01 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * scm/m17nlib.scm:
     -(m17nlib-press-key-handler): Improved key event handling.
     Now special key event such as Ctrl-a, Shift-space when
     preedit exist should be handled properly.

2005-08-01 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * helper/Makefile.am:
     -(server_in_files): Replace LIBEXECDIR properly.

2005-07-31 Etsushi Kato <ek.kato@gmail.com>

    * xim/convdisp.cpp (class PeWin) : Move mCharPos into class
      PeLineWin.
    (class PeLineWin) : Add mCharPos and mCursorX.
    (PeLineWin::draw_pe) : Show a cursor after drawing all segments.
    (PeLineWin::draw_cursor) : Move position handling code into
      draw_segment().
    (PeLineWin::draw_segment) : Just set cursor position and don't
      draw cursor here.
    (PeOvWin::draw_ce) : Show a cursor after drawing all char_entries.
    (PeOvWin::draw_a_ce) : Add space for cursor.  Don't draw cursor
      here.
    (PeOvWin::draw_cursor) : Adjust cursor position.

2005-07-31 Etsushi Kato <ek.kato@gmail.com>

    * xim/convdisp.cpp (class ConvdispOv) : Remove unused
      calc_ce_width().
    (ConvdispOv::calc_ce_width) : Removed.

2005-07-31 Etsushi Kato <ek.kato@gmail.com>

    * xim/convdisp.cpp : Draw cursor even with over-the-spot and
      root-window style.
    (class PeWin) : Remove mGlyphWidth and add mCharPos member.
    (class PeLineWin) : Move draw_segment() from public to private.
      Add draw_cursor() and get_char_width().
    (class PeOvWin) : Add draw_cursor() member.
    (PeWin::PeWin) : Add sanity check for gXftFont.
    (PeWin::set_xftfont) : Ditto.
    (PeLineWin::draw_cursor) : New.
    (PeLineWin::get_char_width) : New.
    (PeLinwWin::draw_segment) : Draw cursor.
    (PeLineWin::calc_segment_extent) : New.
    (PeLineWin::calc_extent) : Properly calculate a needed length of
      the window.
    (PeOvWin::draw_a_ce) : Draw cursor.
    (PeOvWin::draw_cursor) : New.
    (Convdisp::get_caret_pos) : New.
    * xim/convdisp.h (class Convdisp) : Add get_caret_pos() member.

2005-07-31 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * helper/GNOME_UimApplet.server.in.in: Changed the icon.

2005-07-31 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * configure.ac: Added AC_SUBST(uim_pixmapsdir) to export
      uim_pixmapsdir.

2005-07-31 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * scm/m17nlib.scm: Refactoring. Behavior should not be changed.
     -(m17nlib-push-key): Removed off-key check from this procedure.
     -(m17nlib-press-key-handler): off-key check would be processed
       in this procedure.

2005-07-31 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * scm/m17nlib.scm:
     -(m17nlib-push-key): Condition checking m17nlib-off-key? should
       be called after m17nlib-lib-push-symbol-key.
     -(m17nlib-press-key-handler): If key is off-key, then off-key
       itself should not be committed.

2005-07-31 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * scm/m17nlib.scm:
     -(m17nlib-push-key): Call m17nlib-translate-ukey-to-mkey
      also when key is not a symbol.
     -(m17nlib-key-translation-alist): Data to translate symbol
       key to m17n-lib key.
     -(m17nlib-construct-modifier): New function.
     -(m17nlib-translate-ukey-to-mkey): Corresponded when key isn't
      a symbol key.

2005-07-31 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * scm/romaja.scm: Updated with latest version.

2005-07-29 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * uim/m17nlib.c:
     -(get_key_sym): Removed unused function.
     -(push_key): Removed unused function.

2005-07-29 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * scm/m17nlib.scm:
     -(m17nlib-push-key): Modifier should be appended not only for symbol
      key but also non-symbol key.

2005-07-29 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * scm/japanese-kana.scm: Added some new rules for kana.
      Thanks to Kenji Nishishiro.

2005-07-28 Etsushi Kato <ek.kato@gmail.com>

    * xim/ximic.cpp : Cosmetic changes.
    * xim/ximtrans.cpp : Ditto.
    (Connection::xim_error) : Suppress error message upon receiving
      XIM_BadSomething.

2005-07-27 Etsushi Kato <ek.kato@gmail.com>

    * xim/ximtrans.cpp (Connection::xim_error) : Cope with
      XIM_BadSomething for qt's insufficient XIM implementation.
    * xim/canddisp.cpp : Cosmetic change.
    * xim/convdisp.cpp : Ditto.
    * xim/connection.cpp : Ditto.

2005-07-27 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * scm/anthy.scm:
     -(anthy-proc-input-state-with-preedit): Don't commit modifier key.
     Thanks to Kouhei Sutou.

2005-07-27 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * configure.ac: Updated version number to 0.4.8alpha1.

2005-07-27 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * uim.pc.in: Removed @M17NLIB_LIBS@ from Libs because libuim
      no longer depends on m17nlib. (Instead of that, libuim-m17nlib
      depends on m17n-lib, but this library is not linked from libuim.)

2005-07-27 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * scm/romaja.scm: Updated with David's latest version.
      Thanks to David Oftedal.

2005-07-25 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * uim/uim.c:
     -(uim_quit): Return if uim_quit already called.

2005-07-21 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * uim/scim.cpp: Replaced all error message output to stderr from stdout.

2005-07-21 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * scm/canna.scm:
     -(canna-init-handler): Connect to canna server if not connected.

2005-07-19 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * scm/canna.scm: Removed check whether can connect to canna server, because
      it cannot correspond to new uim-module-manager. If this check is really
      need, please revert this commit.

2005-07-14 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit is including an API specification change which affects
      to bridge implementations. See doc/COMPATIBILITY for detail.
    
    * uim/uim.c
      - (uim_switch_im): Remove implicit default-im-name switching at end
    * gtk/gtk-im-uim.c
      - (im_uim_parse_helper_str_im_change):
        * Add default IM switching to im_change_whole_desktop and
          im_change_this_application_only
        * Fix responding to a message that directed to other processes
          (related to disable_focused_context)
    * doc/COMPATIBILITY
      - Add a new section 'default IM switching responsibility separation
        from uim_switch_im()'

2005-07-12 Masahito Omote <omote@utyuuzin.net>

    * xim/canddisp.cpp: Enable users to configure helper-candwin program
      by setting 'uim-candwin-prog'.
    * This configuration uses old uim-compat-scm API. We have to switch
      to uim-custom API.

2005-07-11 Etsushi Kato <ek.kato@gmail.com>

    * skk.c (get_ignoring_indices) : Check array size.

2005-07-10 Etsushi Kato <ek.kato@gmail.com>

    * scm/anthy.scm (anthy-release-handler) : Fix behavior when ac-id
      is not set (i.e. dlopen of libanthy failed).

2005-07-09 Etsushi Kato <ek.kato@gmail.com>

    * xim/ximserver.cpp (XimServer::customContext) : Update default
      xftfont and IM after customContext().
    * xim/convdisp.cpp (dequote) : Removed.
    (update_default_xftfont) : Don't use argument.  Add sanity check
      for gXftFont.
    * xim/ximserver.h (class XimServer) : Remove
      mUsePreservedDefaultIM member.
    * xim/compose.cpp : Fix typo in comment.
    * uim/skk.c : Ditto.  Cosmetic changes about parentheses.

2005-07-08 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * test/test-util.scm
      - (test alist-delete): Follow change of r892

2005-07-08 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * test/test-slib.scm
    * test/test-uim-util.scm
    * test/test-util.scm
    * scm/util.scm
    * uim/uim-util.c
    * uim/slib.c
      - Merge utility functions from the composer branch into trunk as
        follows
    
      svn merge -r701:951 svn+ssh://freedesktop.org/srv/uim.freedesktop.org/svn/branches/composer/scm/util.scm scm/util.scm
      svn merge -r701:951 svn+ssh://freedesktop.org/srv/uim.freedesktop.org/svn/branches/composer/uim/ uim/
      svn merge -r701:951 svn+ssh://freedesktop.org/srv/uim.freedesktop.org/svn/branches/composer/test/test-util.scm test/test-util.scm
      svn merge -r701:951 svn+ssh://freedesktop.org/srv/uim.freedesktop.org/svn/branches/composer/test/test-uim-util.scm test/test-uim-util.scm
    
    ----------------
    r702 | yamaken | 2005-02-24 06:56:11 +0900 (Thu, 24 Feb 2005)
    
    * scm/util.scm
      - (char-vowel?, char-consonant?, safe-car, safe-cdr, assq-cdr): New
        procedure
      - (find-tail, bitwise-not, bitwise-and, bitwise-or, bitwise-xor):
        New SRFI procedures
    
    ----------------
    r703 | yamaken | 2005-02-24 07:39:13 +0900 (Thu, 24 Feb 2005)
    
    * scm/util.scm
      - Reorder procedure definitions to fix invalid forward reference to
        'map' in char-vowel?. No actual code modification is applied
    
    ----------------
    r775 | yamaken | 2005-03-09 04:30:51 +0900 (Wed, 09 Mar 2005)
    
    * scm/util.scm
      - (zero?, positive?, negative?): New R5RS procedure
      - (clamp): New procedure
    * test/test-util.scm
      - (test clamp, test zero?, test positive?, test negative?): New test
    
    ----------------
    r797 | yamaken | 2005-03-19 21:59:07 +0900 (Sat, 19 Mar 2005)
    
    * uim/uim-util.c
      - (string_prefixp_internal, string_prefixp, string_prefix_cip): New
        function
      - (uim_init_util_subrs): Add initialization of string-prefix? and
        string-prefix-ci?
    * test/test-uim-util.scm
      - (test string-prefix?, test string-prefix-ci?): New test
    
    ----------------
    r815 | yamaken | 2005-04-03 22:10:04 +0900 (Sun, 03 Apr 2005)
    
    * This commit makes evmap rule tree initialization 1.9 times faster
    
    * scm/util.scm
      - (iterate-lists): Remove and replace with faster C version
    * uim/uim-util.c
      - (shift_elems, iterate_lists): New static function
      - (uim_init_util_subrs): Add initialization of iterate-lists
    * test/test-uim-util.scm
      - (test iterate-lists): Moved from test-util.scm
    * test/test-util.scm
      - (test iterate-lists): Move to test-uim-util.scm
      - (testcase util misc): Fix an broken form
    
    ----------------
    r816 | yamaken | 2005-04-04 10:49:03 +0900 (Mon, 04 Apr 2005)
    
    * This commit makes evmap rule tree initialization 5.5 times faster
      than r815. Current startup time is about 0.8 sec on my machine. The
      time will be reduced more in accordance with architectural change
      for press/release handlings
    
    * scm/util.scm
      - (compose): Optimize
      - (last, append!, concatenate, concatenate!): New SRFI-1 procedure
      - (append-map): Optimize with concatenate!
      - (find-tail): Removed to be replaced with the faster C implemantation
    * uim/uim-util.c
      - (iterate_lists): Simplify
      - (find_tail): New static function
      - (uim_init_util_subrs): Add initialization of find-tail
    * uim/slib.c
      - (last) Rename to last_pair() to conform to SRFI-1
      - (last_pair): Renamed from last()
      - (nconc): Follow the renaming
      - (init_subrs): Rename Scheme procedure name 'last' with 'last-pair'
        to conform to SRFI-1
    
    * composer/test/test-uim-util.scm
    * composer/test/test-util.scm
      - Update comment
    
    ----------------
    r820 | yamaken | 2005-04-07 14:04:52 +0900 (Thu, 07 Apr 2005)
    
    * scm/util.scm
      - (define-record): Simplify and Optimize
    
    ----------------
    r950 | yamaken | 2005-07-08 21:44:54 +0900 (Fri, 08 Jul 2005)
    
    * scm/util.scm
      - (method-delegator-new, char?): New procedure
      - (do-nothing): Moved from load-action.scm

2005-07-07 Etsushi Kato <ek.kato@gmail.com>

    * xim/xim.h (class XimIM) : Add public member send_sync().
    (class XimIC) : Add private member send_sync().
    * xim/ximic.cpp (XimIC::extra_input) : Fix temporary broken
      extra_input facility.
    (XimIC::send_sync) : New.
    * xim/ximim.cpp (class XimIM_impl) : New public member
      send_sync().
    (XimIM_impl::send_sync) : New.  Send XIM_SYNC.

2005-07-07 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/im-custom.scm
      - (custom-im-list-as-choice-rec): Simplify. Validated with test-im.scm

2005-07-07 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * scm/im-custom.scm:
     -(custom-im-list-as-choice-rec): Added #f check for im.

2005-07-07 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * uim/uim-module-manager.c:
     -(print_usage): Implemented.

2005-07-07 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * scm/uim-module-manager.scm:
     -(register_module, unregister_module, register-module-to-file): Removed
      because they are already unused procedures.

2005-07-07 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * uim/uim-module-manager.c:
     -(get_arguments): New function to get argument passed to the program.
       This function is need because apply/funcall is not exported.
     -(main): Changed argument parsing code completely. Now plural module
       chould be register/unregister at once. File path customizing feature
       is also added.
    
    * scm/uim-module-manager.scm:
     -(register-modules, unregister-modules, get-new-registered-module-list,
       remove-unregistered-modules,update-modules-installed-modules.scm-loader.scm,
       update-modules): New procedure.
     -(update-installed-modules&loader): Removed.

2005-07-06 Etsushi Kato <ek.kato@gmail.com>

    * uim/uim-module-manager.c (concat) : Add space for terminating
      '\0'.

2005-07-06 Etsushi Kato <ek.kato@gmail.com>

    * scm/skk.c (purge_candidate) : Don't purge words in the base
      candidate array of okuri-ari entry.

2005-07-06 Etsushi Kato <ek.kato@gmail.com>

    * scm/skk.scm : Add ddskk's skk-purge-from-jisyo equivalent.
    (skk-style-spec) : Add skk-preedit-attr-dialog.
    (skk-style-uim) : Use preedit-none for skk-preedit-attr-dialog.
    (skk-style-ddskk-like) : Ditto.
    (skk-child-type-editor) : New.
    (skk-child-type-dialog) : Ditto.
    (skk-context-rec-spec) : Add child-type and dialog.
    (skk-flush) : Flush dialog.
    (skk-context-new) : Set dialog.
    (skk-commit-raw) : Check child type.
    (skk-commit) : Ditto.
    (skk-prepare-commit-string) : Remove redundant code.
    (skk-purge-candidate) : New procedure.
    (skk-begin-conversion) : Set child type as editor when going to
      recursive learning.
    (skk-do-update-preedit) : Check child type.
    (skk-commit-editor-context) : Simplify and set child-context and
      child-type as nil.
    (skk-commit-dialog-context) : New.
    (skk-setup-child-context) : Check child type (editor or dialog).
    (skk-change-candidate-index) : Setup child as editor.
    (skk-proc-state-converting) : Handle skk-purge-candidate-key?.
    * scm/skk-key-custom.scm (skk-purge-candidate-key) : New.
    * scm/skk-editor.scm (skk-editor-commit-raw) : Reset child-context
      and child-type as nil (not #f).
    * scm/skk-dialog.scm : New file for dialog context.  Mostly copied
      from skk-editor.scm.
    
    * scm/Makefile.am : Add skk-dialog.scm as SCM_FILES.
    
    * uim/skk.c : Remove "skk_" prefix from function used on
      internally, and use "skk_" prefix only for function with scheme
      API.  Many cosmetic changes about parentheses.  Add support for
      purge of unwanted candidate words.
    (merge_base_candidate_to_array) : Check purged words while
      merging.
    (is_purged_cand) : New function.  Return 1 if the candidate word
      is purged one (e.g. (skk-ignore-dic-word "foo")).
    (get_purged_words) : New function.  Create an array of purged
      words from purged candidate.
    (nr_purged_words) : New function.  Return the number of words in
      the array of purged words.
    (free_allocated_purged_words) : New function.  Free storage
      allocated with get_purged_words().
    (is_purged_only) : New function.  Return 1 when candidate array
      contains only purged words.  Used in skk_get_entry().
    (match_to_discarding_index) : New function.  Return 1 if nth in
      the candidate array is needed to be ignored.
    (skk_get_entry) : Check purged entry.
    (get_purged_cand_index) : New function.  Return index of purged
      candidate in the candidate array.  Returns -1 if there is no
      such candidate.
    (get_ignoring_indices) : New function.  Return the number of
      candidates needed to be ignored in the candidate array, and set
      these indices.
    (skk_get_nth_candidate) : Don't count purged candidates.
    (skk_get_nr_candidates) : Ditto.
    (push_purged_word) : New function.  Add a word to the candidate
      array as a purged word at nth position in the array.
    (remove_candidate_from_array) : New function.
    (merge_word_to_real_cand_array) : Renamed from
      merge_word_to_cand_array().  Don't check the existence of word
      in the destination array.
    (exist_in_purged_cand) : Return 1 if the word is already existed
      in a purged candidate in the array.
    (index_in_real_cands) : Return index of the word in a candidate
      array within nr_real_cands scope.  If the doesn't exist return
      -1.
    (remove_purged_words_from_dst_cand_array) : New function.  Remove
      candidate words within nr_real_cands scope if the words is
      matched with the one in a supplied purged candidate.
    (merge_purged_cands) : New function.
    (merge_purged_cand_to_dst_array) : New function.
    (merge_word_to_dst_cand_array_with_purged_words) : New function.
    (merge_real_candidate_array) : Add check for purged words.
    (skk_commit_candidate) : Don't count purged words.
    (purge_candidate) : New function.  Purge a candidate word at the
      nth in the candidate array.
    (skk_purge_candidate) : New function corresponding to API for
      scheme.
    (quote_word) : Use prefix characters.
    (sanitize_word) : Ditto.
    (compare_and_merge_skk_line) : Merge all real candidate array
      since purged words may exist.
    (uim_plugin_instance_init) : Add new API for scheme
      skk-lib-purge-candidate.

2005-07-06 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * uim/uim-module-manager.c:
     -(concat): New utility function.
     -(read_module_list, write_module_list, write_loader_scm,
      write_installed_modules_scm): Added an file path customizing feature.

2005-07-05 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * uim/uim-module-manager.c: # is not a valid comment start mark,
      ; should be used.

2005-07-05 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * scm/uim-module-manager.scm:
     - (update-installed-modules-scm): Added "(define installed-im-module-list"
       to generate valid installed-modules.scm.

2005-07-03 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * scm/uim-module-manager.scm:
     - (update-installed-modules&loader): New procedure.
     - (update-installed-modules-scm): New procedure.

2005-07-03 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * uim/uim-module-manager.c:
     -(INSTALLED_MODULES_SCM_FILENAME): Fixed an silly typo.

2005-07-03 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * scm/uim-module-manager.scm:
     - (update-loader-scm): Added calling of write-loader.scm to
        update loader.scm actually.

2005-07-03 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * uim/uim-module-manager.c:
     -(write_loader_scm): New procedure to write loader.scm.
     -(write_installed_modules_scm): New procedure to write installed-modules.scm.

2005-07-03 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * uim/uim-module-manager.c:
     - (main): Added calling of setenv to generate loader.scm.

2005-07-03 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/util.scm
      - (define-record): Revert excessive error check added in r922. The
        #f check is already done by nth procedure. Although current nthcdr
        for setter proc doesn't do the check, list-tail will do it

2005-07-03 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/slib.c
      - (init_subrs): Disable definition of list-tail because list-tail is
        already existing in util.scm. To replace it with this, implement
        equivalent error handling and validate with
        test/test-util.scm. Please don't forget existence of util.scm.

2005-07-03 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/uim-module-manager.scm
      - (register-module, unregister-module, register-module-to-file):
        Replace improper use of (print (intern foo)) combination with puts
      - Add (prealloc-heaps-for-heavy-job) at end of the file to get
        processing faster
      - Above changes are not actually validated. Hiroyuki, please do it

2005-07-03 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/uim-module-manager.scm
      - Remove svn:mime-type property to enable diffing

2005-07-03 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * uim/slib.c:
     - (list_tail): New R5RS function. nthcdr should be replaced with this function.

2005-07-03 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * scm/anthy.scm:
     -(anthy-make-whole-string, anthy-input-state-preedit): Replaced nth with list-ref.

2005-07-03 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * uim/slib.c:
     - (list_ref): New function for list-ref.
     All calling of 'nth' should be replaced with list-ref, because
     R5RS nor SRFI don't have the function 'nth'.

2005-07-03 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * scm/util.scm:
     - (define-record): Added null check to getter/setter.

2005-07-03 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * scm/uim-module-manager.scm:
     - (update-loader-scm module-list): Not complete yet.
     Now this procedure calls stub-im-generate-all-stub-im-list.
     It's not desirable because it's a heavy procedure.

2005-07-03 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * scm/uim-module-manager.scm:
     - (update-loader-scm): New procedure, doesn't work yet.
     Hmm, I can't understand why this file is marked as a binary type...

2005-07-03 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * uim/uim-module-manager.c: Changed argument of exit to EXIT_FAILURE.

2005-07-03 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * uim/uim-module-manager.c: New file.
    * scm/uim-module-manager.scm: New file.
    
      New progaram uim-module-manager consists of these files. This is a
      program to register/unregister modules.

2005-07-02 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * scm/tcode.scm: Fixed a wrong entry.

2005-07-02 Etsushi Kato <ek.kato@gmail.com>

    * xim/compose.cpp (XimIM::ParseComposeStringFile) : Fix bug
      #3684.  Thanks to Phillip Vandry.
    
    * helper/pref-gtk.c (create_pref_window) : Fix compilation.

2005-07-01 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * scm/prime-key-custom.scm, scm/prime-custom.scm, scm/prime.scm:
     - Correct license descriptions.

2005-07-01 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * prime.scm, prime-cutsom.scm, prime-key-custom.scm:
      - Updated to version 1.0.0 of PRIME.

2005-06-27 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * RELEASING: Some sentences were corrected. Thanks to Jeroen Ruigrok/asmodai.

2005-06-27 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * helper/pref-gtk.c:
     -(create_pref_window): Added a support for window icon.

2005-06-27 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * pixmaps/uim-icon.png: Added a new icon file. Thanks to SHIMODA Hiroshi.

2005-06-26 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * skk.c: Renamed from skk-dic.c because this file includes
             not only for skk dictionary but also for skk server.

2005-06-25 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * Release 0.4.7.

2005-06-25 Masanari Yamamoto <h013177b@ice.nuie.nagoya-u.ac.jp>

     * fep/escseq.c(check_escseq) : fix to check escape sequence accurately

2005-06-23 Etsushi Kato <ek.kato@gmail.com>

    * xim/convdisp.cpp (PeWin::get_fontsize) : Cope with font size
      with three digits.

2005-06-22 Etsushi Kato <ek.kato@gmail.com>

    * uim/uim.c (uim_release_context) : Plug leak.
    (uim_quit) : Ditto.
    * xim/ximim.cpp (XimIM::FreeComposeTree) : Ditto.

2005-06-22 Etsushi Kato <ek.kato@gmail.com>

    * uim/skk-dic.c (compose_line_parts) : Plug leak.

2005-06-22 Etsushi Kato <ek.kato@gmail.com>

    * uim/skk-dic.c (nth_candidate) : Plug leak.
    (compose_line_parts) : Ditto.

2005-06-21 Etsushi Kato <ek.kato@gmail.com>

    * uim-xim : Improve packet handling with async
      (on-demand-synchronous) event flow.
    
    * xim/xim.h (class Connection) : Remove unused OnPushPacket()
      member.  Add setter and getter for new mPreeditCaretSyncFlag
      member.  Remove mPendingRxQ member. Add xim_preedit_start_reply()
      and xim_preedit_caret_reply() member.  Rename clear_pending_rx()
      as clear_pending_queue().
    * xim/connection.h (class XConnection) : Add new member function
      writePendingPacket(), writePassivePacket(), and
      writeNormalPacket().
    * xim/connection.cpp (XConnection::writePendingPacket) : New
      function divided from writeProc().
    (XConnection::writePassivePacket) : Ditto.
    (XConnection::writeNormalPacket) : Ditto.
    (XConnection::writeProc) : Simplify.
    * xim/ximtrans.cpp (Connection::OnRecv) : Handle
      XIM_PREEDIT_CARET_REPLY.
    (Connection::setPreeditCaretSyncFlag) : New.
    (Connection::unsetPreeditCaretSyncFlag) : Ditto.
    (Connection::hasPreeditCaretSyncFlag) : Ditto.
    (Connection::xim_forward_event) : Don't use mPendingRxQ.
    (Connection::xim_sync_reply) : Ditto.
    (Connection::xim_preedit_start_reply) : Remove unused parameter.
    (Connection::xim_preedit_caret_reply) : New function.
    (Connection::clear_pending_queue) : Renamed from
      clear_pending_rx().
    * xim/convdisp.cpp (ConvdispOs::update_preedit) : Send
      XIM_PREEDIT_CARET packet.

2005-06-21 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/util.scm
      - (ucs-to-utf8-string): Fix lacking closing paren enbuged in r899

2005-06-20 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/util.scm
      - (ucs-to-utf8-string): Cosmetic change

2005-06-20 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * scm/util.scm:
     -(ucs-to-utf8-string): New function. Thanks to Park Jae-hyeon.

2005-06-20 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/init.scm
      - (load-modules):
        * Recover backward compatible behavior of LIBUIM_VANILLA=1. The
          behavior is needed by any unit tests defined in ./tests
    
          - disable ~/.uim, user customs, lazy loading, loading modules
    
        * Add new behavior of LIBUIM_VANILLA=2 as introduced in r893.
    
          - disable ~/.uim, user customs and lazy loading, but enable
            loading modules
    
    * test.sh.in
      - Rewrite LIBUIM_VANILLA=1 with LIBUIM_VANILLA=2 to follow above
        change
    * doc/api-doc/uim-devel.db
      - Rewrite explanation of LIBUIM_VANILLA roughly

2005-06-19 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * release 0.4.7beta1.

2005-06-19 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * scm/init.scm:
     -(load-modules): Call load-enabled-modules even if LIBUIM_VANILLA is set
       to 1. This will fix the bug that we cannot test except 'direct' input
       method with test.sh.

2005-06-18 Etsushi Kato <ek.kato@gmail.com>

    * xim/convdisp.h (class Convdisp) : Add new public member
      get_locale_name();
    * xim/convdisp.cpp (gXftFontLocale) : New variable.
    (init_default_xftfont) : Store a locale infomation for gXftFont.
    (update_default_xftfont) : Ditto.
    (class PeWin) : Remove redundant mXftFontName member.
    (PeWin::PeWin) : Set gXftFont according to working locale.
    (PeWin::set_xftfont) : Change mXftFont with considering locale.
    (Convdisp::get_locale_name) : New function.

2005-06-18 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/util.scm
      - (delete, alist-delete): Fix default comparison procedure = with
        equal? as described in SRFI-1. Thanks for the report Park Jae-hyeon
    * uim/slib.c
      - (inteql): New static function for R5RS compatible "=" procedure
      - (init_subrs): Prepare future replacement of "=" procedure as
        disabled code. Binding "=" with inteql() causes some error, so I
        disabled it for now. It will be enabled in uim 0.5.x series

2005-06-18 Etsushi Kato <ek.kato@gmail.com>

    * xim/ximserver.cpp (InputContext::createUimContext) : Fix
      unwanted free() of a string while invoking reload_uim().

2005-06-18 kzk <mover@hct.zaq.ne.jp>

    * scm/anthy.scm
      - (anthy-proc-transposing-state): commit transposing string in pressing
        the keys which are not the transposing-trigger.

2005-06-18 Etsushi Kato <ek.kato@gmail.com>

    * xim/convdisp.cpp (PeWIn::set_xftfont) : Fix to use
      XFT_PIXEL_SIZE not XFT_SIZE.

2005-06-17 Etsushi Kato <ek.kato@gmail.com>

    * configure.ac : Use AM_LANGINFO_CODESET instead of checking
      langinfo.h.  Fix some duplicate check with AC_CHECK_HEADERS.
    * fep/str.c (get_enc): Restore old code for system without
      nl_langinfo(CODESET);

2005-06-16 Masanari Yamamoto <h013177b@ice.nuie.nagoya-u.ac.jp>

     * configure.ac: add langinfo.h and utmp.h to AC_CHECK_HEADERS
     * fep/uim-fep.c (my_forkpty) : use login_tty instead of ioctl to compile on Cygwin

2005-06-16 Etsushi Kato <ek.kato@gmail.com>

    * uim/skk-dic.c (numeric_kanji_with_position_conv) : Fix for #3
      numeric conversion.
    (numeric_kanji_for_check_conv) : Fix for #5 numeric conversion.

2005-06-15 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * RELEASING: New file for release manual.

2005-06-15 Masanari Yamamoto <h013177b@ice.nuie.nagoya-u.ac.jp>

     * fep/Makefile.am: add README.key
     * fep/{uim-fep.c,escseq.c}:
      Change behavior of redirection.
      Add signal handlers of SIGTSTP and SIGCOUT.

2005-06-14 Masahito Omote <omote@utyuuzin.net>

    * xim/Makefile.am: Add uim-xim.1 into EXTRA_DIST.

2005-06-14 Etsushi Kato <ek.kato@gmail.com>

    * uim/skk-dic.c : Update skk_isalpha macro.

2005-06-14 Etsushi Kato <ek.kato@gmail.com>

    * uim/skk-dic.c : Don't use isalpha(3), islower(3), and isascii(3)
      in ctype.h to avoid unwanted behavior with some locales on some
      systems.  More cosmetic changes.

2005-06-13 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * configure.ac: Release 0.4.7alpha1.

2005-06-13 Etsushi Kato <ek.kato@gmail.com>

    * uim/skk-dic.c : Cosmetic changes.

2005-06-12 Masahito Omote <omote@utyuuzin.net>

    * xim/uim-xim.1: Manpage for uim-xim. Thanks to Wesley J. Landaker
      <wjl@icecavern.net>.(http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=300487)
    * xim/Makefile.am: Add man1_MANS section for uim-xim.1.

2005-06-09 Etsushi Kato <ek.kato@gmail.com>

    * scm/skk-custom.scm : Fix skk-candidate-op-count for ddskk-like
      behavior.

2005-06-09 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * scm/romaja.scm: Added many entries. Thanks to David Oftedal.

2005-06-07 Etsushi Kato <ek.kato@gmail.com>

    * scm/skk-custom.scm : Minor change for r871.

2005-06-07 Etsushi Kato <ek.kato@gmail.com>

    * scm/skk-custom.scm : Set skk-candidate-op-count and
      skk-nr-candidate-max depending on skk-candidate-selection-style
      and ssk-use-manual-candwin-setting?.
    (skk-use-manucal-candwin-setting?) : New custom variable.  This
      activates setting of skk-candidate-op-count and
      skk-nr-candidate-max.  This variable is only used in custom.
    (skk-use-candidate-window?) : Set additional activity hooks to
      rest of candidate window settings.
    
    * po/uim.pot : Update.
    * po/ja.po : Ditto.
    * po/fr.po : Ditto.

2005-06-06 Etsushi Kato <ek.kato@gmail.com>

    * uim/skk-dic.c (skk_lib_save_personal_dictionary) : No need to
      call remove(2) since an old personal dictionary is replaced with
      rename(2).

2005-06-06 Etsushi Kato <ek.kato@gmail.com>

    * uim/skk-dic.c : Remove unused included file "uim-helper.h".
    (skk_lib_save_personal_dictionary) : Simplify the routine and use
      a temporary file for safe behavior.

2005-06-05 Etsushi Kato <ek.kato@gmail.com>

    * xim/ximserver.cpp (XimServer::customContext) : Minor fix for
      custom update of "custom-preserved-default-im-name".

2005-06-05 Etsushi Kato <ek.kato@gmail.com>

    * skk-custom.scm : Remove definition of heading-label-char-list
      added in r863

2005-06-05 Etsushi Kato <ek.kato@gmail.com>

    * scm/skk.scm : Revert the changes in r863.
    * scm/skk-custom.scm : Ditto.

2005-06-05 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * m4/Makefile.am: Added xft.m4 to EXTRA_DIST.

2005-06-05 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * configure.ac: Don't require intltool when Gnome applet is not build.

2005-06-05 Etsushi Kato <ek.kato@gmail.com>

    * scm/skk.scm (skk-ddskk-like-heading-lable-char-list) : Move into
      skk-custom.scm.
    (skk-uim-heading-label-char-list) : Ditto.
    * scm/skk-custom.scm : Add custom-set-hooks for
      skk-candidate-selection-style.
    (skk-ddskk-like-heading-label-char-list ) : Moved from skk.scm.
    (skk-uim-heading-label-char-list) : Ditto.

2005-06-04 Etsushi Kato <ek.kato@gmail.com>

    * xim/main.cpp (reload_uim) : Change initialization sequence.

2005-06-04 Etsushi Kato <ek.kato@gmail.com>

    * xim/main.cpp (reload_uim) : Update focused context (if exists).

2005-06-02 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * uim/uim-helper-server.c:
     - Quit when user logged out.
     -(check_session_alive): New function.

2005-06-02 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * uim/uim-helper-server.c:
     - (get_unused_fd): Added void to the argument of function declaration.
     - Added a comment.

2005-06-02 Etsushi Kato <ek.kato@gmail.com>

    *  doc/XIM-SERVER : Add description about uim reloading mechanism.

2005-06-02 Etsushi Kato <ek.kato@gmail.com>

    * configure.ac : Don't invoke AM_CONDITIONAL(WITH_XFT) conditionally.

2005-06-02 Etsushi Kato <ek.kato@gmail.com>

    * xim/main.cpp (main) : Use SIGUSR1 instaed of SIGINT for
      reloading uim.

2005-06-02 Masanari Yamamoto <h013177b@ice.nuie.nagoya-u.ac.jp>

     * xim/ximic.cpp: "uim-compat-scm.h" -> "uim/uim-compat-scm.h"

2005-06-01 kzk <mover@hct.zaq.ne.jp>

    * scm/anthy.scm
      - (anthy-flush): set transposing mode "off"

2005-06-01 kzk <mover@hct.zaq.ne.jp>

    * xim/canddisp.cpp
      - include "errno.h" for variable "errno"

2005-06-01 Etsushi Kato <ek.kato@gmail.com>

    * configure.ac : Add Xft support for uim-xim.
    * m4/xft.m4 : New file.
    * scm/im-custom.scm : Add xim custom group.  Add new symbols
      uim-xim-use-xft-font? (default is #f) and uim-xim-xft-font-name.
    * xim/xim.h (class icxatr) : Add new public member use_xft().
      Make font_set_name public.  Add new private member m_use_xft.
    * xim/ximic.cpp : Include uim-compat-scm.h for using u
      uim_scm_symbol_value_bool().
    (get_font_set) : Add sanity check.
    (icxatr::icxatr) : Check whether to use xft fonts.
    (icxatr::~icxatr) : Ditto.
    (icxatr::set_atr) : Ditto.
    (icxatr::use_xft) : New function.
    * xim/ximserver.cpp (customContext) : Add hack to update xft
      fontname with custom.
    * xim/main.cpp : Include uim-compat-scm.h.
    (clear_uim_info) : New function.
    (reload_uim) : Plug leak while clearing uim_info.
    (main) : Setup xft fonts.
    * xim/convdisp.cpp : Include Xft.h if defined
      #HAVE_XFT_UTF8_STRING.  Include uim-compat.scm.h.  Define
      DEFAULT_FONT_SIZE.
    (gXftFont) : New variable.
    (gXftFontName) : Ditto.
    (init_default_xftfont) : New function.
    (dequote) : New function to remove double quotation.
    (update_default_xft_font) : New function.
    (class PeWin) : Add new public member set_xftfont().  Add new
      public members mXftFont, mXftFontSize, mXftFontName.  Add new
      protected member get_fontsize(), mXftDraw, mXftColorFg,
      mXftColorFgRev.  Remove unused member mHilitGC.
    (class ConvdispOv) : Add new public member use_xft().  Remove
      unused members m_initial_fontset, m_initial_lang,
      m_lang_changed.
    (class ConvdispRw) : Add new public member use_xft().
    (class ConvdispOs) : Ditto.
    (PeWin::PeWin) : Don't create mHilitGC.  Create Xft font if
      use_xft() if true.
    (PeWin::~PeWin) : Clear Xft fonts.
    (PeWin::draw_char) : Draw string with Xft fonts if use_xft().
    (PeWin::set_back) : Set reverse color of Xft font.
    (PeWin::set_fore) : Set forground color of Xft font.
    (PeWin::set_fontset) : Add sanity check.
    (PeWin::set_xftfont) : New function to create Xft font according
      to requested font size.
    (PeWin::get_fontsize) : New function.  Retrieve font size from
      fontset name.
    (PeWin::set_size) : Change parent pixmap of mXftDraw.
    (PeLineWin::draw_segment) : Set glyph width appropriately.
    (ConvdispRw::use_xft) : New function.
    (ConvdispOv::ConvdispOv) : Remove unused variables.
    (ConvdispOv::~ConvdispOv) : Ditto.
    (ConvdispOv::set_im_lang) : Ditto.
    (ConvdispOv::update_icxatr) : Set Xft font.
    (ConvdispOv::check_win) : Ditto.
    (ConvdispOv::check_atr) : Remove unused procedure.
    (ConvdispOv::layoutCharEnt) : Setup Xft glyph width if use_xft().
    (ConvdispOv::use_xft) : New function.
    (ConvdispOs::use_xft) : New dummy function.
    * xim/ximserver.h : Add new prototypes init_default_fontset() and
      update_default_xftfont().
    (UIMInfo) : Remove const.
    * xim/convdisp.h (class Convdisp) : Add new virtual member
      use_xft().
    * xim/Makefile.am : Add Xft flags.

2005-06-01 Etsushi Kato <ek.kato@gmail.com>

    * xim/helper.cpp (helper_disconnect_cb) : Make public function.
      Close fd explicitly.
    * xim/ximserver.cpp (InputContext::createUimContext) : Change
      return type of the function and set mUc internally.
    * xim/main.cpp (error_handler_setup) : New function divided from
      pretrans_setup().
    (pretrans_setup) : Move X error handler setting into
      error_handler_setup().
    (terminate_x_connection) : New function.
    (reload_uim) : New function to re-initialize uim.
    (main) : Handle SIGINT.
    * xim/helper.h : Add prototype of helper_disconnect_cb().
    (Canddisp::check_connection) : New function.
    (Canddisp::activate) : Check connection after sending message.
    (Canddisp::select) : Ditto.
    (Canddisp::deactivate) : Ditto.
    (Canddisp::show) : Ditto.
    (Canddisp::hide) : Ditto.
    (Canddisp::move) : Ditto.
    (Canddisp::show_caret_state) : Ditto.
    * xim/ximserver.h (class InputContext) : Change return type of
      createUimContext and make it public.
    (class XimServer) : Make ic_list public.
    * xim/canddisp.h (class Canddisp) : Add new private member
      check_connection().
    (terminate_canddisp_connection) : New prototype.

2005-05-31 Etsushi Kato <ek.kato@gmail.com>

    * scm/anthy-key-custom.scm : Update descriptions about F7-F10 keys.

2005-05-31 Etsushi Kato <ek.kato@gmail.com>

    * po/uim.pot : Update.
    * po/ja.po : Ditto.
    * po/fr.po : Ditto.

2005-05-31 Etsushi Kato <ek.kato@gmail.com>

    * configure.ac : Fix typo in use_gtk2_4.  Thanks to Mamoru
      KOMACHI.
    
    * uim/context.h : Fix bug #3252 in correct handling of return
      vaule of bind_textdomain_codeset().
    
    * xim/xim.h : Remove unused parameters in definition of
      Connection::xim_disconnect(), Connection::xim_sync_reply(),
      icxatr::set_atr().
    * xim/ximtrans.cpp : Remove unused parameter in
      Connection::xim_disconnect(), Connection::xim_sync_reply().
    * xim/ximic (icxatr::set_atr) : Remove unused parameter.
      Terminate string appropriately.
    * xim/ximserver.cpp (print_ustring) : Fix compiler warning.
    * xim/main.cpp (X_ErrorHandler) : Show detailed error message.
    (X_IOErrorHandler) : Ditto.
    (init_supported_locales) : Fix indentation.
    * xim/convdisp.cpp (create_default_fontset) : Remove unused
      parameter.
    (choose_default_fontset) : Ditto.
    (PeWin::expose) : Fix compiler warning.

2005-05-25 kzk <mover@hct.zaq.ne.jp>

    * This commit aims to introduce preedit-transposing
      between latin, wide-latin, katakana and hankana
      on anthy.
    
    * scm/anthy.scm
      - (anthy-type-latin): new variable
      - (anthy-type-wide-latin): new variable
      - (anthy-context::transposing): new variable
      - (anthy-context::transposing-type): new variable
      - (anthy-update-preedit): using
        anthy-context-transposing-preedit when the state
        is transposing-state
      - (anthy-proc-transposing-state): new function
      - (anthy-proc-input-state-with-preedit): change the
        state when transposing trigger keys are pressed
      - (anthy-context-transposing-state-preedit): new func
      - (anthy-transposing-text): new func
      - (anthy-press-key-handler) :
        call anthy-proc-transposing-state when the state is
        transposing state.
    
    * scm/anthy-key-custom.scm
      - (anthy-transpose-as-latin-key)
          : renamed from anthy-commit-as-latin-key
      - (anthy-transpose-as-wide-latin-key)
          : renamed from anthy-commit-as-wide-latin-key
      - (anthy-transpose-as-katakana-key)
          : renamed from anthy-commit-as-katakana-key
      - (anthy-transpose-as-hankana-key)
          : renamed from anthy-commit-as-hankana-key

2005-05-25 Etsushi Kato <ek.kato@gmail.com>

    * fep/uim-fep.c : Avoid conflict of including term.h and
      ncurses.term.h.
    * fep/escseq.c : Ditto.
    * fep/key.c : Ditto.
    
    * xim/compose.cpp (XimIM::get_mb_string) : Remove unused variable.

2005-05-24 Etsushi Kato <ek.kato@gmail.com>

    * xim/*.[cpp,h]
      Change parent of Locale class to XimIM from XimServer, and
      cache iconv cd in each XimIM context to prevent frequent
      call of uim_iconv_open().

2005-05-23 Etsushi Kato <ek.kato@gmail.com>

    * fep/callbacks.c (init_callbacks) : Explicitly cast return value
      of uim_iconv_open().  Cast 2nd argument of iconv(3) using
      ICONV_CONST for compilation portability.

2005-05-20 Masanari Yamamoto <h013177b@ice.nuie.nagoya-u.ac.jp>

     * fep/escseq.c(get_cursor_position): break if read returns 0 five times

2005-05-16 Masanari Yamamoto <h013177b@ice.nuie.nagoya-u.ac.jp>

     * fep/{uim-fep.c,key.c}: add -K option

2005-05-16 Masanari Yamamoto <h013177b@ice.nuie.nagoya-u.ac.jp>

     * fep/{uim-fep.c,key.c}: handle 8bit characters

2005-05-15 Masanari Yamamoto <h013177b@ice.nuie.nagoya-u.ac.jp>

    バグ修正

2005-05-15 Masanari Yamamoto <h013177b@ice.nuie.nagoya-u.ac.jp>

     * configure.ac: Add check of ncurses/term.h
     * fep/:
      - New option -d. ddskk like candidate style
      - Remove -D option.
      - Change notatoins of some keys.

2005-05-11 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * configure.ac:
     - Replaced hardcoded X11 library path with $X_LIBS.
       Patch from John Thacker <thacker@math.cornell.edu>. Thanks!

2005-05-07 Etsushi Kato <ek.kato@gmail.com>

    * scm/skk.scm (skk-do-update-preedit) : More ddskk compatible
      behavior on converting state with ddskk-like candidate selection
      style.

2005-05-06 Etsushi Kato <ek.kato@gmail.com>

    * po/ja.po : Fix some translations on SKK.

2005-05-06 Etsushi Kato <ek.kato@gmail.com>

    * scm/im-custom.scm : Change description about
      bridge-show-input-state?
    * po/uim.pot : Update.
    * po/ja.po : Ditto.
    * po/fr.po : Ditto.

2005-05-06 Etsushi Kato <ek.kato@gmail.com>

    * scm/skk.scm (skk-commit-by-label-key) : Don't use fixed numeral
      heading label with uim's candidate selection style as well as
      ddskk-like style.
    (skk-get-candidate-handler) : Ditto.
    (skk-heading-label-char?) : Indentation fix.

2005-05-06 Etsushi Kato <ek.kato@gmail.com>

    * scm/skk.scm (skk-flush) : Reset skk-context-nr-candidates here.
    (skk-back-to-kanji-state) : Ditto.
    (skk-commit-raw) : Indentation fix.
    (skk-begin-conversion) : Ditto.
    (skk-back-to-converting-state) : New function to go back to
      converting state from recursive learning state.
    * scm/skk-editor.scm (skk-editor-commit-raw) : Go back to
      converting state on return key with null string and cancel key
      in recursive learning editor if at least one candidate word
      exists, otherwise go back to kanji state.

2005-05-06 Etsushi Kato <ek.kato@gmail.com>

    * scm/skk.scm (skk-do-update-preedit) : Don't show preedit string
      in converting state with ddskk-like candidate window.
    (skk-get-candidate-handler) : Use capital letter for heading label
      on ddskk-like candidate word.

2005-05-06 Etsushi Kato <ek.kato@gmail.com>

    * scm/skk.scm : Add ddskk like candidate selection feature.
    (skk-ddskk-like-heading-label-char-list) : New list
      for candidate heading label.
    (skk-uim-heading-label-char-list) : Ditto.
    (skk-do-update-preedit) : Indentation fix.
    (skk-check-candidate-window-begin) : Use skk-context-nth instead
      of skk-context-candidate-op-count to check whether window is
      needed.  Handle ddskk like candidate selection style.
    (skk-commit-by-label-key) : Handle ddskk like candidate selection
      style.
    (skk-incr-candidate-index) : New function separated from
      skk-change-candidate-index.
    (skk-decr-candidate-index) : Ditto.
    (skk-change-candidate-index) : Handle ddskk like candidate
      selection style.
    (skk-heading-label-char?) : Use list to check input character is
      matched with heading label character of the candidate.
    (skk-get-candidate-handler) : Handle ddskk like candidate
      selection style.
    (skk-set-candidate-index-handler) : Ditto.
    * scm/skk-custom.scm : Add new custom choice,
      skk-candidate-selection-style.

2005-05-03 Yusuke TABATA <yusuke@w5.dion.ne.jp>

    * ipa-x-sampa.scm : correct keymap. Thanks to Mike-san.

2005-04-27 Etsushi Kato <ek.kato@gmail.com>

    * uim/skk-dic.c (skk_search_line_from_server) : Fix skkserver
      connection with skkserv-3.9.

2005-04-25 Etsushi Kato <ek.kato@gmail.com>

    * uim/uim.h : Move prototype of uim_iconv_open to uim-util.h
    * uim/uim-util.h : uim_iconv_open() moved from uim.h.
    * uim/uim-func.c : Include uim-util.h for uim_iconv_open().
    * xim/compose.cpp : Ditto.
    * xim/locale.cpp : Ditto.

2005-04-23 Etsushi Kato <ek.kato@gmail.com>

    * uim/uim.h : Export uim_iconv_open().
    * uim/uim-func.c : Ditto.
    * xim/compose.cpp : Use uim_iconv_open().
    * xim/locale.cpp : Ditto.

2005-04-22 Etsushi Kato <ek.kato@gmail.com>

    * uim/skk-dic.c : Initial support for skkserver.
    (dic_info) : Add skkserver information members.
    (find_border) : Cosmetic change.
    (open_dic) : Connect to skkserver if use_skkserv option is
      set.
    (skk_dic_open) : Change argument to support skkserver.
    (skk_search_line_from_server) : New function to get candidates
      words from skkserver.
    (find_cand_array) : Add sanity check.  Search skk line from
      skkserver if the option is set.
    (skk_get_nth_candidate) : Indentation fix.
    (skk_make_comp_array_from_cache) : Ditto.
    (find_comp_array) : Cosmetic change.
    (skk_clear_completions) : Indentation fix.
    (skk_read_personal_dictionary) : Add sanity check.
    (skk_lib_save_personal_dictionary) : Ditto.
    (uim_plugin_instance_init) : Change argument number of
      skk-lib-dic-open.
    (uim_plugin_instance_quit) : Close skkserver connection.
    (skk_open_skkserv) : New function to connect skkserver.
    (skk_close_skkserv) : New function.
    
    * scm/skk.scm (skk-context-new) : Pass skkserver option to
      skk-lib-dic-open.
    (skk-get-candidate-handler) : Add accel-enum-hint argument, but
      not used yet.
    
    * scm/skk-custom.scm : Add skk-use-skkserv? and skk-serv-portnum
      custom variables.

2005-04-21 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * test/test-im.scm:
     - Follow the name change from ipa.scm to ipa-x-sampa.scm.
       Thanks to Denis Jacquerye <moyogo@gmail.com>.

2005-04-20 Etsushi Kato <ek.kato@gmail.com>

    * xim/ximserver.cpp (InputContext::candidate_activate) : Bug fix
      for candidates with the size of multiples of ten.

2005-04-12 Etsushi Kato <ek.kato@gmail.com>

    * helper/helper-candwin-gtk.c (read_cb) : Put read(2) in while
      loop.
    * qt/candwin-qt.cpp (CandidateWindow::slotStdinActivated) : Ditto.

2005-04-03 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/uim-db.scm
      - (uim-db-insert-code!): Fix message printing

2005-04-03 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit improves the interactive debugger for the uim Scheme
      interpreter. All changes had been contributed by Jun Inoue
      in [Anthy-dev 1961] and [Anthy-dev 1963]. Thank you for the help.
    
    * scm/uim-db.scm
      - (uim-db-every, uim-db-do-display, uim-db-add-hook!,
        uim-db-del-hook!): New procedure
      - (record uim-db-breakpoint): New record
      - (uim-db-insert-code!): Modify a message
      - (uim-db-set-break!, uim-db-del-break!, uim-db-break):
        * Ditto
        * Simplify with uim-db-breakpoint
      - (uim-db-shell):
        * Split help message off
        * Simplify with uim-db-breakpoint
      - (uim-db-help):
        * Split help message off
      - (uim-db-help-database): New variable

2005-03-30 Masanari Yamamoto <h013177b@ice.nuie.nagoya-u.ac.jp>

    * scm/skk.scm (skk-proc-state-okuri): reset okuri-head when skk-cancel-key is pressed

2005-03-25 Etsushi Kato <ek.kato@gmail.com>

    * uim/uim-helper-client.c (uim_helper_read_proc) : Don't call
      uim_helper_buffer_append() with rc -1.

2005-03-24 Masanari Yamamoto <h013177b@ice.nuie.nagoya-u.ac.jp>

    fix some bugs

2005-03-23 Etsushi Kato <ek.kato@gmail.com>

    * uim/skk-dic.c (parse_dic_line) : Use of islnum() is more
      appropriate here (e.g. 4.3bsd in SKK-JISYO.L).

2005-03-23 Etsushi Kato <ek.kato@gmail.com>

    * uim/skk-dic.c : Fix non portable use of isalpha() and isdigit().
      Thanks to Masanari Yamamoto.
    (parse_dic_line) : Fix invalid selection of the alphabetical word
      starting with a capital letter and ending with a small letter.

2005-03-21 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit resurrects the whole message buffering to fix possible
      message conflict and corruption
    
    * uim/uim-helper.h
      - (uim_helper_buffer_append, uim_helper_buffer_shift,
        uim_helper_buffer_get_message): New private function
    * uim/uim-helper.c
      - (uim_helper_buffer_append): New function
      - (uim_helper_buffer_shift): New function generalized from
        shift_read_buffer()
      - (uim_helper_buffer_get_message): New function generalized from
        uim_helper_get_message()
    * uim/uim-helper-client.c
      - (BUFFER_SIZE, uim_help_buf, uim_read_buf_size,
        uim_helper_client_focus): Removed
      - (uim_helper_client_focus_in, uim_helper_client_focus_out,
        uim_helper_client_get_prop_list, uim_helper_read_proc,
        uim_helper_get_message): Simplify
      - (shift_read_buffer): Removed to become generalized
        uim_helper_buffer_shift()
    * uim/uim-helper-server.c
      - (struct client):
        * Resurrect the member 'rbuf'
        * Rename the member 'write_queue' to 'wbuf' to:
          - symmetrize with 'rbuf'
          - avoid misunderstanding about the variable as 'message queue'
            since I believe that the term 'queue' is used to express
            frame, packet or message-level queue in networking domain
            rather than raw FIFO for octet stream
      - (get_unused_client, free_client):
        * Resurrect the rbuf handlings
        * Follow the renaming of write_queue
      - (distribute_message_fragment): Rename to distribute_message()
      - (distribute_message):
        * Follow the renaming of write_queue
        * Simplify
      - (reflect_message_fragment):
        * Resurrect the whole message buffering to fix possible message
          conflict and corruption
        * Simplify
      - (shift_buffer): Remove to generalize to uim_helper_buffer_shift()
      - (uim_helper_server_process_connection):
        * Follow the renaming of write_queue
        * Follow the renaming of shift_buffer()

2005-03-21 Masanari Yamamoto <h013177b@ice.nuie.nagoya-u.ac.jp>

     * fep/: add -D option for a DOS prompt

2005-03-21 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit makes efficiency of helper protocol handling better
    
    * uim/uim-helper.c
      - (uim_helper_send_message):
        * Remove obsolete comment
        * Add a debug message
        * Simplify
    
    * uim/uim-helper-client.c
      - (RECV_BUFFER_SIZE): New macro
      - (uim_recv_buf): New static variable
      - (uim_helper_read_proc):
        * Add EAGAIN handling
        * Make efficient
      - (uim_helper_get_message): Make efficient and simple
    
    * uim/uim-helper-server.c
      - (struct client): Remove an unnecessary member 'rbuf'
      - (read_buf): New static variable
      - (get_unused_client, free_client): Remove rbuf handlings
      - (uim_helper_server_get_message): Removed since unnecessary
      - (parse_content): Rename to distribute_message_fragment() because
        the name is inappropriate
      - (distribute_message_fragment):
        * Renamed from parse_content()
        * Simplify
      - (proc_func): Rename to reflect_message_fragment()
      - (reflect_message_fragment):
        * Renamed from proc_func()
        * Make efficient and simple by removing receive buffer
      - (uim_helper_server_process_connection): Follow the renaming of
        proc_func()

2005-03-20 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-helper-server.c
      - (uim_helper_server_process_connection):
        * Fix too frequent select(2)
        * Suppress error message when EAGAIN occur

2005-03-20 Etsushi Kato <ek.kato@gmail.com>

    * uim/uim-helper-client.c : Use blocking IO again.
    * uim/uim-helper.c (uim_helper_send_message) : Write all data with
      blocking IO.
    * uim/uim-helper-server.c (s_fdset_read) : New variable.
    (s_fdset_write) : New variable.
    (s_max_fd) : New variable used for select(2).
    (struct client) : Add new member write_queue.
    (init_serv_fd) : Set fd for select(2) here.
    (get_unused_client) : Setup write queue.
    (free_client) : Reset write queue.
    (parse_content) : Don't write(2) data here.  Just setup a write
      queue and prepare it for select(2).
    (shift_buffer) : New function.
    (uim_helper_server_get_message) : New function.  Separate received
      buffer into meaningful messages.
    (proc_func) : Don't return -1 even if read(2) fails when errno is
      EAGAIN or EINTR.  Change to call parse_conentt() with each
      message instead of message blocks.
    (uim_helper_server_process_connection) : Call select(2) with write
      fd in addition to read fd.

2005-03-19 Etsushi Kato <ek.kato@gmail.com>

    * xim/main.cpp (check_pending_xevent) : New function derived from
      xEventRead().
    (main_loop) : Use longer timeout value.  Call
      check_pending_xevent() if select(2) timeout to prevent hang with
      uim_custom.
    (xEventRead) : Use check_pending_xevent();
    (main) : Ditto.

2005-03-19 Etsushi Kato <ek.kato@gmail.com>

    * xim/main.cpp (main_loop) : Check timeout condition.

2005-03-19 Etsushi Kato <ek.kato@gmail.com>

    * xim/main.cpp (main_loop) : Use timeout value for select(2).

2005-03-18 Etsushi Kato <ek.kato@gmail.com>

    * scm/skk.scm (skk-proc-state-direct-no-preedit) : Enable key
      event passing with shift-key mask.
    (skk-proc-state-direct) : Ditto.  Thanks to Japanese uim wiki for
      reporting.

2005-03-16 kzk <mover@hct.zaq.ne.jp>

    * configure.ac
      - check QT_VERSION properly.
        Thanks Masanori Yamamoto for reporting this issue!

2005-03-15 Etsushi Kato <ek.kato@gmail.com>

    * uim/plugin.h : Enable C++ interface.
    * uim/context.h: Ditto.

2005-03-11 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * trunk/qt/immodule-quiminputcontext_with_slave.cpp
    * trunk/qt/immodule-subwindow.h
    * trunk/qt/pref-customwidgets.h
    * trunk/qt/chardict-chargridview.h
    * trunk/qt/chardict-qt.cpp
    * trunk/qt/chardict-unicodeviewwidget.cpp
    * trunk/qt/chardict-bushuviewwidget.cpp
    * trunk/qt/candwin-qt.cpp
    * trunk/qt/immodule-plugin.cpp
    * trunk/qt/immodule-qhelpermanager.h
    * trunk/qt/immodule-quiminputcontext.h
    * trunk/qt/pref-qt.cpp
    * trunk/qt/toolbar-standalone-qt.h
    * trunk/qt/switcher-qt.h
    * trunk/qt/immodule-candidatewindow.h
    * trunk/qt/toolbar-common-uimstateindicator.h
    * trunk/qt/toolbar-common-quimhelpertoolbar.h
    * trunk/qt/immodule-subwindow.cpp
    * trunk/qt/pref-customwidgets.cpp
    * trunk/qt/chardict-chargridview.cpp
    * trunk/qt/qtgettext.h
    * trunk/qt/immodule-quiminputcontext_with_slave.h
    * trunk/qt/immodule-qhelpermanager.cpp
    * trunk/qt/quiminputcontextplugin-qt4/COPYING
    * trunk/qt/chardict-qt.h
    * trunk/qt/immodule-quiminputcontext.cpp
    * trunk/qt/chardict-bushuviewwidget.h
    * trunk/qt/chardict-unicodeviewwidget.h
    * trunk/qt/toolbar-standalone-qt.cpp
    * trunk/qt/switcher-qt.cpp
    * trunk/qt/candwin-qt.h
    * trunk/qt/immodule-candidatewindow.cpp
    * trunk/qt/toolbar-common-uimstateindicator.cpp
    * trunk/qt/pref-qt.h
    * trunk/qt/toolbar-common-quimhelpertoolbar.cpp
    * trunk/gtk/uim-eb.c
    * trunk/gtk/gtk-im-uim.c
    * trunk/gtk/uim-cand-win-gtk.h
    * trunk/gtk/uim-eb.h
    * trunk/gtk/caret-state-indicator.c
    * trunk/gtk/uim-cand-win-gtk.c
    * trunk/gtk/caret-state-indicator.h
    * trunk/COPYING
    * trunk/fep/draw.h
    * trunk/fep/uim-fep.c
    * trunk/fep/uim-fep.h
    * trunk/fep/str.c
    * trunk/fep/read.c
    * trunk/fep/str.h
    * trunk/fep/callbacks.c
    * trunk/fep/read.h
    * trunk/fep/escseq.c
    * trunk/fep/callbacks.h
    * trunk/fep/COPYING
    * trunk/fep/key.c
    * trunk/fep/escseq.h
    * trunk/fep/udsock.c
    * trunk/fep/uim-fep-tick.c
    * trunk/fep/draw.c
    * trunk/fep/key.h
    * trunk/fep/udsock.h
    * trunk/po/fr.po
    * trunk/po/ja.po
    * trunk/po/uim.pot
    * trunk/helper/dict-util.c
    * trunk/helper/toolbar-systray-gtk.c
    * trunk/helper/dict-canna.c
    * trunk/helper/dict-util.h
    * trunk/helper/dict-dict.c
    * trunk/helper/dict-anthy.c
    * trunk/helper/dict-canna.h
    * trunk/helper/dict-anthy.h
    * trunk/helper/dict-dict.h
    * trunk/helper/toolbar-common-gtk.c
    * trunk/helper/toolbar-standalone-gtk.c
    * trunk/helper/dict-word-list-win-gtk.c
    * trunk/helper/dict-cclass-dialog.c
    * trunk/helper/toolbar-applet-gnome.c
    * trunk/helper/dict-word-list-win-gtk.h
    * trunk/helper/dict-cclass-dialog.h
    * trunk/helper/pref-gtk-custom-widgets.c
    * trunk/helper/dict-word.c
    * trunk/helper/dict-word-list-view-gtk.c
    * trunk/helper/pref-gtk-custom-widgets.h
    * trunk/helper/dict-word.h
    * trunk/helper/dict-word-list-view-gtk.h
    * trunk/helper/dict-word-win-gtk.c
    * trunk/helper/im-switcher-gtk.c
    * trunk/helper/dict-word-win-gtk.h
    * trunk/helper/pref-gtk.c
    * trunk/helper/helper-candwin-gtk.c
    * trunk/helper/dict-main-gtk.c
    * trunk/helper/input-pad-ja.c
    * trunk/test/test-db.scm
    * trunk/test/test-key.scm
    * trunk/test/test-slib.scm
    * trunk/test/test-lazy-load.scm
    * trunk/test/test-custom-rt.scm
    * trunk/test/test-ustr.scm
    * trunk/test/test-plugin.scm
    * trunk/test/test-uim-util.scm
    * trunk/test/test-uim-test-utils.scm
    * trunk/test/test-im.scm
    * trunk/test/test-intl.scm
    * trunk/test/test-custom.scm
    * trunk/test/test-util.scm
    * trunk/test/test-action.scm
    * trunk/test/test-i18n.scm
    * trunk/scm/tcode.scm
    * trunk/scm/japanese-kana.scm
    * trunk/scm/hangul2.scm
    * trunk/scm/skk-custom.scm
    * trunk/scm/hangul3.scm
    * trunk/scm/uim-sh.scm
    * trunk/scm/init.scm
    * trunk/scm/im.scm
    * trunk/scm/tutcode.scm
    * trunk/scm/m17nlib.scm
    * trunk/scm/custom.scm
    * trunk/scm/generic-key-custom.scm
    * trunk/scm/prime-key-custom.scm
    * trunk/scm/generic.scm
    * trunk/scm/prime.scm
    * trunk/scm/uim-db.scm
    * trunk/scm/util.scm
    * trunk/scm/spellcheck.scm
    * trunk/scm/action.scm
    * trunk/scm/ipa-x-sampa.scm
    * trunk/scm/anthy-key-custom.scm
    * trunk/scm/prime-custom.scm
    * trunk/scm/generic-custom.scm
    * trunk/scm/anthy-custom.scm
    * trunk/scm/pyunihan.scm
    * trunk/scm/plugin.scm
    * trunk/scm/manage-modules.scm
    * trunk/scm/hk.scm
    * trunk/scm/tutcode-key-custom.scm
    * trunk/scm/latin.scm
    * trunk/scm/romaja.scm
    * trunk/scm/direct.scm
    * trunk/scm/rk.scm
    * trunk/scm/skk-editor.scm
    * trunk/scm/im-custom.scm
    * trunk/scm/hangul.scm
    * trunk/scm/canna-key-custom.scm
    * trunk/scm/i18n.scm
    * trunk/scm/canna.scm
    * trunk/scm/viqr.scm
    * trunk/scm/japanese-azik.scm
    * trunk/scm/anthy.scm
    * trunk/scm/spellcheck-custom.scm
    * trunk/scm/japanese.scm
    * trunk/scm/skk-key-custom.scm
    * trunk/scm/skk.scm
    * trunk/scm/key.scm
    * trunk/scm/pyload.scm
    * trunk/scm/canna-custom.scm
    * trunk/scm/zaurus.scm
    * trunk/scm/load-action.scm
    * trunk/scm/scim.scm
    * trunk/scm/lazy-load.scm
    * trunk/scm/ustr.scm
    * trunk/scm/custom-rt.scm
    * trunk/uim/agent.c
    * trunk/uim/uim.h
    * trunk/uim/uim-sh.c
    * trunk/uim/uim-custom.c
    * trunk/uim/uim-ipc.c
    * trunk/uim/setenv.c
    * trunk/uim/uim-util.c
    * trunk/uim/uim-custom.h
    * trunk/uim/uim-custom-enabler.c
    * trunk/uim/m17nlib.c
    * trunk/uim/uim-util.h
    * trunk/uim/prime.c
    * trunk/uim/spellcheck.c
    * trunk/uim/uim-encoding.h
    * trunk/uim/uim-helper-client.c
    * trunk/uim/skk-dic.c
    * trunk/uim/uim-im-switcher.h
    * trunk/uim/uim-compat-scm.c
    * trunk/uim/scim.cpp
    * trunk/uim/plugin.c
    * trunk/uim/uim-compat-scm.h
    * trunk/uim/plugin.h
    * trunk/uim/intl.c
    * trunk/uim/uim-helper.c
    * trunk/uim/uim-scm.c
    * trunk/uim/uim-helper-server.c
    * trunk/uim/uim-helper.h
    * trunk/uim/uim-scm.h
    * trunk/uim/uim-table.c
    * trunk/uim/strsep.c
    * trunk/uim/canna.c
    * trunk/uim/uim-key.c
    * trunk/uim/anthy.c
    * trunk/uim/uim-func.c
    * trunk/uim/iso-639-1.def
    * trunk/uim/context.h
    * trunk/uim/uim.c
    * trunk/xim/locale.cpp
    * trunk/xim/connection.cpp
    * trunk/xim/ximpn.h
    * trunk/xim/xim.h
    * trunk/xim/connection.h
    * trunk/xim/compose.cpp
    * trunk/xim/ximtrans.cpp
    * trunk/xim/ximic.cpp
    * trunk/xim/compose.h
    * trunk/xim/util.cpp
    * trunk/xim/helper.cpp
    * trunk/xim/util.h
    * trunk/xim/ximim.cpp
    * trunk/xim/ximserver.cpp
    * trunk/xim/helper.h
    * trunk/xim/main.cpp
    * trunk/xim/convdisp.cpp
    * trunk/xim/ximpacket.cpp
    * trunk/xim/canddisp.cpp
    * trunk/xim/ximserver.h
    * trunk/xim/canddisp.h
    * trunk/xim/convdisp.h
    * trunk/xim/xdispatch.h
    * trunk/examples/uim-custom/uim-custom-update.c
    * trunk/examples/uim-custom/uim-custom-variable.c
    * trunk/examples/uim-custom/uim-custom-dump.c
      - Replace the invalid license term 'THE REGENTS' with 'THE
        COPYRIGHT HOLDERS' as below. Thank you Jeroen Ruigrok and
        Masahito Omote for the advices.
    
        http://lists.freedesktop.org/archives/uim/2005-February/001038.html
        http://lists.freedesktop.org/archives/uim/2005-March/001057.html
        http://lists.freedesktop.org/archives/uim/2005-March/001058.html
    
        The changes are not involving fill-column to indicate actual
        changes. I'll do it some days later if nobody suggest other
        changes.

2005-03-10 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/skk.scm
      - (skk-proc-state-wide-latin): Complement explicit
        skk-context-set-state! lost in r787. Thanks Etsushi Kato for
        reporting
    
    * The bug fixed in r788 had been reported by OHASHI Hideya. Thanks

2005-03-10 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/skk.scm
      - (action action_skk_roma, action action_skk_azik):
        * Fix broken recursive context handling
        * Simplify with skk-set-rule!
      - (skk-set-rule!): New procedure
      - (skk-setup-child-context): Inherit composition rule of parent
        context

2005-03-10 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/skk.scm
      - (skk-flush): Fix unwanted input mode transition. Thanks Etsushi
        Kato and No.570 of [Anthy/uim thread 5] for cooperation
      - (skk-reset-handler): Simplify in accordance with the change of
        skk-flush

2005-03-10 Etsushi Kato <ek.kato@gmail.com>

    * uim/uim-func.c (im_update_prop_list) : Fix invalid removal of
      the code in r780.
    (im_update_prop_label) : Ditto.

2005-03-10 Etsushi Kato <ek.kato@gmail.com>

    * doc/COMPATIBILITY : Update about "show_caret_state" message of
      helper-candwin protocol.
    * doc/HELPER-CANDWIN : Fix description about "show_caret_state".

2005-03-09 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * doc/COMPATIBILITY
      - Add placeholder entry for Helper-candwin protocol change in
        r744. Etsushi, please fill it
      - Change abbreviation form of 'after compromised' revision

2005-03-09 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/plugin.c
      - (uim_init_plugin, uim_quit_plugin): Cosmetic change

2005-03-09 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-ipc.c
    * uim/uim-util.c
    * uim/m17nlib.c
    * uim/prime.c
    * uim/spellcheck.c
    * uim/uim-helper-client.c
    * uim/skk-dic.c
    * uim/scim.cpp
    * uim/plugin.c
    * uim/uim-helper.c
    * uim/uim-helper-server.c
    * uim/uim-table.c
    * uim/canna.c
    * uim/anthy.c
    * uim/uim-func.c
    * uim/slib.c
    * uim/uim.c
    * helper/dict-util.c
    * helper/dict-canna.c
    * helper/dict-anthy.c
    * helper/toolbar-common-gtk.c
    * helper/toolbar-standalone-gtk.c
    * helper/dict-word-list-win-gtk.c
    * helper/dict-cclass-dialog.c
    * helper/pref-gtk-custom-widgets.c
    * helper/dict-word.c
    * helper/dict-word-list-view-gtk.c
    * helper/dict-word-win-gtk.c
    * helper/im-switcher-gtk.c
    * helper/pref-gtk.c
    * helper/dict-main-gtk.c
    * helper/input-pad-ja.c
    * gtk/gtk-im-uim.c
    * xim/ximtrans.cpp
    * xim/util.cpp
      - Cosmetic change by tools/trim-src.sh

2005-03-09 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * tools/trim-src.sh
      - New file

2005-03-09 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit removes obsolete callback queue and enables nested
      eveluation of the Scheme interpreter as default
    
    * configure.ac
      - Remove obsolete configure options --disable-scm-nested-eval and
      --enable-callback-queue
    * uim/siod.h
      - Set NESTED_REPL_C_STRING as 1 by default
    * uim/prime.c
      - (prime_lib_init):
        * Remove all codes enabled in !UIM_SCM_NESTED_EVAL case
        * Fix inappropriate indent
    * uim/plugin.c
      - Include uim-compat-scm.h as default
      - (plugin_load, plugin_unload, uim_init_plugin, uim_quit_plugin):
        Remove all codes enabled in !UIM_SCM_NESTED_EVAL case
    * uim/uim-scm.c
      - (uim_scm_gc_protect_stack, uim_scm_gc_unprotect_stack,
        uim_scm_require_file): Remove all codes enabled in
        !UIM_SCM_NESTED_EVAL case
    * uim/uim-func.c
      - (uim_flush_cb, uim_schedule_cb): Removed
      - (uim_eval_string, im_clear_preedit, im_pushback_preedit,
        im_update_preedit, im_commit, im_update_mode_list,
        im_update_prop_list, im_update_prop_label, im_update_mode,
        im_activate_candidate_selector, im_select_candidate,
        im_shift_page_candidate, im_deactivate_candidate_selector,
        im_request_surrounding, im_delete_surrounding): Remove obsolete
        callback queue handlings
    * uim/context.h
      - (struct cb_q, struct cb, uim_schedule_cb): Removed
      - (struct uim_context_): Remove the member cb_q
      - Removed an anonymous enum for callback operation definition
    * uim/uim.c
      - (uim_create_context): Remove callback queue initialization

2005-03-09 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit adds dynamic kana input method switching for skk
      including AZIK
    
    * scm/skk-custom.scm
      - (custom-group skk-dict): New custom group
      - (skk-kana-input-method-indication-alist): New variable
      - (custom skk-widgets, custom 'default-widget_skk_kana_input_method,
        custom 'skk-kana-input-method-actions, ): New custom variable
      - (custom skk-dic-file-name, custom skk-personal-dic-filename,
        custom skk-uim-personal-dic-filename): Move skk-dict group
      - (custom skk-use-azik?): Removed
    * scm/skk.scm
      - (skk-input-rule-roma, skk-input-rule-azik): New variable
      - (action action_skk_roma, action action_skk_azik): New action
      - (skk-configure-widgets): Add initilization of
        widget_skk_kana_input_method
      - (skk-context-rec-spec): Add new member 'input-rule'
      - (skk-context-new): Remove skk-use-azik? handling

2005-03-09 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/slib.c
      - Remove an obsolete prototype decl
      - (integer2string): Move to outside of #if DEBUG_SCM. No actual code
        has been modified
      - (init_dbg):
        * Remove initialization of number->string
        * Add initialization of dbg_mod
      - (init_subrs): Add initialization of integer->string for
        integer2string()
    * scm/util.scm
      - (number->string, string->number): New R5RS alias
    * scm/uim-db.scm
      - (uim-db-puts): Replace number->string with integer->string
    
    * test/Makefile.am
      - (EXTRA_DIST): Add test-db.scm
    * test/test-db.scm
      - svn propset svn:executable on

2005-03-09 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit add a interactive debugger for the uim Scheme
      interpreter. All of implementation has been contributed by Jun Inoue
      in [Anthy-dev 1806] and [Anthy-dev 1812]. Thank you for the great
      help
    
    * uim/slib.c
      - (_NEWCELL): Removed
      - (NEWCELL): Remove obsolete debugger handlings
      - (dbg_mod): New static variable
      - (lreadr, lreadparen, closure, leval_lambda, letstar_macro,
        named_let_macro, normal_let_macro, letrec_macro): Add debugger
        handlings
      - (readtl): Remove debugger handlings and merge orig_readtl()
      - (orig_readtl): Removed
      - (dbg_lineinc, dbg_linedec): Modify debugger handlings about line
        number information
      - (dbg_readini, dbg_readend): Modify debugger handlings
      - (dbg_register_closure, dbg_expand_file_name, dbg_get_info,
        dbg_get_line, dbg_get_file, dbg_copy_info): New procedure
      - (integer2string): New procedure
      - (init_dbg): Add initialization of dbg-get-info, dbg-get-line,
        dbg-copy-info!, dbg-expand-file-name, dbg-closures and
        number->string
    * scm/uim-db.scm
      - New file
      - (uim-db-prompt, uim-db-break-at-molecule, uim-db-current-file,
        uim-db-next-id, uim-db-next-display-id, uim-db-breakpoint-alist,
        uim-db-display): New variable
      - (uim-db-print, uim-db-molecular?, uim-db-for-each,
        uim-db-walk-tree, uim-db-add-display!, uim-db-del-display!,
        uim-db-find, uim-db-insert-code!, uim-db-restore-code!,
        uim-db-set-break!, uim-db-del-break!, uim-db-break, uim-db-puts,
        uim-db-alist-delete!, uim-db-help): New procedure
      - (pair-fold, srfi-assoc): New procedure
    * test/test-db.scm
      - New file
      - (test-db-find, test-db-dep): New procedure
      - (testcase debugger): New testcase
      - (test uim-db-find, test for external dependency): New test
    * scm/Makefile.am
      - (SCM_FILES): Add uim-db.scm

2005-03-07 Etsushi Kato <ek.kato@gmail.com>

    * xim/ximic.cpp (setFocus) : Call move_cadwin() here.
    * xim/ximserver.cpp (InputContext::focusIn) : Don't call
      move_candwin() from here.
    * xim/convdisp.cpp (ConvdispOv::move_candwin) : Disable redundant
      flash player workaround.

2005-03-07 Yusuke TABATA <yusuke@w5.dion.ne.jp>

    * scm/japanese-azik.scm
      AZIK support again. Thanks to OHASHI-san [anthy-dev 1922]
      - (ja-azik-rule-basic): renamed from ja-azik-rule
      - (ja-azik-rule): new procedure to compose azik table
    * scm/japanese.scm
      - (load-azik-table): use ja-azik-rule
    * scm/skk-custom.scm
      - (skk-use-azik): new custom item
    * scm/skk.scm
      - use azik rule if specified so

2005-03-06 kzk <mover@hct.zaq.ne.jp>

    * This is the first commit of "uim-scim", the result
      of my CodeFest@AOSS held at Beijing:-)
      In this revision, you can compose preedit and commit
      string, but seems imcomplete now.
    
    * configure.ac
      - target scim version is SCIM 1.2.0, new stable version
    
    * uim/scim.cpp
    * scm/scim.scm
      - added
    
    * scm/Makefile.am
      - add scim.scm

2005-03-05 Etsushi Kato <ek.kato@gmail.com>

    * xim/ximserver.cpp (InputContext::pushKey) : Call
      uim_release_key() even with full-synchronous-method.

2005-03-04 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * uim/m17nlib.c:
     -(m17nlib-lib-get-commit-string): Removed since already unused.
     -(m17nlib-lib-get-result): Added new function.

2005-03-04 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * scm/m17nlib.scm:
     -(m17nlib-press-key-handler): commit key event via im-commit-raw
       if key event was not consumed.

2005-03-03 Etsushi Kato <ek.kato@gmail.com>

    * gtk/caret-state-indicator.c : Use "config.h" instead of
      "uim/config.h" to ensure build uim-candwin-gtk outside the
      source dir.

2005-03-03 Etsushi Kato <ek.kato@gmail.com>

    * gtk/caret-state-indicator.c (caret_state_indicator_update) :
      Move check for "bridge-show-input-state?" into gtk-im-uim.c.
    * gtk/gtk-im-uim.c (update_prop_label_cb) : Check
      "bridge-show-input-state?" here.
    
    * helper/Makefile.am : Add gtk/caret-state-indicator.{c,h} as
      uim_candwin_gtk_SOURCES.
    * helper/helper-candwin-gtk.c : Use caret-state-indicator.{c,h}
      for uim-xim.
    (struct _UIMCandidateWindow) : Add caret_state_indicator pointer.
    (candidate_window_init) : Initialize caret_state_indicator.
    (candwin_move) : Set cursor location of caret_state_indicator.
    (caret_state_show) : New function.  Show caret state indicator.
    (str_parse) : Handle "show_caret_state" message.
    * doc /HELPER-CANDWIN : Add new protocal "show_caret_state".
    * xim/xim.h (class XimIC) : Add public member move_candwin.
    * xim/ximic.cpp (XimIC::move_candwin) : New function.
    (setFocus) : Move move_candwin() into InputContext::focusIn().
    * xim/ximserver.cpp (InputContext::focusIn) : Move candwin here.
    (InputContext::update_prop_label) : Check
      "bridge-show-input-state?".
    * xim/convdisp.cpp (ConvdispOv::ConvdispOv) : Initialize
      revised_spot_y in the constructor.
    (ConvdispOv::update_preedit) : Move check for preedit string into
      draw_preedit().
    (ConvdispOv::draw_preedit) : Check preedit string here.  Fix
      comment.
    (ConvdispOs::update_preedit) : Call move_candwin() at first.
    * xim/canddisp.h (class canddisp) : Add public member
      show_caret_state().
    * xim/canddisp.cpp (Canddisp::show_caret_state) : New function.
    * xim/ximserver.h (class Locale) : Add virtual destructor.
    * xim/locale.cpp : Fix compiler warning about destructor.

2005-03-03 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * gtk/gtk-im-uim.c:
     -(UIMContext): Added new struct member caret_state_indicator.
     -(im_uim_set_cursor_location): Call caret_state_indicator_set_cursor_location.
     -(update_prop_label_cb): Call caret_state_indicator_update.
    
    * gtk/caret-state-indicator.c:
     -(caret_state_indicator_new):New function.
     -(caret_state_indicator_update):New function.
     -(caret_state_indicator_set_cursor_location):New function.
    
    * scm/im-custom.scm:
     -(bridge-show-input-state?): New custom item.

2005-03-02 Etsushi Kato <ek.kato@gmail.com>

    * qt/qtgettext.h : Fix compilation with --disable-nls.

2005-03-02 kzk <mover@hct.zaq.ne.jp>

    * qt/chardict-qt.cpp
    * qt/switcher-qt.h
    * qt/chardict-qt.h
    * qt/switcher-qt.cpp
      - replace QToolButton with QPushButton for better Look&Fee;

2005-03-02 kzk <mover@hct.zaq.ne.jp>

    * This commit aims to be compatible in key grabbing
      between uim-pref-gtk and uim-pref-qt
    
    * qt/pref-customwidgets.h
    * qt/pref-customwidgets.cpp
      - use KeyGrabDialog instead of KeyGrabForm
    * qt/pref-keygrabformbase.ui
      - deleted
    * qt/Makefile.am
      - remove pref-keygrabformbase.ui
    * qt/pref-qt.h
    * qt/pref-qt.cpp
      - delete class SubgroupData

2005-02-27 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/latin.scm
      - Revert all changes committed in r730 because:
        * latin IM does need on/off state to input modifier-less shortcut
          and so on. Distinguish commit and key event properly
        * No commit log about adding/removing of procedures had been
          provided. It's required to track development history in some
          future. At least what procedures are added/removed must be
          recorded. See r676 and r681 for example.

2005-02-26 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * scm/latin.scm: Implement new key handling code, because old
       implementation is inadequate for latin input method.(latin doen't
       need on/off state and conversion candidate.)
       This new code must be improved, but it's better than before.

2005-02-26 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * configure.ac: Release 0.4.6 final.

2005-02-26 Etsushi Kato <ek.kato@gmail.com>

    * scm/skk.scm (skk-change-candidate-index) : Fix potential crash
      and its behavior when pressing skk-prev-candidate-key? just
      after starting conversion.

2005-02-26 Etsushi Kato <ek.kato@gmail.com>

    * uim/uim-helper.c (uim_helper_send_message) : Change timeout
      value to 2 sec.

2005-02-25 Etsushi Kato <ek.kato@gmail.com>

    * uim/uim-helper.c (uim_helper_send_message) : Change timeout
      value.
    * uim/uim-helper-server.c : Use non-blocking io.
    (init_serv_fd) : Use O_NONBLOCK for server fd.
    (parse_content) : Use select when write(2) fails with EAGAIN or
      EINTR.
    (uim_helper_server_process_connection) : Use O_NONBLOCK for client
      fd.

2005-02-25 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * uim/m17nlib.c: Removed unneed macro "#ifdef HAVE_M17NLIB".

2005-02-25 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * configure.ac: m17n-core is not sufficient for uim. uim requires
       m17n-shell.

2005-02-25 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * configure.ac: Require m17n-lib 1.2.0 or higher for m17n-lib module.

2005-02-25 Etsushi Kato <ek.kato@gmail.com>

    * qt/pref-qt.cpp (UimPrefDialog::checkDotUimFile) : Oops, forgot
      to write checkin message in r720.  Also add comment about the
      change.

2005-02-25 Etsushi Kato <ek.kato@gmail.com>

    * qt/immodule-qhelpermanager.cpp (update_prop_list_cb) : Send
      prop_list_update message on a focused context only.
    (update_prop_label_cb) : Send prop_label_update message on a
      focused context only.
    * qt/quiminputcontextplugin-qt4/qhelpermanager.cpp : Ditto.

2005-02-24 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * uim/prime.c:
     -(prime_lib_init): Fixed too many execution of prime. Thanks to
      Hiroyuki Komatsu <komatsu@taiyaki.org>.

2005-02-24 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * uim/m17nlib.c:
     -(register_callbacks): register to minput_default_driver.
     -(init_m17nlib): Call register_callbacks once.

2005-02-24 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * uim/m17nlib.c:
     -(find_im_by_name): Fix the case if lang == NULL. Thanks to Kenichi Handa
       for reporting.

2005-02-24 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * scm/ipa-x-sampa.scm: A bug fix to close bug #2472.
     -(ipa-x-sampa-init-handler): set back-match as #t.

2005-02-24 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * Makefile.am: Added autogen.sh to EXTRA_DIST.

2005-02-24 Etsushi Kato <ek.kato@gmail.com>

    * po/ja.po : Add translation of skk-special-midashi-key?

2005-02-24 Etsushi Kato <ek.kato@gmail.com>

    * xim/ximserver.cpp (InputContext::focusIn) : Fix to update
      prop_{label,list} properly when focus_in (related to the changes
      in r612).

2005-02-24 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * helper/toolbar-common-gtk.c
      - (command_entry):
        * Simplify descriptions
        * Remove C99 style trailing comma
    
    * po/uim.pot
    * po/ja.po
    * po/fr.po
      - Update

2005-02-24 Takuro Ashie <ashie@homa.ne.jp>

    * pref-gtk.c
      - (quit_confirm): Changed buttons to GTK_BUTTONS_YES_NO instead of
        GTK_BUTTONS_OK_CANCEL. Thanks 336 of [Anthy/uim thread 5].
        But saving issue doesn't reproduce on my environment....
      - (quit_confirm_dialog_response_cb): Ditto.
      - (check_dot_uim_file): Set parent window of warning dialog.
        Thanks 471 of [Anthy/uim thread 5].

2005-02-24 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/tutcode-key-custom.scm
      - Modify labels appropriately
    * po/POTFILES.in
      - Add scm/tutcode-key-custom.scm
    
    * po/uim.pot
    * po/fr.po
      - Update
    
    * po/ja.po
      - Update. Almost of messages has been filled for 0.4.6 release
        except for skk-special-midashi-key?, skk-vi-escape-key? and
        skk-state-direct-no-preedit-nop-key? defined in
        skk-key-custom.scm since I don't know about their
        responsibility. Please modify them appropriately.

2005-02-23 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/custom-rt.scm
      - (define-custom): Fix invalid key-predicate definition for non-key
        custom variables

2005-02-23 Takuro Ashie <ashie@homa.ne.jp>

    * helper/toolbar-common-gtk.c
      - Show switcher icon on system tray icon.
        Thanks 466 of [Anthy/uim thread 5].

2005-02-23 kzk <mover@hct.zaq.ne.jp>

    * qt/pref-keyeditformbase.ui
    * qt/pref-olisteditformbase.ui
    * qt/pref-keygrabformbase.ui
      - fix compilation problem on Qt 3.2

2005-02-22 Etsushi Kato <ek.kato@gmail.com>

    * uim/skk-dic.c : Fix slow personal dictionary parse.
    (reverse_cache) : New function.
    (parse_dic_line) : Don't use slow add_line_to_cache_last each
      time.
    (skk_read_personal_dictionary) : Reverse cache after parsing all
      lines.

2005-02-22 Takuro Ashie <ashie@homa.ne.jp>

    * configure.ac
      - Added missing "-lz" for EBLIB_LIBS.
        Thanks No.454 of [Anthy/uim thread 5] for reporting.

2005-02-22 Etsushi Kato <ek.kato@gmail.com>

    * config.guess : Sync with libtool-1.5.14.
    * config.sub : Ditto.
    * ltmain.sh : Ditto.
    * uim/Makefile.am : Use LTLIBINTL and LTLIBICONV instead of
      LIBINTL and LIBICONV for libuim_la_LIBADD.  Remove redundant
      LIBICONV from uim_sh_LDADD and uim_agent_LDADD since they are
      contained in libuim.la.
    * fep/Makefile.am : Remove redundant LIBICONV from uim_fep_LDADD.
    * xim/Makefile.am : Remove redundant LIBICONV from uim_xim_LDADD.

2005-02-21 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/init.scm
      - Cosmetic change

2005-02-21 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * po/fr.po:Added French translation.
      Thanks to Thierry Vignaud <tvignaud@mandrakesoft.com>.

2005-02-21 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * test/Makefile.am
      - (EXTRA_DIST): Add lacking files test-action.scm,
        test-custom-rt.scm, test-lazy-load.scm, test-plugin.scm and
        test-ustr.scm

2005-02-21 Etsushi Kato <ek.kato@gmail.com>

    * qt/candwin-qt.cpp (CandidateWindow::slotStdinActivated) : Use
      same buffer size for IPC as in uim-candwin-gtk.

2005-02-21 Etsushi Kato <ek.kato@gmail.com>

    * uim/slib.c (string_equal) : Fix to avoid crashes when using
      wrong type of argument in string=?

2005-02-21 Etsushi Kato <ek.kato@gmail.com>

    * helper/Makefile.am : Fix linking order of libuim-custom.la and
      libuim.la.  Thanks Jeroen Ruigrok for reporting.
    * qt/Makefile.am : Ditto.
    * uim/Makefile.am : Ditto.
    * examples/uim-custom/Makefile.am : Ditto.

2005-02-21 Etsushi Kato <ek.kato@gmail.com>

    * configure.ac : Modify umbiguous error message about iconv function.

2005-02-21 Etsushi Kato <ek.kato@gmail.com>

    * config.rpath : Add missing file.

2005-02-20 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * scm/Makefile.am: Added tutcode-key-custom.scm.

2005-02-20 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * doc/Makefile.am
      - (EXTRA_DIST): Add lacking files COMPATIBILITY, CUSTOM, DOT-UIM,
        HELPER-PROTOCOL, PLUGIN and UIM-SCM. Thanks No.438 of [Anthy/uim
        thread 5]

2005-02-20 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * scm/tutcode-key-custom.scm: New file for key configuration of tutcode.
    * scm/tutcode.scm: Move some key definitions to scm/tutcode-key-custom.scm.
    Thanks to KIHARA Hideto <deton@m1.interq.or.jp> for this patch.

2005-02-20 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * release 0.4.6beta2.

2005-02-20 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit complements lacking commit log of r676. All changes
      exept for doc/UIM-SH had actually been performed in r676.
    
    * uim/uim-util.h
      - (is_setugid): New function
    * uim/uim-util.c
      - (is_setugidp): New static function. YamaKen had claimed that this
        function name is inappropriate and should be renamed to
        'setugidp'. This renaming will be re-suggested after our busy
        status has gone
      - (uim_init_util_subrs): Add initialization of is-set-ugid? to wrap
        is_setugidp. YamaKen claimed that this procedure should be renamed
        to 'setugid?'
    * uim/uim-helper.c
      - (uim_helper_get_pathname): Avoid invoking getenv if is_setugid()
        is true
    
    * scm/init.scm
      - (load-user-conf): Avoid invoking getenv if is-set-ugid? is true
    * scm/plugin.scm
      - (uim-plugin-lib-load-path, uim-plugin-scm-load-path,
        load-module-conf, load-enabled-modules): Ditto
    * scm/skk.scm
      - (skk-read-personal-dictionary, skk-save-personal-dictionary):
        Ditto
    
    * doc/UIM-SH
      - Add description about '-B' option

2005-02-20 Takuro Ashie <ashie@homa.ne.jp>

    * scm/prime-key-custom.scm
      - Fixed some messages.
    * po/ja.po, po/uim.pot, po/POTFILES.in
      - Updated.

2005-02-20 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/plugin.scm
      - (load-enabled-modules): Fix the broken modification committed in r676

2005-02-20 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * configure.ac: Release 0.4.6beta1.

2005-02-20 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * uim/uim-helper.c:
     -(is_setugid): New function to check uid and euid.
    
    * uim/uim-ipc.c:
     -(uim_ipc_open_command_with_option): If uid and euid is not the same,
       full path of the command should be passed to execlp.
    
    * uim/uim.c:
     -(uim_init_scm): If uid and euid is not the same,
      getenv() shouldn't be called.
    
    * scm/init.scm: If uid and euid is not the same,
      getenv shouldn't be called.
    
    * scm/plugin.scm; If uid and euid is not the same,
      getenv shouldn't be called.
    
    * scm/skk.scm; If uid and euid is not the same,
      getenv shouldn't be called

2005-02-19 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * po/POTFILES.in: ipa.scm is renamed to ipa-x-sampa.scm.

2005-02-19 Etsushi Kato <ek.kato@gmail.com>

    * helper/helper-candwin-gtk.c (read_cb) : Use slightly larger
      buffer for IPC (SKK-JISYO.L's "kou" entry has 240 candidates).

2005-02-18 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * scm/ipa-x-sampa.scm: Renamed from ipa.scm

2005-02-18 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * qt/Makefile.am: hacks to pass 'make releasetest'

2005-02-18 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * uim/Makefile.am:
     -(libuim_la_SOURCES): Added uim-encoding.h

2005-02-18 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-func.c
      - (uim_iconv_create): Replace C++ style '0' pointer with C style
        'NULL'

2005-02-18 Etsushi Kato <ek.kato@gmail.com>

    * uim/uim-func.c (uim_iconv_create) : Add an encoding check that
      was accidentally removed in r668, sorry.
    * uim/uim-encoding.h : Cosmetic changes.

2005-02-18 Etsushi Kato <ek.kato@gmail.com>

    * uim/uim-encoding.h : New file.  Table for codeset aliases.
    * uim/uim-func.c (check_encoding_equivalence) : New function to
      check whether tocode and fromcode of iconv_open(3) are
      equivalent.
    (uim_iconv_is_convertible) : Use check_encoding_equivalence()
      instead of strcmp().  Use uim_iconv_open() instead of
      iconv_open(3).
    (uim_get_encoding_alias) : New function.  Get list of aliases of
      supplied encoding.
    (uim_iconv_open) : New function.  Wrapper for iconv_open(3) to
      avoid system dependency.
    (uim_iconv_create) : Use check_encoding_equivalence() instead of
      strcmp().
    (uim_iconv_code_conv) : If ic is NULL, return immediately.

2005-02-17 Takuro Ashie <ashie@homa.ne.jp>

    * uim/uim-func.c
      - (uim_iconv_create): Don't create iconv context when the tocode and
        the fromcode are same encoding.
        Please see [Anthy-dev 1854] for more detail.

2005-02-16 Masanari Yamamoto <h013177b@ice.nuie.nagoya-u.ac.jp>

     * fep/uim-fep.c(usage): use get_enc() instead of NULL

2005-02-16 Etsushi Kato <ek.kato@gmail.com>

    * configure.ac : Add "ngettext" check for gettext to prevent
      compilation error with old glibc.  This check also implies a
      check for bind_textdomain_codeset.

2005-02-16 Etsushi Kato <ek.kato@gmail.com>

    * configure.ac : Add check for vsnprintf().

2005-02-15 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * m4/Makefile.am:
     -(EXTRA_DIST): Added new files.

2005-02-15 Masanari Yamamoto <h013177b@ice.nuie.nagoya-u.ac.jp>

     * fep/str.c(get_enc): "utf-8" -> "UTF-8", "euc-jp" -> "EUC-JP"

2005-02-15 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * doc/DOT-UIM
      - Add description about default.scm to the section "Precedence of
        settings"

2005-02-15 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/Makefile.am
      - Fix top_srcdir for LIBUIM_PLUGIN_LIB_DIR with top_builddir
      - Fix relative path for LIBUIM_SCM_FILES with absolute one. It must
        be ensured as absolute path.
      - Fix loading of installed-modules.scm when builddir != srcdir
      - Thanks Masanari Yamamoto for reporting
    
    * uim/uim.h
      - (uim_create_context): Modifiy description abount enc argument

2005-02-15 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * uim/m17nlib.c:
     -(fill_new_candidates): Fixed a memory leak.
     -(old_cands_free): Fixed an inifinite loop condition.

2005-02-15 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * uim/m17nlib.c:
     -(get_nth_candidate): Speeding up with candidate cache.

2005-02-15 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * scm/m17nlib.scm:
     -(m17nlib-update-candidates): Fixed a bug. Thanks to UTUMI Hirosi
       for reporting.

2005-02-15 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * uim/m17nlib.c:
     -(ic_array): Added new members old_candidates and new_candidates.
        These members are used as cache of candidates.
     -(old_cands_free): New function.
     -(fill_new_candidates): New function to fill candidate cache with
       new candidates.
     -(same_candidatesp); New function.
     -(candidates_changedp): New function.
     -(calc_cands_num); New function.

2005-02-15 Etsushi Kato <ek.kato@gmail.com>

    * configure.ac : Add check for C99 vsnprintf().
    * xim/util.c : Add portable version of vsnprintf().

2005-02-15 Masanari Yamamoto <h013177b@ice.nuie.nagoya-u.ac.jp>

     * fep/escseq.c(my_putchar): fix a warning

2005-02-15 Masanari Yamamoto <h013177b@ice.nuie.nagoya-u.ac.jp>

     * fep/escseq.c: int my_putchar(int c) -> int my_putchar(char c)

2005-02-15 Etsushi Kato <ek.kato@gmail.com>

    * configure.ac : Revise iconv(3) check.

2005-02-15 Etsushi Kato <ek.kato@gmail.com>

    * configure.ac : If iconv(3) is not found, stop configure.
      Add <signal.h> for checking sit_t for FreeBSD 4.1.

2005-02-15 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/util.scm
      - (delete): New SRFI procedure

2005-02-14 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * uim/m17nlib.c: Corresponded to the situation where the language of input
      method is nil.
      -(pushback_input_method): Don't return if lang is NULL
      -(get_input_method_name): Omit lang of input method if it was NULL.

2005-02-14 Masanari Yamamoto <h013177b@ice.nuie.nagoya-u.ac.jp>

     * configure.ac: Check libcurses first, if libcurses is not found
       check libncurses.

2005-02-14 Etsushi Kato <ek.kato@gmail.com>

    * configure.ac : Use both libcurses and libncurses for
      uim-fep again.  This solves linking problem in Solaris9.

2005-02-14 Etsushi Kato <ek.kato@gmail.com>

    * Fix compilation on Solaris9.
    * xim/connection.cpp : Include "config.h" and "alloca.h"
      appropriately.
    * xim/ximtrans.cpp : Include "alloca.h" appropriately.
    * xim/ximic.cpp : Ditto.
    * xim/ximim.cpp : Ditto.
    * xim/ximserver.cpp : Check definition of _GNU_SOURCE.
    * xim/main.cpp Ditto.
    * xim/helper.cpp : Ditto.
    * xim/locale.cpp : Ditto.

2005-02-14 Etsushi Kato <ek.kato@gmail.com>

    * xim/util.h : Fix typo.

2005-02-14 Masanari Yamamoto <h013177b@ice.nuie.nagoya-u.ac.jp>

     * fep/uim-fep.c: turn on the input method when -S option is set

2005-02-14 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * uim/m17nlib.c:
     -(compose_modep): Fixed a condition of compose mode. If candidate_from
       is bigger than candidate_to, not compose mode.

2005-02-14 Etsushi Kato <ek.kato@gmail.com>

    * configure.ac : Remove -ansi from CXXFLAGS since this breaks some
      systems header files on some platform.

2005-02-14 Takuro Ashie <ashie@homa.ne.jp>

    * uim.pc.in
      - Added "datadir", "uim_datadir", "uim_scmdir" variables according to
       [Anthy-dev 1810].

2005-02-13 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/Makefile.am
      - Replace 'echo' with $(ECHO)
      - Remove '-n' option of echo to avoid portability problem. Thanks
        Masanari Yamamoto for reporting

2005-02-13 Etsushi Kato <ek.kato@gmail.com>

    * m4/ac_cxx_namespace.m4 : New file. From
      http://ac-archive.sourceforge.net/C++_Support/ac_cxx_namespaces.html
    * m4/ac_cxx_have_stl.m4 : New file. From
      http://ac-archive.sourceforge.net/C++_Support/ac_cxx_have_stl.html
    * configure.ac : Add check for AC_CXX_NAMESPACES and
      AC_CXX_HAVE_STL for uim-xim.

2005-02-13 Etsushi Kato <ek.kato@gmail.com>

    * xim/locale.cpp : Define _GNU_SOURCE to use asprintf and include
      <stdio.h>.  Remove sanity check added in r636.
    * xim/util.cpp (vasprintf) : Use length 1 for check len.  Thanks
      to Konosuke Watanabe.
    * xim/helper.cpp :  Define _GNU_SOURCE to use asprintf.
    * xim/ximserver.cpp : Ditto.
    * xim/main.cpp : Ditto.

2005-02-13 Masanari Yamamoto <h013177b@ice.nuie.nagoya-u.ac.jp>

     * fep/draw.c: bugfix

2005-02-13 Etsushi Kato <ek.kato@gmail.com>

    * Fix compilation on Solaris8, thanks to Konosuke Watanabe.
    * configure.ac : Add check for sig_t.
    * uim/uim-ipc.c : If strsep doesn't exist, use uim_strsep.
    * uim/uim-helper.c : Include "config.h" and check typedef sig_t
      if it doesn't exist.
    * uim/strsep.c : Rename strsep into uim_strsep.
    * xim/locale.cpp : Add sanity check.
    * xim/util.h : If strsep doesn't exist, use uim_strsep.
    * xim/util.cpp : Fix vasprintf on Solaris8.

2005-02-12 Masanari Yamamoto <h013177b@ice.nuie.nagoya-u.ac.jp>

     * fep/{uim-fep.c,escseq.c,draw.c} bugfix

2005-02-11 Takuro Ashie <ashie@homa.ne.jp>

    * helper /toolbar-common-gtk.c
      - Added some buttons. In the futuer, They should become customizable.
      - (struct _CommandEntry): Added for creating menu and buttons.
      - (toolbar_button_press_cb): New callback function.
      - (helper_toolbar_prop_list_update): Create buttons according to
        command_entry.
      - (switcher_button_create): Removed. Create the widget by
        helper_toolbar_prop_list_update() instead.
      - (switcher_button_pressed): Ditto.
      - (pref_button_create): Ditto.
      - (pref_button_pressed): Ditto.
      - (toolbar_new): Store our icons to icon stock.

2005-02-11 Takuro Ashie <ashie@homa.ne.jp>

    * qt/pref-qt.h, helper/pref-qt.cpp
      - Comment out SubgroupData.
      - (GroupPageWidget::setupWidgets): Create sub groups directly in this
        function.

2005-02-11 Takuro Ashie <ashie@homa.ne.jp>

    * qt/pref-qt.cpp
      - (SubgroupData::searchGroupVBoxByCustomSym):
        Check whether the gvboxMap contains the given key.

2005-02-11 Takuro Ashie <ashie@homa.ne.jp>

    * qt/toolbar-common-quimhelpertoolbar.cpp
      - (QUimHelperToolbar::QUimHelperToolbar): Fixed typo.
    * scm/im-custom.scm
      - (toolbar group): Divide as new main group.
      - (buttons sub group): New sub group.
    * po/ja.po, po/uim.pot
      - Updated.

2005-02-11 kzk <mover@hct.zaq.ne.jp>

    * scm/Makefile.am
      - regard $(top_srcdir)/uim/.libs as LIBUIM_PLUGIN_LIB_DIR in
        creating loader.scm and installed-modules.scm

2005-02-11 Takuro Ashie <ashie@homa.ne.jp>

    * gtk/gtk-im-uim.c
      - (cand_deactivate_cb): Check uic->win before removing filter
        function.
      - (im_uim_finalize): minor fix.

2005-02-11 kzk <mover@hct.zaq.ne.jp>

    * qt/toolbar-common-quimhelpertoolbar.cpp
      - change uim-compat-scm.h's path
    
    * qt/Makefile.am
      - clean up build rules

2005-02-11 Masanari Yamamoto <h013177b@ice.nuie.nagoya-u.ac.jp>

     * fep/ add -S option

2005-02-11 kzk <mover@hct.zaq.ne.jp>

    * qt/toolbar-common-quimhelpertoolbar.h
    * qt/toolbar-common-quimhelpertoolbar.cpp
      - add dict, input pad, handwriting input pad, help button

2005-02-11 kzk <mover@hct.zaq.ne.jp>

    * scm/im-custom.scm
      - add some configurations for toolbar buttons
        - dict
        - input-pad
        - handwriting-input-pad
        - help
    
    Ashie-san, please modify uim-toolbar-gtk as well.
    
    Following is the test to CCMAIL feature.
    CCMAIL:ashie@good-day.co.jp

2005-02-11 Etsushi Kato <ek.kato@gmail.com>

    * Fix crash bug with F10 key with anthy reported by Konosuke
      Watanabe.
    * scm/anthy.scm (anthy-make-whole-raw-string) : Fix to append
      pending and right-str as correct sequence.
    * scm/japanese.scm (ja-raw-string-to-valid-roma) : Check next-str
      appropriately.  Don't use ja-default-small-tsu-roma.
    (ja-raw-string-to-valid-roma) : Check next-str appropriately.

2005-02-11 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/japanese-kana.scm
      - (ja-kana-katakana-rule): Fix a wrong entry

2005-02-10 Etsushi Kato <ek.kato@gmail.com>

    * helper/helper-candwin-gtk.c (read_cb) : Use a bit larger buffer for
      read(2).

2005-02-10 Etsushi Kato <ek.kato@gmail.com>

    * doc/XIM-SERVER : Update candidate window section.

2005-02-10 Etsushi Kato <ek.kato@gmail.com>

    * configure.ac : Don't compile fep unless curses library is found.
    
    * xim/canddisp.c : Use uim-candwin-qt if selected toolkit is qt.
    * xim/Makefile.am : Check default toolkit.

2005-02-10 Etsushi Kato <ek.kato@gmail.com>

    * configure.ac : Remove a check for glib-2.0 since no component
      in current uim uses glib directly.

2005-02-10 Takuro Ashie <ashie@homa.ne.jp>

    * helper/pref-gtk.c
      - Removed USE_SUB_GROUP macro.
      - Don't show the save confirm dialog on switching page.
      - (save_confirm_dialog_response_cb): Comment out.
      - (pref_tree_selection_changed): Disable confirm dialog.
      - (create_group_widget) Removed USE_SUB_GROUP macro.

2005-02-09 Etsushi Kato <ek.kato@gmail.com>

    * Remove socket path before excecuting new prime process for unix
      domain socket.

2005-02-09 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * doc/DOT-UIM
      - Fix typos

2005-02-09 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit makes define-key in ~/.uim taking effect again
    
    * scm/custom-rt.scm
      - (custom-call-hook-procs): New procedure
      - (custom-set-value!): Simplify with custom-call-hook-procs
      - (define-custom): Don't define key predicate if define-key'ed one
        already exists
    * doc/DOT-UIM
      - Modify "Configuring key bindings" section about prerequisites

2005-02-09 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit limits default window size of uim-pref-gtk. Previous
      size (screen size * 0.7) is too large for large screen
    
    * helper/pref-gtk.c
      - (DEFAULT_WINDOW_WIDTH_MAX, DEFAULT_WINDOW_HEIGHT_MAX): New macro
      - (create_pref_window): Limit max size of default window

2005-02-08 Etsushi Kato <ek.kato@gmail.com>

    * configure.ac : Remove -Wmissing-format-attribute from CXXFLAGS
      to prevent compilation error with gcc-2.95.3.  Thanks KIHARA
      Hideto.
    * xim/util.h : Include <stdarg.h> for va_list.
    * xim/ximserver.cpp : Include "config.h"
    * xim/convdisp.cpp : Ditto.
    * xim/ximpacket.cpp (RxPacket_impl::RxPacket_impl): Fix compilation
      warning of copy constructor.

2005-02-08 Etsushi Kato <ek.kato@gmail.com>

    * gtk/gtk-im-uim.c (update_prop_list_cb) : Do not send message
      unless context is focused.
    (update_prop_label_cb) : Ditto.
    * xim/ximserver.cpp (InputContext::update_prop_list_cb) : Ditto.
    (InputContext::update_prop_label_cb) : Ditto.
    * uim/uim-helper-client.s (uim_helper_init_client_fd) : Set
      O_NONBLOCK flag after connect() has been succeeded.

2005-02-08 Etsushi Kato <ek.kato@gmail.com>

    * uim/uim-helper.c (uim_helper_send_message) : Update sleep code.

2005-02-08 Etsushi Kato <ek.kato@gmail.com>

    * configure.ac : Fix typo.

2005-02-08 Etsushi Kato <ek.kato@gmail.com>

    * uim/uim-helper-client.c : Use non blocking IO for helper socket.
    * uim/uim-helper-server.c (parse_content) : Don't check
      uim_helper_fd_writable().
    (proc_func) : Cosmetic change.
    (uim_helper_server_process_connection) : Minor cleanup.
    * uim/uim-helper.c (uim_helper_send_message) : If getting EAGAIN
      error with write(2), retry again after sleeping a while.

2005-02-08 Takuro Ashie <ashie@homa.ne.jp>

    * gtk/uim-cand-win-gtk.c, scm/im-custom.scm:
      - Changed eb-enable? -> eb-enable-for-annotation?.

2005-02-08 Takuro Ashie <ashie@homa.ne.jp>

    * gtk/uim-eb.[ch]
      - New files to add EB support for annotation. This code is based on
        kzk-san's patch.
        But it is a very ad-hoc solution. Although it shoud be written in
        scheme code, I commit the ad-hoc solution to advance annotation
        and sub-window related discussion.
    * gtk/uim-cand-win-gtk.c
      - (tree_selection_changed): Added EB support.
    * gtk/Makefile.am
      - Ditto
    * scm/im-custom.scm
      - Added EB related settings.
    * po/ja.po, po/uim.pot
      - Updated.

2005-02-08 Etsushi Kato <ek.kato@gmail.com>

    * uim/uim-helper.c (uim_helper_send_message) : Don't check
      uim_helper_fd() and don't exit with SIGPIPE with write(2).

2005-02-07 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/anthy-key-custom.scm
    * scm/canna-key-custom.scm
    * scm/skk-key-custom.scm
      - Replace the messages "commit preedit string as" with "commit as"
        to simplify them. Thanks UTUMI Hirosi for your opinion
    
    * scm/im-custom.scm
      - (custom candidate-window-position): Replace the word 'caret' with
        'cursor'
    * po/ja.po
    * po/uim.pot
      - Update
      - Standardize some Japanese words. See header commnt of
        ja.po. Thanks No.318 of [Anthy/uim thread 5].

2005-02-07 Takuro Ashie <ashie@homa.ne.jp>

    * uim-cand-win-gtk.c:
      - (uim_cand_win_gtk_create_sub_window):
        Never use horizontal scrollbar.

2005-02-07 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * doc/DOT-UIM
      - New file
      - Add new section "Precedence of settings"
      - Add new section "Special settings that cannot be configured in ~/.uim"
      - Add new section "Configuring key bindings"
      - Add new section "Overriding lazy-loaded settings"

2005-02-07 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * configure.ac: Show configure result of PRIME.

2005-02-07 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/anthy-key-custom.scm
      - Revert all changes of r600. The '[Anthy]' tag is necessary for the
        feature "key reference" although it is not implemented yet. Leave
        other tags untouched also

2005-02-07 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * scm/anthy-key-custom.scm:
     - Removed tautological "[Anthy]".

2005-02-07 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * configure.ac, uim/Makefile.am: Version check of prime is added.

2005-02-07 Etsushi Kato <ek.kato@gmail.com>

    * uim/skk-dic.c (push_back_candidate_to_array) : Do not call
      realloc() with a NULL pointer, call malloc() instead.

2005-02-07 Takuro Ashie <ashie@homa.ne.jp>

    * gtk/uim-cand-win-gtk.[ch]:
      - Added sub window feature for annotation.
      - (uim_cand_win_gtk_map): New callback function to sync visibility
        between candidates window and sub window.
      - (uim_cand_win_gtk_unmap): Ditto.
      - (uim_cand_win_gtk_init): Added above callbacks and initialize
        sub_window struct.
      - (uim_cand_win_gtk_dispose): Clean up sub window.
      - (uim_cand_win_gtk_set_candidates): Added sub window handling and
        annotation column.
      - (uim_cand_win_gtk_create_sub_window): New function for sub window.
      - (uim_cand_win_gtk_layout_sub_window): Ditto.
      - (tree_selection_change): Renamed from tree_selection_changed.
      - (tree_selection_changed): New callback function to handle sub
        window.

2005-02-07 kzk <mover@hct.zaq.ne.jp>

    * qt/pref-customwidgets.cpp
      - (KeyGrabForm::keyPressEvent): add Key_Delete, Key_Insert
      - remove unnecessary spaces

2005-02-07 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * helper/pref-gtk.c:
     -(create_pref_window): Extended initial window size.

2005-02-07 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * helper/pref-gtk-custom-widgets.c:
     -(key_pref_set_value): Added 'nsert' key.

2005-02-07 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * uim/uim.h:
     -(enum UKey): Added new key UKey_Insert.

2005-02-07 kzk <mover@hct.zaq.ne.jp>

    * qt/pref-qt.cpp
    * qt/pref-qt.h
      - add waning of ~/.uim existance.
      - (UimPrefDialog::checkDotUimFile): new func
      - (QConfirmDialog): reorganized
      - delete dialog after it is excuted
    
    * qt/pref-customwidgets.cpp
      - delete dialog after it is excuted

2005-02-07 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * qt/Makefile.am: Added a new rule to pass 'make releasetest'.

2005-02-07 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/custom.scm
      - (custom-choice-label, custom-choice-desc):
        * Fix Siod-dependent invalid predicate. assq does not return ()
          but #f. Don't use null? to test #f
        * Return val-sym instead of empty string

2005-02-07 Takuro Ashie <ashie@homa.ne.jp>

    * gtk/uim-cand-win-gtk.c
      - (uim_cand_win_gtk_init): Initialize "position" member.

2005-02-07 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * custom.scm: Fixed the bug that uim-pref doesn't work when
      the value of environment variable LIBUIM_VERBOSE is higher
      than 3.
     -(custom-choice-label): Added null? check.
     -(custom-choice-desc):  Added null? check.

2005-02-07 Takuro Ashie <ashie@homa.ne.jp>

    * gtk/uim-cand-win-gtk.h, gtk/uim-cand-win-gtk.c
      - (uim_cand_win_gtk_layout):
        Added "topwin_width" and "topwin_height" arguments to set window
        position according to the user setting.
    * gtk/gtk-im-uim.c
      - (im_uim_set_cursor_location): Simplified.
      - (toplevel_window_candidate_cb): Follow above change.
      - (cand_activate_cb): Ditto.
      - (cand_select_cb): Ditto.
      - (cand_shift_page_cb): Ditto.

2005-02-07 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * helper/pref-gtk.c
      - (check_dot_uim_file): Fix a typo of the message and modify some
        words
    * po/ja.po
    * po/uim.pot
      - Update

2005-02-07 Takuro Ashie <ashie@homa.ne.jp>

    * helper/pref-gtk.c:
      - (check_dot_uim_file):
        New function to check ~/.uim and show warning dialog.
      - (main): Check ~/.uim.
    * po/ja.po: Updated.

2005-02-07 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-helper.c
      - (uim_helper_send_message): Add a comment

2005-02-07 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/util.scm
      - (string->char): New procedure
      - (string->printable-char): Simplify with string->char

2005-02-07 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-helper-server.c
      - (parse_content): Remove invalid termination. (ret == 0) does not
        mean end of writing
    * uim/uim-helper.c
      - (uim_helper_send_message):
        * Ditto
        * Fix logical typo about parens
        * Fix pointer for free()
        * Add an explanation about wrong assumtion about select(2) and
          uim_helper_fd()

2005-02-07 Takuro Ashie <ashie@homa.ne.jp>

    * helper/pref-gtk-custom-widgets.c:
      - (choose_olist_clicked_cb): Use proper window title.
      - (choose_key_clicked_cb): Ditto.
    * po/ja.po
      - Updated.

2005-02-07 Etsushi Kato <ek.kato@gmail.com>

    * helper/pref-gtk-custom-widgets.c
    (uim_pref_gtk_set_default_value) : Minor clean up.

2005-02-06 kzk <mover@hct.zaq.ne.jp>

    * qt/Makefile.am
      - add -avoid-version to LDFLAGS.
        Thanks UTUMI-san!
    * qt/toolbar-standalone-qt.cpp
      - use PE_DockWindowSeparator for toolbar like KToolbar

2005-02-06 kzk <mover@hct.zaq.ne.jp>

    * qt/toolbar-common-uimstateindicator.cpp
      - (propListUpdate): handle popup menu correctly.
        This is reported by UTUMI-san. Thank you!

2005-02-06 kzk <mover@hct.zaq.ne.jp>

    * qt/pref-qt.cpp
      - (UimPrefDialog::createMainWidgets())
        : more KDE suitable GUI, like konqueror configure dialog

2005-02-06 kzk <mover@hct.zaq.ne.jp>

    * qt/pref-customwidgets.cpp
      - (CustomSpinBox::update(),
         CustomLineEdit::update(),
         CustomPathnameEdit::update(),
         CustomChoiceCombo::update(),
         CustomOrderedListEdit::update(),
         CustomKeyEdit::update())
         : sync with label

2005-02-06 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * scm/ipa.scm: Changed description of input method.

2005-02-06 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * uim/uim-helper-server.c:
     -(init_serv_fd): Change owner of socket path.

2005-02-06 Takuro Ashie <ashie@homa.ne.jp>

    * helper/pref-gtk-custom-widgets.c
      - (uim_pref_gtk_set_default_value): Do not access to invalid memory.

2005-02-06 Takuro Ashie <ashie@homa.ne.jp>

    * pref-gtk-custom-widgets.c
      - (uim_pref_gtk_set_default_value): Fixed a clash bug.

2005-02-06 Takuro Ashie <ashie@homa.ne.jp>

    * helper/pref-gtk-custom-widgets.c
      - (choose_key_button_clicked_cb): Translate a message.
      - (uim_pref_gtk_set_default_value): Sorry, realloc size was wrong.

2005-02-06 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * scm/ipa.scm: Replaced 'F' with proper character.Thanks to
      Denis Jacquerye <moyogo@gmail.com>

2005-02-06 Takuro Ashie <ashie@homa.ne.jp>

    * uim/uim-custom.c
      - (uim_custom_olist_get): Fixed typo.

2005-02-06 Takuro Ashie <ashie@homa.ne.jp>

    * qt/pref-qt.cpp:
      - Enable sub group feature.

2005-02-06 Etsushi Kato <ek.kato@gmail.com>

    * uim/uim-custom.c (uim_custom_olist_get) : Fix to use
      custom-value or custom-default-value properly depending on
      the context.
    (uim_custom_key_get) : Ditto.

2005-02-06 Takuro Ashie <ashie@homa.ne.jp>

    * po/ja.po, helper/pref-gtk-custom-widgets.c:
      - Fixed some messages.

2005-02-06 Takuro Ashie <ashie@homa.ne.jp>

    * helper/Makefile.am
      - Rename uim-dict to uim-dict-gtk.

2005-02-06 Etsushi Kato <ek.kato@gmail.com>

    * uim/uim-helper-server.c (parse_content) : Retry sending message
      if write(2) fails with EAGAIN and EINTR.  If return value of
      write(2) is less than requested length, retry with remaining
      buffer.
    * uim/uim-helper.c (uim_helper_send_message) : Ditto.

2005-02-06 Etsushi Kato <ek.kato@gmail.com>

    * configure.ac : Fix have_x test for xim test, and show status
      whether to compile uim-xim.

2005-02-06 Takuro Ashie <ashie@homa.ne.jp>

    * helper/pref-gtk-custom-widgets.c:
      - (sync_value_int): Also set sensitivity of label.
      - (sync_value_string): Ditto.
      - (sync_value_choice): Ditto.

2005-02-06 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * po/ja.po
    * po/uim.pot
      - Update

2005-02-06 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/im-custom.scm
      - (custom-group im-deployment, custom-group visual-preference): New
        subgroup
      - (custom custom-activate-default-im-name?, custom
        custom-preserved-default-im-name, custom enabled-im-list): Replace
        the subgroup with im-deployment. Yes, this makes the relationship
        between the two default-im-name custom variables. But this
        subgrouping is better as visual recognition
      - (custom uim-color, custom candidate-window-position): Add subgroup
        visual-preference

2005-02-06 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/custom.scm
      - (define-custom): Fix implicit 'main' subgroup handlings
      - (custom-group main): Replace empty label with dummy string to
        avoid invalid gettext translation
    * helper/pref-gtk.c
      - (USE_SUB_GROUP): Define as 1
      - (create_sub_group_widgets): Removing frame for 'main' subgroup. If
        you feel it strange, Replace it as you favor

2005-02-06 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/custom.scm
      - (custom-collect-by-group): Support 'AND' expression with backward
        compatibility
    * helper/pref-gtk.c
      - (create_sub_group_widgets): Use the AND expression to collect
        custom variables of subgroups (as quick hack)
    * uim/uim-custom.h
      - (uim_custom_collect_by_groups): New function as placeholder

2005-02-05 kzk <mover@hct.zaq.ne.jp>

    * qt/pref-qt.cpp
      - setCaption
    * qt/pref-customwidgets.cpp
      - handle key symbol properly

2005-02-05 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * xim/Makefile.am: Use new flag XIM. If XIM not defined, uim-xim
      doesn't built.

2005-02-05 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * configure.ac:
     (XIM): New flag to disable X.

2005-02-05 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * configure.ac: Disable Qt related features if Qt not found.

2005-02-05 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/Makefile.am
      - clean installed-modules.scm and loader.scm

2005-02-05 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * configure.ac:
     -(with_qt): Renamed from enable_qt.
     -(with_qtimmodule: Renamed from enable_qtimmodule.
     - Fixed a typo. Thanks to Konosuke Watanabe for reporting.

2005-02-05 Takuro Ashie <ashie@homa.ne.jp>

    * helper/pref-gtk.c
      - (create_sub_group_widgets):
        Renamed from create_sub_group_widget.
        Skip empty sub group.

2005-02-05 Takuro Ashie <ashie@homa.ne.jp>

    * helper/pref-gtk.c
      - Sub group feature has been implemented, but still be commented out
        because of some reason. To debug it, please define USE_SUB_GROUP
        as 1.
      - (create_sub_group_widget): New function.
      - (create_group_widget): Use above function.

2005-02-05 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * Makefile.am:
     -(releasetest-all-flag-enabled): Added --with-qt-immodule option.

2005-02-05 Takuro Ashie <ashie@homa.ne.jp>

    * helper/pref-gtk-custom-widgets.c
      - (update_custom_type_olist_cb): New function.
      - (add_custom_type_orderedlist):
        Set callback for custom type ordered list.
      - (update_custom_type_key_cb): Simplified.
      - (sync_value_olist): Rename from olit_pref_entry_set_value.
      - (sync_value_key): Rename from key_pref_entry_set_value.

2005-02-05 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * qt/Makefile.am: Hacks to pass 'make releasetest'

2005-02-05 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * configure.ac: Fixed a typo. -r545 and this commit is reported by
      Konosuke Watanabe. Thanks!

2005-02-05 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * configure.ac: Fixed typos.

2005-02-05 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * qt/Makefile.am: Added suffix rules. .ui -> .h and .h -> .moc

2005-02-05 Takuro Ashie <ashie@homa.ne.jp>

    * toolbar-systray-gtk.c: set locale.

2005-02-05 Takuro Ashie <ashie@homa.ne.jp>

    * qt/bushu.t: Moved from previous revision.

2005-02-05 kzk <mover@hct.zaq.ne.jp>

    * qt/immodule-plugin.cpp
      - register only "uim" as plugin (exclude "uim-anthy", "uim-prime", etc.)
    * qt/pref-customwidgtes.h
      - forgot to commit...

2005-02-05 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/im.scm
      - (register-im): Fix invalid rejection of registering direct
        IM. Thank you Kazuki Ohta for reporting and cooperation.

2005-02-05 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * configure.ac: Replace AC_ARG_ENABLE with AC_ARG_WITH. Switch depends
     on external software package should use AC_ARG_WITH.

2005-02-05 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * helper/toolbar-common-gtk.c: include "uim/uim-compat-scm.h" to pass
      'make distcheck'.

2005-02-05 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * scm/Makefile.am:
     -(installed-modules.scm,loader.scm): PWD must not be used to pass 'make distcheck'.

2005-02-05 kzk <mover@hct.zaq.ne.jp>

    * qt/pref-customwidgets.cpp
      - (KeyGrabForm): filter all key event of child widgets.

2005-02-05 kzk <mover@hct.zaq.ne.jp>

    * scm/prime-key-custom.scm
      - remove unnecessary ")"

2005-02-05 kzk <mover@hct.zaq.ne.jp>

    * helper/pref-gtk-custom-widgets.c
      - fix typo( Faild -> Failed )

2005-02-05 Takuro Ashie <ashie@homa.ne.jp>

    * helper/pref-gtk-custom-widgets.c:
      - (uim_pref_gtk_set_default_value): free custom.

2005-02-05 kzk <mover@hct.zaq.ne.jp>

    * delete old UimQt and uim-kdehelper.
      Now, Qt merge is done!
    
    * qt/quiminputcontextplugin
    * qt/uim-kdehelper
      - deleted

2005-02-05 kzk <mover@hct.zaq.ne.jp>

    * Merge uim-chardict-qt from uim-kdehelper.
    
    * qt/chardict-kseparator.h
    * qt/chardict-chargridview.h
    * qt/chardict-qt.cpp
    * qt/chardict-bushuviewwidget.cpp
    * qt/chardict-unicodeviewwidget.cpp
    * qt/chardict-kseparator.cpp
    * qt/chardict-chargridview.cpp
    * qt/chardict-qt.h
    * qt/chardict-bushuviewwidget.h
    * qt/chardict-unicodeviewwidget.h
      - new files
    
    * qt/Makefile.am
      - add uim-chardict-qt

2005-02-05 Etsushi Kato <ek.kato@gmail.com>

    * xim/ximic.cpp (extra_input) : Revise previous fix.  Now
      "commit_string" from uim helper should works with all XIM
      clients.

2005-02-05 Etsushi Kato <ek.kato@gmail.com>

    * xim/ximic.cpp (extra_input) : Fix to force send key event.

2005-02-05 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * configure.ac: Release 0.4.6alpha1.

2005-02-05 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * Makefile.am:
     -(EXTRA_DIST): Added ChangeLog.old, uim.desktop

2005-02-05 kzk <mover@hct.zaq.ne.jp>

    * qt/candiw-qt.cpp
      - (CandidateWindow::CandidateWindow): use QApplication::exit instead of exit
    * qt/pref-qt.cpp
      - (UimPrefDialog::UimPrefDialog): use QApplication::exit instead of exit
    
    * qt/pref-customwidgets.cpp
      - (CustomOrderedLitEdit::updateText): quote each item of list and put space
         after separator(comma) to make easy to recognize.
      - (CustomKeyEdit::updateText): Ditto
      - layout enhancement
    
    * qt/qtgettext.h
      - add copyright
    
    * qt/switcher-qt.cpp
      - eye candy enchancement

2005-02-05 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * Makefile.am: rewrited releasetest rule.

2005-02-05 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * uim.desktop: Changed execution file name for temporary solution.

2005-02-05 Takuro Ashie <ashie@homa.ne.jp>

    * helper/pref-gtk-custom-widgets.c
      - (sync_value_int): bug fix.

2005-02-05 Takuro Ashie <ashie@homa.ne.jp>

    * helper/pref-gtk.c, helper/pref-gtk-custom-widgets.[ch]:
      - (uim_pref_gtk_set_default_value):
        New function to add "Set to default" feature.
      - (set_to_default_cb): Ditto.
      - (defaults_button_clicked): Ditto.
      - (create_setting_button_box): Added default button.
      - (custom_spin_button_value_changed):
        Rename from custom_adjustment_value_changed to connect signal to
        spin button instead of adjustment.
      - (sync_value_int): Connect signal to spin button instead of adjustment.
      - (update_custom_type_int_cb): Ditto.
      - (add_custom_type_integer): Ditto.

2005-02-04 Etsushi Kato <ek.kato@gmail.com>

    * helper/pref-gtk-custom-widgets.c (key_pref_win) : Remove widget
      for modifier buttons.
    (key_pref_set_value) : Set modifier name here.
    (key_pref_add_button_clicked_cb) : Remove modifier key handling.
    (choose_key_clicked_cb) : Hack to use gtk_im_context_simple for
      text entry.

2005-02-04 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * gtk/gtk-im-uim.c:
     -(filter_keypress): focused_context shouldn't be used in this function.

2005-02-04 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * gtk/gtk-im-uim.c:
     -(filter_keypress): Call uim_press/release_key if snooper is not installed.

2005-02-04 Takuro Ashie <ashie@homa.ne.jp>

    * helper/pref-gtk-custom-widgets.[ch]:
      - Divide from pref-gtk.c
      - (grab_win_key_press_cb): Return TRUE to solve #Bug 2409.
    * helper/pref-gtk.c
      - Move widgets for each custom types to pref-gtk-custom-widgets.c.

2005-02-04 Takuro Ashie <ashie@homa.ne.jp>

    * helper/pref-gtk.c
      - (sync_value_bool): New function to unify synchronizing view.
      - (sync_value_int): Ditto.
      - (sync_value_string): Ditto.
      - (sync_value_choice): Ditto.
      - (update_custom_type_int_cb): Ditto
      - (update_custom_type_bool_cb): Use above function.
      - (add_custom_type_bool): Ditto
      - (update_custom_type_int_cb) Ditto
      - (add_custom_type_integer): Ditto
      - (update_custom_type_string_cb): Ditto
      - (add_custom_type_string_cb): Ditto
      - (update_custom_type_choice_cb): Ditto
      - (add_custom_type_choice_cb): Ditto
    --Tthi/e line, and those below, will be ignored--
    
    M    po/ja.po
    M    helper/pref-gtk.c
    M    helper/input-pad-ja.c

2005-02-04 Takuro Ashie <ashie@homa.ne.jp>

    * helper/pref-gtk.c:
      - Get uim_custom via uim_custom_get() each time when we acces to
        custom value, do not hold it.
      - (add_custom_type_bool): Put check box before label.

2005-02-04 Etsushi Kato <ek.kato@gmail.com>

    * doc/XIM-SERVER : Update description.

2005-02-04 Etsushi Kato <ek.kato@gmail.com>

    * xim/xim.h : Add const qualifiers to appropriate 'char *'
      pointers.
    * xim/compose.cpp : Ditto.
    * xim/ximtrans.cpp : Ditto.
    * xim/ximpacket.cpp : Ditto.
    * xim/canddisp.cpp : Ditto.
    * xim/main.cpp : Ditto.	 Fix some warnings of printf().
    (main) : Remove redundant code for "uim-%s" style server name.
    * xim/ximserver.cpp (print_ustring) : Fix warning of printf().
    (XimServer::setupConnection) : Remove redundant code for "uim-%s"
      style server name.

2005-02-04 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * tools
      - New directory
    
    * tools/uim-trace.sh
    * tools/uim-trace.gdb
      - New file. Simple siod invocation tracer for debugging

2005-02-04 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/plugin.c
      - (plugin_load):
        * Fix invalid list iterations
        * Simplify string handling
    
    * scm/lazy-load.scm
      - (stub-im-generate-init-handler): Support absense of stub-im
    
    * test/test-im.scm
      - (test custom-im-list-as-choice-rec): Follow recent change of
        messages
    * test/test-lazy-load.scm
      - (test stub-im-generate-stub-im-list): Ditto

2005-02-03 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/tcode.scm
    * scm/tutcode.scm
    * scm/direct.scm
      - Modify short-desc of the IM
    
    * scm/skk-custom.scm
      - (skk-im-short-desc): Modify
    * scm/anthy-custom.scm
      - (anthy-im-short-desc): Modify
    * scm/canna-custom.scm
      - (canna-im-short-desc): Modify
    
    * scm/generic-key-custom.scm
      - (custom-group global-keys): Rename to global-keys1
      - (custom-group global-keys1): Renamed from global-keys
      - (custom-group global-keys-advanced): Rename to global-keys2
      - (custom-group global-keys2): Renamed from global-keys-advanced
      - Follow the renaming in all custom variable definitions
    
    * scm/prime-key-custom.scm
      - (custom-group prime-keys): Rename to prime-keys1
      - (custom-group prime-keys1): Renamed from prime-keys
      - (custom-group prime-keys-advanced1): Rename to prime-keys2
      - (custom-group prime-keys2): Renamed from prime-keys-advanced1
      - (custom-group prime-keys-advanced2): Rename to prime-keys3
      - (custom-group prime-keys3): Renamed from prime-keys-advanced2
      - Follow the renaming in all custom variable definitions
    
    * scm/anthy-key-custom.scm
      - (custom-group anthy-keys): Rename to anthy-keys1
      - (custom-group anthy-keys1): Renamed from anthy-keys
      - (custom-group anthy-keys-advanced1): Rename to anthy-keys2
      - (custom-group anthy-keys2): Renamed from anthy-keys-advanced1
      - (custom-group anthy-keys-advanced2): Rename to anthy-keys3
      - (custom-group anthy-keys3): Renamed from anthy-keys-advanced2
      - Follow the renaming in all custom variable definitions
    
    * scm/canna-key-custom.scm
      - (custom-group canna-keys): Rename to canna-keys1
      - (custom-group canna-keys1): Renamed from canna-keys
      - (custom-group canna-keys-advanced1): Rename to canna-keys2
      - (custom-group canna-keys2): Renamed from canna-keys-advanced1
      - (custom-group canna-keys-advanced2): Rename to canna-keys3
      - (custom-group canna-keys3): Renamed from canna-keys-advanced2
      - Follow the renaming in all custom variable definitions
    
    * scm/skk-key-custom.scm
      - (custom-group skk-keys): Rename to skk-keys1
      - (custom-group skk-keys1): Renamed from skk-keys
      - (custom-group skk-keys-advanced1): Rename to skk-keys2
      - (custom-group skk-keys2): Renamed from skk-keys-advanced1
      - (custom-group skk-keys-advanced2): Rename to skk-keys3
      - (custom-group skk-keys3): Renamed from skk-keys-advanced2
      - Follow the renaming in all custom variable definitions
    
    * po/ja.po
    * po/uim.pot
      - Update

2005-02-03 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/lazy-load.scm
      - (stub-im-generate-init-handler): Fix the broken error check
        added by previous commit

2005-02-03 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/im-custom.scm
      - (custom-installed-im-list): Avoid infinite loop while reloading
        all modules
    
    * scm/lazy-load.scm
      - (stub-im-generate-init-handler): Add error check for possible stub
        IM actualization failure
    
    * uim/plugin.c
      - (plugin_load): Add error check for scm file loading
    
    * uim/uim.c
      - (uim_create_context): Add error check whether uim_init() had been
        called

2005-02-03 Takuro Ashie <ashie@homa.ne.jp>

    * helper/pref-gtk.c:
      - (olist_pref_entry_set_value): Quote each item of list and put space
        after separator(comma) to make easy to recognize. Although I don't
        think that it is the best way, I think it is better than before.
      - (key_pref_entry_set_value): Same with above.

2005-02-03 kzk <mover@hct.zaq.ne.jp>

    * po/ja.po
    * po/POTFILES.in
    * po/uim.pot
      - add translations for qt applications

2005-02-03 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/custom.scm
      - (custom-set-value!): Fix excessive update-hook invocation
    
    * test/test-lazy-load.scm
      - (test stub-im-generate-stub-im-list, test
        stub-im-generate-all-stub-im-list): Follow recent specification
        change
    
    * test/test-im.scm
      - (test custom-im-list-as-choice-rec): Follow recent message
        modification
    
    * doc/UIM-SCM
      - Trivial fix

2005-02-03 kzk <mover@hct.zaq.ne.jp>

    * qt/pref-qt.cpp
      - disable subgrouping feature because it makes pref unstable
        and cause crash in uncertain reason.
    * qt/pref-customwidgets.cpp
      - (update): set the contents before calling
        setEnabled( custom->is_active ) to show the contents when
        it is inactive at startup time.
    * qt/qtgettext.h
      - (N_): convert from UTF-8

2005-02-03 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * doc/00INDEX
      - Add UIM-SCM
    * doc/UIM-SCM
      - New file
      - Add new section "Abstract"
      - Add new section "Protecting lisp objects from GC"
      - Add new section "Internal"

2005-02-03 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * po/ja.po
    * po/uim.pot
      - Update

2005-02-03 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit adds key-binding custom definitions for PRIME
    
    * scm/prime.scm
      - require-custom "prime-key-custom.scm"
      - (prime-latin-key?, prime-wide-latin-key?, prime-begin-conv-key?,
        prime-on-key?, prime-commit-key?, prime-next-candidate-key?,
        prime-prev-candidate-key?, prime-next-page-key?,
        prime-prev-page-key?, prime-cancel-key?, prime-backspace-key?,
        prime-delete-key?, prime-go-left-key?, prime-go-right-key?,
        prime-go-left-edge-key?, prime-go-right-edge-key?,
        prime-register-key?, prime-typing-mode-hiragana-key?,
        prime-typing-mode-katakana-key?, prime-typing-mode-hankana-key?,
        prime-typing-mode-wideascii-key?, prime-typing-mode-ascii-key?):
        Move to prime-key-custom.scm as custom variable
    * scm/prime-key-custom.scm
      - New file
      - (custom-group prime-keys, custom-group prime-keys-advanced1,
        custom-group prime-keys-advanced2, custom-group
        prime-keys-completion): New custom group
      - (custom prime-latin-key, custom prime-wide-latin-key, custom
        prime-begin-conv-key, custom prime-on-key, custom
        prime-commit-key, custom prime-next-candidate-key, custom
        prime-prev-candidate-key, custom prime-next-page-key, custom
        prime-prev-page-key, custom prime-cancel-key, custom
        prime-backspace-key, custom prime-delete-key, custom
        prime-go-left-key, custom prime-go-right-key, custom
        prime-go-left-edge-key, custom prime-go-right-edge-key, custom
        prime-register-key, custom prime-typing-mode-hiragana-key, custom
        prime-typing-mode-katakana-key, custom
        prime-typing-mode-hankana-key, custom
        prime-typing-mode-wideascii-key, custom
        prime-typing-mode-ascii-key): New custom variable
    
    * scm/skk-key-custom.scm
      - Cosmetic change

2005-02-03 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit performs again adaptation of key-str representation for
      uim-pref. See [Anthy-dev 1718] for further information.
    
    * helper/pref-gtk.c
      - (key_pref_set_value):
        * Ignore Shift modifier for printable char keys for
          easy-to-recognize key configuration.  uim-custom performs
          implicit shift key encoding/decoding appropriately.
        * Remove g_ascii_tolower() in accordance with the specification
          change of key representation on uim-pref
    * scm/custom.scm
      - (key-list-encode-shift): Add support for non-letter printable char
      - (key-list-ignore-regular-shift): Fix for non-letter chars
      - (key-list-ignore-letter-shift,
         key-list-ignore-punct-numeric-shift, key-list-strip-shift,
         key-list-strip-regular-shift): New procedure
      - (key-list-export-as-basic, key-list-import-as-basic): Replace the
         filter in accordance with the specification change
    * scm/util.scm
      - (string->printable-char): New procedure
      - (string->letter): Simplify with string->printable-char
    * scm/skk-key-custom.scm
      - (custom skk-special-midashi-key): Replace <Shift> with
         <IgnoreShift> to fit to the specification change
    
    * uim/uim-custom.c
      - (literalize_string): New procedure
      - (extract_key_literal, uim_custom_save_group, uim_custom_set): Fix
         broken string escaping

2005-02-03 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * po/ja.po
    * po/uim.pot
      - Update

2005-02-03 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * qt/candwin-qt.cpp
    * qt/uim-kdehelper/src/candwin/uim-candwin-qt.cpp
    * qt/toolbar-standalone-qt.cpp
    * qt/candwin-qt.h
    * fep/uim-fep.c
    * fep/callbacks.c
    * fep/uim-fep-tick.c
    * fep/draw.c
    * po/ja.po
    * po/uim.pot
    * helper/toolbar-applet-gnome.c
    * helper/im-switcher-gtk.c
    * helper/helper-candwin-gtk.c
    * helper/input-pad-ja.c
    * test/test-im.scm
    * test/test-action.scm
    * scm/uim-sh.scm
    * scm/m17nlib.scm
    * scm/action.scm
    * scm/latin.scm
    * scm/key.scm
    * scm/load-action.scm
    * uim/uim.h
    * uim/uim-sh.c
    * uim/prime.c
    * uim/uim-helper-client.c
    * uim/uim-helper.c
    * uim/uim-helper-server.c
    * uim/uim-table.c
    * uim/uim-key.c
    * uim/uim-func.c
    * examples/uim-custom/uim-custom-update.c
    * examples/uim-custom/uim-custom-dump.c
    * examples/uim-custom/uim-custom-variable.c
      - Update copyright by following script
    
        svn diff -r90 >tmp.diff; egrep '^Index: ' tmp.diff | perl -pe 's/^Index: //' | xargs grep 'Copyright.*uim Project' 2>/dev/null | egrep -v 2005 | perl -pe 's/:.+//' | xargs perl -i -pe 's/^([^"]+Copyright.*) (200[0-4])[^ ]* /\1 \2-2005 /'

2005-02-03 kzk <mover@hct.zaq.ne.jp>

    * qt/pref-qt.h
    * qt/pref-qt.cpp
      - simplify the code for default QVGroupBox handling
      - addCustomTypeKey is broken in some readon.
        I don't know why... So, commented out.

2005-02-03 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit moves unexported static declarations of siod.h to slib.c
    
    * uim/siod.h
      - (siod_init, siod_quit, set_repl_hooks, get_c_string,
        get_c_string_dim, get_c_int, nlength, get_c_pointer,
        get_c_func_pointer, cons, car, cdr, setcar, intcons, eql, symcons,
        symbol_boundp, symbol_value, symbol_to_string, rintern, closure,
        ptrcons, funcptrcons, init_subr, init_subr_0, init_subr_1,
        init_subr_2, init_subr_2n, init_subr_3, init_subr_4, init_subr_5,
        init_lsubr, init_fsubr, init_msubr, delq, set_eval_hooks, leval,
        symbolconc, lprin1f, lread, lreadtk, lreadf, require, strcons,
        equal, set_fatal_exit_hook, intern, gc_protect,
        siod_gc_protect_stack, siod_gc_unprotect_stack,
        siod_repl_c_string_entered, repl_c_string, siod_return_value,
        reverse, nreverse, cadr, caar, cdar, cddr, siod_true_value,
        siod_false_value, lapply, listn, must_malloc, get_c_file,
        last_c_errmsg, llast_c_errmsg, siod_c_provide, funcall1, funcall2,
        siod_set_lib_path): Move to slib.c
    * uim/slib.c
      - (siod_init, siod_quit, set_repl_hooks, get_c_string,
        get_c_string_dim, get_c_int, nlength, get_c_pointer,
        get_c_func_pointer, cons, car, cdr, setcar, intcons, eql, symcons,
        symbol_boundp, symbol_value, symbol_to_string, rintern, closure,
        ptrcons, funcptrcons, init_subr, init_subr_0, init_subr_1,
        init_subr_2, init_subr_2n, init_subr_3, init_subr_4, init_subr_5,
        init_lsubr, init_fsubr, init_msubr, delq, set_eval_hooks, leval,
        symbolconc, lprin1f, lread, lreadtk, lreadf, require, strcons,
        equal, set_fatal_exit_hook, intern, gc_protect,
        siod_gc_protect_stack, siod_gc_unprotect_stack,
        siod_repl_c_string_entered, repl_c_string, siod_return_value,
        reverse, nreverse, cadr, caar, cdar, cddr, siod_true_value,
        siod_false_value, lapply, listn, must_malloc, get_c_file,
        last_c_errmsg, llast_c_errmsg, siod_c_provide, funcall1, funcall2,
        siod_set_lib_path): Moved from siod.h

2005-02-03 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/im-custom.scm
      - (custom enable-lazy-loading?): Move to bottom of the group
      - (custom enable-im-switch, custom switch-im-key): Remove 'advanced'
        subgroup

2005-02-02 kzk <mover@hct.zaq.ne.jp>

    * Makefile.am
      - forgot to change CXXFLAG for qedittest

2005-02-02 kzk <mover@hct.zaq.ne.jp>

    * configure.ac
      - more valid check for $QTINCDIR
      - more valid check for $QTLIBDIR
      - rename QT_CFLAGS to QT_CXXFLAGS
      - rename UIM_QT_CFLAGS to UIM_QT_CXXFLAGS
    
    * qt/Makefile.am
      - use QT_CXXFLAGS instead of CXXFLAGS
      - use QT_LDFLAGS instead of LDFLAGS
      - add QT_CXXFLAGS and QT_LDFLAGS to each module
    
    * These problems are suggested by tkng-san. Thank you!

2005-02-02 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * helper/pref-gtk.c
      - (apply_button_clicked): Remove miscommitted code fragment that has
        been removed by r489

2005-02-02 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/custom.scm
      - (custom-set-value!): Replace O(n^2) hook handling with O(n). This
        change has been resolved the long startup time of custom.scm and
        'apply' operation time reported in r485.
    * helper/pref-gtk.c
      - (apply_button_clicked):
        * Remove the debug messages and the comment
        * The 'apply' operation problem was caused by custom-set-value!
          invoked by receiving prop_custom_update message by uim-pref
          itself. So this modification has also resolved the 'apply'
          problem. But I found another problem. uim_custom_broadcast sends
          156 prop_custom_update messages, but uim_pref receives only
          33-35 messages. It's not resolved. It seems to
          uim_helper_send_message() and uim_helper_get_message() is
          performing broken write(2) and read(2) handlings

2005-02-02 kzk <mover@hct.zaq.ne.jp>

    * pref-gtk.c
      - In accordance with yamaken's suggest at r485, I investigated the code.
        I think there's no need to have OBJECT_DATA_VALUE_CHANGED attribute
        widgets by widgets, because modification is managed by the value
        "value_changed". So, the code around OBJECT_DATA_VALUE_CHANGED is no
        need, I think.
    
        Please check, Ashie-san.

2005-02-02 kzk <mover@hct.zaq.ne.jp>

    * configure.ac
      - add warning flags for more strict compilation

2005-02-02 kzk <mover@hct.zaq.ne.jp>

    * pixmaps/Makefile.am
      - add configure-qt.png
    * pixmaps/configure-qt.png
      - pixmap for uim-pref-qt, which is used by toolbar

2005-02-02 kzk <mover@hct.zaq.ne.jp>

    * uim-toolbar-qt reorganization.
      Rightclicking, custom, size handling is implemented.
    
    * qt/toolbar-standalone-qt.h
    * qt/toolbar-standalone-qt.cpp
      - (class UimStandaloneToolbar): new class
    * qt/toolbar-common-uimstateindicator.h
    * qt/toolbar-common-uimstateindicator.cpp
      - (class QHelperToolbarButton): new class for handling size
    * qt/toolbar-common-quimhelpertoolbar.h
    * qt/toolbar-common-quimhelpertoolbar.cpp
      - (slotExecPref): new func
      - (quitToolbar): new signal
      - (contextMenuEvent): new func

2005-02-02 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * helper/pref-gtk.c
      - (apply_button_clicked):
        * Add debug messages. Remove it once the problem has been resolved
        * Add the comment about the performance of 'apply' operation. The
          gtk_tree_model_foreach() code fragment is very slow. It takes
          approximately 8 second in my environment. And it seems to be
          increasing by number of custom variables exponentially. Can it
          be reduced?

2005-02-02 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit renames the file 'stub-ims.scm' with 'loader.scm'. Sorry
      for frequent renaming of the file...
    
    * scm/plugin.scm
      - (load-enabled-modules): Replace "stub-ims.scm" with "loader.scm"
    * scm/manage-modules.scm
      - (generate-stub-ims-scm): Rename to generate-loader-scm
      - (generate-loader-scm): Renamed from generate-stub-ims-scm
    * scm/Makefile.am
      - Replace stub-ims.scm with loader.scm

2005-02-02 kzk <mover@hct.zaq.ne.jp>

    * Handle encoding of gettext string properly.
      Specify encoding by bind_textdomain_codeset, and _(
      macro is replaced in qtgettext.h
    
    * qt/candwin-qt.cpp
    * qt/pref-qt.cpp
    * qt/pref-customwidgets.cpp
    * qt/switcher-qt.cpp
    * qt/toolbar-standalone-qt.cpp
    * qt/toolbar-common-quimhelpertoolbar.cpp
      - include "qtgettext.h" instead of "uim/gettext.h"
      - call bind_textdomain_codeset
    
    * qt/qtgettext.h
      - new file

2005-02-02 kzk <mover@hct.zaq.ne.jp>

    * add "qedittest" for testing to input Qt application
    
    * Makefile.am
      - add rules for qedittest
    * qedittest.cpp
      - new file

2005-02-02 kzk <mover@hct.zaq.ne.jp>

    * helper/Makefile.am
      - rename uim-im-switcher-gtk from uim-im-switcher
    
    * helper/toolbar-common-gtk.c
    * helper/toolbar-applet-gnome.c
      - exec uim-im-switcher-gtk instead of uim-im-switcher

2005-02-02 kzk <mover@hct.zaq.ne.jp>

    * configure.ac
      - add Qt's plugin dir detect support
    * Makefile.am
      - add qt to SUBDIRS

2005-02-02 kzk <mover@hct.zaq.ne.jp>

    * merge UimQt to uim core
    
    * qt/immodule-quiminputcontext_with_slave.cpp
    * qt/immodule-subwindow.h
    * qt/immodule-plugin.cpp
    * qt/immodule-qhelpermanager.h
    * qt/immodule-quiminputcontext.h
    * qt/immodule-candidatewindow.h
    * qt/immodule-subwindow.cpp
    * qt/immodule-quiminputcontext_with_slave.h
    * qt/immodule-qhelpermanager.cpp
    * qt/immodule-quiminputcontext.cpp
    * qt/immodule-candidatewindow.cpp
      - copied from quiminputcontext/src directory
    
    * qt/Makefile.am
      - add rules for immodule

2005-02-02 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/custom-rt.scm
      - (define-custom): Fix broken define-key invocation. Thanks Etsushi
        Kato for reporting

2005-02-02 kzk <mover@hct.zaq.ne.jp>

    * configure.ac
      - add --enable-qt-immodule configure option
    * qt/Makefile.am
      - add CXXFLAGS to -DQT_IMMODULE when qt-immodule is enabled
    * qt/pref-customwidgets.cpp
      - Key_Kanji, Key_Zenkaku_Hankaku, Key_Multi_key,
        Key_Mode_switch, and Key_Muhenkan are add in qt-immodule
        patch.

2005-02-02 kzk <mover@hct.zaq.ne.jp>

    * qt/Makefile.am
      - modify the rule for uic( user interface compiler )
        Thank you for reporting, tkng-san!

2005-02-02 kzk <mover@hct.zaq.ne.jp>

    * configure.ac
      - guess $QTDIR and $QTINCDIR more properly
        Thank you for reportin, tkng-san!

2005-02-02 Takuro Ashie <ashie@homa.ne.jp>

    * helper/toolbar-systray-gtk.c:
      (main): create tray icon.

2005-02-01 kzk <mover@hct.zaq.ne.jp>

    * Internationalize by using uim's gettext system
    
    * qt/candwin-qt.cpp
    * qt/toolbar-standalone-qt.cpp
    * qt/switcher-qt.cpp
    * qt/pref-qt.cpp
    * qt/pref-qt.h
    * qt/toolbar-common-quimhelpertoolbar.cpp
    * qt/Makefile.am
    * qt/pref-customwidgets.cpp
      - internationalize

2005-02-01 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/util.scm
      - (string-escape): New procedure
    * scm/custom.scm
      - (custom-list-as-literal, custom-value-as-literal): Fix broken
        string escapeing

2005-02-01 kzk <mover@hct.zaq.ne.jp>

    * Now is the time to merge uim-kdehelper to uim core!!
      This commit copies "pref", "candwin", "toolbar", "switcher"
      to uim core.
    
    * qt/pref-customwidgets.h
    * qt/pref-keyeditformbase.ui
    * qt/pref-olisteditformbase.ui
    * qt/candwin-qt.cpp
    * qt/pref-kseparator.cpp
    * qt/candwin-qt.h
    * qt/pref-kseparator.h
    * qt/switcher-qt.cpp
    * qt/toolbar-standalone-qt.cpp
    * qt/pref-qt.cpp
    * qt/toolbar-common-uimstateindicator.cpp
    * qt/switcher-qt.h
    * qt/toolbar-standalone-qt.h
    * qt/pref-qt.h
    * qt/toolbar-common-uimstateindicator.h
    * qt/toolbar-common-quimhelpertoolbar.cpp
    * qt/pref-keygrabformbase.ui
    * qt/Makefile.am
    * qt/toolbar-common-quimhelpertoolbar.h
    * qt/pref-customwidgets.cpp
      - new files copied from uim-kdehelper

2005-02-01 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit adds key-binding custom definitions for CANNA
    
    * scm/canna.scm
      - require-custom "canna-key-custom.scm"
      - (canna-off-key?): Removed since obsolete
      - (canna-on-key?, canna-latin-key?, canna-wide-latin-key?,
        canna-hankaku-kana-key?, canna-kana-toggle-key?,
        canna-commit-as-opposite-kana-key?, canna-begin-conv-key?,
        canna-commit-key?, canna-extend-segment-key?,
        canna-shrink-segment-key?, canna-next-candidate-key?,
        canna-prev-candidate-key?, canna-cancel-key?,
        canna-backspace-key?, canna-delete-key?, canna-go-left-key?,
        canna-go-right-key?, canna-beginning-of-preedit-key?,
        canna-end-of-preedit-key?, canna-next-segment-key?,
        canna-prev-segment-key?): Move to canna-key-custom.scm as custom
        variable
      - (canna-next-page-key?, canna-prev-page-key?, canna-kill-key?,
        canna-kill-backward-key?):Move to canna-key-custom.scm as custom
        variable as comment
    * scm/canna-key-custom.scm
      - New file
      - (custom-group canna-keys, custom-group canna-keys-advanced1,
        custom-group canna-keys-advanced2): New custom group
      - (custom canna-next-segment-key, custom canna-prev-segment-key,
        custom canna-extend-segment-key, custom canna-shrink-segment-key,
        custom canna-commit-as-opposite-kana-key, custom
        canna-wide-latin-key, custom canna-hankaku-kana-key, custom
        canna-kana-toggle-key, custom canna-on-key, custom
        canna-latin-key, custom canna-begin-conv-key, custom
        canna-commit-key, custom canna-cancel-key, custom
        canna-next-candidate-key, custom canna-prev-candidate-key, custom
        canna-beginning-of-preedit-key, custom canna-end-of-preedit-key,
        custom canna-backspace-key, custom canna-delete-key, custom
        canna-go-left-key, custom canna-go-right-key): New custom variable
      - (custom canna-next-page-key, custom canna-prev-page-key, custom
        canna-kill-key, custom canna-kill-backward-key): New custom
        variable as comment for future use
    * scm/prime-key-custom.scm
      - New file. Just a placeholder at now
    * scm/Makefile.am
      - (SCM_FILES): Add canna-key-custom.scm and prime-key-custom.scm
    * po/POTFILES.in
      - Add scm/canna-key-custom.scm and scm/prime-key-custom.scm

2005-02-01 kzk <mover@hct.zaq.ne.jp>

    * configure.ac
      - add configure option --enable-debug

2005-02-01 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit adds key-binding custom definitions for SKK
    
    * scm/im-custom.scm
      - (custom-group mode-transition): New custom group
    
    * scm/skk.scm
      - require-custom "skk-key-custom.scm"
      - (skk-latin-key?, skk-wide-latin-key?, skk-begin-conv-key?,
        skk-begin-completion-key?, skk-next-completion-key?,
        skk-prev-completion-key?, skk-on-key?, skk-hankaku-kana-key?,
        skk-return-key?, skk-commit-key?, skk-next-candidate-key?,
        skk-prev-candidate-key?, skk-next-page-key?, skk-prev-page-key?,
        skk-kana-toggle-key?, skk-cancel-key?, skk-backspace-key?,
        skk-go-left-key?, skk-go-right-key?, skk-latin-conv-key?,
        skk-kanji-mode-key?, skk-special-midashi-key?,
        skk-conv-wide-latin-key?, skk-vi-escape-key?,
        skk-state-direct-no-preedit-nop-key?): Move to skk-key-custom.scm
        as custom variable
      - (skk-plain-space-key?): Move to skk-key-custom.scm as define-key
      - (skk-auto-start-henkan-keyword-list): Add a comment
    * scm/skk-key-custom.scm
      - New file
      - (custom-group skk-keys, custom-group skk-keys-advanced1,
        custom-group skk-keys-advanced2, custom-group
        skk-keys-completion): New custom group
      - (skk-plain-space-key?): Moved from skk.scm
      - (custom skk-on-key, custom skk-latin-key, custom
        skk-wide-latin-key, custom skk-kanji-mode-key, custom
        skk-hankaku-kana-key, custom skk-kana-toggle-key, custom
        skk-begin-conv-key, custom skk-commit-key, custom skk-cancel-key,
        custom skk-return-key, custom skk-conv-wide-latin-key, custom
        skk-latin-conv-key, custom skk-begin-completion-key, custom
        skk-next-completion-key, custom skk-prev-completion-key, custom
        skk-special-midashi-key, custom skk-vi-escape-key, custom
        skk-state-direct-no-preedit-nop-key, custom
        skk-next-candidate-key, custom skk-prev-candidate-key, custom
        skk-next-page-key, custom skk-prev-page-key, custom
        skk-backspace-key, custom skk-go-left-key, custom
        skk-go-right-key): New custom variable
    * scm/Makefile.am
      - (SCM_FILES): Add skk-key-custom.scm
    * po/POTFILES.in
      - Add scm/skk-key-custom.scm

2005-02-01 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * More custom group division and reorganization
    
    * scm/im-custom.scm
      - (custom-group annotation, custom-group dictionary, custom-group
        segment-sep, custom-group special-op): New custom group
      - (switch-im-key?): Add as null key definition
    
    * scm/skk-custom.scm
      - (custom-group skk-advanced): New custom group
      - Reorganize group of custom variables and reorder. No other
        attributes are modified
    * scm/anthy-custom.scm
    * scm/canna-custom.scm
      - Ditto

2005-02-01 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * configure.ac, Makefile.am, data/
     - Removed data/ directory.

2005-02-01 kzk <mover@hct.zaq.ne.jp>

    * uim-kdehelper/src/pref/uim-pref-qt.cpp
      - (GroupPageWidget::setupWidgets): Hide the "main" subgroup's
        QVGroupBox when it has no contents.
        But this commit seems very adhoc to me... "main" subgroup should
        have its contents.
      - (UimPrefDialog::createGroupWidgets): add sanity check
    
    * uim-kdehelper/src/pref/uim-pref-qt.h
      - (SubgroupData::getMainSubgroupGroupVBox): new func
      - (SubgroupData::searchGroupVBoxByCustomSym): constize
    * uim-kdehelper/src/pref/customwidgets.cpp
      - add sanity check

2005-02-01 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * scm/prime.scm;
     -(prime-context-new): Call prime-context-set-widgets!

2005-02-01 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit adds key-binding custom definitions for Anthy, and
      divide the global key-binding group into two groups
    
    * scm/anthy.scm
      - require-custom "anthy-key-custom.scm"
      - (anthy-on-key?, anthy-latin-key?, anthy-wide-latin-key?,
        anthy-hankaku-kana-key?, anthy-kana-toggle-key?,
        anthy-commit-key?, anthy-commit-as-opposite-kana-key?,
        anthy-commit-as-katakana-key? "F7"), anthy-commit-as-hankana-key?
        "F8"), anthy-commit-as-wide-latin-key? "F9"),
        anthy-commit-as-latin-key? "F10"), anthy-begin-conv-key?,
        anthy-extend-segment-key?, anthy-shrink-segment-key?,
        anthy-next-candidate-key?, anthy-prev-candidate-key?,
        anthy-next-page-key?, anthy-prev-page-key?, anthy-cancel-key?,
        anthy-backspace-key?, anthy-delete-key?, anthy-kill-key?,
        anthy-kill-backward-key?, anthy-go-left-key?, anthy-go-right-key?,
        anthy-beginning-of-preedit-key?, anthy-end-of-preedit-key?,
        anthy-next-segment-key?, anthy-prev-segment-key?): Move to
        anthy-key-custom.scm as custom variable
    * scm/anthy-key-custom.scm
      - New file
      - (custom-group anthy-keys, custom-group anthy-keys-advanced1,
        custom-group anthy-keys-advanced2): New custom group
      - (custom anthy-next-segment-key, custom anthy-prev-segment-key,
        custom anthy-extend-segment-key, custom anthy-shrink-segment-key,
        custom anthy-commit-as-latin-key, custom
        anthy-commit-as-wide-latin-key, custom
        anthy-commit-as-katakana-key, custom anthy-commit-as-hankana-key,
        custom anthy-commit-as-opposite-kana-key, custom
        anthy-wide-latin-key, custom anthy-hankaku-kana-key, custom
        anthy-kana-toggle-key, custom anthy-on-key, custom
        anthy-latin-key, custom anthy-begin-conv-key, custom
        anthy-commit-key, custom anthy-cancel-key, custom
        anthy-next-candidate-key, custom anthy-prev-candidate-key, custom
        anthy-next-page-key, custom anthy-prev-page-key, custom
        anthy-beginning-of-preedit-key, custom anthy-end-of-preedit-key,
        custom anthy-kill-key, custom anthy-kill-backward-key, custom
        anthy-backspace-key, custom anthy-delete-key, custom
        anthy-go-left-key, custom anthy-go-right-key): New custom variable
    * scm/Makefile.am
      - (SCM_FILES): Add anthy-key-custom.scm
    * po/POTFILES.in
      - Add scm/anthy-key-custom.scm
    
    * scm/generic-key-custom.scm
      - (custom-group global-keys-advanced): New custom group
      - (custom generic-beginning-of-preedit-key, custom
        generic-end-of-preedit-key, custom generic-kill-key, custom
        generic-kill-backward-key, custom generic-backspace-key, custom
        generic-delete-key, custom generic-go-left-key, custom
        generic-go-right-key, custom generic-return-key): Move group to
        global-keys-advanced
    
    * po/ja.po
    * po/uim.pot
      - Update

2005-02-01 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * toolbar-common-gtk.c:
     -(switcher_button_create, pref_button_create): Take second argument.
     -(switcher_button_pressed, pref_button_pressed): Function prototype
      changed.
     -(uim_helper_applet_new): New function.
    
    * toolbar-applet-gnome.c:
     -(uim_menu_xml): Updated menu items.

2005-02-01 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/im-custom.scm
      - (custom-installed-im-list): Resolve the "reloading a file that
        contains multiple IMs" problem as temporary solution. It's a quite
        dirty way and should be replaced by proper way after 0.4.6

2005-02-01 TOKUNAGA Hiroyuki <tkng@xem.jp>

    helper/toolbar-common-gtk.c:
     -(prop_button_pressed, prop_button_released): Third argument changed.
     -(switcher_button_create, pref_button_create): Pass a SizeGroup as
      an argument.
     -(uim_helper_trayicon_new): New function.
     -(list_data_free): New utility function.
     -(prop_data_flush): New utility function.
     -(helper_toolbar_prop_list_update): Renamed from
       helper_applet_prop_list_update.
     -(helper_toolbar_prop_label_update): Renamed from
       helper_applet_prop_label_update.
     -(helper_icon_prop_list_update): New function.
     -(helper_icon_parse_helper_str): New function.
     -(fd_read_cb): Renamed from uim_applet_fd_read_cb.
     -(check_helper_connection): Take a GtkWidget as an argument.

2005-02-01 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-compat-scm.c
      - (uim_scm_symbol_value_bool): Fix invalid result acquisition
    
    * scm/init.scm
      - (load-modules): Fix lazy loading of direct IM

2005-02-01 Etsushi Kato <ek.kato@gmail.com>

    * scm/skk-custom.scm : Change description about annotation.

2005-02-01 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * helper/toolbar-common-gtk.c:
     -(hbox_hierarchy_changed):Removed not used function.

2005-02-01 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * helper/toolbar-common-gtk.c:
     -(convert_charset): New function.

2005-02-01 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * helper/toolbar-common-gtk.c: More clean up.
     -(get_charset): Result charset must be copied before free().
     -(menu_button_create): New function.
     -(menu_button_append_menu): New function.
     -(append_button): New function.
     -(helper_applet_prop_list_update): Concrete widget creation process
      is splitted to menu_button_create and menu_button_append_menu.

2005-02-01 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * helper/toolbar-comnon-gtk.c: A bit clean up.
     -(get_charset): New function.

2005-02-01 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * helper/toolbar-systray-gtk.c:
     -(main): Changed variable name. toolbar -> icon.

2005-02-01 kzk <mover@hct.zaq.ne.jp>

    * uim-kdehelper/src/pref/customwidgets.cpp
      - (KeyGrabForm::keyPressEvent): handle F%d key correctly

2005-02-01 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * helper/toolbar-common-gtk.c:
     -(switcher_button_create): Return NULL if switcher button is not
      required.
     -(pref_button_create): Return NULL if pref button is not required.

2005-02-01 kzk <mover@hct.zaq.ne.jp>

    * implement key editing feature in uim-pref-qt.
      Now, basic requirement for pref application is satisfied,
      I think.
    
    * uim-kdehelper/src/pref/customwidgets.h
    * uim-kdehelper/src/pref/customwidgets.cpp
      - implement key editing feature
    * uim-kdehelper/src/pref/uim-pref-qt.h
      - remove unnecessary header file
    * uim-kdehelper/src/pref/uim-pref-qt.cpp
      - use "main" for main group vbox
    * uim-kdehelper/src/pref/keygrabformbase.ui
      - change size

2005-02-01 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * helper/toolbar-standalone-gtk.c:
     -(main): call uim_init/quit.

2005-02-01 Takuro Ashie <ashie@homa.ne.jp>

    * helper/pref-gtk.c:
      - (choose_olist_clicked_cb): Rearranged buttons as cross-shaped, and
        put a paddgin to the right side of buttons.

2005-02-01 Takuro Ashie <ashie@homa.ne.jp>

    * uim/anthy.c:
      - (get_segment_length): New function.
      - (uim_plugin_instance_init): Added new procedure for getting length
      of a segment.

2005-02-01 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * doc/CUSTOM
      - Add a section "Invoke an arbitrary procedure when a custom
        variable has been set" to indicate usage of custom-set-hooks
    
    * scm/action.scm
      - (context-list-replace-widgets!): Add a comment
    * scm/load-action.scm
      - (context-list-replace-widgets!): New stub procedure

2005-02-01 Etsushi Kato <ek.kato@gmail.com>

    * scm/skk-custom.scm : Add custom-get-hooks for
      skk-show-annotation?

2005-02-01 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit enables replacing toolbar widgets configured in
      preexisting context on the fly
    
    * scm/action.scm
      - (context-list-replace-widgets!): New procedure
    * scm/prime.scm
      - (prime-configure-widgets): Invoke context-list-replace-widgets! to
        replace toolbar widgets configured in preexisting context
    * scm/canna.scm
      - (canna-configure-widgets): Ditto
    * scm/anthy.scm
      - (anthy-configure-widgets): Ditto
    * scm/skk.scm
      - (skk-configure-widgets): Ditto

2005-02-01 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit enables limited version of set-hook invocation with
      custom-rt.scm. It results that im-default-name and toolbar
      configurations in running processes are dynamically updated on the
      fly
    
    * scm/custom-rt.scm
      - (custom-set-hooks): New variable
      - (custom-add-hook): Implement lightweight hook handling only works
        for custom-set-hooks
      - (custom-set-value!): Add set-hook handling
    
    * scm/anthy-custom.scm
    * scm/canna-custom.scm
    * scm/prime-custom.scm
    * scm/skk-custom.scm
      - Enclose set-hooks that handles metainformation of the custom
        variable into (if custom-full-featured?) block to enable the
        lightweight set-hook invocation
      - Fix *-configure-widgets invocation
    
    * scm/im-custom.scm
      - (custom custom-activate-default-im-name?): Add a comment

2005-02-01 Etsushi Kato <ek.kato@gmail.com>

    * scm/skk-custom.scm : Add an activity-hook for showing annotation
      in preedit area.

2005-01-31 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit tunes Scheme interpreter performance for uim-custom
    
    * scm/init.scm
      - (prealloc-heaps-for-heavy-job): New procedure
    
    * scm/custom.scm
      - Invoke prealloc-heaps-for-heavy-job

2005-01-31 kzk <mover@hct.zaq.ne.jp>

    * im-kdehelper/src/pref/Makefile.am
      - add keyeditformbase.ui keygrabformbase.ui
    * uim-kdehelper/src/pref/keygrabformbase.ui
      - the dialog to grab the key
    * uim-kdehelper/src/pref/keyeditformbase.ui
      - the dialog to list up the key
    * uim-kdehelper/src/pref/olisteditformbase.ui
      - change layouting
    * uim-kdehelper/src/pref/uim-pref-qt.h
      - implement class SubgroupData's destructor
      - implement GroupPageWidget::addCustomTypeKey
    * uim-kdehelper/src/uim-pref-qt.cpp
      - implement class SubgroupData's destructor
    * uim-kdehelper/src/pref/customwidgets.h
    * uim-kdehelper/src/pref/customwidgets.cpp
      - add key edit support partly

2005-01-31 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/im-custom.scm
      - (custom-group candwin): New custom group
    
    * scm/generic-custom.scm
      - (custom 'generic-use-candidate-window?, custom
        'generic-candidate-op-count, custom 'generic-nr-candidate-max,
        custom 'generic-commit-candidate-by-numeral-key?): Add subgroup
        candwin
      - Add an activity-hook for candidate window custom variables
    
    * scm/anthy-custom.scm
      - (custom 'anthy-use-candidate-window?, custom
        'anthy-candidate-op-count, custom 'anthy-nr-candidate-max, custom
        'anthy-select-candidate-by-numeral-key?): Add subgroup candwin
      - Add an activity-hook for candidate window custom variables
    
    * scm/canna-custom.scm
      - (custom 'canna-use-candidate-window?, custom
        'canna-candidate-op-count, custom 'canna-nr-candidate-max): Add
        subgroup candwin
      - Add an activity-hook for candidate window custom variables
    
    * scm/prime-custom.scm
      - (prime-nr-candidate-max, prime-always-show-window?): Add subgroup
        candwin
    
    * scm/skk-custom.scm
      - (custom 'skk-use-candidate-window?, custom
        'skk-candidate-op-count, custom 'skk-nr-candidate-max, custom
        'skk-commit-candidate-by-label-key?): Add subgroup candwin
      - Add an activity-hook for candidate window custom variables

2005-01-31 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit makes toolbar of PRIME configurable via uim-pref
    
    * scm/prime.scm
      - (prime-widgets, default-widget_prime_input_mode,
        prime-input-mode-actions): Move to prime-custom.scm as custom variable
    * scm/prime-custom.scm
      - (prime-input-mode-indication-alist): New variable
      - (prime-widgets): Moved from prime.scm as ordinary variable
      - (custom default-widget_prime_input_mode, custom
        prime-input-mode-actions): New custom variable
      - Add several hooks to relate the new custom variables

2005-01-31 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit makes toolbar of SKK configurable via uim-pref
    
    * scm/skk.scm
      - (skk-widgets, default-widget_skk_input_mode,
        skk-input-mode-actions): Move to skk-custom.scm as custom variable
    * scm/skk-custom.scm
      - (skk-input-mode-indication-alist): New variable
      - (skk-widgets): Moved from skk.scm as ordinary variable
      - (custom default-widget_skk_input_mode, custom
        skk-input-mode-actions, ): New custom variable
      - Add several hooks to relate the new custom variables

2005-01-31 kzk <mover@hct.zaq.ne.jp>

    * helper/pref-gtk.c
      - (custom_combo_box_changed): fixed wrong condition

2005-01-31 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit makes toolbar of Canna configurable via uim-pref
    
    * scm/canna.scm
      - (canna-widgets, default-widget_canna_input_mode,
        default-widget_canna_kana_input_method, canna-input-mode-actions,
        canna-kana-input-method-actions): Move to canna-custom.scm as
        custom variable
    * scm/canna-custom.scm
      - (canna-input-mode-indication-alist,
        canna-kana-input-method-indication-alist): New variable
      - (custom canna-widgets, custom default-widget_canna_input_mode,
        custom canna-input-mode-actions, custom
        default-widget_canna_kana_input_method, custom
        canna-kana-input-method-actions): New custom variable
      - Add several hooks to relate the new custom variables

2005-01-31 kzk <mover@hct.zaq.ne.jp>

    * helper/pref-gtk.c
      - custom->value->as_key is not the array of the pointer to
        type (struct uim_custom*) but the array of the pointer to
        type (struct uim_custom_key*)

2005-01-31 kzk <mover@hct.zaq.ne.jp>

    - uim/plugin.c
      - (load_plugin): hope this is the last memory leak in this file...

2005-01-31 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/anthy-custom.scm
      - Add an activity-hook to anthy-segment-separator
    * scm/canna-custom.scm
      - Add an activity-hook to canna-segment-separator
    
    * scm/im-custom.scm
      - Modify a comment

2005-01-31 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/im-custom.scm
      - Add a set-hook for enabled-im-list to reflect the value to
        custom-preserved-default-im-name
      - (custom-hook-set-default-im-name): Simplify
      - (custom-group im-switching, custom enable-im-switch, custom
        switch-im-key): Comment out to avoid confusion of users since I
        think that current "im-switching by hotkey" feature is not useful.
    
    * scm/custom.scm
      - (custom-group hidden): New custom group for future use
    
    * doc/CUSTOM
      - Fix a typo

2005-01-31 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/generic.scm
      - (action action_generic_off): Replace iconic label "o" with "-" to
        be distinguished from "O" as on-state easily. Thanks No.24 of
        [Anthy/uim thread 5] for reporting
    * scm/m17nlib.scm
      - (action action_m17nlib_off): Ditto
    
    * scm/skk-custom.scm
      - (skk-im-short-desc): Replace "Uim" in the message with "uim" for
        consistency. Thanks No.976 of [Anthy/uim thread 4] for reporting
    * helper/GNOME_UimApplet.server.in.in
      - Ditto
    
    * po/ja.po
    * po/uim.pot
      - Update

2005-01-31 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/generic.scm
      - (ascii-rule): New variable. This rule is defined as dump
        ASCII-to-ASCII map
    * scm/latin.scm
      - (latin-im-rule): New variable. This rule is define as combination
        of ascii-rule and latin-compose-rule
      - (latin-init-handler): Replace latin-compose-rule with
        latin-im-rule. This enables typing ASCII characters on 'on' mode
        of the IM
    
    * scm/viqr.scm
      - Add lacking (require "generic.scm")

2005-01-31 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/util.scm
      - (make-scm-pathname): New procedure
      - (try-load, try-require): Suppress file not found error message
    * uim/uim-util.c
      - (file_stat_mode, file_readablep, file_writablep, file_executablep,
        file_regularp, file_directoryp): New function
      - (uim_init_util_subrs): Add initialization of file-readable?,
        file-writable?, file-executable?, file-regular? and file-directory?
    * uim/slib.c
      - (siod_lib_path): New function
      - (init_subrs): Add initialization of load-path procedure
    
    * uim/uim-custom.c
      - Add #include <sys/types.h>

2005-01-31 kzk <mover@hct.zaq.ne.jp>

    * uim-kdehelper/src/pref/uim-pref-qt.h
      - (UimPrefDialog::m_applyButton): new variable
    
    * uim-kdehelper/src/pref/uim-pref-qt.cpp
      - (UimPrefDialog::UimPrefDialog): exit when uim_custom_enable()
        failed.
      - (UimPrefDialog::setupWidgets): change button's order in
        accordance with KDE's HIG.
      - (UimPrefDialog::slotCustomValueChanged): enable apply button
      - (UimPrefDialog::slotApply): disable apply button

2005-01-31 kzk <mover@hct.zaq.ne.jp>

    * helper/pref-gtk.c
      - (update_custom_type_choice_cb): clear the contents of combobox
        by calling gtk_list_store_clear.

2005-01-31 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * doc/CUSTOM
      - Update the section "How to reflect defined customs into your IM code"
      - Update the  section "Control activity of a custom variable"

2005-01-31 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * doc/00INDEX
      - Add 'CUSTOM'
    * doc/CUSTOM
      - New file
      - Add new section "How to reflect defined customs into your IM code"
      - Add new section "Control activity of a custom variable"

2005-01-31 kzk <mover@hct.zaq.ne.jp>

    * implement "setDefault" feature in uim-pref-qt
    
    * uim-kdehelper/src/pref/uim-pref-qt.h
      - (class GroupPageWidget): new class
      - (UimPrefDialog::addCustom,
         UimPrefDialog::addCustomTypeBool,
         UimPrefDialog::addCustomTypeInteger,
         UimPrefDialog::addCustomTypeString,
         UimPrefDialog::addCustomTypePathname,
         UimPrefDialog::addCustomTypeChoice,
         UimPrefDialog::addCustomTypeOrderedList,
         UimPrefDialog::addCustomTypeKey)
         : move to GroupPageWidget
      - (UimPrefDialog::slotSetDefault): new function
    * uim-kdehelper/src/pref/uim-pref-qt.cpp
      - Ditto
      - (UimPrefDialog::slotCancel): not confirm the change
    
    * uim-kdehelper/src/pref/customwidgets.h
      - (UimCustomItemIface::setDefault): new pure virtual function
      - (CustomCheckBox::setDefault,
         CustomSpinBox::setDefault,
         CustomLineEdit::setDefault,
         CustomPathnameEdit::setDefault,
         CustomChoiceCombo::setDefault,
         CustomOrderedListEdit::setDefault)
         : new function
      - (CustomPathnameEdit::slotActivated): rename from slotHighlighted
    * uim-kdehelper/src/pref/customwidgets.cpp
      - Ditto
      - (CustomPathnameEdit::update): clear combobox's contents before
        inserting new item

2005-01-31 kzk <mover@hct.zaq.ne.jp>

    * uim/plugin.c
      - fix wrong condition of the last commit.

2005-01-31 kzk <mover@hct.zaq.ne.jp>

    * uim/plugin.c
      - (plugin_load): abolish more memory leak.
    
    * Until this commit, possible memory leak seems to be
      abolished. Thank you memprof!

2005-01-31 kzk <mover@hct.zaq.ne.jp>

    * helper/pref-gtk.c
      - Fix memory leak. The value got by calling
        uim_custom_primary_groups() must be freed by calling
        uim_custom_symbol_list_free( primary_groups );
    
    * uim-pref-qt's same problem will be fixed soon

2005-01-31 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/init.scm
      - (load-modules): Load actually enabled IMs only when (not
        enable-lazy-loading?) rather than stupidly loading all installed
        modules
    * scm/plugin.scm
      - (load-enabled-modules): New procedure moved and renamed from
        load-stub-ims of scm/lazy-load.scm
    * scm/lazy-load.scm
      - (load-stub-ims): Remove
      - (stub-im-generate-stub-im-list): Modify the stub-im template as
        require-module'ing when (not enable-lazy-loading?)

2005-01-31 kzk <mover@hct.zaq.ne.jp>

    * abolish 4 memory leaks
    
    * uim/uim-custom.c
      - (extract_choice_list): free the old contents of choice_sym_list
      - (uim_custom_cb_update_cb_gate): free the string passed to
        update_cb
    
    * uim/plugin.c
      - (plugin_load): free char *path, which is allocated by calling
        uim_scm_c_str

2005-01-31 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/custom.scm
      - (custom-group main): New custom group. This may have fixed the bug
        reported in r413. Thanks Kazuki
    * test/test-custom.scm
      - (test custom-group-subgroups): Add existence check of 'main group

2005-01-31 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * helper/pref-gtk.c
      - (update_custom_type_choice_cb): Add debug message

2005-01-31 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * helper/pref-gtk.c:
     -(update_custom_type_choice_cb): Commented out experimental code.

2005-01-31 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * helper/pref-gtk.c:
     -(update_custom_type_bool_cb, update_custom_type_string_cb,
      update_custom_type_choice_cb, update_custom_type_key_cb):
      Get new custom item from second argument.

2005-01-31 kzk <mover@hct.zaq.ne.jp>

    * Implement subgrouping feature to uim-pref-qt.
    
    * BUG!?
      The "main" subgroup's custom->label seems to weird string.
      Please check, Yamaken.
    
    * uim-kdehelper/src/pref/uim-pref-qt.h
      - (addCustom, addCustomTypeBool, addCustomTypeInteger,
         addCustomTypeString, addCustomTypeString,
         addCustomTypePathname, addCustomTypeChice,
         addCustomTypeOrderedList, addCustomTypeKey)
        : use QVGroupBox instead of QVBox
      - (class SubgroupData): new class
    
    * uim-kdehelper/src/pref/uim-pref-qt.cpp
      - (createGroupWidget): dealing with subgroup
      - (createGroupWidgets): use custom->label

2005-01-31 Takuro Ashie <ashie@homa.ne.jp>

    * helper/pref-gtk.c:
      - (choose_olist_clicked_cb): Moved up and down button to left side.

2005-01-31 Etsushi Kato <ek.kato@gmail.com>

    * po/ja.po :  Fix translation of "Show annotation in preedit area" in scm/skk-custom.lisp

2005-01-31 Takuro Ashie <ashie@homa.ne.jp>

    * helper/pref-gtk.c
      - (choose_olist_clicked_cb): Arranged buttons as cross-shaped.

2005-01-31 kzk <mover@hct.zaq.ne.jp>

    * Implement Callbacks for uim_custom
    
    * qt/uim-kdehelper/src/pref/customwidgets.h
      - (UimCustomItemIface::UimCustomItemIface): register callback
      - (UimCustomItemIface::update_cb): callback
      - (UimCustomItemIface::updateItem): update m_custom variable by
        calling uim_custom_get
      - (UimCustomItemIface::update): pure virtual function to update
        the condition of widget
      - (CustomCheckBox::update): update CustomCheckBox
      - (CustomSpinBox::update): update CustomSpinBox
      - (CustomLineEdit::update): update CustomLineEdit
      - (CustomChoiceCombo::update): update CustomChiceCombo
      - (CustomOrderedListEdit::update): update CustomOrderedListEdit
    * qt/uim-kdehelper/src/pref/customwidgets.cpp
      - Ditto
    
    * qt/uim-kdehelper/src/pref/uim-pref-qt.cpp
      - move updation handling to customwidget.cpp

2005-01-31 kzk <mover@hct.zaq.ne.jp>

    * helper/pref-gtk.c
      - (olist_pref_entry_set_value): use item->label instead of item->symbol

2005-01-31 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/custom-rt.scm
      - (custom-set-value!): Fix invalid key-binding configuration caused
        by r390

2005-01-31 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-custom.c
      - (custom_cb_add): Fix misformed sexp. This makes custom callback
        working

2005-01-31 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * po/ja.po
    * po/uim.pot
      - Update

2005-01-31 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit makes toolbar of Anthy configurable via uim-pref
    
    * scm/custom.scm
      - (custom-choice-range-reflect-olist-val,
        custom-call-all-hook-procs, custom-touch-value!, custom-type-info,
        custom-set-type-info!): New procedure
      - (custom-set-value!): Add lacking custom-update-hooks invocation
        for the value itself rather than activity change
      - (custom-reload-customs): Add invocation for custom-set-hooks
    * scm/custom-rt.scm
      - (custom-choice-range-reflect-olist-val): New procedure
    
    * scm/action.scm
      - (indication-rec-spec, record indication): Move to load-action.scm
    * scm/load-action.scm
      - (indication-rec-spec, record indication): Moved from action.scm
      - (indication-alist-entry-extract-choice, action-id-list->choice,
        indication-alist-indicator): New procedure
    
    * scm/im-custom.scm
      - (custom-im-list-as-choice-rec): gettextize
      - (custom-group toolbar): New custom group
      - (custom toolbar-show-switcher-button?, custom
        toolbar-show-pref-button?): Add toolbar as subgroup
    
    * scm/anthy.scm
      - (anthy-widgets, default-widget_anthy_input_mode,
        default-widget_anthy_kana_input_method, anthy-input-mode-actions,
        anthy-kana-input-method-actions): Move to anthy-custom.scm as
        custom variable
      - (action action_anthy_hiragana, action action_anthy_katakana,
        action action_anthy_hankana, action action_anthy_direct, action
        action_anthy_zenkaku, action action_anthy_roma, action
        action_anthy_kana, action action_anthy_azik): Add future
        replacement codes as comment
    * scm/anthy-custom.scm
      - (anthy-input-mode-indication-alist,
        anthy-kana-input-method-indication-alist): New variable
      - (custom anthy-widgets, custom default-widget_anthy_input_mode,
        custom anthy-input-mode-actions, custom
        default-widget_anthy_kana_input_method, custom
        anthy-kana-input-method-actions): New custom variable
      - Add several hooks to relate the new custom variables

2005-01-30 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/intl.c
      - (intl_bind_textdomain_codeset):
        * Add validity check for args
        * Add proper NULL handlings
      - (intl_dgettext): Add validity check for args
    
    * uim/uim.c
      - Move config.h to top
      - (uim_init_scm): Add default encoding configuration as commented
        out code

2005-01-30 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * helper/toolbar-common-gtk.c
      - (right_click_menu_create, switcher_button_create,
        pref_button_create):
        * gettextize strings
        * Remove trailing "." of strings for menu

2005-01-30 Etsushi Kato <ek.kato@gmail.com>

    * uim/skk-dic.c (quote_word) : Again using dynamic memory
      allocation with realloc().  The bug was actually just a careless
      miss...

2005-01-30 Etsushi Kato <ek.kato@gmail.com>

    * uim/skk-dic.c (quote_word) : Malloc fixed sized memory instead
      of using realloc() to avoid some memory problem.
    (sanitize_word) : Cosmetic change.

2005-01-30 Etsushi Kato <ek.kato@gmail.com>

    * uim/skk-dic.c (next_cand_slash) : Minor bug fix of r393.

2005-01-30 Etsushi Kato <ek.kato@gmail.com>

     * uim/skk-dic.c (quote_word) : Quote double quotation.
       (sanitize_word) : Sanitize double quotation character.

2005-01-30 Etsushi Kato <ek.kato@gmail.com>

    * uim/skk-dic.c (skk_eval_candidate) : Add check if
      uim_scm_return_value() is empty.

2005-01-30 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * helper/pref-gtk.c:
     -(update_custom_type_bool_cb, update_custom_type_string_cb,
      update_custom_type_choice_cb, update_custom_type_key_cb):
      New callback functions.
     -(add_custom_type_bool, add_custom_type_string,
       add_custom_type_choice, add_custom_type_key): Register
       custom callback function.

2005-01-30 Etsushi Kato <ek.kato@gmail.com>

     * uim/skk-dic.c (skk_eval_candidate) : Add simple sanity check.

2005-01-30 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * uim/uim-custom.c;
     -(custom_cb_add): Fixed wrong order of arguments of custom-register-cb.

2005-01-30 Etsushi Kato <ek.kato@gmail.com>

    * scm/skk-custom.scm (skk-show-annotation-in-preedit?) : New
      custom variable.  Default is #f.
    
    * scm/skk.scm (skk-prepare-commit-string) : Evaluate candidate
      string which contains 'concat'.
    (skk-do-update-preedit) : Ditto.  Check condition of
      skk-show-annotation-in-preedit?
    (skk-get-candidate-handler) : Evaluate 'concat'.
    
    * uim/skk-dic.c : Stop including "uim-compat-scm.h".
    (next_slash) : Renamed to next_cand_slash.
    (next_cand_slash) : Renamed from next_slash.  Locate the starting
      point (slash) of next candidate.
    (next_slash_in_bracket) : New.  Locale next slash.
    (okuri_in_bracket) : Use next_slash_in_bracket().
    (nth_candidate) : Use next_cand_slash().
    (skk_commit_candidate) : Also reorder base candidate array even if
      candidate array with okuri string exists.
    (quote_word) : New.  Replace some words using 'concat'.
    (sanitize_word) : Don't ignore some words to be registered in
      personal dictionary.  Word with space and parenthesis is allowed
      except the words are composed by space only.
    (skk_lib_get_annotation) : Don't assume the word as annotation if
      it is ended with colon.
    (skk_lib_remove_annotataion) : Ditto.
    (skk_eval_candidate) : New.  Evaluate 'concat' emacs lisp.
    (uim_plugin_instance_init) : Export skk_eval_candidate as
      skk-lib-eval-candidate to scheme.

2005-01-29 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commmit replaces a Scheme API im-label-name with im-name-label
      in accordance with following discussion
    
      http://lists.freedesktop.org/archives/uim/2005-January/000921.html
      http://lists.freedesktop.org/archives/uim/2005-January/000973.html
    
    * scm/im.scm
      - (record im, register-im): s/label-name/name-label/g
    * scm/generic.scm
      - (generic-register-im): Ditto
    * scm/im-custom.scm
      - (custom-im-list-as-choice-rec): Ditto
    * scm/lazy-load.scm
      - (register-stub-im): Ditto
    
    * scm/prime.scm
    * scm/spellcheck.scm
    * scm/canna.scm
    * scm/anthy.scm
    * scm/skk.scm
      - s/label-name/name-label/g in register-im
    
    * scm/hangul.scm
      - s/label-name/name-label/g in hangul-register-im
    
    * scm/skk-custom.scm
      - (skk-im-label-name): Rename to skk-im-name-label
      - (skk-im-name-label): Renamed from skk-im-label-name
      - (custom-group skk): s/label-name/name-label/g
    
    * scm/prime-custom.scm
      - (prime-im-label-name): Rename to prime-im-name-label
      - (prime-im-name-label): Renamed from prime-im-label-name
      - (custom-group prime): s/label-name/name-label/g
    
    * scm/anthy-custom.scm
      - (anthy-im-label-name): Rename to anthy-im-name-label
      - (anthy-im-name-label): Renamed from anthy-im-label-name
      - (custom-group anthy): s/label-name/name-label/g
    
    * scm/spellcheck-custom.scm
      - (spell-im-label-name): Rename to spell-im-name-label
      - (spell-im-name-label): Renamed from spell-im-label-name
      - (custom-group spellcheck): s/label-name/name-label/g
    
    * scm/canna-custom.scm
      - (canna-im-label-name): Rename to canna-im-name-label
      - (canna-im-name-label): Renamed from canna-im-label-name
      - (custom-group canna): s/label-name/name-label/g

2005-01-29 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * scm/ipa.scm: Added some entries based on X-SAMPA.
        This commit close bug #2416. Thanks to Denis Jacquerye <moyogo@gmail.com>.

2005-01-29 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit changes key-binding representation for users. See
      following discussions (sorry, written in Japanese).
      http://lists.sourceforge.jp/mailman/archives/anthy-dev/2005-January/001637.html
      http://lists.sourceforge.jp/mailman/archives/anthy-dev/2005-January/001670.html
    
      Remove your ~/.uim.d/customs/custom-global-keys.scm to reflect new
      key definitions.
    
    * helper/pref-gtk.c
      - (key_pref_set_value): Downcase alphabet key
    * scm/custom.scm
      - (key-list->gui-key-list): Replace with 'key-list-export-as-basic
      - (gui-key-list->key-list): Replace with 'key-list-import-as-basic
      - (key-list-export-as-basic): Remove key-list-upcase in accordance
        with the discussion
      - (key-list-import-as-basic): Remove key-list-encode-shift and
        key-list-downcase, and add key-list-decode-shift in accordance
        with the discussion
    * scm/generic-key-custom.scm
      - (custom generic-commit-key, custom generic-cancel-key, custom
         generic-next-candidate-key, custom generic-prev-candidate-key,
         custom generic-beginning-of-preedit-key, custom
         generic-end-of-preedit-key, custom generic-kill-key, custom
         generic-kill-backward-key, custom generic-backspace-key, custom
         generic-delete-key, custom generic-go-left-key, custom
         generic-go-right-key, custom generic-return-key): Replace the
         pairs such as '("<Control>m" "<Control>M") with
         '("<IgnoreCase><Control>m") to unify alphabetic key bindings for
         user convenience

2005-01-29 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit simplifies complicated IM loading (including
      lazy-loading) process involving several state variables,
    
    * scm/init.scm
      - (enable-action?): New variable
      - (load-modules): New procedure
      - Make direct IM lazy-loadable
      - Avoid full loading of IMs when LIBUIM_VANILLA=1
      - Move (require-custom "im-custom.scm") from im.scm
      - Move (require "key.scm") from im.scm
      - Simplify complicated IM loading process including lazy-loading
      - Resolve stub-im inconsistency problem between actually installed
        modules and generated in custom-global.scm
      - Support per-user plugin configuration file
        ~/.uim.d/plugin/installed-modules.scm
      - Support per-user stub-im file file
        ~/.uim.d/plugin/stub-ims.scm
    * scm/im.scm
      - (register-im): Simplify rejection condition
      - Move (require-custom "im-custom.scm") to init.scm
      - Move (require "key.scm") to init.scm
    * scm/plugin.scm
      - (installed-im-module-list): New variable
      - (load-module-conf): New procedure
    * scm/im-custom.scm
      - (custom-installed-im-list):
        * Redefine as procedure
        * Remove conditional evaluation
      - (custom enabled-im-list):
        * Replace default value with '(direct) because normal
          initialization of libuim prepares proper enabled-im-list
        * Replace range definition in accordance with the condition
          custom-full-featured?
        * Remove complicated bootstrapping
      - (custom-hook-literalize-enabled-im-list): Removed. This also
        withdraws per-user-enabled-im-list-loaded? and
        im-lazy-loading-enabled?
      - (custom enable-lazy-loading?): New custom variable
    * scm/lazy-load.scm
      - (stub-im-generate-stub-im-list):
        * Replace enabled-im-list acquisition code in accordance with the
          simplification
        * Modify stub-im definition code in accordance with simplification
          of lazy-loading process
      - (stub-im-generate-all-stub-im-list): Load all
        installed-im-module-list explicitly in accordance with change of
        IM loading process
      - (load-stub-ims): New procedure
    * scm/load-action.scm
      - Replace conditional variable disable-action with enable-action?
    * scm/manage-modules.scm
      - New file. Generates input method module configurations for plugin
        installation
      - (generate-installed-modules-scm, generate-stub-ims-scm): New
        procedure
    * scm/Makefile.am
      - (scm_DATA): Replace enabled-ims.scm with stub-ims.scm
      - (SCM_FILES): Add manage-modules.scm
      - (installed-modules.scm):
        * Replace generation rule with manage-modules.scm
        * Now installed-modules.scm also contains enabled-im-list in
          addition to installed-im-module-list
      - (enabled-ims.scm): Withdraw the file and generation rule
      - (stub-ims.scm): New generation rule
    
    * test/test-lazy-load.scm
      - (test stub-im-generate-stub-im-list, test
        stub-im-generate-all-stub-im-list): Follow the specification
        change
    * test/test-im.scm
      - (testcase im im-management, testcase im im-custom):
        * Apply following changes to setup process to follow the
          specification changes
        * Load IM modules explicitly
        * Add test-im and test-im2 to enabled-im-list
    * test/test-action.scm
      - (testcase action):
        * Load IM modules explicitly in setup process to follow the
          specification changes

2005-01-29 kzk <mover@hct.zaq.ne.jp>

    * bug fix of uim-pref-qt
    
    * uim-kdehelper/src/pref/customwidgets.h
      - (updateText): new function
    * uim-kdehelper/src/pref/customwidgets.cpp
      - (updateText): new function
      - (slotEditButtonClicked): add enabled item first for storing the
        order of the list, and update the text of lineedit after list is
        modified.
    * uim-kdehelper/src/pref/olisteditformbase.ui
      - change listview's column name
      - make header unclickable and resizable

2005-01-29 Masahito Omote <omote@utyuuzin.net>

    * doc/HELPER-CANDWIN: Updated.

2005-01-28 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim.c
      - (load_conf): Removed
      - (uim_init_scm): Remove scm file loadings
    
    * scm/init.scm
      - (load-user-conf): New procedure. This is equivalent of load_conf()
      - Add loading of fundamental part of uim as uim_init_scm() did
      - This file initializes platform dependent execution
        environment. The codes are written for ordinary UNIX desktop
        system. Modify this file with careful investigation to change uim
        configuration for special platforms such as embedded environments

2005-01-28 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/loader.scm
      - Rename to init.scm
    * scm/init.scm
      - Renamed from loader.scm
    
    * scm/Makefile.am
    * po/POTFILES.in
      - Replace loader.scm with init.scm
    
    * uim/uim.c
      - (uim_init_scm): Replace loader.scm with init.scm

2005-01-28 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/Makefile.am
      - (scm_DATA): Add installed-modules.scm and enabled-ims.scm
      - (SCM_FILES): Remove installed-modules.scm and enabled-ims.scm
      - Fix dependency of installed-modules.scm

2005-01-28 kzk <mover@hct.zaq.ne.jp>

    * check helper connection before calling uim_helper_client_focus_out()
    
    * gtk/gtk-im-uim.c
      - (focus_out): check helper connection before calling calling
        uim_helper_client_focus_out()
    * qt/quiminputcontextplugin/src/quiminputcontext.cpp
      - (unsetFocus): Ditto
    * qt/quiminputcontextplugin-qt4/quiminputcontext.cpp
      - (unsetFocus): Ditto

2005-01-28 kzk <mover@hct.zaq.ne.jp>

    * Enhancement of uim-pref-qt. (this is my escaping from test:-P)
      The main enhancement is implementing ordered list editing.
    
    * uim-kdehelper/src/Makefile.am
      - add customwidgets.cpp, kseparator.h, kseparator.cpp,
        and  olisteditformbase.ui.
    * uim-kdehelper/src/olisteditformbase.ui
      - the ui file for OrderedListEdit dialog
    * uim-kdehelper/src/pref/customwidgets.h
      - move contents to customwidgets.cpp
      - (class CustomOrderedListEdit): new class
      - (class OListEditForm): new class
    * uim-kdehelper/src/pref/customwidgets.cpp
      - new file(the contents is moved from customwidgets.h)
      - (class CustomOrderedListEdit): new class
      - (class OListEditForm): new class
    * uim-kdehelper/src/pref/uim-pref-qt.cpp
      - (createGroupWidget): display title as KControl and use KSeparator
      - (slotCancel): not confirm change if nothing is changed when
        cancel button is clicked.
      - (addCustomTypeOrderedList): new function
    * uim-kdehelper/src/pref/kseparator.h
    * uim-kdehelper/src/pref/kseparator.cpp
      - separator widget ported from kdelibs

2005-01-28 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/latin.scm
    * scm/direct.scm
      - Rewrite short-desc and label-name of the IM
    
    * po/uim.pot
    * po/ja.po
      - Update

2005-01-28 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * helper/toolbar-common-gtk.c:
     -(switcher_button_pressed): Process right click correctly.
     -(pref_button_pressed): Process right click correctly.
     --This line, and those below, will be ignored--
    
    M    toolbar-common-gtk.c

2005-01-28 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * helper/toolbar-common-gtk.c: This commit implements right click menu to
      uim-toolbar-gtk.
     -(menu_switcher_activated):New function.
     -(menu_pref_activated):New function.
     -(menu_quit_activated):New function.
     -(prop_right_button_pressed):New function.
     -(prop_button_pressed): Call prop_right_button_pressed if right button
       was pressed.

2005-01-28 kzk <mover@hct.zaq.ne.jp>

    * this commit aims to introduce --enable-uimqt-debug configure
      option for suppressing the debug message.
    
    * qt/quiminputcontextplugin/configure.in.in
      - add --enable-uimqt-debug option
    * qt/quiminputcontextplugin/src/quiminputcontext.cpp
      - include config.h
      - turn on qDebug when ENABLE_DEBUG is defined
    * qt/quiminputcontextplugin/src/plugin.cpp
      - Ditto
    * qt/quiminputcontextplugin/src/candidatewindow.cpp
      - Ditto
    * qt/quiminputcontextplugin/src/candidatewindow.cpp
      - Ditto

2005-01-28 kzk <mover@hct.zaq.ne.jp>

    * UimQt: specify default size of CandidateWindow instead
      of resizing because resizing causes flickering.
    
    * qt/quiminputcontextplugin/src/candidatewindow.h
      - (CandidateWindow::adjustCandidateWindowSize): removed
      - (CandidateWindow::sizeHint): new function
      - (CandidateWindow::itemAtIndex): add const qualifier
      - (CandidateListView::sizeHint): new function
    * qt/quiminputcontextplugin/src/candidatewindow.cpp
      - (CandidateWindow::adjustCandidateWindowSize): removed
      - (CandidateWindow::sizeHint): new function
      - (CandidateListView::sizeHint): new function

2005-01-28 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * helper/toolbar-common-gtk.c:
     -(switcher_button_create, pref_button_create): Changed description of
     each button's role. (Exec xxx -> Execute xxx)

2005-01-28 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * helper/toolbar-common-gtk.c:
     -(switcher_button_create): Use icon.
    
    * pixmaps/: New directory for pixmaps.
     - switcher-icon.png: Icon for switcher. Thanks to UTUMI Hirosi.

2005-01-28 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * configure.ac: Added --default-toolkit option.

2005-01-28 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-compat-scm.h
    * uim/uim-compat-scm.c
      - (uim_scm_symbol_value_bool): New function
    * scm/im-custom.scm
      - (custom toolbar-show-switcher-button?, custom
        toolbar-show-pref-button?): New custom variable

2005-01-28 kzk <mover@hct.zaq.ne.jp>

    * helper/im-switcher-gtk.c
      - fix warning by using GTK_FRAME macro.

2005-01-28 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit performs adaptation of key-str representation for
      uim-pref. Default representation may be changed to "always
      capitalized letter keys with ignore-case" after discussion for
      easy-to-recognize key configuration
    
    * helper/pref-gtk.c
      - (key_pref_set_value):
        * Add conversion from " " to "space" for user convenience
        * Add capitalization for alphabet keys for easy-to-recognize key
          configuration.  uim-custom performs implicit shift key
          encoding/decoding appropriately. This feature is disabled at now
    
    * scm/custom.scm
      - (key-list->gui-key-list, gui-key-list->key-list): New variable
      - (custom-key?): Accept translator-prefixes
      - (custom-expand-key-references): Add key-str customizable
        conversion for uim-pref
      - (reversed-tag-prefix-alist): New variable
      - (key-str->key-list, key-list->key-str, map-key-list-body,
        map-key-list-letter, map-key-str, key-list-upcase,
        key-list-downcase, key-list-visualize-space,
        key-list-characterize-space, key-list-encode-shift,
        key-list-decode-shift, key-list-ignore-regular-shift,
        key-list-ignore-case, key-list-strip-translators,
        key-list-export-as-basic, key-list-import-as-basic,
        key-list-export-as-traditional, key-list-import-as-traditional,
        key-str->gui-key-str, gui-key-str->key-str): New procedures for
        customizable conversion for uim-pref
      - (custom-set-value!, custom-definition-as-literal): Replace
        define-key with combination of define and make-key-predicate to
        allow flexible key binding
    * test/test-custom.scm
      - (test custom-key?, test custom-valid?): Accept translator-prefix
      - (test custom-definition-as-literal): Follow the specificationn
        change

2005-01-28 Takuro Ashie <ashie@homa.ne.jp>

    * helper/pref-gtk.c:
      - (olist_pref_up_button_clicked_cb)
        (olist_pref_down_button_clicked_cb):
        Scroll the tree view on up or down buttons are pressed.

2005-01-28 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/util.scm
      - All changes are validated by test-util.scm
      - (char-printable?): Fix lacking non-ASCII character check
      - (string->letter): New procedure
    * test/test-util.scm
      - (test char-control?, test char-upper-case?, test char-lower-case?,
        test char-alphabetic?, test char-numeric?, test char-printable?,
        test char-graphic?): Add non-ASCII character check
      - (test string->letter): New test

2005-01-27 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * entry.c: Use GTimer to measure elapsed time for uim_init.

2005-01-27 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * helper/toolbar-common-gtk.c: Added "Exec pref" button.
     -(pref_button_create); New function.
     -(pref_button_pressed); New function.

2005-01-27 Etsushi Kato <ek.kato@gmail.com>

    * uim/skk-dic.c (skk_lib_remove_annotation) : Add check for empty
      list.
    (skk_lib_get_annotation) : Ditto.
    * scm/skk-custom.scm : Add new custom boolean variable
      'skk-show-annotation?  Default is #t.
    * scm/skk.scm (skk-get-nth-candidate) : Check skk-show-annotation?
    (skk-do-update-preedit) : Don't show annotation in preedit area.
      This is ddskk compatible behavior.

2005-01-27 Etsushi Kato <ek.kato@gmail.com>

    * uim/skk-dic.c (reorder_candidate) : Revise r364.  Set the flag
      only when sequence of the candidates has changed.

2005-01-27 Etsushi Kato <ek.kato@gmail.com>

    * uim/skk-dic.c (reorder_candidate) : Set cache_modified flag.
    * scm/skk.scm : Use char-upper-case? in util.scm instead of
      skk-upper-char?
    (skk-upper-char?) : Removed.

2005-01-27 Masanari Yamamoto <h013177b@ice.nuie.nagoya-u.ac.jp>

     * callback.c (get_candidate) : bug fix

2005-01-27 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/util.scm
      - All changes are validated by test-util.scm
      - (compose): New procedure
      - (unfold): New SRFI procedure
      - (char-upper-case?, char-lower-case?, char-alphabetic?,
        char-numeric?, char-downcase, char-upcase): New R5RS-like
        procedure
      - (char-control?, char-printable?, char-graphic?): New procedure
      - (control-char?): Rewrite as alias of char-control?
      - (alphabet-char?): Rewrite as alias of  char-alphabetic?
      - (numeral-char?): Rewrite as alias of  char-numeric?
      - (usual-char?): Rewrite as alias of  char-graphic?
      - (to-lower-char): Rewrite as alias of  char-downcase
      - (numeral-char->number): Replace numeral-char? with char-numeric?
    * test/test-util.scm
      - Update copyright
      - (test compose, test unfold, test char-upper-case?, test
        char-lower-case?, test char-alphabetic?, test char-numeric?, test
        char-downcase, test char-upcase, test char-control?, test
        char-printable?, test char-graphic?): New test
      - (control-char?, alphabet-char?, numeral-char?, usual-char?,
        to-lower-char): Replace value tests with alias identity test
    
    * uim/uim-util.c
      - Update copyright
      - All changes are validated by test-util.scm
      - (digit2string):
        * Fix buffer overrun
        * Add type check
    * test/test-uim-util.scm
      - Update copyright
      - (test digit->string): Add longest 32bit value tests
    
    * uim/uim-scm.h
      - Update copyright

2005-01-26 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * examples/uim-custom/uim-custom-update.c
      - (main): Add error handlings around uim_init() and
        uim_custom_enable()
    * examples/uim-custom/uim-custom-dump.c
      - (main): Ditto
    * examples/uim-custom/uim-custom-variable.c
      - (main): Ditto

2005-01-26 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * qt/uim-kdehelper/src/pref/uim-pref-qt.cpp
      - (UimPrefDialog::UimPrefDialog): Add error handling around
        uim_custom_enable(). uim-pref-qt should abort execution if the
        initialization failed. uim_init() should also be treated as same
        way
    
    * helper/pref-gtk.c
      - (main): Add error handlings around uim_init() and
        uim_custom_enable()

2005-01-26 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/prime.c
      - (prime_init_ud): Fix C++ style comment with C style one
    
    * uim/skk-dic.c
      - (sanitize_word, skk_lib_get_annotation): Fix constness handlings

2005-01-26 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-custom.c
      - (uim_custom_quit): Add uim_custom_group_cb_remove() and
        uim_custom_global_cb_remove()

2005-01-26 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit splits libuim-custom off from libuim as optional part of
      libuim. Users of uim-custom must link libuim-custom explicitly
    
    * uim/uim.c
      - (uim_quit): Remove comment outed uim_custom_quit()
    * uim/uim-custom.c
      - (uim_custom_enable):
        * Replace with (load-plugin "custom-enabler")
        * Modify the comment
      - (uim_custom_init):
        * Add prototype declaration
        * New function (reverted to previous implementation)
        * Modify the comment
      - (uim_custom_quit):
        * Add prototype declaration
        * Modify the comment
    * uim/uim-custom-enabler.c
      - New file
      - This plugin is only used for managing initialization and
        finalization of uim-custom API by using plugin facility. Users of
        uim-custom API must also link libuim-custom at
        compile-time. uim_custom_init() and uim_custom_quit() provides the
        initialization and finalization function itself, and this file and
        uim_custom_enable() provides an interface for how to invoke
        them. The two parts are responsible for orthogonal issues and
        should be kept separated
      - (uim_plugin_instance_init, uim_plugin_instance_quit): New function
    * uim/plugin.c
      - (plugin_load): Accept plugin without corresponding scm file
    
    * uim/Makefile.am
      - Add build rule for libuim-custom
      - Add build rule for libuim-custom-enabler.so
    
    * qt/uim-kdehelper/src/pref/Makefile.am
    * helper/Makefile.am
    * examples/uim-custom/Makefile.am
      - Add -luim-custom

2005-01-26 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/Makefile.am
      - Fix build script for enabled-ims.scm. Thanks UTUMI Hirosi and
        No.143 of [Anthy/uim thread 5] for reporting

2005-01-26 Takuro Ashie <ashie@homa.ne.jp>

    * helper/pref-gtk.c:
      - Enabled multiple selection on ordered list preference window.

2005-01-26 Etsushi Kato <ek.kato@gmail.com>

    * uim/uim-helper-server.c : Handle SIGPIPE properly which was
      caused from sudden disconnect of uim-im-switcher-gtk.
    (parse_content) : Handle EPIPE.
    (main) : SIG_IGN of SIGPIPE.
    * uim/uim-helper-client.c (uim_helper_read_proc) : Check fd
      readable state properly.
    * uim/uim-helper.c (uim_helper_send_message) : Check fd writable
      state properly.

2005-01-25 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit re-enables all m17nlib IMs. Although they are redundant
      and unconfortable, they can be disabled by uim-pref
    
    * scm/m17nlib.scm
      - (duplicated-im-list): Revise the comment
      - (duplicated-im?):
        * Always returns #f to enable all IMs. Original behavior is also
          preserved as unused code
        * Add a comment

2005-01-25 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit complements install-time configuration ability of
      enabled-im-list and lazy-loading features. New behaviors of changed
      procedures are not validated by unit test yet
    
      At now, there are some weird fileset organizations and complex
      variable handlings involving uim-custom, lazy-loading and
      enabled-im-list. Some of them came from limited architectural change
      of uim 0.4.6, some of others are intentionally made as development
      step for future restructure of uim, and some others simply need
      discussions. Ask me any intention, specification, usage or doubt
    
    * configure.ac
      - Define new AM_CONDITIONAL PRIME, SKK as always true. Add configure
        option handlings if you want
    * scm/Makefile.am
      - (SCM_FILES): Add installed-modules.scm and enabled-ims.scm
      - Add generation rules for installed-modules.scm and enabled-ims.scm
    
    * scm/loader.scm
      - (installed-im-module-list): Move to installed-modules.scm which is
        generated automatically on install-time
      - Add (load "installed-modules.scm")
      - Support stub-im and enabled-im-list for lazy-loading that had been
        configured in install-time. The data is acquired by loading
        enabled-ims.scm
    * scm/im.scm
      - (enabled-im-list): New variable
      - (normalize-im-list): Add a comment about inconsistency between
        im-list and corresponding IM management entity in C-side
        (uim_im_array)
      - (register-im): Sense enabled-im-list to reject disabled IMs of a
        IM module on lazy-loading. For example, a stub-im entry such as
        hangul2 will also load unnecessary and disabled hangul3 and romaja
        without this workaround
    * scm/im-custom.scm
      - (custom-installed-im-list): Remove 'direct' IM from enabled-im-list
      - (custom-hook-literalize-enabled-im-list): Add definition of
        per-user-enabled-im-list-loaded? and im-lazy-loading-enabled? in
        accordance with install-time configurations
    * scm/lazy-load.scm
      - (stub-im-generate-stub-im-list): Replace determination logic of
        lazy-loading in accordance with install-time configurations
    * scm/custom.scm
      - Cosmetic change
      - (custom-reload-customs): Simplify
      - (custom-full-featured?): New variable
    * scm/custom-rt.scm
      - (custom-full-featured?): New variable
    
    * scm/uim-sh.scm
      - (uim-sh-opt-strict-batch): New variable
      - (uim-sh-loop, uim-sh-parse-args, uim-sh-usage): Support new -B
        option (strict batch mode)
    
    * test/test-lazy-load.scm
      - (test stub-im-generate-stub-im-list, test
        stub-im-generate-all-stub-im-list): Follow specification change of
        stub-im-generate-stub-im-list
      - svn propset svn:executable ON
    
    * test/test-im.scm
      - (testcase im im-management): Add temporary workaround to cheat on
        revised register-im to setup proc. It should be rewritten as
        proper tests in accordance with new enabled-im-list handlings of
        register-im
    
    * test/test-custom-rt.scm
    * test/test-plugin.scm
      - svn propset svn:executable ON
    
    * gtk/Makefile.am
      - Fix a spacing

2005-01-24 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim.c
      - (uim_quit): Comment out uim_custom_quit() as temporary workaround
        to avoid unbound variable error when uim_custom_enable() is not
        invoked
    
    -------- missing changelog of r342 --------
    * uim/uim.c
      - (uim_quit): Add uim_custom_quit()

2005-01-23 Etsushi Kato <ek.kato@gmail.com>

     * scm/skk-scm (skk-proc-state-kanji) : Check if skk-context-head
       is empty to start auto conversion.
    * uim/skk-dic.c (open_lock) : Fix typo.

2005-01-22 Masanari Yamamoto <h013177b@ice.nuie.nagoya-u.ac.jp>

     * fep/uim-fep.c: fix bugs related UIM_FEP_GETMODE and UIM_FEP_SETMODE
     * fep/uim-fep-tick.c (version): replace fprint(stderr) with printf
     * fep/draw.c: fix a comment

2005-01-22 Etsushi Kato <ek.kato@gmail.com>

    * scm/skk-custom.scm : Fix typo.

2005-01-21 Etsushi Kato <ek.kato@gmail.com>

    * uim/uim-ipc.c (uim_ipc_open_command_with_option) : free string
      at the proper place.

2005-01-21 Takuro Ashie <ashie@homa.ne.jp>

    * po/ja.po, po/POTFILES.in: Updated.

2005-01-21 Etsushi Kato <ek.kato@gmail.com>

    * scm/skk.scm (skk-commit-editor-context) : Add appendix character to
      the string.

2005-01-21 Etsushi Kato <ek.kato@gmail.com>

    * scm/skk-custom.scm : Update description about skk-auto-start-henkan?

2005-01-21 Etsushi Kato <ek.kato@gmail.com>

    * scm/skk.scm : Fix r341 to prevent saving incorrect words in
      personal dictionary.
    (skk-style-spec) : Add new style-spec entry for auto-conversion
      characters.
    (skk-context-rec-spec) : Add new entry 'appendix for
      auto-conversion characters.
    (skk-prepare-commit-string) : Add appendix character.
    (skk-do-update-preedit) : Show appendix character.
    (skk-proc-state-kanji) : Use skk-context-appendix instead of
      skk-context-okuri.
    (skk-back-to-kanji-state) : Add appendix character to
      skk-context-head.

2005-01-21 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * uim/uim-custom.h,uim/uim-custom.c:
     - uim_custom_enable: New function. Renamed from uim_custom_init.
     - uim_custom_quit: uim_custom_quit should be called in uim_quit..
    
    * helper/pref-gtk.c, qt/uim-kdehelper/src/pref/uim-pref-qt.cpp,
      examples/uim-custom/uim-custom-update.c,
      examples/uim-custom/uim-custom-dump.c,
      examples/uim-custom/uim-custom-variable.c:
       - s/uim_custom_init/uim_custom_enable/
       - Removed uim_custom_quit.

2005-01-21 Takuro Ashie <ashie@homa.ne.jp>

    * uim/uim-custom.c:
      - (c_list_to_str): Terminate the string by NUL character.

2005-01-21 Etsushi Kato <ek.kato@gmail.com>

    * scm/skk-custom.scm (skk-auto-start-henkan?) : New custom
      boolean variable.  Default is #t.
    * scm/skk.scm (skk-auto-start-henkan-keyword-list) : New list of
      characters for starting auto conversion.
    (skk-proc-state-kanji) : Enable auto conversion with some specific
      characters.

2005-01-20 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * gtk/gtk-im-uim.c:
     -(im_module_create): First argument of setlocale should be LC_CTYPE.

2005-01-20 Etsushi Kato <ek.kato@gmail.com>

    * scm/skk.scm : Indentation fixes using tab.
    (skk-context-rec-spec) : Use empty list instead of "" for head
      and okuri.
    (skk-proc-state-direct-no-preedit) : Check each modifier key
      separately instead of whole modifier-key-mask to prevent problem
      with some wide latin characters.
    (skk-proc-state-direct) : Ditto.  This fixes the bug introduced in
      r251.  Use skk-upper-char? for beginning of skk-state-kanji.
    (skk-upper-char?) : New procedure.
    (skk-proc-state-kanji) : Use skk-upper-char? instead of checking
      shift-key-mask.

2005-01-20 Etsushi Kato <ek.kato@gmail.com>

    * scm/skk.scm (skk-state-direct-no-preedit-nop-key?) : New key
      definition.  Keys in this list will have no effect on
      proc-state-direct-no-preedit.
    * scm/skk.scm (skk-proc-state-direct-no-preedit) : Update r335
      using skk-state-direct-no-preedit-nop-key?  See [Anthy-dev
      1613].

2005-01-20 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * doc/api-doc/uim-devel.db: Update documentation.
      Added new chapters:
       - Customization features
       - How to debug

2005-01-20 Etsushi Kato <ek.kato@gmail.com>

    * scm/skk.scm (skk-proc-state-direct-no-preedit) : Make sure to
      not forward skk-on-key? as native event although the key is not
      used in this state.  This is ddskk compatible behavior.

2005-01-20 Takuro Ashie <ashie@homa.ne.jp>

    * helper/pref-gtk.c:
      - Added UI for editing ordered list.
      - (choose_key_clicked_cb): Don't use gtk_dialog_run() for key
        preference window.

2005-01-19 Etsushi Kato <ek.kato@gmail.com>

    * scm/skk.scm (skk-proc-state-direct-no-preedit) : Do commit raw
      even for keys with shift modifier mask when they are not
      alphabet keys (e.g. "<Control><Shift>_").

2005-01-19 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * README: Updated software requirement infomation.

2005-01-19 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * README, README.ja: Removed obsolete description.

2005-01-18 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * helper/im-switcher-gtk.c
      - (create_switcher): Adjust spacing as familiar as uim-pref-gtk

2005-01-18 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit removes --enable-compat-custom option of configure
      script and all related codes. This has also resolved bug #2306
    
    * configure.ac
      - Remove --enable-compat-custom option and related definitions
    * uim/Makefile.am
      - Remove "if COMPAT_CUSTOM" section
    * uim/uim.c
      - Remove #ifndef UIM_COMPAT_CUSTOM enclosure
    
    * uim/uim-compat-custom.h
    * uim/uim-compat-custom.c
      - Remove

2005-01-18 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/plugin.c
      - (plugin_unload):
        * Add error checks
        * Remove Scheme-side construct
    * scm/plugin.scm
      - (plugin-list-delete): New procedure

2005-01-18 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/test-custom.scm
      - (test define-custom (choice)): Add test for overwriting definition
      - (test custom-value-as-literal, test custom-definition-as-literal):
        Add test for #f and () as value
    
    * test/test-im.scm
      - (test normalize-im-list, test register-im (module-name)): New test
      - (test register-im):
        * Add test for module-name
        * Add test for overwriting register
        * Check result value of register-im (initial register or not)
      - (testcase im im-custom): New testcase
      - (test custom-im-list-as-choice-rec): New test
    
    * test/test-plugin.scm
      - New file
      - (testcase module): New testcase
      - (test require-module): New test
    
    * test/test-lazy-load.scm
      - New file
      - (testcase stub-im): New testcase
      - (test stub-im-generate-init-handler, test register-stub-im, test
        stub-im-generate-stub-im-list, test
        stub-im-generate-all-stub-im-list): New test
    
    * scm/im-custom.scm
    * scm/plugin.scm
    * scm/custom.scm
    * scm/im.scm
      - Remove TODO mark

2005-01-18 Etsushi Kato <ek.kato@gmail.com>

    * uim/skk-dic.c (skk_lib_remove_annotation) : Revert r325 change
      to use uim_scm_c_str() because this function may modify the
      string.

2005-01-18 kzk <mover@hct.zaq.ne.jp>

    * qt/uim-kdehelper/src/pref/uim-pref-qt.cpp
      - fix the order of ComboBox
      - fix layouting

2005-01-18 kzk <mover@hct.zaq.ne.jp>

    * qt/uim-kdehelper/src/pref/uim-pref-qt.cpp
      - handle defaultly selected symbol
      - fix the bug of combobox-insertion index

2005-01-18 kzk <mover@hct.zaq.ne.jp>

    * qt/uim-kdehelper/src/pref/customwidgets.h
      - fix wrong Q_ASSERT condition

2005-01-18 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * uim/skk-dic.c:
     -(skk_commit_candidate), (sanitize_word), (skk_learn_word),
      (skk_learn_word), (skk_lib_save_personal_dictionary),
      (skk_lib_get_annotation), (skk_lib_remove_annotation): Replaced
       uim_scm_c_str with uim_scm_refer_c_str.

2005-01-18 Etsushi Kato <ek.kato@gmail.com>

    * xim/ximserver.cpp (XimServer::customContext) : Re-enable IM
      updating.
    
    * scm/skk.scm (skk-proc-state-direct-no-preedit) : Add modifier
      key handling in no-preedit state as in skk-proc-state-direct.
      This avoids unwanted skk-flush enbuged in r246.

2005-01-18 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * configure.ac, Makefile.am: Removed sumika.
    
    * sumika/ Removed.

2005-01-18 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * uim/m17nlib.c:
     -(uim_plugin_instance_quit):Don't free im_array and ic_array if not
       initialized.

2005-01-18 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit adds on-the-fly custom variable update of live
      uim-enabled processes via uim-helper-server
    
    * uim/slib.c
      - (procedurep): New function
      - (init_subrs): Add initialization of procedurep
    * scm/custom-rt.scm
      - (custom-key-exist?, custom-set-value!): New procedure
      - (define-custom): Add definition of 'key' custom variable in
         addition to key predicate
      - (custom-prop-update-custom-handler): Implement. warning: no
         validation performed
    * test/test-slib.scm
      - (testcase procedures): New testcase
      - (test precedure?): New test
    * test/test-custom-rt.scm
      - New file
      - (testcase custom define-custom, testcase custom methods): New
        testcase
      - (test define-custom (choice), test define-custom (choice) #2, test
         define-custom (key), test define-custom (key) #2, test
         custom-key-exist?, test custom-value, test custom-set-value!):
         New test

2005-01-18 Etsushi Kato <ek.kato@gmail.com>

    *  xim/ximserver.cpp (XimServer::customContext) : Don't update
       ximserver's input method for now to avoid confusion.

2005-01-18 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/custom-rt.scm
      - (custom-exist?): Add check for symbol-bound?
      - (custom-value): Cosmetic change
      - (define-custom): Replace symbol-bound? with custom-exist?
      - (custom-prop-update-custom-handler): Add a comment

2005-01-18 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/custom-rt.scm
      - (require-custom): Accept defined-order groups instead of
        reversed-order one. This change has been fixed broken per-user
        config loading on custom.scm. Thanks Etsushi Kato for reporting.
      - (custom-list-primary-groups): Return as defined order

2005-01-18 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-custom.c
      - (uim_custom_key_get): Fix broken list acquisition. Thank you
        Takuro Ashie for reporting
      - (uim_custom_set): Add explanation about null list to the document

2005-01-17 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/plugin.c
      - (uim_quit_plugin):
        * Fix broken plugin-alist iteration in null list case
        * Simplify

2005-01-17 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-custom.c
      - (extract_key_literal): Revert the C reimplementation of string
        quotation in r311 to Scheme (the bugfix is applied. thanks). We
        should done most job by Scheme, at least in uim-custom.c to keep
        easy rewritability since various part of uim-custom
        implementations may be altered

2005-01-17 Takuro Ashie <ashie@homa.ne.jp>

    * uim/uim-custom.c
      - (extract_key_literal): Quote UCustomKey_Regular type value.

2005-01-17 Takuro Ashie <ashie@homa.ne.jp>

    * helper/pref-gtk.c: Added the feature to apply key preference.
    * po/ja.po: Fixed mistranslation.

2005-01-17 Etsushi Kato <ek.kato@gmail.com>

    * uim/uim-ipc.c (uim_ipc_open_command_with_option) : Don't modify
      option string in this function as the variable is declared
      const.
    
    * scm/skk.scm (skk-proc-state-okuri) : Fix to reset okuri-head
      character when it is changed in proc-state-okuri.
    (skk-reset-handler) : Cosmetic change.

2005-01-17 Etsushi Kato <ek.kato@gmail.com>

    * xim/ximserver.cpp (XimServer::customContext) : Fix stupid bug.

2005-01-17 Etsushi Kato <ek.kato@gmail.com>

    * uim/uim-ipc.c (uim_ipc_open_command_with_option) : Fix to
      terminate argument for execvp with NULL pointer even when
      the string contains more than 8 options.

2005-01-16 kzk <mover@hct.zaq.ne.jp>

    * qt/quiminputcontext/src/quiminputcontext.cpp
      - (setFocus) : Fix occasional mismatch of helper
      label with focus in.  uim_helper_client_focus_in() is definitely
      needed to be called before uim_prop_list_update() and
      uim_prop_label_update.  This sequence is required to make sure the
      exsitence of only one focused context in whole desktop.
      This problem is originally reported by ekato, and I only applied
      his patch. Thanks!
    * qt/quiminputcontextplugin-qt4/quiminputcontext.cpp
      - Ditto

2005-01-16 Etsushi Kato <ek.kato@gmail.com>

    * This commit is a workaround for r304.
    
    * uim/uim.h : Add new prototype uim_ipc_open_command_with_option.
    * uim/uim-ipc.c (uim_ipc_open_command_with_option) : New function.
      Most of the code is from old uim_ipc_open_command(), but use execvp
      instead of execlp.  const char *option is used as a command line
      argument.
    (uim_ipc_open_command) : Call uim_ipc_open_command_with_option()
      with option NULL.
    * uim/prime.c (prime_ud_command) : Removed.
    (prime_init_ud) : Don't free path here.
    (prime_ud_get_path) : Use "/tmp/uim-prime-user" as the socket path.
    (prime_get_ud_command) : Removed.
    (prime_lib_init) : Use proper option for
      uim_ipc_open_command_with_option().
    * uim/strsep.c : New file.  Add strsep() for system without it.
    * uim/Makefile.am (libuim_la_SOURCES) : Remove prime.c.  Add
      strsep.c if it is needed.
    * xim/util.cpp (strsep) : Removed.
    * configure.ac : Add AM_CONDITIONAL for NEED_STRSEP_C.

2005-01-15 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * uim/prime.c:
     -(prime_init_ud):New function to connect to prime server.
     -(prime_get_ud_path): New function to get the path of unix domain socket
     -(prime_get_ud_command):New function to get prime command string
       with -u option.
     -(prime_read_msg_from_ud);New function to read message from file descriptor
     -(prime_write_msg_to_ud): New function to write message to file descriptor
     -(prime_lib_init): Changed argument. Now it's take an argument. If the
       argument is true, uim-prime uses unix domain socket to communicate
       with PRIME.
    
    * scm/prime.scm:
     -(prime-util-string-split): Allow non-string argument.
     -(prime-engine-send-command):Don't append "\n" here.
     -(prime-init-handler): Pass an argument for prime-lib-init.
    
    * scm/prime-custom.scm:
     -(prime-use-unixdomain?): New custom item for prime.

2005-01-15 Etsushi Kato <ek.kato@gmail.com>

    * gtk/gtk-im-uim.c (im_uim_send_im_list) : Cosmetic change.
    (im_uim_parse_helper_str_im_change) : Properly update property
      list of focused context after im switch.

2005-01-15 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit implements user-specified "enabled IM list" and "lazy IM
      loading" features. The lazy loading significantly reduces startup
      time and memory consumption.
    
      Per-user configuration works fine, but install-time stub-im
      generation is not yet supported. So you have to run uim-pref & save
      configuration. "enabled-im-list" in
      ~/.uim.d/customs/custom-global.scm controls which IMs should be
      appeared to IM selection menus. This item may become editable by
      uim-pref soon
    
    * scm/lazy-load.scm
      - New file to support lazy IM loading
      - (stub-im-generate-init-handler, register-stub-im,
        stub-im-generate-stub-im-list, stub-im-generate-all-stub-im-list):
        New procedure
    * scm/plugin.scm
      - (required-modules-alist): Remove
      - (currently-loading-module-name): New variable
      - (require-module): Simplify
    * scm/im.scm
      - (record im): Add new member 'module-name'. register-im API is not
        affected
      - (normalize-im-list): New procedure
      - (register-im): Support overwrite registration to allow stub-im
        actualization
    * test/test-im.scm
      - (testcase im im-management, testcase im im-switching, testcase im
        context management): Add explicit full module loading to setup to
        follow user-enabled IM loading feature
      - (test register-im): Follow the addition of 'module-name' of record
        im
    * scm/custom.scm
      - (define-custom): Support overwrite registration
      - (custom-value-as-literal): Fix invalid literalization for () as
        list
    * scm/loader.scm
      - Perform full module loading only when lazy-load.scm is not loaded
    * scm/im-custom.scm
      - (custom-im-list-as-choice-rec): Split off responsibility of
        reversing
      - (custom custom-preserved-default-im-name): Add reverse
      - (custom-default-enabled-im-list): Rename to custom-installed-im-list
      - (custom-installed-im-list): New variable
      - (enabled-im-list): Fix bootstrap-time (no per-user config file)
        default value acquisition
      - (custom-hook-literalize-enabled-im-list): New hook procedure to
        generate stub-im definitions
    * scm/Makefile.am
      - (SCM_FILES): Add lazy-load.scm

2005-01-15 Masahito Omote <omote@utyuuzin.net>

    * doc/PLUGIN: Commit current draft.

2005-01-15 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/util.scm
      - (try-load, try-require): New procedure for error-proof file loading
    * scm/custom-rt.scm
      - (custom-load-group-conf): Replace 'load' with 'try-load' to avoid
        the crash caused by "file not found". Thanks No.52 of [Anthy/uim
        thread 5] for reporting

2005-01-15 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/latin.scm
      - Add lacking (require "generic.scm"). Thanks Masaki Yatsu for
        reporting

2005-01-15 Etsushi Kato <ek.kato@gmail.com>

    * helper/input-pad-ja.c (padbutton_clicked) : Remove redundant
      "\n".

2005-01-15 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/m17nlib.scm
      - Replace 'require' for generic-key-custom.scm with
        'require-custom'. All other custom definition files must be
        loaded by require-custom, too. Developers, please keep in
        mind this new rule. I'll describe it into doc/CUSTOM

2005-01-15 kzk <mover@hct.zaq.ne.jp>

    * scm/Makefile.am
      - remove custom-vars.scm

2005-01-14 kzk <mover@hct.zaq.ne.jp>

    * qt/quiminputcontextplugin/src/quiminputcontext.cpp
    * qt/quiminputcontextplugin-qt4/quiminputcontext.cpp
      - add check if displayLimit is 0
      - remove candidate selection by number key support
        because this function is implemented in uim scm
        level.

2005-01-14 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * scm/m17nlib.scm: Fixed wrong previous commit. (Uncommented duplicated
      IM list.)

2005-01-14 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * scm/m17nlib.scm: Require generic-key-custom.scm instead of generic-key.scm

2005-01-14 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit divides custom-vars.scm into appropriate files with
      per-IM basis
    
    * uim/uim.c
      - (uim_init_scm):
        * Load direct.scm by require-module instead of
          uim_scm_require_file()
        * Remove (require-custom "custom-vars.scm")
    
    * scm/custom-vars.scm
      - Remove obsolete file
    * scm/Makefile.am
      - (SCM_FILES):
        * Remove custom-vars.scm and generic-key.scm
        * Add skk-custom.scm, generic-key-custom.scm, prime-custom.scm,
          generic-custom.scm, anthy-custom.scm, im-custom.scm,
          spellcheck-custom.scm, and canna-custom.scm
        * Reordered as appropriately
    
    * scm/generic-key.scm
      - Remove obsolete file
    * scm/generic-key-custom.scm
      - Moved generic-key custom variables from custom-vars.scm
    
    * scm/im.scm
      - Load im-custom.scm by require-custom
    * scm/im-custom.scm
      - Moved 'global' custom variables from custom-vars.scm
      - (custom custom-preserved-default-im-name): Support null im-list at
        startup of libuim
    
    * scm/generic.scm
      - Load generic-custom.scm by require-custom
      - (generic-use-candidate-window?, generic-candidate-op-count,
        generic-nr-candidate-max,
        generic-commit-candidate-by-numeral-key?): Remove to replace with
        corresponding custom variables
    * scm/generic-custom.scm
      - Moved generic custom variables from custom-vars.scm
    
    * scm/anthy.scm
      - Load anthy-custom.scm by require-custom
      - (anthy-use-candidate-window?, anthy-candidate-op-count,
        anthy-nr-candidate-max, anthy-show-segment-separator?,
        anthy-select-candidate-by-numeral-key?, anthy-segment-separator):
        Remove to replace with corresponding custom variables
      - Replace label-name and short-desc of register-im with the
        equivalent variables defined in anthy-custom.scm
    * scm/anthy-custom.scm
      - Moved anthy custom variables from custom-vars.scm
    
    * scm/canna.scm
      - Load canna-custom.scm by require-custom
      - (canna-use-candidate-window?, canna-candidate-op-count,
        canna-nr-candidate-max, canna-show-segment-separator?,
        canna-segment-separator): Remove to replace with corresponding
        custom variables
      - (canna-server-name): Move to canna-custom.scm
      - Replace label-name and short-desc of register-im with the
        equivalent variables defined in canna-custom.scm
    * scm/canna-custom.scm
      - Moved canna custom variables from custom-vars.scm
      - (canna-server-name): Raw variable moved from canna.scm
    
    * scm/skk.scm
      - Load skk-custom.scm by require-custom
      - (skk-dic-file-name, skk-personal-dic-filename,
        skk-uim-personal-dic-filename, skk-use-candidate-window?,
        skk-candidate-op-count, skk-nr-candidate-max,
        skk-use-recursive-learning?, skk-egg-like-newline?,
        skk-commit-newline-explicitly?, skk-style, skk-use-with-vi?,
        skk-use-numeric-conversion?, skk-commit-candidate-by-label-key?):
        Remove to replace with corresponding custom variables
      - Replace label-name and short-desc of register-im with the
        equivalent variables defined in skk-custom.scm
    * scm/skk-custom.scm
      - Moved skk custom variables from custom-vars.scm
      - (custom 'skk-commit-newline-explicitly?): Add a comment
    
    * scm/prime.scm
      - Load prime-custom.scm by require-custom
      - (prime-nr-candidate-max, prime-always-show-window?,
        prime-auto-register-mode?, prime-pseudo-mode-cursor?,
        prime-char-annotation?, prime-custom-display-usage?,
        prime-mask-pending-preedit?): Remove to replace with corresponding
        custom variables
      - (prime-dont-use-numeral-key-to-select-cand): Add a comment
      - Replace label-name and short-desc of register-im with the
        equivalent variables defined in prime-custom.scm
    * scm/prime-custom.scm
      - Moved prime custom variables from custom-vars.scm
      - (custom 'prime-custom-display-usage?): New custom variable
    
    * scm/spellcheck.scm
      - Load spellcheck-custom.scm by require-custom
      - (spell-use-candidate-window?, spell-candidate-op-count,
        spell-preedit-immididate-commit?, spell-always-show-window?,
        spell-on-key?): Remove to replace with corresponding custom
        variables
      - Replace label-name and short-desc of register-im with the
        equivalent variables defined in spellcheck-custom.scm
    * scm/spellcheck-custom.scm
      - Moved spellcheck custom variables from custom-vars.scm
      - Uncomment all disabled custom variables
      - (spell-on-key): New custom variable
    
    * test/test-im.scm
      - (testcase im im-management, test register-im): Follow the addition
        of im-label-name in r282 of new repository

2005-01-14 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * uim.desktop: New file for desktop entry.

2005-01-14 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/skk-custom.scm
    * scm/generic-key-custom.scm
    * scm/prime-custom.scm
    * scm/generic-custom.scm
    * scm/anthy-custom.scm
    * scm/im-custom.scm
    * scm/spellcheck-custom.scm
    * scm/canna-custom.scm
      - New file copied from custom-vars.scm to prepare appropriate file
        separation

2005-01-14 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/plugin.scm
      - (require-module): New procedure. This abstraction of loading is
        required to implement the lazy loading feature
      - Remove unused debug codes
    * scm/loader.scm
      - Update copyright
      - Remove discrete require and load-plugins
      - (installed-im-module-list): New variable
      - Load all IMs listed in installed-im-module-list by
        require-module. This code will be removed once the enabled-im-list
        feature is implemented

2005-01-14 Etsushi Kato <ek.kato@gmail.com>

    * uim/slib.c (Quotient) : Remove fail safe code for divided by
      zero.  Show error message instead in this case.
    (Remainder) : Ditto.

2005-01-14 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim.c
      - (uim_init_scm): Load plugin.scm and custom-rt.scm before im.scm
    
    * scm/custom-vars.scm
      - (direct-im-canonical-name, anthy-im-canonical-name,
         canna-im-canonical-name, skk-im-canonical-name,
         prime-im-canonical-name, pyunihan-im-canonical-name,
         pinyin-big5-im-canonical-name, py-im-canonical-name,
         ipa-im-canonical-name, romaja-im-canonical-name,
         hangul3-im-canonical-name, hangul2-im-canonical-name,
         viqr-im-canonical-name, tutcode-im-canonical-name,
         tcode-im-canonical-name, spellcheck-im-canonical-name): Remove
      - (custom-im-list-as-choice-rec): New procedure
      - (custom custom-preserved-default-im-name,
         custom-default-enabled-im-list): Simplify
      - (custom-group key): Remove
      - (generic-on-key, generic-off-key, generic-begin-conv-key,
         generic-commit-key, generic-cancel-key,
         generic-next-candidate-key, generic-prev-candidate-key,
         generic-next-page-key, generic-prev-page-key,
         generic-beginning-of-preedit-key, generic-end-of-preedit-key,
         generic-kill-key, generic-kill-backward-key,
         generic-backspace-key, generic-delete-key, generic-go-left-key,
         generic-go-right-key, generic-return-key): Remove useless
         subgroup 'key'
      - (anthy-im-label-name, anthy-im-short-desc, canna-im-label-name,
         canna-im-short-desc, skk-im-label-name, skk-im-short-desc,
         prime-im-label-name, prime-im-short-desc, spell-im-label-name,
         spell-im-short-desc): New variable
      - (custom-group anthy, custom-group canna, custom-group skk,
         custom-group prime, custom-group spellcheck): Simplify with
         *-im-label-name and *-im-short-desc
      - (custom spellcheck-use-candidate-window?): Rename to
         spell-use-candidate-window?
      - (custom spell-use-candidate-window?): Renamed from
         spellcheck-use-candidate-window?
      - (custom spellcheck-candidate-op-count): Rename to
         spell-candidate-op-count
      - (custom spell-candidate-op-count): Renamed from
         spellcheck-candidate-op-count
      - (custom spellcheck-preedit-immediate-commit?): Rename to
         spell-preedit-immediate-commit?
      - (custom spell-preedit-immediate-commit?): Renamed from
         spellcheck-preedit-immediate-commit?
      - (custom spellcheck-always-show-window?): Rename to
         spell-always-show-window?
      - (custom spell-always-show-window?): Renamed from
         spellcheck-always-show-window?

2005-01-14 Etsushi Kato <ek.kato@gmail.com>

    * scm/skk.scm (skk-commit-by-label-key) : Cosmetic change.

2005-01-14 Etsushi Kato <ek.kato@gmail.com>

    * scm/skk.scm (skk-commit-by-label-key) : One more fix for display
      limit with 0.
    * scm/skk-editor.scm : Update copyright.

2005-01-14 Etsushi Kato <ek.kato@gmail.com>

    * scm/generic.scm : Add check for display limit with 0.
    * scm/anthy.scm : Ditto.
    * scm/skk.scm : Ditto.
    * gtk/gtk-im-uim.c : Ditto.
    * xim/ximserver.cpp : Ditto.
    * uim/slib.c : Add fail safe behavior for Remainder and Quotient.

2005-01-14 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit adds lightweight version of uim-custom facility named
      custom-rt.scm, and Fix a bug related to custom type 'key'
    
    * scm/custom.scm
      - (custom-set-value!): Fix broken define-key invocation. The test
        for the case is added to test-custom.scm and validated
      - (record custom-choice-rec): Move to custom-rt.scm
      - (custom-add-hook, define-custom): Mark as API
      - (custom-definition-as-literal): Simplify
      - (custom-reload-customs): New procedure to support
        custom-rt.scm. The test for this procedure is not yet available
      - Add custom-reload-customs at end of file
    * scm/custom-rt.scm
      - New file
      - All codes are not yet validated by testing framework
      - (record custom-choice-rec): Moved from custom.scm
      - (custom-required-custom-files, custom-rt-primary-groups): New
        variables
      - (custom-load-group-conf, require-custom,
        custom-modify-key-predicate-names, custom-rt-add-primary-groups):
        New procedure
      - (custom-list-primary-groups, custom-add-hook, define-custom-group,
        custom-exist?, custom-value, define-custom,
        custom-prop-update-custom-handler): New procedure. These
        procedures are lightweight or dummy version of same name ones in
        custom.scm. They are overridden by full-featured version once the
        custom.scm has been loaded
    * scm/Makefile.am
      - (SCM_FILES): Add custom-rt.scm
    * test/test-custom.scm
      - (testcase custom custom-group, testcase custom custom-group
        methods): Modify loading process of custom.scm to conform to
        introduction of custom-rt.scm
      - (test define-custom (key)): Add a test for key reference
    * uim/uim.c
      - (uim_init_scm):
        * Replace custom.scm with custom-rt.scm
        * Load plugin.scm before custom-rt.scm
        * Replace uim_scm_require_file("custom-vars.scm") and
          uim_custom_load() with require-custom

2005-01-14 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/im.scm
      - (record im): Add new member 'label-name'. The name is under
        discussion and not final
      - (register-im): Add label-name arg
    * scm/m17nlib.scm
      - (m17nlib-register):
        * Add label-name arg to register-im
        * Replace 'intern' with string->symbol to conform to R5RS
    * scm/generic.scm
      - (generic-register-im): Add label-name arg
    * scm/hangul.scm
      - (hangul-register-im):
        * Update copyright
        * Add label-name arg
      - Add label-name arg to hangul-register-im invocations and apply
        cosmetic change
    * scm/tcode.scm
    * scm/tutcode.scm
    * scm/ipa.scm
    * scm/prime.scm
    * scm/spellcheck.scm
    * scm/latin.scm
    * scm/direct.scm
    * scm/canna.scm
    * scm/viqr.scm
    * scm/anthy.scm
    * scm/skk.scm
    * scm/pyload.scm
      - Update copyright
      - Add label-name arg to register-im invocations

2005-01-14 Etsushi Kato <ek.kato@gmail.com>

    * scm/skk.scm : Explicitly denote empty list as '().  Replace some
      empty list with #f appropriately.  Check empty list with null?
      explicitly.
    (skk-get-nth-candidate) : Simplify.
    (skk-proc-state-okuri) : Fix backspace key behavior.
    * scm/skk-editor.scm : Explicitly denote empty list as '().

2005-01-14 Takuro Ashie <ashie@homa.ne.jp>

    * helper/pref-gtk.c: Added key preference UI, but it doesn't work yet.

2005-01-14 Etsushi Kato <ek.kato@gmail.com>

    * scm/skk.scm (skk-proc-state-direct) : Simplify the changes in
      r274.

2005-01-14 kzk <mover@hct.zaq.ne.jp>

    * handle encoding of uim-pref-qt
    
    * qt/uim-kdehelper/src/pref/uim-pref-qt.h
      - (addCustomTypeOrderedList): new function
    
    * qt/uim-kdehelper/src/pref/uim-pref-qt.cpp
      - (main): call bind_textdomain_codeset for ensuring
        the encoding of custom variable is UTF-8. But now
        PACKAGE is hardcoded as "uim", so once this is
        merged into uim, need to include "uim/config.h"
        and "uim/gettext.h"
      - (addCustomTypeOrderedList): new function
      - (_FU8): new macro
      - replace qFatal with qWarning
      - update Comment

2005-01-13 kzk <mover@hct.zaq.ne.jp>

    * remove KDE dependency of chardict-qt, switcher-qt,
      and toolbar-qt from source code for merging
      uim-kdehelper to uim package.
    
    * qt/uim-kdehelper/src/chardict/bushuviewwidget.cpp
      - remove #include <klocale.h>
    * qt/uim-kdehelper/src/chardict/uim-chardict-qt.cpp
      - remove #include <klocale.h>
    * qt/uim-kdehelper/src/switcher/im-switcher-qt.cpp
      - remove #include <klocale.h>
    * qt/uim-kdehelper/src/common/quimhelpertoolbar.cpp
      - remove #include <klocale.h>
    
    * qt/uim-kdehelper/src/Makefile.am
      - add pref in SUBDIRS

2005-01-13 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit adds "a group is updated" callback and "group list is
      updated" callback feature to uim-custom API. The features are
      validated by test-custom.scm in Scheme level. Calling via
      uim-custom.h is not yet tested
    
    * uim/uim-custom.h
      - (uim_custom_group_cb_add, uim_custom_group_cb_remove,
        uim_custom_global_cb_add, uim_custom_global_cb_remove): New
        function
    * uim/uim-custom.c
      - (uim_custom_group_cb_add, uim_custom_group_cb_remove,
        uim_custom_global_cb_add, uim_custom_global_cb_remove): New
        function
      - (uim_custom_global_cb_update_cb_t): New type
      - (uim_custom_global_cb_update_cb_gate, uim_bool custom_cb_add,
        uim_bool custom_cb_remove): New static function
      - (uim_custom_init): Add initialization of custom-global-update-cb-gate
      - (uim_custom_cb_add): Simplify with custom_cb_add()
      - (uim_custom_cb_remove): Simplify with custom_cb_remove()
    * scm/custom.scm
      - (custom-group-update-hooks, custom-group-list-update-hooks): New
        variable
      - (define-custom-group): Add custom-group-list-update-hooks handling
      - (define-custom): Add custom-group-update-hooks handling
      - (custom-register-update-cb): Remove
      - (custom-register-cb): New procedure
    * test/test-custom.scm
      - (testcase custom hooks): Modify setup proc
      - (test custom-register-update-cb, test custom-register-update-cb (2
        callbaks)): Remove
      - (test custom-register-cb (custom update hook), test
        custom-register-cb (custom update hook, 2 callbaks), test
        custom-register-cb (custom-group update hook), test
        custom-register-cb (custom-group update hook, 2 callbaks), test
        custom-register-cb (group-list update hook)): New test

2005-01-13 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/custom-vars.scm
      - (custom candidate-window-position):
        * Restore the custom variable removed by misunderstanding
        * Change custom type from string to choice
    * uim/uim-compat-scm.c
      - (uim_symbol_value_str): Allow value as symbol
    * scm/util.scm
      - (uim-symbol-value-str): New procedure for uim_symbol_value_str()
    
    * po/uim.pot
    * po/ja.po
      - Update

2005-01-13 Etsushi Kato <ek.kato@gmail.com>

    * scm/skk.scm (skk-proc-state-direct) : Generalization of
      skk-plain-space-key? case.

2005-01-13 Etsushi Kato <ek.kato@gmail.com>

    * scm/skk.scm (skk-get-nth-candidate) : Replace #f with () on
      numlst if it is empty.
    (skk-prepare-commit-string) : Ditto.
    (skk-check-candidate-window-begin) : Ditto.

2005-01-12 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * scm/plugin.scm: Fixed a typo.

2005-01-12 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * uim/setenv.c: Fixed the warning:ISO C forbids an empty source file
       This warning was appeared on the system which already have setenv(3)

2005-01-12 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/custom.scm
      - All changes are validated by test-custom.scm
      -(custom-expand-key-references, custom-list-as-literal,
        custom-definition-as-literal): Simplify
    * test/test-custom.scm
      - (test custom-definition-as-literal): Follow the specification
        change
    
    * scm/anthy.scm
      - (anthy-converting-state-preedit, anthy-get-commit-string):
        Simplify

2005-01-12 Etsushi Kato <ek.kato@gmail.com>

    * scm/generic.scm (generic-commit-by-numkey) : Fix typo.
    * uim/slib.c (Quotient) : Add comment.
    (Remainder) : New function for r5rs.  Exported as remainder for
      scheme.
    * scm/util.scm (quotient) : New for r5rs.  This is an alias of '/'
      in siod.
    * scm/skk.scm : Update copyright.
    (skk-commit-candidate-by-label-key?) : New custom
      variable.  Default is #f.
    (skk-context-rec-spec) : Add new member nr-candidates in order to
      reduce complexity of calling skk-lib-get-nr-candidates many
      times.
    (skk-begin-conversion) : Reset skk-context-nr-candidates here.
    (skk-check-candidate-window-begin) : Call
      skk-lib-get-nr-candidates only at here and store it to
      skk-context-nr-candidates.
    (skk-commit-by-label-key) : New function.  Commit candidate
      by key denoted by its heading label.  Only numeric key handling
      is enabled yet.
    (skk-change-candidate-index) : Simplify using
      skk-context-nr-candidates.
    (skk-heading-label-char?) : New function.  Currently only handles
      numeric characters.
    (skk-proc-state-converting) : Add candidate committing facility
      using label keys.
    (skk-get-candidate-handler) : Change to use remainder as label.
    * scm/custom-vars.scm (skk-commit-candidate-by-label-key?) : New
      custom variable for uim-skk.

2005-01-12 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit adds string-join and other new utility procedures to
      util.scm. All changes are validated by test-util.scm
    
    * scm/util.scm
      - Update copyright
      - (join, string-join, string-append-map, append-map): New procedure
      - (iota): Support optional 'start' argument
      - (alist-replace): Remove the comment "not yet tested"
    * test/test-util.scm
      - (test join, test string-join, test string-append-map, test
        append-map): New test
      - (test iota): Add tests for 'start' argument

2005-01-12 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/custom.scm
      - (custom-definition-as-literal): Fix bogus define-key literal
        generation. Thanks No.28 of [Anthy/uim thread 5] for reporting

2005-01-12 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit suppresses pedantic warnings. No logical changes have
      been applied actually
    
    * uim/uim-scm.h
      - (uim_func_ptr): New type
      - (uim_scm_c_func_ptr, uim_scm_make_func_ptr): New function
    * uim/uim-scm.c
      - (uim_scm_c_func_ptr, uim_scm_make_func_ptr): New function
      - Modify the word expression of header comment to suppress warning
    * uim/siod.h
      - Add a coumment about static declarations in this file
      - (struct obj): Add new member c_func_pointer
      - (tc_c_func_pointer, FPOINTERP, NFPOINTERP): New macro
      - (C_FUNC): New type
      - (get_c_func_pointer, funcptrcons): New static function
    * uim/slib.c
      - (get_c_func_pointer, funcptrcons, func_pointer_prin1): New static
        function
      - (init_storage): Add initialization of print hook for tc_c_func_pointer
    
    * uim/uim-compat-scm.c
      - (uim_scm_c_list_free): Formal rewriting to suppress warning
    
    * uim/uim-custom.c
      - (extract_choice_list): Formal rewriting to suppress warning
      - (uim_custom_cb_update_cb_gate): Replace uim_scm_c_ptr() with
        uim_scm_c_func_ptr() to suppress warning
      - (uim_custom_cb_add): Replace uim_scm_make_ptr() with
        uim_scm_make_func_ptr() to suppress warning
    
    * uim/plugin.c
      - (plugin_load):
        * Cosmetic change
        * Replace uim_scm_make_ptr() with uim_scm_make_func_ptr() to
          suppress warning
      - (plugin_unload): Replace uim_scm_c_ptr() with uim_scm_c_func_ptr()
        to suppress warning
    
    * uim/canna.c
      - (UIM_CANNA_DEBUG): New macro. Commented out by default
      - (context_array_len): Comment out the unused variable to suppress
        warning
      - (get_canna_context): Enclose printf debug messages into #ifdef
        UIM_CANNA_DEBUG
      - (_update_segment, get_nth_candidate):
        * Ditto
        * Cast buf arg for RkGetKanji() to suppress warning
      - (commit_segment): Comment out unused variables to suppress warnings
      - (uim_plugin_instance_quit): Comment out unused dynamic loading
        related check to suppress warning

2005-01-12 Etsushi Kato <ek.kato@gmail.com>

    scm/skk.scm (skk-flush) : Reset candidate window explicitly.

2005-01-12 Etsushi Kato <ek.kato@gmail.com>

    Update on setup tools.  Fix some English.

2005-01-12 Etsushi Kato <ek.kato@gmail.com>

    * xim/canddisp.cpp : Just update copyright.
    * xim/canddisp.h : Ditto.
    * xim/connection.cpp : Ditto.
    * xim/connection.h : Ditto.
    * xim/compose.cpp : Ditto.
    * xim/compose.h : Ditto.
    * xim/convdisp.cpp : Ditto.
    * xim/convdisp.h : Ditto.
    * xim/helper.cpp : Ditto.
    * xim/helper.h : Ditto.
    * xim/locale.cpp : Ditto.
    * xim/main.cpp : Ditto.
    * xim/util.cpp : Ditto.
    * xim/util.h : Ditto.
    * xim/xdispatch.h : Ditto.
    * xim/xim.h : Ditto.
    * xim/ximic.cpp : Ditto.
    * xim/ximim.cpp : Ditto.
    * xim/ximpacket.cpp : Ditto.
    * xim/ximpn.h : Ditto.
    * xim/ximtrans.cpp : Ditto.
    * xim/ximserver.h : Ditto.
    (class XimServer) : Add new private member mUsePreservedDefaultIM.
    * xim/ximserver.cpp : Update copyright.
    (XimServer::customContext) : Update ximserver's global im with
      customized one.

2005-01-11 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-custom.c
      - (uim_custom_key_get): Fix broken Scheme interfaces
      - (uim_custom_cb_remove): Fix wrong variable name
    * uim/uim-compat-scm.c
      - (uim_scm_c_str_failsafe): Add check for #f
    
    * scm/custom-vars.scm
      - (custom switch-im-key): Uncomment
      - (custom generic-on-key, custom generic-off-key, custom
        generic-begin-conv-key, custom generic-commit-key, custom
        generic-cancel-key, custom generic-next-candidate-key, custom
        generic-prev-candidate-key, custom generic-next-page-key, custom
        generic-prev-page-key, custom generic-beginning-of-preedit-key,
        custom generic-end-of-preedit-key, custom generic-kill-key, custom
        generic-kill-backward-key, custom generic-backspace-key, custom
        generic-delete-key, custom generic-go-left-key, custom
        generic-go-right-key, custom generic-return-key): Gettextize
      - (custom skk-dic-file-name, custom skk-personal-dic-filename,
        custom skk-uim-personal-dic-filename): Move to bottom of the group
    * po/uim.pot
    * po/ja.po
      - Update

2005-01-11 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/custom-vars.scm
      - (viqr-im-canonical-name, custom 'prime-mask-pending-preedit?):
        Modify message appropriately
      - (custom uim-color, custom skk-style): Gettextize
    * scm/canna.scm
    * scm/viqr.scm
      - Modify short-desc of IM appropriately
    
    * po/uim.pot
    * po/ja.po
      - Update

2005-01-11 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * scm/anthy.scm:
     -(anthy-flush): Candidate window should be deactivated before
       calling (anthy-context-set-candidate-window! ac #f)

2005-01-11 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit provides some custom variables for testing new custom
      types 'key' and 'ordered-list'
    
    * scm/custom.scm
      - (custom-key-advanced-editor?): New procedure
      - (custom-range): Fix ordered-list handling
    * test/test-custom.scm
      - (test custom-range): Follow ordered-list specification fix
    
    * scm/custom-vars.scm
      - (pyunihan-im-canonical-name, pinyin-big5-im-canonical-name,
        py-im-canonical-name): Update label string
      - (custom custom-preserved-default-im-name): Replace manual list
        construction with custom-choice-rec-new as proper operation
      - (custom-default-enabled-im-list): New variable
      - (custom enabled-im-list): New custom
      - (custom-group key, custom-group global-keys): New custom group
      - (custom generic-on-key, custom generic-off-key, custom
        generic-begin-conv-key, custom generic-commit-key, custom
        generic-cancel-key, custom generic-next-candidate-key, custom
        generic-prev-candidate-key, custom generic-next-page-key, custom
        generic-prev-page-key, custom generic-beginning-of-preedit-key,
        custom generic-end-of-preedit-key, custom generic-kill-key, custom
        generic-kill-backward-key, custom generic-backspace-key, custom
        generic-delete-key, custom generic-go-left-key, custom
        generic-go-right-key, custom generic-return-key): New custom
    * helper/pref-gtk.c
      - (add_custom_type_orderedlist): New function as placeholder. Rename
        and implement this function appropriately
      - (add_custom): Add ordered-list handling

2005-01-11 Etsushi Kato <ek.kato@gmail.com>

    * xim/ximserver.cpp (InputContext::focusIn) : Same change as r256
      for uim-xim.
    * xim/compose.cpp (XimIM::ParseComposeStringFile) : Cosmetic change.

2005-01-11 Etsushi Kato <ek.kato@gmail.com>

    * gtk/gtk-im-uim.c (focus_in) : Fix occasional mismatch of helper
      label with focus in.  uim_helper_client_focus_in() is definitely
      needed to be called before uim_prop_list_update() and
      uim_prop_label_update.  This sequence is required to make sure the
      exsitence of only one focused context in whole desktop.

2005-01-11 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/custom-vars.scm
      - Comment out all definitions of spellcheck group since spellcheck
        IM is not available yet
      - Sort some custom variables

2005-01-11 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-key.c
      - (struct key_entry):
        * Named from the anonymous struct for key_tab
        * Add const qualifier to member 'str'
      - (key_tab): Rewrite definition using struct key_entry
      - (define_valid_key_symbols): New static function
      - (get_sym, keycode_to_sym, handle_key): Add const qualifier to
        appropriate 'char *' pointers
      - (uim_init_key_subrs):
        * Add define_valid_key_symbols() invocation
        * Remove unnecessary cast
    * scm/key.scm
      - (valid-key-symbols): Remove here. The variable is defined in
        uim-key.c
      - (key-symbol?): New procedure
      - (set-key-binding, regist-key-binding): Remove these obsolete
        placeholders existing in comment
    
    * uim/slib.c
      - (init_subrs): Cosmetic change

2005-01-11 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * All functions of new custom type 'key' are validated and available
      for use in Scheme level. Using via uim-custom.h is not checked yet
    
    * scm/custom.scm
      - (custom-key?): Apply valid-strict-key-str? for string element
      - (define-custom): Fix broken custom-set-value! invocation for
        symbol or list value
      - (custom-set-value!): Fix broken define-key invocation
    * test/test-custom.scm
      - (test key-definition?): Remove
      - (test custom-key?, test custom-expand-key-references, test
        define-custom (choice) #2, test define-custom (key), test
        define-custom (key) #2): New test
      - (testcase custom custom-symbol): Rename to custom-choice
      - (testcase custom custom-choice): Renamed from custom-symbol
      - (test define-custom (symbol)): Rename to test define-custom
        (choice)
      - (test define-custom (choice)):
        * Renamed from test define-custom (symbol)
        * Add value check
      - (testcase custom custom-group): Replace *-im-canonical-name and
        *-im-desc with direct string literal to avoid being affected by
        custom-vars.scm
      - (test custom-valid?, test custom-value, test custom-set-value!,
        test custom-default?, test custom-default-value, test
        custom-groups, test custom-type, test custom-type-attrs, test
        custom-range, test custom-label, test custom-desc, test
        custom-value-as-literal, test custom-definition-as-literal): Add
        test for 'key'

2005-01-11 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/custom-vars.scm
      - (custom-group anthy, custom-group canna, custom-group skk,
        custom-group prime, custom-group spellcheck): Fix undefined
        variable reference for description. Thanks No.20 of [Anthy/uim
        thread 5] for reporting

2005-01-11 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * scm/generic.scm:
     -(generic-commit-candidate-by-numeral-key?): New variable.
     -(generic-commit): New procedure.
     -(generic-commit-by-numkey): New procedure.

2005-01-11 Etsushi Kato <ek.kato@gmail.com>

    * scm/skk.scm (skk-proc-state-direct) : Update comment about
      code committed in r246.  Update code on key events with
      modifiers.

2005-01-11 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * scm/m17nlib.scm:
     -(m17nlib-update-candidate): Removed unneed calling of
       im-activate-candidate-selector

2005-01-11 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/custom-vars.scm
      - (direct-im-desc, anthy-im-desc, canna-im-desc, skk-im-desc,
        prime-im-desc, pyunihan-im-desc, pinyin-big5-im-desc, py-im-desc,
        ipa-im-desc, romaja-im-desc, hangul3-im-desc, hangul2-im-desc,
        viqr-im-desc, tutcode-im-desc, tcode-im-desc, spellcheck-im-desc):
        Remove
      - (romaja-im-canonical-name, hangul3-im-canonical-name,
        hangul2-im-canonical-name): Modify as appropriately
      - (custom custom-preserved-default-im-name): Replace IM description
        with registered IM's own one
    * scm/hangul.scm
      - Modify short-desc of the 3 input methods
    * po/uim.pot
      - Update
    * po/ja.po
      - Update and fix. Thanks No.10 of [Anthy/uim thread 5] for
        suggestion

2005-01-11 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/util.scm
      - (candidate-window-position): Remove since unused
    test/test-custom.scm
      - (custom candidate-window-position): Remove since unused
      - (custom canna-server-name): Remove. This custom variable caused
        duplicate "Canna server name" item on uim-pref
      - (custom-hook-literalize-preserved-canna-server-name): New procedure
      - Add custom-hook-literalize-preserved-canna-server-name to
        custom-literalize-hooks to output cannaserver definition to
        custom-canna.scm

2005-01-11 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * test/test-custom.scm
      - (testcase custom custom-group): Add most of custom variable
        definitions copied from custom-vars.scm to avoid being affedted by
        its modification
      - (test custom-list-groups, test custom-collect-by-group): Follow
        the change of predefined customs

2005-01-11 Etsushi Kato <ek.kato@gmail.com>

    * scm/skk.scm (skk-proc-state-direct) : Commit pending rk "n" with
      skk-return-key?.  Flush context for native (not for uim skk)
      event with {control,alt} mask (but I can't understand why key 32
      exists here?  Also meaning of the code and its comment
      differs??)

2005-01-11 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-scm.c
      - (siod_init_subr): Fix wrong type of 3rd argument

2005-01-11 Etsushi Kato <ek.kato@gmail.com>

    * configure.ac (NEED_SETENV_C) : New conditional variable to check
      whether uim/setenv.c is needed to compile.
    * uim/Makefile.am : Add setenv.c into libuim_la_SOURCES depending
      on NEED_SETENV_C condition.

2005-01-11 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * scm/m17nlib.scm:
     -(duplicated-im?): Closed function definition.

2005-01-11 Etsushi Kato <ek.kato@gmail.com>

    * scm/skk.scm (skk-proc-state-direct) : With skk-plain-space-key?,
      compose rk string even with using the space character.  And
      don't commit native space if composed string is zenkaku space.

2005-01-11 Etsushi Kato <ek.kato@gmail.com>

    * scm/custom-vars.scm : Fix typo in skk-use-with-vi? section.

2005-01-11 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/m17nlib.scm
      - Add a comment about duplicated-im-list
      - (duplicated-im?): Simplify

2005-01-11 Etsushi Kato <ek.kato@gmail.com>

    * helper/helper-candwin-gtk.c (candwin_active) : Split candidate
      line with "\t" into only 2 segment since prime may return
      candidate string containing tab.
    * qt/uim-kdehelper/src/candwin/uim-candwin-qt.cpp
      (CandidateWindow::activeCand) : Ditto.

2005-01-10 TOKUNAGA Hiroyuki <tkng@xem.jp>

    gtk/uim-cand-win-gtk.c:
     -(uim_cand_win_gtk_layout): Use width of candidate window to calculate
       candidate windows's position.

2005-01-10 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * scm/loader.scm: Added calling of new plugin prime.
    
    * uim/Makefile.am: Added new plugin file libuim-prime.so.
    
    * uim/uim.c: Removed calling of uim_init_prime/uim_quit_prime.
    
    * uim/context.h: Removed function prototypes of uim_init_prime and
       uim_quit_prime.
    
    * uim/prime.c:
     -(uim_plugin_instance_init): Renamed from uim_init_prime.
     -(uim_plugin_instance_quit): Renamed from uim_init_prime.

2005-01-10 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * uim/plugin.c:
     -(plugin_unload): Removed unused variable.
     -(uim_quit_plugin): Removed unused variable.

2005-01-10 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * uim/uim.h, uim/uim-ipc.c:
     -(uim_ipc_open_command): Added const qualifier.
     -(uim_ipc_send_command): Added const qualifier.
    
    * uim/prime.c: Added const qualifiers.

2005-01-10 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * uim/uim-func.c:
     (im_clear_mode_list): Reverted the change in revision 226.

2005-01-10 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * uim/m17nlib.c: Removed all unsigned qualifier to fix warnings.

2005-01-10 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * uim/m17nlib.c:
     -(preedit_changedp): Fixed wrong return value. This may cause a problem
       with m17n-lib 1.1.0 or lower. (I didn't checked.)
     -(get_right_of_cursor): Fixed an careless bug.
     -(get_nr_candidates): Removed unused variable.

2005-01-10 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * scm/m17nlib.scm:
     -(duplicated-im?): Fixed typo. deplicated -> duplicated.

2005-01-10 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * scm/plugin.scm:
     -(uim-plugin-lib-load-path): Fixed that the priority of LIBUIM_PLUGIN_DIR
      was lower than other pathes.
     -(uim-plugin-scm-load-path): Fixed that the priority of LIBUIM_SCM_FILES
      was lower than other pathes.

2005-01-10 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * uim/uim.c: Oops, in my previous ocmmit, I've forgotten to revert CONTEXT_ARRAY_SIZE.
      I changed the value of this variable to 5 for debugging perpose, but that's too
      short for practical use.

2005-01-10 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * uim/uim.c:
     -(get_context_id): Substitute -1 if there's no free context slot.
     -(uim_create_context): Fail if id == -1
     -(uim_switch_im): Call release-context before calling create-context.
     -(uim_release_context):substitute NULL to uc->modes[i] after freed.

2005-01-10 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * scm/m17nlib.scm: Stop to register some duplicated input methods.
     -(duplicated-im-list): New variable. A list of duplicated IM name.
     -(duplicated-im?): New function. Return #t if argument is
       duplicated IM name.
     -(m17nlib-register): Stop to register some duplicated input methods.

2005-01-10 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * uim/uim-fun.c:
     -(uim_release_preedit_segments): Added NULL check.
     -(im_clear_mode_list): Break for loop if NULL str found.

2005-01-10 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * uim/m17nlib.c: Fixed some warnings.
     -(uim_plugin_instance_init): Renamed from uim_init_m17nlib.
     -(uim_plugin_instance_quit): Renamed from uim_quit_m17nlib.

2005-01-10 Etsushi Kato <ek.kato@gmail.com>

    * xim/ximserver.cpp (InputContext::candidate_activate) : Use
      uim_candidate_get_heading_label() to get heading label.  Format
      of string sent to helper-candidate-window is changed according
      to this.
    * helper/helper-candwin-gtk.c (candwin_activate) : Change column
      type for heading labels as G_TYPE_STRING from G_TYPE_UNIT.  Use
      heading labels of candidates with supplied string from uim-xim
      instead of calculated one.
    (str_parse) : Avoid unnecessary loop.
    * qt/uim-kdehelper/src/candwin/uim-candwin-qt.cpp
    (CandidateWindow::activateCand) : Use heading labels of candidates
      with supplied string from uim-xim instead of calculated one.
    * doc/HELPER-CANDWIN : Update section about activate command.

2005-01-10 Masahito Omote <omote@utyuuzin.net>

    * uim/plugin.c:
      - (plugin_quit): Move unloading code from 'uim_quit_plugin'.
      - (uim_quit_plugin): Simplified.

2005-01-10 Etsushi Kato <ek.kato@gmail.com>

    * scm/skk.scm : Make skk-candidate-op-count behave as intended
      with uim-pref.
    * scm/custom-vars.scm : Change skk-candidate-op-count.  Add two
      more skk related options.

2005-01-10 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/plugin.scm
      - (uim-plugin-lib-load-path, uim-plugin-scm-load-path): Simiplify
        the definition
      - (record plugin-entry): New record to simplify the implementation
      - (plugin-list-append): Simplify with plugin-entry
      - (plugin-list-query-library, plugin-list-query-instance-init,
        plugin-list-query-instance-quit):
        * Simplify with plugin-entry
        * Add existence check for plugin entry corresponding to
          plugin-name
    
    * uim/plugin.c
      - (uim_quit_plugin): Fix memory leaks

2005-01-10 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/siod.h
      - (NPOINTERP): New macro
    * uim/slib.c
      - (get_c_pointer): Fix inversed type check
    * uim/plugin.c
      - (uim_quit_plugin):
        * Enable when #ifdef UIM_SCM_NESTED_EVAL
        * Add uim_scm_gc_protect_stack() since this function is called
          from C execution context. I'll describe about it into
          doc/UIM-SCM
    
    * uim/uim-scm.c
      - (siod_init_subr): New static function
      - (uim_scm_init_subr_0, uim_scm_init_subr_1, uim_scm_init_subr_2,
        uim_scm_init_subr_3, uim_scm_init_subr_4, uim_scm_init_subr_5):
        Replace init_subr() with siod_init_subr() to apply
        uim_scm_gc_protect_stack() since this function is called from C
        execution context

2005-01-10 Etsushi Kato <ek.kato@gmail.com>

    * uim/uim.c (uim_check_im_exist) : Add sanity check for the case
      getting NULL evaluated string with uim-get-default-im-name or
      uim-get-im-name-for-locale.  Thanks Mike FABIAN for reporting.

2005-01-10 Etsushi Kato <ek.kato@gmail.com>

    * configure.ac : Separate uim-fep specific dependent library into
      FEP_LIBADD from LIBS.
    * fep/Makefile.am (uim_fep_LDADD) : Use FEP_LIBADD.

2005-01-10 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-custom.c
      - (uim_custom_key_get): Fix argument passing of UIM_EVAL_FSTRING()

2005-01-10 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit encapsulates Siod dependency into uim-scm module. All
      global symbols defined in slib.c listed below have been hidden to
      resolve namespace pollution. Now all global symbols of libuim.so has
      uim_ prefix. Try objdump -TC libuim.so|egrep -v '(\*UND\*| uim_)'
    
      Although all direct linking to Siod functions and variables have
      been removed, uim/*.[ch] and scm/*.scm are still depending on Siod
      specific behaviors, and uim-scm API provides some Siod specific
      interfaces. More elaborations of uim-scm API is required before
      providing alternative Scheme interpreter such as
      uim-scm-tinyscheme.c or uim-scm-gauche.c.
    
    * uim/siod.h
      - (number2string, string2number, caaar, caadr, cadar, caddr, cdaar,
        cdadr, cddar, cdddr, apply1, siod_verbose_level): Remove
      - (siod_init, siod_quit, set_repl_hooks, get_c_string,
        get_c_string_dim, get_c_int, nlength, get_c_pointer, cons, car,
        cdr, setcar, intcons, eql, symcons, symbol_boundp, symbol_value,
        symbol_to_string, rintern, closure, ptrcons, init_subr,
        init_subr_0, init_subr_1, init_subr_2, init_subr_2n, init_subr_3,
        init_subr_4, init_subr_5, init_lsubr, init_fsubr, init_msubr,
        delq, set_eval_hooks, leval, symbolconc, lprin1f, lread, lreadtk,
        lreadf, require, strcons, equal, set_fatal_exit_hook, intern,
        gc_protect, siod_gc_protect_stack, siod_gc_unprotect_stack,
        siod_repl_c_string_entered, repl_c_string, siod_return_value,
        reverse, nreverse, cadr, caar, cdar, cddr, siod_true_value,
        siod_false_value, lapply, listn, must_malloc, get_c_file,
        last_c_errmsg, llast_c_errmsg, siod_c_provide, funcall1, funcall2,
        siod_set_lib_path): Make static. Should be moved into slib.c
    * uim/slib.c
      - (siod_verbose_level): Make static
      - (get_c_int, nlength, siod_set_lib_path, strcons, repl_c_string,
        siod_repl_c_string_entered, set_repl_hooks, siod_return_value,
        set_fatal_exit_hook, siod_gc_protect_stack,
        siod_gc_unprotect_stack, get_c_string, get_c_string_dim, cons,
        car, cdr, setcar, intcons, equal, eql, symcons, symbol_boundp,
        symbol_value, symbol_to_string, must_malloc, rintern, intern,
        closure, gc_protect, get_c_pointer, ptrcons, init_subr,
        init_subr_0, init_subr_1, init_subr_2, init_subr_2n, init_subr_3,
        init_subr_4, init_subr_5, init_lsubr, init_fsubr, init_msubr,
        set_eval_hooks, leval, lapply, reverse, symbolconc, lprin1f,
        lread, lreadf, lreadtk, delq, siod_c_provide, require, get_c_file,
        nreverse, caar, cadr, cdar, cddr, siod_true_value,
        siod_false_value, last_c_errmsg, llast_c_errmsg, funcall1,
        funcall2, listn, siod_quit, siod_init): Make static
    * uim/uim-scm.c
      - Revise the header comment about Scheme interpreter
      - Include slib.c and uim-compat-scm.c
      - (true_sym, false_sym): Make static
      - (string_equal): Remove to replace with same function defined in
        slib.c
      - (uim_scm_string_equal): Adapt to string_equal() defined in slib.c
      - (uim_scm_init): Remove initialization of string=?
    * uim/uim-scm.h
      - (true_sym, false_sym): Remove
      - (TRUEP, FALSEP, NTRUEP, NFALSEP): Rewrite without true_sym and
        false_sym
    * uim/uim-compat-scm.c
      - (uim_scm_symbol_value_str, uim_scm_symbol_value): Replace
        false_sym with uim_scm_f()
    * uim/Makefile.am
      - (EXTRA_DIST): Add slib.c and uim-compat-scm.c
      - (libuim_la_SOURCES): Remove slib.c and uim-compat-scm.c

2005-01-10 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit removes Siod dependency from intl.c
    
    * uim/Makefile.am
      - Remove intl.h
    * uim/context.h
      - Update copyright
      - (uim_init_intl_subrs): New function
    * uim/uim.c
      - (uim_init_scm):
        * Add uim_init_intl_subrs()
        * Call uim_init_util_subrs() earlier
    * uim/intl.h
      - Remove
    * uim/intl.c
      - Add lacking copyright header
      - Remove #include "siod.h"
      - Include config.h, uim-scm.h, uim-compat-scm.h, context.h
      - (intl_gettext_package, intl_textdomain, intl_bindtextdomain,
        intl_bind_textdomain_codeset, intl_gettext, intl_dgettext,
        intl_dcgettext, intl_ngettext, intl_dngettext, intl_dcngettext):
        * Replace LISP with uim_lisp
        * Replace get_c_int() with uim_scm_int()
        * Replace intcons() with uim_scm_make_int()
        * Replace get_c_string() with uim_scm_refer_c_str()
        * Replace strcons() with uim_scm_make_str()
        * Replace NULLP with uim_scm_nullp()
      - (init_intl): Rename to uim_init_intl_subrs() to avoid global
        symbol table pollution
      - (uim_init_intl_subrs):
        * Renamed from init_intl()
        * Replace init_subr_*() with uim_scm_init_subr_*()
        * Replace siod_c_provide() with uim_scm_provide()
    * uim/slib.c
      - Remove #include "intl.h"
      - (siod_init): Remove init_intl()
    
    * uim/uim-compat-scm.h
      - Update copyright
      - (uim_scm_provide): New function
    * uim/uim-compat-scm.c
      - (uim_scm_provide): New function

2005-01-10 Etsushi Kato <ek.kato@gmail.com>

    * uim/context.h : Remove uim_init_* and uim_quit_* for anthy and
      skk.

2005-01-10 Etsushi Kato <ek.kato@gmail.com>

    * uim/skk-dic.c : Update copyright.  Make SKK facility pluggable
      using uim_plugin_instance_init() and uim_plugin_instance_quit().
    * uim/uim.c : Remove uim_init_skk_dic() and uim_quit_skk_dic().
    * scm/loader.scm : Make SKK pluggable.
    * uim/Makefile.am : Remove skk-dic.c from libuim_la_SOURCES, and
      create skk module from the file.  Move -lcanna from
      libuim_canna_la_LDFLAGS to libuim_canna_la_LIBADD.  Remove
      "@LIBINT@ @LIBICONV@" from libuim_m17n_lib_la_LIBADD,
      libuim_scim_la_LIBADD, libuim_canna_la_LIBADD, and
      libuim_anthy_la_LIBADD.

2005-01-10 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * configure.ac
      - Add new option --enable-compat-table
      - Add configure result message for developers
      - Set default enable_* vars even if not specified by configure
        option
    * scm/Makefile.am
      - (SCM_FILES): Enclose hk.scm into if COMPAT_TABLE
    * uim/Makefile.am
      - (libuim_la_SOURCES): Enclose uim-table.c into if COMPAT_TABLE
    * uim/context.h
      - (uim_init_table_subrs): Enclose into #ifdef UIM_COMPAT_TABLE
    * uim/uim.c
      - (uim_init_scm): Enclose uim_init_table_subrs() into #ifdef
        UIM_COMPAT_TABLE

2005-01-10 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit removes Siod dependency from uim-util.c
    
    * uim/uim-util.c
      - Remove #include "siod.h"
      - (str_seq_equal, str_seq_partial): Rewrite siod dependent codes
        with uim-scm API
      - (string_equal) Move to uim-scm.c
      - (uim_init_util_subrs): Move initialization of string=? to uim-scm.c
    * uim/uim-scm.h
      - Add API intention to the header comment
      - (uim_scm_length): New function
    * uim/uim-scm.c
      - (uim_scm_nullp, uim_scm_eq): Fix return type int with uim_bool
      - (uim_scm_string_equal):
        * Ditto
        * Replace the implementation with string_equal
      - (string_equal): Moved from uim-util.c
      - (uim_scm_length): New function
      - (uim_scm_init): Moved initialization of string=? from uim-util.c

2005-01-10 Etsushi Kato <ek.kato@gmail.com>

    * uim/uim-scm.c : Move uim_scm_reverse() from uim-compat-scm.c
      since reverse() is in r5rs.  Please revert this change if it
      is not appropriate, yamaken.
    * uim/uim-scm.h : Moved from uim-compat-scm.h.
    * uim/uim-compat-scm.c : Remove uim_scm_reverse().
    * uim/uim-compat-scm.h : Ditto.

2005-01-10 Etsushi Kato <ek.kato@gmail.com>

    * uim/skk-dic.c : Remove "include siod.h".  Use
      uim_scm_null_list() instead of uim_scm_f() for some place
      appropriately.  Replace reverse() to uim_scm_reverse().

2005-01-10 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * helper/pref-gtk.c
      - (pref_tree_selection_changed, quit_confirm): Modify English
        expression of messages
    * scm/custom-vars.scm
      - (custom prime-pseudo-mode-cursor?): Fix a typo of label
    * po/uim.pot
    * po/ja.po
      - Just updated by make update-po

2005-01-10 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * po/POTFILES.in
      - Replace scm/custom.scm with scm/custom-vars.scm
    * po/uim.pot
      - Update
    * po/ja.po
      - Just updated by make update-po. No rewrite by hand is applied
      - Some messages from toolbar-common-gtk.c and helper/input-pad-ja.c
        have been orphaned. Remove them if you certainly know about them
    * po/ja.gmo
      - Remove

2005-01-10 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/plugin.c
      - (plugin_load): Remove unneeded uim_scm_gc_protect_stack() Since
        the function is always called from Scheme execution context

2005-01-10 Masahito Omote <omote@utyuuzin.net>

    * This commit drops 'struct _uim_plugin_info' and 'struct _plugin_list'.
      All plugin's information will be stored to 'plugin-alist' and
      'plugin-funcs-alist' by Scheme. But because 'uim_quit_plugin' does not work
      well for now, all sections are surrounded by '#if 0'.
    * uim/plugin.c:
      - (plugin_load): Store plugin's informations to 'plugin-alist'.
      - (uim_quit_plugin): Get plugin's informations from 'plugin-alist'
      - (uim_plugin_instance_query): Removed. Replaced by 'plugin-list-query'.
    * uim/plugin.h:
      - Remove 'struct _uim_plugin_info' and 'struct _plugin_list'.
    * uim/plugin.scm:
      - (plugin-alist): New variable.
      - (plugin-func-alist): New variable.
      - (plugin-list-append): New function.
      - (plugin-list-query): New function.
      - (plugin-list-query-library): New function.
      - (plugin-list-query-instance-init): New function.
      - (plugin-list-query-instance-quit): New function.

2005-01-10 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * uim/skk-dic.c: Fixed warnings.
     - All NIL was replaced with uim_scm_null_list().
     - (skk_dic_open), (find_cand_array_lisp), (skk_get_nth_candidate),
       (skk_commit_candidate): Added const qualifiers.
    
    Now left warning is only two, they are related on reverse(); If we could
    fix this, we can split skk-dic.c from libuim. This will reduce the size
    of libuim about 20KB.

2005-01-10 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * uim/skk-dic.c:
     - All strcons was replaced with uim_scm_make_str
     - All get_c_string was replaced with uim_scm_refer_c_str
     - All uim_get_c_string was replaced with uim_scm_c_str
     - All cons was replaced with uim_scm_cons
     - All NULLP was replaced sith uim_scm_nullp
     -(find_line), (extract_line_index), (do_search_line)
      (find_candidate_array_from_line), (alloc_skk_line)
      (skk_search_line_from_file), (skk_search_line_from_cache)
      (find_cand_array),(skk_store_replaced_numeric_str)
      (numeric_wide_or_kanji_conv), (numeric_kanji_with_position_conv)
      (numeric_kanji_for_check_conv), (numeric_shogi_conv)
      (numeric_convert), (skk_make_comp_array_from_cache)
      (skk_read_personal_dictionary), (skk_lib_read_personal_dictionary)
      (update_personal_dictionary_cache): Added const qualifiers.

2005-01-10 kzk <mover@hct.zaq.ne.jp>

    * uim-pref-qt is now reached the level of current gtk's.
    
    * uim-kdehelper/src/pref/uim-pref-qt.h
      - (confirmChange): new function
      - (QConfirmDialog): new class
    
    * uim-kdehelper/src/pref/uim-pref-qt.cpp
      - (createGroupWidget): add group title label
      - (slotSelectionChanged): confirm change
      - (slotCancel): confirm change
      - (confirmChange): new function
    
    * uim-kdehelper/src/pref/customwidgets.h
      - remove debug messages

2005-01-09 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * uim/skk-dic.c: Removed a siod dependency.
     - Many NIL was replaced with uim_scm_f().

2005-01-09 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * uim/skk-dic.c: Removed some siod dependency.
     - get_c_int was replaced with uim_scm_c_int
     - intcons was replaced with uim_scm_make_int
     - CAR was replaced with uim_scm_car.
     - CDR was replaced with uim_scm_cdr.
    
     This commit would cause many compiler warnings, but it should work.
     I'll fix these warnings later.

2005-01-09 Masahito Omote <omote@utyuuzin.net>

    * uim/prime.c: Sync with the changes of new uim-scm's implementations.
    * uim/canna.c:
      - (init_canna_lib): Check whether cannaserver is enabled or not.

2005-01-09 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * scm/prime.scm: Merged Hiroyuki Komatsu's prime_2004-12-13.scm.
      Note, this version is incompatible with older PRIMEs.
      To use this, you need one of following.
       - PRIME 0.8.5 or higher.
       - PRIME 0.9.3 or higher.

2005-01-09 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * scm/anthy.scm: Changed the order of im-commit and reset-candidate-window
     to fix Bug #1855.

2005-01-09 kzk <mover@hct.zaq.ne.jp>

    * uim-pref-qt now has an ability to change the configuration
      of uim. Althogh some part is not completed yet, now it can
      do the basic operaton.
    
    * uim-kdehelper/src/pref/uim-pref-qt.cpp
    * uim-kdehelper/src/pref/uim-pref-qt.cpp
      - implement custom symbol handling
      - implement saving function
    
    * uim-kdehelper/src/pref/customwidgets.h
      - new file
    
    * uim-kdehelper/src/pref/Makefile.am
      - add customwidgets.h

2005-01-09 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * scm/custom-vars.scm: Removed an obsolete customize item, Added some
     new customize items.
      -(prime-preedit-immediate-commit?): Removed.
      -(prime-auto-register-mode?): New customize item.
      -(prime-pseudo-mode-cursor?): New customize item.
      -(prime-char-annotation?): New customize item.

2005-01-09 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * scm/prime.scm: Fixed a typo. pseude -> pseudo.

2005-01-09 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * scm/custom-vars.scm:
     -(anthy-select-candidate-by-numeral-key?): Added a new customize item
      for anthy.

2005-01-09 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * scm/plugin.scm:
     -(uim-plugin-lib-load-path): Fixed that the priority of LIBUIM_PLUGIN_DIR
      was lower than other pathes.
     -(uim-plugin-scm-load-path): Fixed that the priority of LIBUIM_SCM_FILES
      was lower than other pathes.

2005-01-09 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * Dummy commit to fix previous commit log
      "All modifications are not yet validated"

2005-01-09 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit adds new custom type 'key'. All functions are
      validated and available for use in Scheme level. Using via
      uim-custom.h is not checked yet
    
    * scm/custom.scm
      - (custom-key?): Implement
      - (custom-expand-key-references, custom-exist?,
        custom-list-as-literal): New procedure
      - (define-custom): Add custom-set-value! invocation to apply special
        handlings such as define-key
      - (custom-set-value!): Invoke define-key if custom type is key
      - (custom-value-as-literal):
        * Simplify with custom-list-as-literal
        * Support custom type 'key'
      - (custom-definition-as-literal): Put define-key if custom type is
        'key'
    * uim/uim-custom.c
      - (uim_custom_key_get): Modify sexp to get value

2005-01-09 kzk <mover@hct.zaq.ne.jp>

    * uim-pref-qt
    
    * OOps.. I forgot to call uim_custom_init(). The SEGV which was
      described in previous commit was caused by this mistake. Excume
      me, for my hasty decision.

2005-01-09 kzk <mover@hct.zaq.ne.jp>

    * initial commit of uim-pref-qt which doesn't depend on KDE products.
    
    * uim-kdehelper/src/pref/uimconfig
    * uim-kdehelper/src/pref/uimqtconfig
      - deleted because of KDE dependency
    
    * pref/uim-pref-qt.h
    * pref/uim-pref-qt.cpp
    * Makefile.am
      - initial commit
    
    * but this version causes SEGV by just calling uim_custom_primary_groups()
      please check, Yamaken.
    
    My Environment:
    uim trunk r187
    ./configure --enable-debug
    
    backtrace:
    #0  0x41aeb47e in _IO_str_overflow () from /lib/libc.so.6
    #1  0x41aea488 in _IO_default_xsputn () from /lib/libc.so.6
    #2  0x41ac4efc in vfprintf () from /lib/libc.so.6
    #3  0x41adffeb in vsprintf () from /lib/libc.so.6
    #4  0x41acd94d in sprintf () from /lib/libc.so.6
    #5  0x4002215d in my_err (message=0x4003786c "wta(non-symbol) to setvar", x=0x0) at slib.c:381
    #6  0x40021f49 in setvar (var=0x0, val=0x0, env=0x0) at slib.c:326
    #7  0x40022236 in my_err (message=0x4003786c "wta(non-symbol) to setvar", x=0x0) at slib.c:399
    #8  0x40021f49 in setvar (var=0x0, val=0x0, env=0x0) at slib.c:326
    #9  0x40022236 in my_err (message=0x4003786c "wta(non-symbol) to setvar", x=0x0) at slib.c:399
    #10 0x40021f49 in setvar (var=0x0, val=0x0, env=0x0) at slib.c:326
    #11 0x40022236 in my_err (message=0x4003786c "wta(non-symbol) to setvar", x=0x0) at slib.c:399
    #12 0x40021f49 in setvar (var=0x0, val=0x0, env=0x0) at slib.c:326
    #13 0x40022236 in my_err (message=0x4003786c "wta(non-symbol) to setvar", x=0x0) at slib.c:399
    #14 0x40021f49 in setvar (var=0x0, val=0x0, env=0x0) at slib.c:326
    #15 0x40022236 in my_err (message=0x4003786c "wta(non-symbol) to setvar", x=0x0) at slib.c:399
    #16 0x40021f49 in setvar (var=0x0, val=0x0, env=0x0) at slib.c:326
    #17 0x40022236 in my_err (message=0x4003786c "wta(non-symbol) to setvar", x=0x0) at slib.c:399
    #18 0x40021f49 in setvar (var=0x0, val=0x0, env=0x0) at slib.c:326
    #19 0x40022236 in my_err (message=0x4003786c "wta(non-symbol) to setvar", x=0x0) at slib.c:399
    #20 0x40021f49 in setvar (var=0x0, val=0x0, env=0x0) at slib.c:326

2005-01-09 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/custom.scm
      - (custom-collect-by-group): Fix reversed order of custom-symbol
        list. Now returns defined-order of symbols
    * test/test-custom.scm
      - (test custom-collect-by-group): Follow the fix

2005-01-09 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/custom.scm
      - (custom-definition-as-literal): Add comment about literalize-hook
    * scm/custom-vars.scm
      - (custom-hook-literalize-preserved-default-im-name): Fix infinite
        loop. Thanks No.9 of [Anthy/uim thread 5] for reporting

2005-01-09 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit adds new custom type ordered-list. All functions are
      validated and available for use in Scheme level. Using via
      uim-custom.h is not checked yet
    
    * scm/custom.scm
      - All changes are validated by test-custom.scm
      - (custom-validator-alist): Add new type ordered-list
      - (custom-valid-choice?): Replace unwanted let* with let
      - (custom-ordered-list?): New predicate
      - (define-custom): Support list value to accept ordered-list
      - (custom-value-as-literal): Support ordered-list
    * test/test-custom.scm
      - (test custom-ordered-list?): New test
      - (testcase custom methods): Add an ordered-list definition to setup
      - (test custom-valid?, test custom-value, test custom-set-value!,
        test custom-default?, test custom-default-value, test
        custom-groups, test custom-type, test custom-type-attrs, test
        custom-range, test custom-label, test custom-desc, test
        custom-value-as-literal, test custom-definition-as-literal): Add
        test for ordered-list

2005-01-09 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/custom.scm
      - All changes are validated by test-custom.scm
      - (custom-validator-alist):
        * Replace pathname? with custom-pathname?
        * Replace key-definition? with custom-key?
      - (pathname?): Rename to custom-pathname?
      - (custom-pathname?): Renamed from pathname?
      - (key-definition?): Rename to custom-key?
      - (custom-key?):
        * Renamed from key-definition?
        * Remove a comment
        * Remove the temporary implementation
    * test/test-custom.scm
      - (test pathname?): Rename to custom-pathname?
      - (test custom-pathname?):
        * Renamed from pathname?
        * Follow the renaming

2005-01-09 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/custom.scm
      - All changes are validated by test-custom.scm
      - (custom-define-group): Rename to define-custom-group
      - (define-custom-group): Renamed from custom-define-group
    * scm/custom-vars.scm
      - Replace all custom-define-group with define-custom-group
    * test/test-custom.scm
      - (test custom-define-group, custom-group-rec): Rename to
        'define-custom-group, custom-group-rec'
      - (test define-custom-group, custom-group-rec):
        * Renamed from 'custom-define-group, custom-group-rec'
        * Follow the renaming
      - (testcase custom custom-group methods): Replace all custom-define-group
        with define-custom-group in setup

2005-01-09 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/custom.scm
      - All changes are validated by test-custom.scm
      - (custom-canonical-value-as-string): Rename to custom-value-as-literal
      - (custom-value-as-literal): Renamed from custom-canonical-value-as-string
      - (custom-canonical-definition-as-string): Rename to
        custom-definition-as-literal
      - (custom-definition-as-literal):
        * Renamed from custom-canonical-definition-as-string
        * Merge custom-as-string
      - (custom-as-string): Remove to merge into custom-definition-as-literal
    * scm/custom-vars.scm
      - (custom-hook-literalize-preserved-default-im-name): Follow the renamings
    * uim/uim-custom.c
      - (uim_custom_value_as_literal, uim_custom_definition_as_literal): Follow
        the renamings
    * test/test-custom.scm
      - (test custom-canonical-value-as-string): Rename to
        custom-value-as-literal
      - (test custom-value-as-literal):
        * Renamed from custom-canonical-value-as-string
        * Follow the renaming
    
      - (test custom-canonical-definition-as-string): Rename to
        custom-definition-as-literal
      - (test custom-definition-as-literal):
        * Renamed from custom-canonical-definition-as-string
        * Follow the renaming
        * Merge test custom-as-string
      - (test custom-as-string): Remove to merge into custom-definition-as-literal

2005-01-09 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/custom.scm
      - All changes are validated by test-custom.scm
      - (custom-set!): Rename to custom-set-value!
      - (custom-set-value!): Renamed from custom-set!
      - (custom-prop-update-custom-handler): Follow the renaming
    * test/test-custom.scm
      - (test custom-set!): Rename to custom-set-value!
      - (test custom-set-value!):
        * Renamed from custom-set!
        * Follow the renaming
      - (test custom-update-hooks, test custom-update-hooks (self update), test
        custom-register-update-cb, test custom-register-update-cb (2 callbaks),
        test custom-set-hooks, test custom-set-hooks (self update), test
        custom-value, test custom-default?, test custom-default-value, test
        canna-server-name): Follow the renaming
    * uim/uim-custom.c
      - (uim_custom_set): Follow the renaming

2005-01-09 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-custom.c
      - (uim_custom_type, uim_custom_choice_get): Follow the renaming of previous
        commit of 'symbol' -> 'choice'

2005-01-09 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/custom.scm
      - All changes are validated by test-custom.scm
      - (custom-validator-alist): Rename 'symbol' to 'choice'
      - (custom-valid-symbol?): Rename to custom-valid-choice?
      - (custom-valid-choice?):
        * Renamed from custom-valid-symbol?
        * Follow the renamings
      - (record custom-symbol-rec): Rename to custom-choice-rec
      - (record custom-choice-rec): Renamed from custom-symbol-rec
      - (custom-symbol-label): Rename to custom-choice-label
      - (custom-choice-label):
        * Renamed from custom-symbol-label
        * Follow the renamings
      - (custom-symbol-desc): Rename to custom-choice-desc
      - (custom-choice-desc):
        * Renamed from custom-symbol-desc
        * Follow the renamings
      - (custom-range, custom-canonical-value-as-string): Follow the renamings
    * scm/custom-vars.scm
      - (custom uim-color, custom custom-preserved-default-im-name, custom
        skk-style): Replace custom type 'symbol' with 'choice'
    * test/test-custom.scm
      - (test custom-valid-symbol?): Rename to custom-valid-choice?
      - (test custom-valid-choice?):
        * Renamed from custom-valid-symbol?
        * Follow the renamings
      - (test custom-symbol-rec-new): Rename to custom-choice-rec-new
      - (test custom-choice-rec-new):
        * Renamed from custom-symbol-rec-new
        * Follow the renamings
      - (test custom-symbol-label): Rename to custom-choice-label
      - (test custom-choice-label):
        * Renamed from custom-symbol-label
        * Follow the renamings
      - (test custom-symbol-desc): Rename to custom-choice-desc
      - (test custom-choice-desc):
        * Renamed from custom-symbol-desc
        * Follow the renamings
      - (testcase custom hooks): Follow the renamings in setup
      - (test custom-type): Follow the renamings

2005-01-09 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/custom.scm
      - All changes are validated by test-custom.scm
      - (custom-activity-hook): Rename to custom-activity-hooks
      - (custom-update-hook): Rename to custom-update-hooks
      - (custom-get-hook): Rename to custom-get-hooks
      - (custom-set-hook): Rename to custom-set-hooks
      - (custom-literalize-hook): Rename to custom-literalize-hooks
      - (custom-activity-hooks): Renamed from custom-activity-hook
      - (custom-update-hooks): Renamed from custom-update-hook
      - (custom-get-hooks): Renamed from custom-get-hook
      - (custom-set-hooks): Renamed from custom-set-hook
      - (custom-literalize-hooks): Renamed from custom-literalize-hook
      - (custom-value, custom-set!, custom-active?, custom-as-string,
        custom-register-update-cb): Follow the renamings
    * scm/custom-vars.scm
      - (custom custom-preserved-default-im-name, custom
        custom-activate-default-im-name?, custom
        custom-preserved-default-im-name, custom
        custom-activate-default-im-name?, custom
        custom-preserved-default-im-name, custom
        custom-preserved-default-im-name, custom switch-im-key?, custom
        custom-preserved-canna-server-name, custom
        custom-activate-canna-server-name?, custom canna-server-name,
        custom custom-activate-canna-server-name?, custom
        custom-preserved-canna-server-name): Follow the renamings
    * test/test-custom.scm
    
      - (test custom-update-hook): Rename to custom-update-hooks
      - (test custom-update-hook (self update)): Rename to custom-update-hooks
        (self update)
      - (test custom-get-hook): Rename to custom-get-hooks
      - (test custom-get-hook (self update)): Rename to custom-get-hooks (self
        update)
      - (test custom-set-hook): Rename to custom-set-hooks
      - (test custom-set-hook (self update)): Rename to custom-set-hooks (self
        update)
      - (test custom-update-hooks): Renamed from custom-update-hook
      - (test custom-update-hooks (self update)): Renamed from custom-update-hook
        (self update)
      - (test custom-get-hooks): Renamed from custom-get-hook
      - (test custom-get-hooks (self update)): Renamed from custom-get-hook (self
        update)
      - (test custom-set-hooks): Renamed from custom-set-hook
      - (test custom-set-hooks (self update)): Renamed from custom-set-hook (self
        update)
      - (test custom-active?, test custom-update-hooks, test
        custom-update-hooks (self update), test custom-get-hooks, test
        custom-get-hooks (self update), test custom-set-hooks, test
        custom-set-hooks (self update), test custom-as-string): Follow the
        renamings

2005-01-09 Masanari Yamamoto <h013177b@ice.nuie.nagoya-u.ac.jp>

     * xim/compose.cpp: add #include <ctype.h>

2005-01-09 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/custom.scm
      - All changes are validated by test-custom.scm
      - (custom-set!): Fix update-hook invocation
      - (custom-register-update-cb): Fix a typo that made it broken
    * test/test-custom.scm
      - (test custom-collect-by-group): Follow change of custom variable
        definition
      - (test custom-remove-hook, test custom-update-hook, test
        custom-update-hook (self update), test custom-register-update-cb,
        test custom-register-update-cb (2 callbaks), test
        custom-as-string, test custom-prop-update-custom-handler): New test
      - (testcase custom interfaces): New testcase
      - (testcase custom methods): Add new custom test-modelist by setup
      - (test custom-set-hook, test custom-set-hook (self update), test
        custom-default?, test custom-default-value, test
        canna-server-name): Add validation for result value of custom-set!
      - (test custom-set!):
        * Ditto
        * Add test for custom type 'symbol' (may be renamed to 'choice')

2005-01-08 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * uim/plugin.c:
     -(plugin_load): tmp was renamed to proper name 'plugin_name'.
     -(plugin_load): Suppressed unwanted message outputs.

2005-01-08 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/canna.c
      - Remove unused #include "siod.h". The Siod dependency had already
        been removed

2005-01-08 Masahito Omote <omote@utyuuzin.net>

    * Drop dlfcn in Canna. libuim-canna.so is linked libcanna.
    * configure.ac: Add AC_CHECK_LIB(canna).
    * uim/Makefile.am: Make libuim-canna.so linked libcanna.
    * uim/canna.c: Sync with the changes of scm's and plugin's implementation.
    * scm/loader.scm: Enable (load-plugin "canna") again.

2005-01-08 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/skk.scm
      - (skk-dic-file-name): Replace hardcoded directory with sys-datadir
    * scm/custom-vars.scm
      - (custom skk-dic-file-name): Replace hardcoded directory for
        default value with sys-datadir

2005-01-08 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-custom.c
      - (uim_custom_init): Fix uim_scm_load_file("custom.scm") with
        uim_scm_require_file("custom.scm")
    
    * uim/uim-sh.c
      - (main): Replace uim_scm_load_file() with uim_scm_require_file()

2005-01-08 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/plugin.c
      - Fix a typo '#ifdef UIM_SCM_NESTED_EVAL' with #ifndef. Thanks Mike
        Fabian for reporting
      - (uim_plugin_instance_query): Disable by #if 0 for now

2005-01-08 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/loader.scm
      - Comment out canna since broken at now

2005-01-08 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/custom.scm
      - Update copyright
      - Remove a header comment
      - Move all custom definitions to custom-vars.scm. No modification is
        applied
    * scm/custom-vars.scm
      - Virtually new file (i.e. ignore previous svn cp)
      - Moved all custom definitions from custom.scm. No modification is
        applied
    * scm/Makefile.am
      - (SCM_FILES): Add custom-vars.scm
    
    * uim/siod.h
      - (siod_repl_c_string_entered): New function for #if
        !NESTED_REPL_C_STRING configuration
    * uim/slib.c
      - (siod_repl_c_string_entered): Ditto
    * uim/uim-scm.c
      - (uim_scm_require_file): Support direct call from C for #ifndef
        UIM_SCM_NESTED_EVAL configuration
    * uim/uim.c
      - (uim_init_scm):
        * Replace most of uim_scm_load_file() with uim_scm_require_file()
          appropriately
        * Move loading position of custom.scm
        * Add uim_scm_require_file("custom-vars.scm")
        * Modify some comments
    * test/test-custom.scm
      - (testcase custom custom-group, testcase custom custom-group
        methods): Comment out (load "custom.scm") in accordance with
        custom-vars.scm separation

2005-01-08 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/custom-vars.scm
      - New file. Copied from custom.scm to prepare separation

2005-01-08 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * test/uim-test-utils.scm
      - Set environment variable LIBUIM_VANILLA to 1 to suppress loading
        per-user configuration
    * uim/uim.c
      - (uim_init_scm): Suppress uim_custom_load() when LIBUIM_VANILLA is
        set

2005-01-08 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/slib.c
      - (repl_c_string_entered): New static variable for #if
        !NESTED_REPL_C_STRING configuration
      - (repl_driver): Add error check for nested entrance
      - (siod_init): Add initialization of repl_c_string_entered
    * uim/uim-scm.c
      - (uim_scm_require_file): Support #ifndef UIM_SCM_NESTED_EVAL
        configuration as AS-IS quality
    * uim/plugin.c
      - Add #include "uim-compat-scm.h" for #ifdef UIM_SCM_NESTED_EVAL
      - (plugin_load): Support #ifndef UIM_SCM_NESTED_EVAL configuration
        by replacing uim_scm_eval_c_string() with uim_scm_symbol_value()
        to remove nested repl_c_string call
    
    * uim/uim.h
      - Modify the comment about uim_bool

2005-01-08 Etsushi Kato <ek.kato@gmail.com>

    * uim/plugin.c : Remove Mac OS X specific ".dylib" since module is
      now created with adding -module to libtool's LDFLAGS.
    * uim/Makefile.am : Use -rpath $(uim_plugindir) -avoid-version
      -module for pluins LDFLAGS.

2005-01-08 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim.h
      - (uim_bool): New type moved from uim-scm.h
      - (UIM_FALSE, UIM_TRUE): New macro moved from uim-scm.h
    uim/uim-scm.h
      - (uim_bool): Move to uim.h
      - (UIM_FALSE, UIM_TRUE): Move to uim.h
      - Add #include "uim.h" for uim_bool
    * uim/uim-custom.h
      - Remove #include "uim-scm.h" for uim_bool
      - Add #include "uim.h" for uim_bool
    * uim/uim-compat-scm.h
      - Add #include "uim.h" for uim_bool
    * COMPATIBILITY
      - Describe revision number reset caused by the compromise, and about
        new revision number notation such as 'ac-r40' to distinguish from
        old one. 'ac' stands for 'after compromised'.
      - Add a new entry 'A boolean type for uim'

2005-01-08 Etsushi Kato <ek.kato@gmail.com>

    * helper/im-switcher-gtk.c : Fix gtk's version dependent behavior
      of toggle_button internal sequence.

2005-01-07 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * gtk/uim-cand-win-gtk.c:
     - (im_cand_win_gtk_init): Reverted wrong changes in -r 160.

2005-01-07 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * gtk/gtk-im-uim.c:
     -(im_module_create):Removed needless calling of uim_init.
     -(im_module_init): Added calling of uim_init.
     -(im_uim_class_finalize): Removed needless calling of uim_quit.
    
    * gtk/uim-cand-win-gtk.c:
     -(uim_cand_win_gtk_init):Removed needless calling of uim_init.

2005-01-07 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/plugin.h
      - (NEW_UIM_PLUGIN): Remove
      - (uim_plugin_init, uim_plugin_quit): Remove
      - (uim_plugin_instance_init, uim_plugin_instance_quit): New
        prototype decl for distinct plugin
    
    * uim/anthy.c
      - Remove unused #include "siod.h". The Siod dependency had already
        been removed
    
    * uim/uim-util.c
      - (sys_libdir, sys_pkglibdir, sys_datadir, sys_pkgdatadir): Fix
        return type LISP with uim_lisp

2005-01-07 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * configure.ac
      - Make --enable-scm-nested-eval --disable-callback-queue default
      - Modify the help string of sumika as 'obsolete'

2005-01-07 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit fixes plugin loading. m17nlib and anthy plugins has been
      loadable without special settings. canna is still broken
    
    * configure.ac
      - Add new option --without-anthy
    * uim/Makefile.am
      - (uim_plugindir): New definition
      - (lib_LTLIBRARIES): Move libuim-m17nlib.la, libuim-scim.la,
        libuim-canna.la and libuim-anthy.la to uim_plugin_LTLIBRARIES
      - (uim_plugin_LTLIBRARIES):
        * New definition
        * Moved libuim-m17nlib.la, libuim-scim.la, libuim-canna.la and
          libuim-anthy.la from lib_LTLIBRARIES
      - (libuim_la_CPPFLAGS):
        * Remove -DLIBDIR
        * Add -DPKGLIBDIR
        * Add -DPKGDATADIR
      - Enclose libuim_anthy_la_* into 'if ANTHY' block
    * uim/uim-util.c
      - (sys_pkglibdir, sys_pkgdatadir): New static function
      - (uim_init_util_subrs): Add Scheme procedure initialization of
        sys-pkglibdir and sys-pkgdatadir
    * scm/plugin.scm
      - (uim-plugin-lib-load-path): Fix sys-libdir with sys-pkglibdir
      - (uim-plugin-scm-load-path): Fix <sys-datadir>/uim/plugin with
        sys-pkgdatadir

2005-01-07 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * configure.ac
      - Fix LOCALEDIR and GNOMELOCALEDIR definition. This has resolved bug
        #1820
      - Define LIBDIR and DATADIR
    * uim/uim-util.c
      - (sys_libdir, sys_datadir): New static function
      - (uim_init_util_subrs): Add Scheme procedure initialization of
        sys-libdir and sys-datadir
    * scm/plugin.scm
      - (uim-plugin-lib-load-path): Fix hardcoded system libraries
        directory with sys-libdir
      - (uim-plugin-lib-load-path): Fix hardcoded system data directory
        with sys-datadir

2005-01-07 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/slib.c
      - (gc_cells_sweeped): Rename to gc_cells_swept
      - (gc_cells_swept): Renamed from gc_cells_sweeped
      - (gc_sweep, gc_ms_stats_end, siod_init): Follow the renaming

2005-01-07 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit adds new attribute editor_type to custom value of type
      'key'. This instructs widget type of the custom variable. uim-pref
      should passively reflect the attribute to select the type of
      widget. custom.scm will control the type
    
    * uim/uim-custom.h
      - (enum UCustomKeyEditorType): New enum
      - (struct uim_custom_key): Add new member editor_type
      - (uim_custom_key_new): Add new arg editor_type
    * uim/uim-custom.c
      - (uim_custom_choice_new, uim_custom_key_new): Remove redundant
        prototype declaration
      - (uim_custom_key_get, uim_custom_key_new): Add initialization of
        editor_type

2005-01-07 Takuro Ashie <ashie@homa.ne.jp>

    * helper/pref-gtk.c: Added confirm dialog.

2005-01-07 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit adds new custom types support ordered list and key. But
      still not working since corresponding custom.scm part is lacking
    
    * uim/uim-custom.h
      - Update copyright
      - (uim_custom_choice_new, uim_custom_key_new): Remove const
        specifier of args
    * uim/uim-custom.c
      - (c_list_to_str, extract_choice_symbol, choice_list_to_str,
        uim_custom_choice_new, uim_custom_olist_get,
        uim_custom_olist_item_list, uim_custom_key_get,
        uim_custom_key_new, uim_custom_key_free, extract_key_literal,
        key_list_to_str, uim_custom_key_list_free): New static function
      - (uim_custom_type, uim_custom_value_internal,
        uim_custom_value_free, uim_custom_range_get,
        uim_custom_range_free, uim_custom_set, ): Add support for new
        custom types ordered list and key
      - (uim_custom_choice_get): Replace an uim_custom_choice construction
        with uim_custom_choice_new()
      - (uim_custom_choice_free): Add error handling
      - (extract_choice_list): New function. Most of implementation is
        moved from uim_custom_choice_item_list()
      - (uim_custom_choice_item_list): Simplify with extract_choice_list()
      - (uim_custom_cb_add): Cast update_cb to (void *) to relax warning

2005-01-07 Takuro Ashie <ashie@homa.ne.jp>

    * helper/pref-gtk.c
      - (create_pref_treeview): Use label instead of symbol for group name
        on tree view.

2005-01-07 Takuro Ashie <ashie@homa.ne.jp>

    * scm/custom.scm: Replaced N_ with _.
    * scm/POTFILES.in, po/ja.po: Updated.

2005-01-07 Takuro Ashie <ashie@homa.ne.jp>

    * uim/uim-custom.c
      - (uim_custom_set): Quote the UCustom_Str type value to bound.
        Now UCustom_Str type value can be saved, but I'm now wondering
        whether the text should be sanitized more strictly or not.

2005-01-07 Takuro Ashie <ashie@homa.ne.jp>

    * configure.ac, helper/Makefile.am:
      Fixed some bugs in detecting gtk+-2.4 issue.

2005-01-07 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit tunes GC frequency of the Scheme interpreter. This
      significantly reduces GC frequency on near-threshold unfortunate
      case
    
    * uim/uim-scm.c
      - Update copyright
      - (uim_scm_init):
        * Add new arg "-t16384" to siod_argv to specify
          heap_alloc_threshold. The value reduces GC frequency, but
          increases memory consumption. This is a tradeoff
        * Move the position of verbose arg to top of siod_argv to
          stabilize index even if new arg is added
    * uim/slib.c
      - (heap_alloc_threshold, gc_cells_sweeped): New static variable
      - (gc_sweep): Update gc_cells_sweeped
      - (gc_ms_stats_end): Show new statistics items gc_cells_sweeped,
        number of heaps and map number of heaps
      - (gc_for_newcell):
        * Simplify detection of length of freelist
        * Refer heap_alloc_threshold to determine whether new heap is
          required or not
      - (siod_init):
        * Add initialization of heap_alloc_threshold and
          gc_cells_sweeped. heap_alloc_threshold keeps original hardcoded
          value 100
        * Add parsing of new option '-t' (heap_alloc_threshold)

2005-01-06 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * configure.ac, helper/Makefile.am:
     Require GTK+ 2.2 for GTK+ immodule, require GTK+ 2.4 for uim-pref-gtk.
     I don't test that it really works on GTK+ 2.2 environment and I have
     no will to support that. Report is welcome if patch is applied.

2005-01-06 Masahito Omote <omote@utyuuzin.net>

    * Old plugin implementation is dropped.
      - uim/m17nlib.c, uim/anthy.c: Remove #ifndef NEW_UIM_PLUGIN sections.
      - plugin.c: Remove #ifndef sections.
      - plugin.h: Remove #ifndef NEW_UIM_PLUGIN sections and remove NEW_UIM_PLUGIN.

2005-01-06 Masahito Omote <omote@utyuuzin.net>

    * uim/plugin.c
      - Use path_car for the exit condition from loops instead of path_cdr.
      - (plugin_load): Fix a misimplementation of plugin_scm_filename.

2005-01-06 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit tunes Scheme interpreter configuration
    
    * uim/uim-scm.c
      - (uim_scm_init):
        * Change heap size and nheaps from 100000:10 to 16384:64 to allow
          fine grained memory allocation. This reduces memory consumption
          of the process
        * Change obarray_dim (hash size of symbol table) from 1000 to 1024
          to reduce calculation time of hash value (may affect very low
          power processor)
        * Change stack_size from 200000 to 262144 (256KB). This only
          affects maixmum size of GC sweep on stack

2005-01-06 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/util.scm
      - (iterate-lists):
        * Replace map with mapcar to implement map
        * Remove recursion invocation redundancy
      - (map): Support 4 or more lists as argument by new implementation
        using iterate-lists. Use native mapcar when the lists is up to
        3. Thanks TOKUNAGA Hiroyuki for fast mapcar3 implementation
      - (for-each): Replace mapcar with map to support arbitrary length of
        list arguments
    * test/test-util.scm
      - (test map): Add 2 cases for 3 and 4 lists of argument
    
    * scm/plugin.scm
      - Comment out print debug form to run testing framework

2005-01-06 Masahito Omote <omote@utyuuzin.net>

    * uim/plugin.c (plugin_load): Fix typo.

2005-01-06 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * uim/slib.c:
     - (mapcar3): Argument of fcn should be cdr of each lists.

2005-01-06 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * uim/slib.c: Mapcar3 was implemented (It's used from custom.scm)
     -(mapcar3): New function.

2005-01-06 Takuro Ashie <ashie@homa.ne.jp>

    * helper/pref-gtk.c
      - (add_custom_type_choice): Use custom->value instead of
        custom->default_value to set default value.
        Now UCustom_Choice seems work correctly.

2005-01-06 Takuro Ashie <ashie@homa.ne.jp>

    * pref-gtk.c
      - (add_custom_type_choice): Fixed wrong string comparison to set
        default item of combo box.

2005-01-06 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * uim/plugin.c: This commit simplify plugin_load, but behavior would
      not be changed.
     -(plugin_load): Use uim_scm_car and uim_scm_cdr instead of
     __uim_scm_c_str_list.
     -(__uim_scm_c_list):      Removed because it's no longer needed.
     -(__uim_scm_c_str_failsafe): Removed because it's no longer needed.
     -(__uim_scm_c_str_list):  Removed because it's no longer needed.
     -(__uim_scm_c_list_free): Removed because it's no longer needed.

2005-01-06 Takuro Ashie <ashie@homa.ne.jp>

    * helper/pref-gtk.c
      - Enabled to save custom value, but it doesn't work yet correctly
        except UCustom_Bool and UCustom_Int.

2005-01-06 Etsushi Kato <ek.kato@gmail.com>

    * uim/uim.c (load_conf) : Fix r127 and r128 bug.

2005-01-06 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * scm/Makefile.am: Added plugin.scm

2005-01-05 Masahito Omote <omote@utyuuzin.net>

    * This commit contains the changes of the searching way of plugins. But due to
      not mergeed uim_scm_c_list functions to uim-scm.c and for backward
      compatibility, new code is disabled by default. If you want to enable this,
      uncomment '#define NEW_UIM_PLUGIN 1' in uim/plugin.h.
    * scm/plugin.scm: New file including the default search path of plugins.
    * uim/plugin.h:
      - Update copyright.
      + (_uim_plugin_info):
      - (plugin_instance_init): Change the member's names from plugin_init.
      - (plugin_instance_quit): Change the member's names from plugin_quit.
    * uim/plugin.c:
      - Update copyright.
      - (__uim_scm_c_list): New function from uim-custom.c for getting string list
        from scheme variable. This code has a difference with original code.
        uim_scm_c_list does not work if lists' variables are just a array of
        strings.
      - (__uim_scm_c_str_failsafe): Ditto.
      - (__uim_scm_c_str_list): Ditto.
      - (__uim_scm_c_list_free): Ditto.
      + (plugin_load):
        - Drop a hardcode of searching path.
        - Get search path from scheme variable. 'uim-plugin-lib-load-path' is
          for shared libraries and 'uim-plugin-scm-load-path' is for scheme.
      + (uim_init_plugin):
        - Drop a hardcode of searching path.
        - (uim_plugin_instance_query): New function.
    * uim/anthy.c, uim/m17nlib.c:
      - #include "plugin.h"
      - (uim_plugin_instance_init): New function for replacing plugin_init.
      - (uim_plugin_instance_quit): Ditto.
      - Update copyright.
    * uim/uim.c:
      - Update copyright.
      - (uim_init_scm): Load "plugin.scm" after "im.scm".
    * uim/uim-compat-scm.c: Update copyright.

2005-01-05 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit adds new custom types 'key' and 'ordered list' to custom
      API. Let me know how do you think about the
      interfaces. Corresponding implementations will follow soon
    
    * uim/uim-custom.h
      - (enum UCustomType): Add UCustom_OrderedList
      - (enum UCustomKeyType): New enum
      - (union uim_custom_value): Add new member as_olist and as_key
      - (struct uim_custom_key): New type
      - (union uim_custom_range): Add new member as_olist
      - (uim_custom_choice_new, uim_custom_choice_list_free,
         uim_custom_key_new, uim_custom_key_list_free): New function
    * uim/uim-custom.c
      - (uim_custom_choice_list_free): Remove static specifier to be API
         function

2005-01-05 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit exposes preliminary Scheme->C list representation
      conversion functions. These interfaces are not yet stable and may be
      altered in near future. Be careful to use.
    
    * uim/uim-custom.c
      - (uim_scm_c_list_conv_func, uim_scm_c_list_free_func): Move to
        uim-compat-scm.[hc]
      - (uim_scm_c_list, uim_scm_c_str_failsafe, uim_scm_c_str_list,
        uim_scm_c_list_free): Move to uim-compat-scm.[hc]
    * uim/uim-compat-scm.h
      - (uim_scm_c_list_conv_func, uim_scm_c_list_free_func): Moved from
        uim-custom.c
      - (uim_scm_c_list, uim_scm_c_str_failsafe, uim_scm_c_str_list,
        uim_scm_c_list_free): Moved from uim-custom.c
    * uim/uim-compat-scm.c
      - (return_val): New variable
      - (uim_init_compat_scm_subrs): Add initialization of return_val
      - (uim_scm_c_list_conv_func, uim_scm_c_list_free_func): Moved from
        uim-custom.c
      - (uim_scm_c_list, uim_scm_c_str_failsafe, uim_scm_c_str_list,
        uim_scm_c_list_free): Moved from uim-custom.c

2005-01-05 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * uim/uim.c:
     -(uim_init): Removed calling of uim_init_anthy.
     -(uim_quit): Removed calling of uim_quit_anthy.
    
    * uim/anthy.c: Splitted from core library.
     - All 'LISP' was replaced with 'uim_lisp'.
     - All strcons was replaced with uim_scm_make_str.
     - All intcons was replaced with uim_scm_make_int.
    
    * scm/loader.scm:
      - Removed (require "anthy.scm")
      - Added (load-plugin "anthy")

2005-01-05 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim.c
      - Include stdio.h for fopen
      - (load_conf): Add lacking local variable decl to fix previous
        commit

2005-01-05 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim.c
      - (load_conf): Restore file existence check to suppress "No such
        file or directory" error message. Thanks UTUMI Hirosi for
        reporting

2005-01-05 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/m17nlib.scm
      - (m17nlib-on-key?, m17nlib-off-key?): Add quote to
        generic-{on,off}-key? to allow reflect runtime redefinition of
        generic-{on,off}-key?. See rule 8 of doc/KEY to recognize what
        quote means (what is different between closure and symbol for arg
        of define-key)

2005-01-05 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * helper/pref-gtk.c:
     -(custom_pathname_button_clicked_cb): Fixed a warning.
     -(add_custom_type_pathname) Fixed a warning.

2005-01-05 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * helper/pref-gtk.c: Implemented filename specify dialog.
     -(custom_pathname_button_clicked_cb): New function.

2005-01-05 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * helper/im-swicther-gtk.c:
     -(grouped): Removed because it was an unused variable.
     -(change_input_method): Fixed wrong case label.

2005-01-05 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * helper/pref-gtk.c:
     -(create_pref_treeview): Select first group initially.

2005-01-05 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * helper/pref-gtk.c:
     -(create_group_widget): Fixed a memory leak.

2005-01-04 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * helper/pref-gtk.c:
     -(add_custom_type_pathname),(create_group_widget): Fixed warnings.

2005-01-04 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * configure.ac: Changed to require GTK+ 2.4.

2005-01-04 kzk <mover@hct.zaq.ne.jp>

    * helper/pref-gtk.c
      - create each group's widget at startup and store it to tree_store
      - rename (create_pref_widget) to (create_group_widget)
      - remove "GtkWidget *pref_widget"
    
      - FIXME: we should select "global" section initially, but how can i
        do this? I don't have enough knowledge about gtk...

2005-01-04 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim.c
      - (uim_get_default_im_name, uim_get_im_name_for_locale): Fix old and
        invalid 'default' IM for fallback with 'direct' IM in accordance
        with the renaming. But this fallback will never happen

2005-01-04 Masahito Omote <omote@utyuuzin.net>

    * doc/PLUGIN: New file. But it is not written yet.
    * doc/00INDEX: Add PLUGIN.
    * uim/uim-scm.c (uim_scm_require_file): Remove '#if 0' section.

2005-01-04 Etsushi Kato <ek.kato@gmail.com>

    * xim/compose.cpp : Remove mb to wc conversion.
    * xim/compose.h (_DefTree) : Remove wc member.

2005-01-04 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit replaces Siod-dependent Scheme interface codes
      with equivalent one using uim-scm API, and reorganizes Scheme
      interpreter interface codes into appropriate files. Most of
      Siod dependent codes are encapsulated into uim-scm and
      uim-compat-scm. Following dependency is remaining:
    
      - Some rk-related functions in uim-util.c is still using raw
        Siod functions. But these functions will be removed when new
        rk replacement has become
    
      - Some optional files (prime.c, skk-dic.c, uim-table.c,
        cannca.c and anthy.c) are still using raw Siod and obsolete
        uim-compat-scm functions. siod.h should be excluded first to
        acquire Siod independency. But I will not do it near
        future. Anyone?
    
    * uim/context.h
      - Remove #include "siod.h"
      - (UIM_EVAL_STRING_INTERNAL): Replace repl_c_string() with
        uim_scm_eval_c_string()
      - (uim_init_scm_subrs): Rename to uim_scm_init() since the
        function does not perform subr initialization
      - (uim_scm_init):
        * Renamed from uim_init_scm_subrs()
        * Add a new arg verbose_level
      - (uim_scm_quit): New function
      - (uim_init_m17nlib, uim_quit_m17nlib): Remove unused
        prototype decl
      - (uim_get_c_string): Move to uim-compat-custom.h
      - (uim_key_sym_to_int): Move to uim-key.c
      - (uim_schedule_cb): Enclose into #ifdef UIM_CALLBACK_QUEUE
    * uim/uim-scm.h
      - (uim_scm_is_alive, uim_scm_set_lib_path): New function
    * uim/uim-scm.c
      - Include stdio.h and ctype.h for moved functions
      - (uim_siod_fatal, uim_output): Static variables moved from uim.c
      - (uim_scm_get_output, uim_scm_set_output, exit_hook): Moved
        from uim.c
      - (uim_scm_is_alive, uim_scm_set_lib_path, uim_scm_quit): New
        function
      - (uim_init_scm_subrs): Rename to uim_scm_init() since the
        function does not perform subr initialization
      - (uim_scm_init):
        * Renamed from uim_init_scm_subrs()
        * Add a new arg verbose_level
        * Move Siod interpreter initialization code from
          uim_init_scm() of uim.c and cleaned up
    * uim/uim-compat-scm.h
      - (uim_get_c_string): Moved from context.h
      - (uim_scm_init_fsubr): New function
    * uim/uim-compat-scm.c
      - Include stdlib.h and string.h for moved functions
      - (uim_get_c_string):
        * Moved from uim-util.c
        * Replace LISP with uim_lisp
      - (uim_scm_init_fsubr): New function
    * uim/uim-util.c
      - (uim_get_c_string): Move to uim-compat-custom.c
    * uim/uim-func.c
      - Remove #include "siod.h"
      - (uim_eval_string): Replace repl_c_string() with uim_scm_eval_c_string()
    * uim/uim.c
      - Remove stdio.h and ctype.h for moved functions
      - (siod_verbose_level): Remove extern decl
      - (uim_siod_fatal, uim_output): Static variables moved to uim-scm.c
      - (uim_scm_get_output, uim_scm_set_output, exit_hook): Moved
        to uim-scm.c
      - (uim_create_context): Replace uim_siod_fatal with !uim_scm_is_alive()
      - (load_conf): Simplify and make Siod independent by uim-scm API
      - (uim_init_scm): Move Siod interpreter initialization code to
        uim_scm_init() of uim-scm.c
      - (uim_init): Move uim_output handling to uim_scm_init()
      - (uim_quit): Move uim_output handling and Siod finalization
        to uim_scm_quit()
    
    * uim/uim-key.c
      - Include uim.h, uim-scm.h and uim-compat-scm.h to follow
        Siod-related header file reorganization
      - (uim_key_sym_to_int):
        * Commented out by #if 0 since unused. prototype declaration
          is also moved into #if 0 from context.h
        * Replace LISP with uim_lisp
        * Replace combination of uim_get_c_string() and free() with
          uim_scm_refer_c_str()
      - (define_key): Rewrite by uim-scm API functions instead of
        raw Siod functions
      - (uim_init_key_subrs): Replace init_fsubr() with uim_scm_init_fsubr()
    
    * uim/prime.c
    * uim/skk-dic.c
    * uim/uim-table.c
    * uim/canna.c
    * uim/anthy.c
      - Include uim-scm.h, uim-compat-scm.h, and siod.h to follow
        Siod-related header file reorganization. siod.h should be
        excluded to acquire Siod independency

2005-01-03 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit replaces Siod-dependent Scheme interface codes with
      equivalent one using uim-scm API.
    
    * uim/uim-scm.h
      - (uim_scm_refer_c_str, uim_scm_consp, uim_scm_integerp,
        uim_scm_stringp): New function
    * uim/uim-scm.c
      - (uim_scm_refer_c_str, uim_scm_consp, uim_scm_integerp,
        uim_scm_stringp): New function
      - (uim_scm_c_str): Rewrite the implementation using
        uim_scm_refer_c_str()
    * uim/uim-util.c
      - (string_equal, charcode2string, string2charcode, digit2string,
        nthcdr, str_seq_equal, str_seq_partial, rk_find_seq,
        rk_find_partial_seq, rk_expect_seq, c_getenv, c_setenv,
        c_unsetenv, eucjp_string_to_list, lang_code_to_lang_name_raw):
        * Replace LISP with uim_lisp
        * Replace false_sym with uim_scm_f()
        * Replace true_sym with uim_scm_t()
        * Replace INTNUMP() with uim_scm_integerp()
        * Replace INTNM() with uim_scm_c_int()
        * Replace get_c_int() with uim_scm_c_int()
        * Replace intcons() with uim_scm_make_int()
        * Replace STRINGP() with uim_scm_stringp()
        * Replace get_c_string() with uim_scm_refer_c_str()
        * Replace strcons() with uim_scm_make_str()
        * Replace NIL with uim_scm_null_list() or uim_scm_f() appropriately
        * Replace NULLP() and NNULLP() with uim_scm_nullp()
        * Replace CAR() with uim_scm_car() or uim_scm_caar()
        * Replace CDR() with uim_scm_cdr()
        * Replace cons() with uim_scm_cons()
      - (uim_strsplit): Make args and local variables const
      - (uim_split_string):
        * Replace invalid NULL checks for LISP (should test whether #f or
          not) with more strict uim_scm_stringp()
        * Replace LISP with uim_lisp
        * Replace NIL with uim_scm_null_list()
        * Replace false_sym with uim_scm_f()
        * Replace get_c_string() with uim_scm_refer_c_str()
      - (uim_init_util_subrs):
        * Replace init_subr_1() with uim_scm_init_subr_1()
        * Replace init_subr_2() with uim_scm_init_subr_2()
        * Replace init_subr_3() with uim_scm_init_subr_3()
    * uim/uim-func.c
      - Include uim-scm.h
      - (retrieve_uim_context, im_clear_preedit, im_pushback_preedit,
        im_update_preedit, im_commit, im_commit_raw, im_get_raw_key_str,
        im_clear_mode_list, im_pushback_mode_list, im_update_mode_list,
        im_update_mode, get_im_lang, im_activate_candidate_selector,
        im_select_candidate, im_shift_page_candidate,
        im_deactivate_candidate_selector, im_request_surrounding,
        im_delete_surrounding):
        * Replace LISP with uim_lisp
        * Replace false_sym with uim_scm_f()
        * Replace true_sym with uim_scm_t()
        * Replace INTNUMP() with uim_scm_integerp()
        * Replace INTNM() with uim_scm_c_int()
        * Replace get_c_int() with uim_scm_c_int()
        * Replace intcons() with uim_scm_make_int()
        * Replace STRINGP() with uim_scm_stringp()
        * Replace get_c_string() with uim_scm_refer_c_str()
        * Replace strcons() with uim_scm_make_str()
        * Replace NIL with uim_scm_null_list() or uim_scm_f() appropriately
        * Replace NULLP() and NNULLP() with uim_scm_nullp()
        * Replace CONSP() with uim_scm_consp()
        * Replace CAR() and car() with uim_scm_car() or uim_scm_caar()
        * Replace CDR() and cdr() with uim_scm_cdr()
        * Replace cons() with uim_scm_cons()
      - (im_set_encoding, im_update_prop_list, im_update_prop_label):
        * Replace combination of uim_get_c_string() and free() with
          uim_scm_refer_c_str()
        * Replace LISP with uim_lisp
        * Replace false_sym with uim_scm_f()
      - (im_register_im):
        * Replace combination of get_c_string() and strdup() with
          uim_scm_c_str()
        * Replace get_c_string() with uim_scm_refer_c_str()
        * Replace LISP with uim_lisp
        * Replace false_sym with uim_scm_f()
        * Replace true_sym with uim_scm_t()
      - (im_return_str, im_return_str_list):
        * Replace uim_get_c_string() with uim_scm_c_str()
        * Replace LISP with uim_lisp
        * Replace false_sym with uim_scm_f()
        * Replace STRINGP() with uim_scm_stringp()
        * Replace NULLP() and NNULLP() with uim_scm_nullp()
        * Replace CAR() and car() with uim_scm_car() or uim_scm_caar()
        * Replace CDR() and cdr() with uim_scm_cdr()
      - (uim_init_im_subrs):
        * Replace init_subr_1() with uim_scm_init_subr_1()
        * Replace init_subr_2() with uim_scm_init_subr_2()
        * Replace init_subr_3() with uim_scm_init_subr_3()
        * Replace init_subr_4() with uim_scm_init_subr_4()

2005-01-03 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit adds C pointer type object to Siod interpreter, and
      implements flexible per-custom-variable callback using the pointer
      object feature. All codes are not tested yet.
    
    * uim/siod.h
      - (struct obj): Add new union member c_pointer
      - (tc_c_pointer, POINTERP): New macro
      - (get_c_pointer, ptrcons): New function
    * uim/slib.c
      - (get_c_pointer, ptrcons): New function
      - (pointer_prin1): New static function
      - (init_storage): Add initialization of print hook for tc_c_pointer
      - (ltypeof): Add case tc_c_pointer
    * uim/uim-scm.h
      - (uim_scm_c_ptr, uim_scm_make_ptr): New function
    * uim/uim-scm.c
      - (uim_scm_c_ptr, uim_scm_make_ptr): New function
    
    * uim/uim-custom.h
      - (uim_custom_cb_set): Renamed to uim_custom_cb_add()
      - (uim_custom_cb_add): Renamed from uim_custom_cb_set()
      - (uim_custom_cb_remove): New function
    * uim/uim-custom.c
      - (uim_custom_cb_update_cb_t): New type
      - (uim_custom_init): Add registration of custom-update-cb-gate
      - (uim_custom_quit): Add removal of all registered callbacks
      - (uim_custom_cb_update_cb_gate, uim_custom_cb_remove): New function
      - (uim_custom_cb_set): Renamed to uim_custom_cb_add()
      - (uim_custom_cb_add):
        * Renamed from uim_custom_cb_set()
        * Implemented
    * scm/custom.scm
      - (custom-update-hook): New variable
      - (custom-remove-hook, custom-register-update-cb): New procedure
      - (custom-set!): Add update callback handlings

2005-01-03 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-custom.c
      - (uim_custom_type): Cosmetic change to conform to standard coding
        style
    * uim/uim-compat-scm.c
      - (uim_scm_int_from_c_int, uim_symbol_value_str,
        uim_scm_str_from_c_str, uim_scm_c_strs_into_list, uim_scm_quote,
        uim_scm_nth, uim_scm_list1, uim_scm_list2, uim_scm_list3,
        uim_scm_list4): Ditto
    * uim/uim-scm.c
      - (uim_scm_t, uim_scm_f, uim_scm_null_list, uim_scm_nullp,
        uim_scm_eq, uim_scm_string_equal, uim_scm_eval,
        uim_scm_eval_c_string, uim_scm_car, uim_scm_cdr, uim_scm_cadr,
        uim_scm_caar, uim_scm_cdar, uim_scm_cddr, uim_scm_cons,
        uim_scm_require_file): Ditto
    * uim/uim.c
      - (uim_scm_get_output, uim_scm_set_output, uim_switch_im): Ditto

2005-01-03 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/loader.scm
      - Replace the plugin name "libuim-m17nlib" with "m17nlib" to enable
        autoloading of m17nlib.scm by uim/plugin.c
      - Remove (require "m17nlib.scm")
      - Replace the plugin name "libuim-scim.so" with "scim" to enable
        autoloading of m17nlib.scm by uim/plugin.c
      - Remove (require "scim.scm")
    * uim/plugin.c
      - (PLUGIN_PREFIX): New macro
      - (plugin_load): Rewrite plugin name composition using
        PLUGIN_PREFIX. This enables autoloading of
        <pluginname>.scm. Previous implementation was trying to load
        libuim-<pluginname>.scm.

2005-01-03 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-custom.c
      - (uim_custom_init): Add initialization of return_val
    
    * uim/uim-compat-scm.c
      - (uim_scm_symbol_value_int): Replace NNULLP() with NFALSEP() to
          remove Siod dependency
      - (uim_scm_c_strs_into_list, uim_scm_symbol_value): Cast LISP values
        to uim_lisp to suppress warnings
      - (uim_init_compat_scm_subrs): uim_scm_gc_protect(&quote_sym)
    
    * uim/uim-scm.c
      - (uim_scm_c_int, uim_scm_c_str): Add uim_scm_gc_protect_stack()
        required for my_err()
      - (uim_scm_eval): Remove redundant #ifdef UIM_SCM_NESTED_EVAL
      - (uim_init_scm_subrs):
        * Add initialization of protected_arg0
        * Move uim_scm_gc_protect() to after value initialization

2005-01-03 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/slib.c
      - (repl_driver): Fix exception frame handling on NESTED_REPL_C_STRING
    
    * uim/uim-scm.h
      - (uim_scm_require_file): New API function
    * uim/uim-scm.c
      - (uim_scm_require_file):
        * Replace the implementation with an equivalent one using
          UIM_EVAL_FSTRING2(). The old implementation is preserved in #if
          0 block for fallback
        * Add uim_scm_gc_protect_stack() to old implementation

2005-01-03 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/loader.scm
      - Replace the plugin name "libuim-m17nlib.so" with "libuim-m17nlib"
        to conform to recent platform-dependent plugin suffix support in
        uim/plugin.c

2005-01-03 Etsushi Kato <ek.kato@gmail.com>

    * xim/compose.cpp (XimIM::parse_compose_line) : Renamed from
      XimIM::parseline.  Fix minor bug in terminating locale_utf8_buf
      for special case.
    (XimIM::ParseComposeStringFile) : Renamed from
      XimIM::XimParseStringFile.
    (mb_string_to_utf8) : Return 0 not NULL and terminate buffer if it
      fails to convert string.
    * xim/xim.h (class XimIM) : Rename parseline member into
      parse_compose_line.  Rename XimParseStringFile member to
      ParseComposeStringFile.

2005-01-03 Etsushi Kato <ek.kato@gmail.com>

    * uim/plugin.c (uim_init_plugin) : Avoid SEGV if user doesn't set
      LIBUIM_PLUGIN_LIBDIR and/or LIBUIM_SCM_FILES.
    * xim/compose.cpp : Cosmetic change.

2005-01-03 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-compat-scm.c
      - (uim_scm_symbol_value_int): Protect caller stack from GC
      - (uim_scm_symbol_value_str):
        * Protect caller stack from GC
        * replace NNULLP() with NFALSEP() to remove Siod dependency

2005-01-03 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit fixes the SEGV on mlterm-2.9.1 reported in [Anthy-dev
      1531] by Kazuki Ohta. Thanks for reporting.
    
    * uim/uim-func.c
      - (im_update_prop_list):
        * Fix invalid callback invocation position
        * Add error handling for the case uc == NULL
      - (im_update_prop_label): Fix invalid callback invocation position

2005-01-03 Etsushi Kato <ek.kato@gmail.com>

    * xim/helper.cpp (helper_str_parse) : Support "commit_string" and
      "prop_update_custom".
    * xim/ximserver.h (class InputContext) : Change return type of
      extra_input().  Add new member customContext().
    (class XimServer) : Add new member customContext().
    * xim/ximserver.cpp (XimServer::customContext) : New function.
      Call customContext() of all InputContext.
    (InputContext::customContext) : Do uim_prop_updatre_custom().
    (InputContext::extra_input) : Call XimIC's extra_input().
    * xim/ximic.cpp (extra_input) : Check string.

2005-01-03 Masahito Omote <omote@utyuuzin.net>

    * This commit changes plugin's loading behavior. You have to specify prefix of
      plugin's filename instead of the filename of shared library.
    * uim/uim-scm.c(uim_scm_require_file): New function for wrapping 'require'.
    * uim/plugin.c: Support search path(not completed and very ad-hoc) and loading
      '.scm' file at the same time.
      - (uim_init_plugin): Support search path.
      - (plugin_load): Support search path and loading '.scm' after plugin's
        initialization is finished.

2005-01-02 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * uim/anthy.c:
     - all siod_true_value was replaced with uim_scm_t.
     - all siod_false_value was replaced with uim_scm_f.
     This is for modulizing of input method.

2005-01-02 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * helper/pref-gtk.c:
     - (create_setting_button_box): Added apply button.

2005-01-02 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * helper/pref-gtk.c:
     - (create_setting_button_box): New function.
     - (create_pref_widget): Added calling of create_setting_button_box.

2005-01-02 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * helper/pref-gtk.c: New file. Source file for uim-pref-gtk.

2005-01-02 Masahito Omote <omote@utyuuzin.net>

    * uim/uim.c(uim_get_candidate): Initialize as 0. Because cand->anontate is not
      used in some IMs such as anthy and canna, free(cand->annotation) makes segv.

2005-01-02 Masahito Omote <omote@utyuuzin.net>

    * uim/plugin.c: Change indent. This change does not effect plugin's behavior
      at all. Only for better viewing of diffs.

2005-01-02 Etsushi Kato <ek.kato@gmail.com>

    * xim/compose.h (class Compose) : New public member reset().
    * xim/compose.cpp (Compose::reset) : New function.  Reset compose
      state.
    * xim/ximic.cpp (XimIC::reset_ic) : Reset key state.
    * xim/ximserver.h (class keyState) : New public member reset().
    * xim/ximserver.cpp (keyState::reset) : Reset modifier key and
      compose state.

2005-01-01 Etsushi Kato <ek.kato@gmail.com>

    * configure.ac : Define X11 library directory.
    * xim/compose.cpp : Use configure time defined path for
      compose.dir and Compose.

2005-01-01 Etsushi Kato <ek.kato@gmail.com>

     * xim/convdisp.cpp (check_atr) : Set default line_space as 16.
     * ximic.cpp (icxatr::icxatr) : Initialize line_space.

2005-01-01 Etsushi Kato <ek.kato@gmail.com>

    * xim/xim.h : Add compose key support.  Include "compose.h".
    (class XimIM) : Add create_compose_tree() and get_compose_tree()
      public members.  Add get_compose_filename(), TransFileName(),
      XimParseStringFile(), FreeComposeTree(), parseline(),
      get_mb_string(), and mTreeTop members for protected.
    (class XimIC) : Use dynamic m_keyState member.
    * xim/compose.cpp : New file for compose key support from X11's
      imLocal.
    (Compose::Compose) : Constructor of Compose class.
    (Compose::~Compose) : Destructor of Compose class.
    (Compose::handleKey) : Compose key handling.  Return true if key
      is matched with compose tree and commit composed string.
    (nextch) : New.
    (nexttoken) : New.
    (modmask) : New.
    (XimIM::TransFileName) : Return filename of included compose file.
    (XimIM::get_mb_string) : New.
    (XimIM::parseline) : Parse lines of compose file.
    (XimIM::XimParseStringFile) : Parse compose file and create
      compose tree.
    (XimIM::create_compose_tree) : Check existence of compose file and
      parse it.
    (XimIM::get_compose_tree) : Return pointer of compose tree.
    (XimIM::get_compose_filename) : Return compose file name with
      corresponding locale from compose.dir.
    (parse_line) : Parse compose.dir file.
    (KeySymToUcs4) : New.
    (mb_string_to_utf8) : Convert parsed composed string into utf-8.
    * xim/compose.h : New file.
    (_DefTree) : Compose Tree struct.
    (class Compose) : Compose key state class.
    * xim/ximim.cpp (XimIM_impl::create_ic) : Create compose tree
      with first XimIC.
    (XimIM::XimIM) : Initialize mTreeTop.
    (XimIM::FreeComposeTree) : New function.  Clear compose tree.
    * xim/ximserver.cpp (InputContext::pushKey) : Handle compose key.
    (keyState::keyState) : Construct with XimIC information and create
      mCompose.
    (keyState::~keyState) : Delete mCompose.
    (keyState::check_key) : Set X's key information.  Don't forward
      deadkeys and Multi_key to libuim.
    (keyState::check_compose) : New function.  Return true if key is
      used for compose.
    (keyState::xkeysym) : New function.
    (keyState::xkeystate) : New function.
    * xim/ximserver.h : Include "compose.h".
    (class keyState) : Add check_compose(), xkeysym(), and xkeystate()
      members for public.  Add mXKeySym, mXKeyState, mCompose, and mIc
      members for private.
    * xim/ximic.cpp (XimIC::XimIC) : Allocate m_keyState.
    (XimIC::~XimIC) : Delete m_keyState.
    * xim/Makefile.am : Add compose.{cpp,h} into uim_xim_SOURCES.
    * xim/locale.cpp (utf8_to_native_str) : Don't copy original
      string.

2004-12-31 kzk <mover@hct.zaq.ne.jp>

    * helper/toolbar-standalone-gtk.c
      - #include <locale.h> for LC_ALL symbol

2004-12-30 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit removes callback queue from libuim to simplify the
      internal implementation. Whether use the callback queue or not is
      still configurable at compile time:
    
      - The old code using callback queue
    
        configure --disable-scm-nested-eval --enable-callback-queue
    
      - The new simplified code without callback queue
    
        configure --enable-scm-nested-eval --disable-callback-queue
    
      - The new simplified code without callback queue, but sometime
        crashes the application process. Exist only for testing purpose
    
        configure --disable-scm-nested-eval --disable-callback-queue
    
      Please test the second configuration. The second will be default for
      uim 0.4.6 if no fatal behavior is reported. After 0.4.6, the old
      codes enclosed by #ifdef UIM_CALLBACK_QUEUE will be removed to
      prepare further libuim simplification. If the callback queue is
      completely gone, we can simplify other codes affected by the
      callback queue such as uim_eval_string()
    
    * configure.ac
      - Add new option --disable-callback-queue
    
    * uim/context.h
      - (struct cb_q, struct cb, an anonymous enum): Enclose with #ifdef
        UIM_CALLBACK_QUEUE
      - (struct uim_context_): Enclose a member cb_q with #ifdef
        UIM_CALLBACK_QUEUE
    * uim/uim.c
      - (uim_create_context): Enclose uc->cb_q initialization with #ifdef
        UIM_CALLBACK_QUEUE
    * uim/uim-func.c
      - (uim_flush_cb, uim_schedule_cb): Enclose with #ifdef
        UIM_CALLBACK_QUEUE
      - (uim_eval_string): Enclose callback queue handling with #ifdef
        UIM_CALLBACK_QUEUE
      - (im_clear_preedit, im_pushback_preedit, im_update_preedit,
        im_commit, im_update_mode_list, im_update_prop_list,
        im_update_prop_label, im_update_mode,
        im_activate_candidate_selector, im_select_candidate,
        im_shift_page_candidate, im_deactivate_candidate_selector,
        im_request_surrounding, im_delete_surrounding):
        * Enclose callback queue handling with #ifdef UIM_CALLBACK_QUEUE
        * Add direct callback invocation for #ifndef UIM_CALLBACK_QUEUE

2004-12-30 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/slib.c
      - (repl_driver): Add lacking siod_gc_unprotect_stack() to fix
        NESTED_REPL_C_STRING support

2004-12-30 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * xim/ximserver.cpp: Include Xlib.h before Xutil.h.
      Thanks to Mike Castle <dalgoda@ix.netcom.com>.

2004-12-30 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit adds nested Scheme evaluation feature described
      below. The feature will be enabled by default once tested enough.
      - nested Scheme evaluation from C (i.e. C -> Scheme -> C -> Scheme)
      - protect lisp objects on the caller stack from GC
    
    * configure.ac
      - Add new option --enable-scm-nested-eval
    
    * uim/siod.h
      - Add a header comment about lisp object on stack
      - Include config.h
      - Define NESTED_REPL_C_STRING defaults to 0
      - (siod_gc_protect_stack, siod_gc_unprotect_stack): New function
    * uim/slib.c
      - Add a changelog about NESTED_REPL_C_STRING
      - Include config.h
      - Modify a typo in a comment
      - (repl_driver, init_storage, siod_init): Support
        NESTED_REPL_C_STRING
      - (siod_gc_protect_stack, siod_gc_unprotect_stack): New function to
        support NESTED_REPL_C_STRING
    
    * uim/uim-scm.h
      - (uim_scm_gc_protect_stack, uim_scm_gc_unprotect_stack): New
        function
    * uim/uim-scm.c
      - (uim_scm_gc_protect_stack, uim_scm_gc_unprotect_stack): New
        function
      - (uim_scm_eval): Protect stack from GC

2004-12-30 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * configure.ac
      - (AC_CONFIG_FILES): Add examples/Makefile and
        examples/uim-custom/Makefile
    * Makefile.am
      - (SUBDIRS): Add examples
    * examples/Makefile.am
    * examples/uim-custom/Makefile.am
      - New file
      - Add build instructions for uim-custom-{variable,dump,update}
    
    * examples/uim-custom/uim-custom-dump.c
      - Include lacking stdlib.h
    
    * examples/uim-custom/uim-custom-variable.c
      - Include lacking stdlib.h
      - (inspect_custom):
        * Fix invalid type declaration of s_range
        * Add an error case handling to suppress warnings
      - (main): Remove unused variables

2004-12-30 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-custom.c
      - Remove a header comment about error handling
      - Add a header comment about static functions
      - (uim_scm_c_list, uim_scm_c_list_free, uim_custom_choice_get,
        uim_custom_choice_item_list, uim_custom_value_free,
        uim_custom_range_get, uim_custom_range_free, uim_conf_prepare_dir,
        uim_custom_save_group, uim_custom_broadcast, uim_custom_get,
        uim_custom_free, uim_custom_group_get, uim_custom_group_free): Add
        error handlings
      - (uim_custom_type_eq, uim_custom_is_active): Replace NFALSEP with
        uim_scm_c_bool()
      - (uim_custom_set):
        * Add error handlings
        * Replace NFALSEP with uim_scm_c_bool()
      - (uim_custom_value_internal):
        * Add error handlings
        * Replace NFALSEP with uim_scm_c_bool()
        * Move uim_custom_type() to avoid possible return_val overwriting
      - (prepare_dir):
        * Remove an unused variable
        * Cosmetic change
    
    * uim/uim-scm.c
      - (uim_scm_c_int, uim_scm_c_str): Fix wrong cast
      - (uim_scm_load_file): Add a comment

2004-12-30 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-scm.h
      - (uim_scm_load_file): Change return type from void to uim_bool to
        indicate whether succeeded or not
    * uim/uim-scm.c
      - (uim_scm_load_file):
        * Change return type from void to uim_bool to indicate whether
          succeeded or not
        * Return succeeded or not
    
    * uim/uim-custom.c
      - (prepare_dir, uim_custom_load_group): Add error handlings
    
    * uim/uim-custom.h
      - Include uim-scm.h for uim_bool
    * examples/uim-custom/uim-custom-dump.c
    * examples/uim-custom/uim-custom-variable.c
      - Remove #include <uim/uim-scm.h>

2004-12-30 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-custom.c
      - (uim_custom_init, uim_custom_quit, uim_custom_load,
         uim_custom_save, uim_custom_broadcast, uim_custom_get,
         uim_custom_set, uim_custom_free, uim_custom_value_as_literal,
         uim_custom_definition_as_literal, uim_custom_group_get,
         uim_custom_group_free, uim_custom_collect_by_group,
         uim_custom_groups, uim_custom_primary_groups,
         uim_custom_group_subgroups, uim_custom_symbol_list_free,
         uim_custom_cb_set): Add doxygen style description
    * uim/uim-custom.h
      - Remove function specific description
      - Add function group headers

2004-12-30 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-custom.c
      - (uim_custom_choice_list_free): Add lacking static specifier
      - (uim_scm_c_list, uim_scm_c_str_failsafe, uim_scm_c_str_list,
         uim_scm_c_list_free): Make static. Moving to uim-scm.c is
         postponed
    * uim/uim-custom.h
      - Modify some comments

2004-12-30 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * examples/uim-custom/uim-custom-variable.c
      - New file
      - Shows how to modify custom variable
      - (choice_items_to_str, inspect_custom, main): New function

2004-12-29 Masanari Yamamoto <h013177b@ice.nuie.nagoya-u.ac.jp>

    * fep/escseq.c
    -  tcsetattr(STDIN_FILENO, TCSAFLUSH, &tios);
    +  tcsetattr(STDIN_FILENO, TCSANOW, &tios);

2004-12-29 Masanari Yamamoto <h013177b@ice.nuie.nagoya-u.ac.jp>

    * scm/{anthy,canna,skk}.scm
    change the order of {anthy,canna,skk}-input-mode-actions

2004-12-28 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * configure.ac
      - Remove "-O2" from CFLAGS and CXXFLAGS when --enable-debug
    
    * uim/uim-scm.c
      - (protected_arg0): New static variable
      - (uim_scm_c_int, uim_scm_c_str, uim_scm_string_equal): Protect the
        argument from GC by using protected_arg0
      - (uim_init_scm_subrs): Add initialization of protected_arg0
    
    * examples/uim-custom/uim-custom-update.c
      - Fix include path
      - (main): Cosmetic change

2004-12-28 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-custom.c
      - (uim_custom_choice_item_list): Fix mishandled data conversion
    
    * uim/plugin.c
      - (plugin_load): Fix using stdout for error messages with
        stderr. libuim must not break stdout stream of
        applications. Although some uim tools such as uim-sh puts sexps to
        stdout, it uses stdout as an application.
    
    * examples/uim-custom/uim-custom-dump.c
      - New file
      - Shows how to access custom groups and custom variables
      - (dump_custom, dump_group, main): New function

2004-12-28 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * examples
    * examples/uim-custom
      - New directory
    
    * examples/uim-custom/uim-custom-update.c
      - New file
      - Shows Usage of uim_custom_save() and uim_custom_broadcast() of
        custom API
      - (main): New function

2004-12-28 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-scm.h
      - (uim_lisp): Replace actual definition 'void *' with 'struct
        uim_opaque *' to enable compile-time type check
    * uim/uim-scm.c
      - (uim_scm_nullp, uim_init_scm_subrs): Cast between LISP and
        uim_lisp properly

2004-12-28 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit makes uim_custom_load() and uim_custom_broadcast()
      working as prototype quality
    
    * uim/uim-custom.h
      - (uim_custom_load): New function
    * uim/uim-custom.c
      - (for_each_primary_groups, uim_custom_load_group): New static
        function
      - (uim_custom_load): New function
      - (uim_custom_save): Move almost code into for_each_primary_groups
        to share the code between uim_custom_load_group() and reimplement
        with the function
    
    * uim/uim.c
      - Include uim-custom.h
      - (uim_init_scm): Add initialization of custom variables and loading
        from ~/.uim.d/customs/custom-*.scm
    * scm/loader.scm
      - Move loading of custom.scm into uim.c

2004-12-28 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit makes uim_custom_save() working as prototype quality
    
    * uim/uim-custom.c
      - (custom_subdir): New static variable
      - (uim_custom_init): Fix invalid pointer arg for uim_scm_gc_protect()
      - (custom_file_path): Fix misspelled subdirectory name by replacing
         the name with custom_subdir
      - (prepare_dir): Implement for testing
      - (uim_conf_prepare_dir): Fix wrong subdirectory path
      - (uim_custom_save_group): Replace the subdirectory name with
         custom_subdir
      - (uim_custom_save_group): Print lacking "\n" for each lines

2004-12-26 Etsushi Kato <ek.kato@gmail.com>

    * uim/skk-dic.c (skk_string_to_list) : Removed.
    (skk_string_to_hira_list) : Ditto.  These kana conversion from
      completed string is now handled in scheme side.
    (skk_string_to_kata_list) : Ditto.
    * scm/skk.scm (skk-proc-state-kanji) : Pressing C-q during
      skk-proc-state-kanji now commit kana with hanakaku katakana.
    (find-kana-list-from-rule) : New function.  Find corresponding
      list of hiragana, katakana, and hanakaku-katakana with supplied
      string from ja-rk-rule-basic.
    (skk-append-list-to-context-head) : New function.  Append list of
      hiragana, katakana, and hankaku-katakana into skk-context-head.
    (skk-string-list-to-context-head) : New function.  Add string list
      created by completed midashi-entry into skk-context-head.
    (skk-proc-state-completion) : Create skk-contex-head from
      completed string even with hankaku-katakana.

2004-12-25 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * configure.ac:
     - (AC_INIT): Second argument changed to use version checking.

2004-12-25 Masahito Omote <omote@utyuuzin.net>

    * This commit is the same changes as in r68.
      - helper/toolbar-common-gtk.c: Use GIOChannel instaed of GdkInput.
      - helper/im-switcher-gtk.c: Use GIOChannel instaed of GdkInput.
      - helper/helper-candwin-gtk.c: Use GIOChannel instaed of GdkInput.
      - helper/dict-main-gtk.c: Use GIOChannel instaed of GdkInput.

2004-12-25 Masahito Omote <omote@utyuuzin.net>

    * gtk/gtk-im-uim.c: Use GIOChannel instaed of GdkInput because GdkInput
      is marked as deprecated. Transition from GdkInput to GIOChannel in GDK core
      was alread started in 1999. So this change does not break libuim's ABI.
      - (global section): Change definition of read_tag as unsigned int.
      - (helper_read_cb): Use GIOFunc.
      - (check_helper_connection): Use g_io_channel_unix_new and g_io_add_watch
        instead of gtk_input_add.
      - (im_uim_helper_disconnect_cb): Use g_source_remove instead of
        gdk_input_remove.

2004-12-25 Etsushi Kato <ek.kato@gmail.com>

    * uim/skk-dic.c (merge_base_candidates_to_array) : Renamed from
      merge_candidate_array.
    (merge_word_to_cand_array) : New function.  Insert the word at the
      end of real_cand if it doesn't exist in real_cand of destination
      array.
    (merge_real_candidiate_array) : Use merge_word_to_cand_array.
    (compare_and_merge_skk_line) : Merge two candidate arrays even if
      they have same length of real_cands.

2004-12-25 kzk <mover@hct.zaq.ne.jp>

    * uim-kdehelper/src/chardict/uim-chardict-qt.cpp
      - fix build problem reported by UTUMI-san

2004-12-25 kzk <mover@hct.zaq.ne.jp>

    * Now Qt4-beta1, which includes immodule support is released!
      This change aims to enable input on Qt4-beta1 through UIM.
    
    * quiminputcontextplugin-qt4/plugin.cpp
      - disable QUimInputContextWithSlave class
    * quiminputcontextplugin-qt4/qhelpermanager.h
      - indentation change
    * quiminputcontextplugin-qt4/quiminputcontext.cpp
      - indentation change
      - change keyevent->state() into keyevent->modifiers()
      - comment out undeclared keys in Qt4
      - change (mouseHandler)'s args
      - change IMStart into InputMethodStart, as well as IMComposing
        and IMEnd
      - fixed typo
    * quiminputcontextplugin-qt4/candidatewindow.cpp
      - use QListWidget for candidate selection. but not complete yet.
      - add insert and clear function of listwidgetitem
      - (slotCandidateSelected): new function
    * quiminputcontextplugin-qt4/quiminputcontext.h
      - (mouseHandler): change args
      - (isComposing): new function
      - (readIMConf): make it public
      - (m_isComposing): new variable for isComposing() function
    * quiminputcontextplugin-qt4/candidatewindow.h
      - now parent class is QVBox'Widget'
      - indentation change
      - (slotCandidateSelected): new function
      - (cList): new variable
    * quiminputcontextplugin-qt4/qhelpermanager.cpp
      - optimize a little bit
    
    * quiminputcontextplugin-qt4/quiminputcontextplugin.pro
      - remove quiminputcontextplugin_with_slave.h and
        quiminputcontextplugin_with_slave.cpp
    
    * quiminputcontextplugin-qt4/edittest/main.cpp
      - change QVBox into QVBoxWidget

2004-12-24 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * configure.ac
      - Add AC_CHECK_FUNCS(getpid stat mkdir chmod) for uim-custom.c
    
    * uim/uim-custom.h
      - (uim_custom_set_cb): Rename to uim_custom_cb_set()
      - (uim_custom_cb_set):
        * Renamed from uim_custom_set_cb()
        * Change type definition as appropriate
    * uim/uim-custom.c
      - Include some header files
      - (custom_msg_tmpl, helper_fd): New static variable
      - (helper_disconnect_cb, uim_conf_path, custom_file_path,
         prepare_dir, uim_conf_prepare_dir, uim_custom_save_group): New
         static function
      - (uim_custom_save): Implemented but not not yet working until
         prepare_dir() is implemented
      - (uim_custom_broadcast): Implemented
      - (uim_custom_set_cb): Rename to uim_custom_cb_set
      - (uim_custom_cb_set):
        * New function Renamed from uim_custom_set_cb()
        * Not yet implemented

2004-12-23 Etsushi Kato <ek.kato@gmail.com>

    * uim/skk-dic.c : Fix minor bug in cache handling.
    (add_line_to_cache_head) : Update cache modified state here.
    (move_line_to_cache_head) : Ditto.
    (add_line_to_cache_last) : Ditto.
    (skk_commit_candidate) : Don't update the state here.
    (update_personal_dictionary_cache) : Don't ommit the last line of
      sorted lines.  Correctly concatinate differential lines.

2004-12-23 Etsushi Kato <ek.kato@gmail.com>

    * uim/anthy.c : Oops... revert accidental commit.

2004-12-23 Etsushi Kato <ek.kato@gmail.com>

    * uim/skk-dic.c (cache_line_diffs) : Calculate number of lines.
    (update_personal_dictionary_cache) : Update cache line number
      properly.

2004-12-23 Etsushi Kato <ek.kato@gmail.com>

    * uim/skk-dic.c (skk_read_personal_dictionary) : Minor change
      about timing of file locking.
    (skk_lib_save_personal_dictionary) : Ditto.

2004-12-22 Etsushi Kato <ek.kato@gmail.com>

    * helper/helper-candwin-gtk.c (candwin_activate) : Call
      update_label().

2004-12-22 Etsushi Kato <ek.kato@gmail.com>

    * uim/skk-dic.c : Enable exclusive access of personal dictionary.
    (open_lock) : New function.
    (close_lock) : New function.
    (skk_read_personal_dictionary) : Do file locking with F_RDLCK.
    (skk_lib_save_personal_dictionary) : Do file locking with F_WRLCK.

2004-12-21 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * helper/toolbar-standalone-gtk.c:
     -(size_request_cb): Added size check. If old/new width/height are the
       same, do nothing.

2004-12-21 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * configure.ac
      - Add existence check for dlfunc(3)
    
    * uim/plugin.c
      - Define dlfunc as alias of dlsym if HAVE_DLFUNC is not defined
      - (plugin_load): Replace dlsym() with dlfunc() to suppress warning

2004-12-21 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * configure.ac
      - Add use_m17nlib="no" before AC_ARG_WITH(m17nlib) macro to fix
        broken AC_MSG_RESULT() when m17nlib is not used
      - Cosmetic changes to AC_ARG_WITH(m17nlib)
      - Remove unused AM_CONDITIONAL(XFCE4_PANEL)

2004-12-21 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/slib.c
      - (string2integer): Add lacking static specifier

2004-12-21 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit performs the first step of reorganization of uim-scm API
      and custom API. Many API functions and global variables are moved to
      another file and renamed
    
    * The uim-scm API are reformed for input method plugin and internal
      uim implementation. See header comment of uim-scm.h
    
    * UIM_EVAL_FSTRINGn(), uim_sizeof_sexp_str() and uim_eval_string() in
      context.h will be reorganized into uim-scm API by subsequent
      reorganization steps. This step may be performed after uim 0.4.6 has
      been released
    
    * Further direction of the uim-scm API about namespace pollution
      removel and Scheme interpreter migration has been written in
      uim-scm.c. See the comment around #include "slib.c"
    
    * configure.ac
      - Add new options --disable-compat-scm and --enable-compat-custom
      - Stop configure process if --enable-sumika is performed without
        --enable-compat-scm and --enable-compat-custom
    
    * uim/Makefile.am
      - (libuim_la_SOURCES):
        * Add uim-scm.c
        * Add uim-compat-scm.c if COMPAT_SCM
        * Add uim-compat-custom.c if COMPAT_CUSTOM
        * Add uim-custom.c if COMPAT_CUSTOM is not defined
      - (pkginclude_HEADERS):
        * Add uim-compat-scm.h if COMPAT_SCM
        * Add uim-compat-custom.h if COMPAT_CUSTOM
        * Add uim-custom.h if COMPAT_CUSTOM is not defined
    
    * uim/siod.h
      - (repl_c_string): Add const qualifier to arg 1
    * uim/slib.c
      - (repl_c_string): Add const qualifier to arg 1
      - (repl_c_string_arg): Add const qualifier
    
    * uim/uim.h
      - (uim_symbol_value_str): Rewrite the comment. This API function
        will be deprecated. Use custom API (uim-custom.h) instead
    
    * uim/context.h
      - (uim_init_scm_subrs): New function
      - (uim_init_compat_scm_subrs): New function only declared when
        UIM_COMPAT_SCM is defined
    
    * uim/uim.c
      - (uim_init_scm):
        * Invoke uim_init_scm_subrs()
        * Invoke uim_init_compat_scm_subrs() when UIM_COMPAT_SCM is
          defined
        * Invoke uim_init_plugin() earlyer than other init functions
    
    * uim/uim-func.c
      - (TRUEP, FALSEP, NTRUEP, NFALSEP, true_sym, false_sym): Remove to
        follow the API reorganization. These definitions are moved to
        uim-scm.h and uim-scm.c
      - (uim_init_im_subrs): Remove initialization of true_sym and
        false_sym
    
    * uim/plugin.c
      - Include uim-scm.h instead of uim-util.h to follow the API
        reorganization
      - (true_sym, false_sym): Remove to follow the API reorganization
      - (plugin_load):
        * Replace the type 'LISP' with 'uim_lisp' to follow the API
          reorganization
        * Replace NIL with uim_scm_f() to follow the API reorganization
        * Replace true_sym with uim_scm_t() to follow the API
          reorganization
      - (plugin_unload):
        * Replace the type 'LISP' with 'uim_lisp' to follow the API
          reorganization
        * Replace NIL with uim_scm_f() to follow the API reorganization
      - (uim_init_plugin):
        * Remove initialization of true_sym and false_sym
        * Replace uim_init_subr_1 with uim_scm_init_subr_1 to follow the
          API reorganization
    
    * uim/uim-custom.h
      - (typedef uim_bool, UIM_FALSE, UIM_TRUE): Move to uim-scm.h
    * uim/uim-custom.c
      - Remove obsolete UIM_NO_COMPAT_CUSTOM definition
      - Reorder #include lines
      - (TRUEP, FALSEP, NTRUEP, NFALSEP, true_sym, false_sym): Remove to
        follow the API reorganization. These definitions are moved to
        uim-scm.h and uim-scm.c
      - (uim_scm_return_value, uim_scm_c_symbol): Move to uim-scm.c
      - (uim_custom_init): Remove initialization of true_sym and
        false_sym
    
    * uim/uim-scm.h
      - Update header comment about this API appropriately
      - (typedef uim_bool, UIM_FALSE, UIM_TRUE): Moved from uim-custom.h
      - (true_sym, false_sym): New global variable
      - (uim_scm_c_bool, uim_scm_make_bool, uim_scm_make_int,
        uim_scm_make_str, uim_scm_make_symbol, uim_scm_eval_c_string,
        uim_scm_init_subr_0, uim_scm_init_subr_1, uim_scm_init_subr_2,
        uim_scm_init_subr_3, uim_scm_init_subr_4, uim_scm_init_subr_5):
        New function
      - (uim_scm_c_symbol, uim_scm_return_value): New function moved from
        uim-custom.c
      - (TRUEP, FALSEP, NTRUEP, NFALSEP): New macro moved from uim-util.c
      - (uim_scm_repl_c_string, uim_scm_symbol_value_int,
        uim_scm_int_from_c_int, uim_scm_symbol_value_str,
        uim_scm_str_from_c_str, uim_scm_c_strs_into_list,
        uim_scm_symbol_value, uim_scm_intern_c_str, uim_scm_qintern_c_str,
        uim_scm_quote, uim_scm_nth, uim_scm_list1, uim_scm_list2,
        uim_scm_list3, uim_scm_list4, uim_scm_list5, uim_scm_reverse,
        uim_scm_nreverse, struct uim_api_tbl): Move to uim-compat-scm.h
      - (enum UCustomType, uim_custom_value, uim_custom_value_as_bool,
        uim_custom_value_as_int, uim_custom_value_as_str,
        uim_custom_value_as_path, uim_custom_value_as_symbol,
        uim_custom_set, uim_custom_symbol_label, uim_custom_symbol_desc,
        uim_custom_label, uim_custom_desc, uim_custom_type,
        uim_custom_default_value, uim_custom_ctype, uim_custom_range,
        uim_custom_group_label, uim_custom_group_desc,
        uim_custom_group_subgroups, uim_custom_list_groups,
        uim_custom_list_primary_groups, uim_custom_collect_by_group,
        uim_custom_value_as_string, uim_custom_definition_as_string):
        Move to uim-compat-custom.h
    * uim/uim-compat-scm.h
      - Most part of this file has been moved from uim-scm.h, but actual
        operation is performed by removing other functions from the file
        previously copied from uim-scm.h
      - Update header comment about this API appropriately
      - (uim_scm_repl_c_string, uim_scm_symbol_value_int,
        uim_scm_int_from_c_int, uim_scm_symbol_value_str,
        uim_scm_str_from_c_str, uim_scm_c_strs_into_list,
        uim_scm_symbol_value, uim_scm_intern_c_str, uim_scm_qintern_c_str,
        uim_scm_quote, uim_scm_nth, uim_scm_list1, uim_scm_list2,
        uim_scm_list3, uim_scm_list4, uim_scm_list5, uim_scm_reverse,
        uim_scm_nreverse, struct uim_api_tbl): Moved from uim-scm.h
    * uim/uim-compat-custom.h
      - Most part of this file has been moved from uim-scm.h, but actual
        operation is performed by removing other functions from the file
        previously copied from uim-scm.h
      - Update header comment about this API appropriately
      - (enum UCustomType, uim_custom_value, uim_custom_value_as_bool,
        uim_custom_value_as_int, uim_custom_value_as_str,
        uim_custom_value_as_path, uim_custom_value_as_symbol,
        uim_custom_set, uim_custom_symbol_label, uim_custom_symbol_desc,
        uim_custom_label, uim_custom_desc, uim_custom_type,
        uim_custom_default_value, uim_custom_ctype, uim_custom_range,
        uim_custom_group_label, uim_custom_group_desc,
        uim_custom_group_subgroups, uim_custom_list_groups,
        uim_custom_list_primary_groups, uim_custom_collect_by_group,
        uim_custom_value_as_string, uim_custom_definition_as_string):
        Moved from uim-scm.h
    
    * uim/uim-util.c
      - Reorder #include lines
      - Include uim-scm.h and uim-compat-scm.h to follow the API
        reorganization
      - (TRUEP, FALSEP, NTRUEP, NFALSEP): Move to uim-scm.h
      - (true_sym, false_sym): Move to uim-scm.c
      - (quote_sym): Move to uim-compat-scm.c
      - (uim_scm_c_int, uim_scm_c_str, uim_scm_gc_protect,
        uim_scm_get_verbose_level, uim_scm_set_verbose_level,
        uim_scm_load_file, uim_scm_t, uim_scm_f, uim_scm_null_list,
        uim_scm_nullp, uim_scm_eq, uim_scm_string_equal, uim_scm_eval,
        uim_scm_cdr, uim_scm_cadr, uim_scm_caar, uim_scm_cdar,
        uim_scm_cddr, uim_scm_cons): Move to uim-scm.c
      - (uim_scm_repl_c_string, uim_scm_symbol_value_int,
        uim_scm_int_from_c_int, uim_scm_symbol_value_str,
        uim_scm_str_from_c_str, uim_scm_c_strs_into_list,
        uim_scm_symbol_value, uim_scm_intern_c_str, uim_scm_qintern_c_str,
        uim_scm_quote, uim_scm_nth, uim_scm_list1, uim_scm_list2,
        uim_scm_list3, uim_scm_list4, uim_scm_list5, uim_scm_reverse,
        uim_scm_nreverse): Move to uim-compat-scm.c
      - (uim_custom_value, uim_custom_value_as_bool,
        uim_custom_value_as_int, uim_custom_value_as_str,
        uim_custom_value_as_path, uim_custom_value_as_symbol,
        uim_custom_set, uim_custom_symbol_label, uim_custom_symbol_desc,
        uim_custom_label, uim_custom_desc, uim_custom_type,
        uim_custom_default_value, uim_custom_ctype, uim_custom_range,
        uim_custom_group_label, uim_custom_group_desc,
        uim_custom_group_subgroups, uim_custom_list_groups,
        uim_custom_list_primary_groups, uim_custom_collect_by_group,
        uim_custom_value_as_string, uim_custom_definition_as_string): Move
        to uim-compat-custom.c
      - (uim_init_subr_0): Moved and renamed to uim_scm_init_subr_0 of
        uim-scm.c
      - (uim_init_subr_1): Moved and renamed to uim_scm_init_subr_1 of
        uim-scm.c
      - (uim_init_subr_2): Moved and renamed to uim_scm_init_subr_2 of
        uim-scm.c
      - (uim_init_subr_3): Moved and renamed to uim_scm_init_subr_3 of
        uim-scm.c
      - (uim_init_subr_4): Moved and renamed to uim_scm_init_subr_4 of
        uim-scm.c
      - (uim_init_util_subrs): Remove initialization of true_sym,
        false_sym and quote_sym
    * uim/uim-scm.c
      - Most part of this file has been moved from uim-util.c, but actual
        operation is performed by removing other functions from the file
        previously copied from uim-util.c
      - Reorder #include lines
      - Add header comment about future namespace pollution removal and
        Scheme interpreter migration
      - (true_sym, false_sym):
        * Moved from uim-util.c to follow the API reorganization
        * Make exported
      - (uim_scm_c_bool, uim_scm_make_bool, uim_scm_eval_c_string,
        uim_init_scm_subrs): New function
      - (uim_scm_c_symbol, uim_scm_return_value): Moved from uim-custom.c
      - (uim_scm_c_int, uim_scm_c_str, uim_scm_gc_protect,
        uim_scm_get_verbose_level, uim_scm_set_verbose_level,
        uim_scm_load_file, uim_scm_t, uim_scm_f, uim_scm_null_list,
        uim_scm_nullp, uim_scm_eq, uim_scm_string_equal, uim_scm_eval,
        uim_scm_cdr, uim_scm_cadr, uim_scm_caar, uim_scm_cdar,
        uim_scm_cddr, uim_scm_cons): Moved from uim-util.c
      - (uim_scm_make_int):
        * New function
        * Implementation is copied from uim_scm_int_from_c_int()
      - (uim_scm_make_str):
        * New function
        * Implementation is copied from uim_scm_str_from_c_str()
      - (uim_scm_make_symbol):
        * New function
        * Implementation is copied from uim_scm_intern_c_str()
      - (uim_scm_init_subr_0):
        * Moved and renamed from uim_init_subr_0 of uim-util.c
        * Cosmetic change
      - (uim_scm_init_subr_1):
        * Moved and renamed from uim_init_subr_1 of uim-util.c
        * Cosmetic change
      - (uim_scm_init_subr_2):
        * Moved and renamed from uim_init_subr_2 of uim-util.c
        * Cosmetic change
      - (uim_scm_init_subr_3):
        * Moved and renamed from uim_init_subr_3 of uim-util.c
        * Cosmetic change
      - (uim_scm_init_subr_4):
        * Moved and renamed from uim_init_subr_4 of uim-util.c
        * Cosmetic change
      - (uim_scm_init_subr_5): New function
    * uim/uim-compat-scm.c
      - Most part of this file has been moved from uim-util.c, but actual
        operation is performed by removing other functions from the file
        previously copied from uim-util.c
      - Update header comment about this API appropriately
      - (quote_sym): Moved from uim-util.c
      - (uim_scm_repl_c_string, uim_scm_symbol_value_int,
        uim_scm_symbol_value_str, uim_scm_c_strs_into_list,
        uim_scm_symbol_value, uim_scm_qintern_c_str, uim_scm_quote,
        uim_scm_nth, uim_scm_list1, uim_scm_list2, uim_scm_list3,
        uim_scm_list4, uim_scm_list5, uim_scm_reverse, uim_scm_nreverse):
        Moved from uim-util.c
      - (uim_scm_int_from_c_int):
        * Moved from uim-util.c
        * Replace the implementation with uim_scm_make_int()
      - (uim_scm_str_from_c_str):
        * Moved from uim-util.c
        * Replace the implementation with uim_scm_make_str()
      - (uim_scm_intern_c_str):
        * Moved from uim-util.c
        * Replace the implementation with uim_scm_make_symbol()
      - (uim_init_compat_scm_subrs): New function
    * uim/uim-compat-custom.c
      - Most part of this file has been moved from uim-util.c, but actual
        operation is performed by removing other functions from the file
        previously copied from uim-util.c
      - Reorder #include lines
      - (uim_custom_value, uim_custom_value_as_bool,
        uim_custom_value_as_int, uim_custom_value_as_str,
        uim_custom_value_as_path, uim_custom_value_as_symbol,
        uim_custom_set, uim_custom_symbol_label, uim_custom_symbol_desc,
        uim_custom_label, uim_custom_desc, uim_custom_type,
        uim_custom_default_value, uim_custom_ctype, uim_custom_range,
        uim_custom_group_label, uim_custom_group_desc,
        uim_custom_group_subgroups, uim_custom_list_groups,
        uim_custom_list_primary_groups, uim_custom_collect_by_group,
        uim_custom_value_as_string, uim_custom_definition_as_string):
        Moved from uim-util.c
    
    * uim/uim-sh.c
      - Add #include "uim-compat-scm.h" to follow the API reorganization
    
    * uim/canna.c
      - Include uim-scm.h and uim-compat-scm.h to follow the API
        reorganization
      - (true_sym): Remove to follow the API reorganization
      - (uim_init_canna): Remove initialization of true_sym
    
    * uim/m17nlib.c
      - (preedit_changedp, free_id): Replace the type 'LISP' with
        'uim_lisp' to follow the API reorganization
      - (init_m17nlib, compose_modep, free_id, push_symbol_key, push_key,
        commit, candidate_showp):
        * Replace the type 'LISP' with 'uim_lisp' to follow the API
          reorganization
        * Replace NIL with uim_scm_f() to follow the API reorganization
      - (get_left_of_cursor, get_right_of_cursor, get_left_of_candidate,
        get_selected_candidate, get_right_of_candidate,
        get_commit_string):
        * Replace the type 'LISP' with 'uim_lisp' to follow the API
          reorganization
        * Replace uim_scm_str_from_c_str() with uim_scm_make_str() to
          follow the API reorganization
      - (get_input_method_name, get_input_method_lang):
        * Replace uim_scm_str_from_c_str() with uim_scm_make_str() to
          follow the API reorganization
        * Replace NIL with uim_scm_f() to follow the API reorganization
      - (get_nth_candidate):
        * Replace the type 'LISP' with 'uim_lisp' to follow the API
          reorganization
        * Replace uim_scm_str_from_c_str() with uim_scm_make_str() to
          follow the API reorganization
        * Replace NIL with uim_scm_f() to follow the API reorganization
      - (get_nr_input_methods, alloc_id):
        * Replace uim_scm_int_from_c_int() with uim_scm_make_int() to
          follow the API reorganization
      - (get_nr_candidates, get_candidate_index):
        * Replace the type 'LISP' with 'uim_lisp' to follow the API
          reorganization
        * Replace uim_scm_int_from_c_int() with uim_scm_make_int() to
          follow the API reorganization
      - (uim_init_m17nlib):
        * Replace uim_init_subr_0, uim_init_subr_1, uim_init_subr_2,
          uim_init_subr_3 with uim_scm_init_subr_0, uim_scm_init_subr_1,
          uim_scm_init_subr_2, uim_scm_init_subr_3, to follow the API
          reorganization
    
    * sumika/common/uimconfig.c
    * sumika/gtk2/uimcontainer.c
      - Include uim-compat-scm.h and uim-compat-custom.h instead of
        uim/uim-scm.h to follow the API reorganization

2004-12-21 Etsushi Kato <ek.kato@gmail.com>

    * uim/skk-dic.c (open_dic) : Properly initialize di->addr.

2004-12-21 Takuro Ashie <ashie@homa.ne.jp>

    * gtk-im-uim.c: Revert. Sorry, I commited wrong file.
    * uim-cand-win-gtk.c: This is the correct one.

2004-12-21 Takuro Ashie <ashie@homa.ne.jp>

    * helper/helper-candwin-gtk.c, gtk/gtk-im-uim.c
      - (tree_selection_changed): Do not update selected index if the
        current selected index is negative value.
      - (uim_cand_win_gtk_set_candidates): update label.

2004-12-20 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit prepares uim-scm and custom API reorganization
    
    * uim/uim-compat-scm.h
    * uim/uim-compat-custom.h
      - New file copied from uim-scm.h
    
    * uim/uim-scm.c
    * uim/uim-compat-scm.c
    * uim/uim-compat-custom.c
      - New file copied from uim-util.c

2004-12-20 Takuro Ashie <ashie@homa.ne.jp>

    * helper/helper-candwin-gtk.c:
      - Follow uim-cand-win-gtk.c's changes.

2004-12-20 Takuro Ashie <ashie@homa.ne.jp>

    * gtk/uim-cand-win-gtk.c:
      "unselected" state has been revived.
      Thanks reporting > Hiroyuki Komatsu <komatsu@taiyaki.org>

2004-12-20 Etsushi Kato <ek.kato@gmail.com>

    * scm/skk.scm (skk-list-to-context-head) : Removed.  This function
      was broken.
    (skk-begin-completion) : Use correct kana-type for completion.
    (skk-proc-state-completion) : Invoke skk-lib-string-to-hiragana-list
      and skk-lib-string-to-katakana-list to set context-head from
      string.  Use correct kana-type for completion.
    * uim/skk-dic.c (skk_string_to_list) : New function to get list
      from string.
    (skk_string_to_hira_list) : New function.  Return list from string
      with hiragana.
    (skk_string_to_kata_list) : New function.  Return list from string
      with katakana.
    (uim_init_skk_dic) : Export skk-lib-string-to-hiragana-list and
      skk-lib-string-to-katakana-list for scheme.

2004-12-19 Etsushi Kato <ek.kato@gmail.com>

    * uim/skk-dic.c : Make uim's skk support candidate arrays with
      different okurigana.  Also make sure to update and merge
      personal dictionary cache while saving if other process which
      uses libuim have modified the dictionary file.
    (skk_cand_array) : Fix comment.
    (skk_line) : Ditto.
    (dic_info) : Add new member, cache_modified and cache_len.
    (open_dic) : Initialize properly.
    (okuri_in_bracket) : New function to get okurigana in bracket.
    (compose_line_parts) : Get correct candidate from dictionary entry
      within bracket.
    (copy_skk_line) : New function.
    (add_line_to_cache_head) : Increment length of cached lines.
    (merge_real_candidate_array) : New function.
    (skk_commit_candidate) : Delete code for nth = 0.  Set candidate
      in candidate array with corresponding okurigana if okuri exists.
    (parse_dic_line) : Add dic_info for argument.
    (skk_read_personal_dictionary) : New function.  Splitted from
      skk_lib_read_personal_dictionary().  Store timestamp of personal
      dictionary while loading.
    (skk_lib_read_personal_dictionary) : Most implementation moves
      into skk_read_personal_dictionary().
    (push_back_candidate_array_to_sl) : New function.  Copy and add
      candidate array to skk_line.
    (compare_and_merge_skk_line) : New function.  Merge candidates
      from two skk_lines with same heading entry.
    (compare_entry) : New function for merge sort.
    (cache_line_diffs) : New function.  Return lines with differential
      heading entry between two personal dictionary caches.  Also
      merge candidate arrays for line with same heading entry.
    (lmerge) : New function for merge sort.
    (lsort) : New function.  Do merge sort on personal dictionary
      cache.
    (update_personal_dictionary_cache) : New function.  Update cache
      using updated personal dictionary file.
    (skk_lib_save_personal_dictionary) : Check timestamp of personal
      dictionary and update cache if the file is modified by other
      process.
    * scm/skk.scm (skk-release-handler) : Add release handler.  Call
      skk-save-personal-dictionary.

2004-12-19 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/skk.scm
      - (action action_skk_hiragana, action action_skk_katakana, action
        action_skk_hankana, action action_skk_latin, action
        action_skk_wide_latin): Fix invalid descendant context
        support. Thanks 824 of 'Anthy/uim thread 4' for reporting

2004-12-19 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * helper/im-switcher-gtk.c:
     -(load_configration): Fixed to try to open unknown file. This wil
       fix Bug #1769.

2004-12-17 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * scm/hangul2.scm
      - (hangul2-rule): Fix an invalid key sequence. This is the only one
        entry that uses 5-length key sequence. Probably the converter
        assumed at most 4-length

2004-12-17 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * uim/uim-custom.c
      - (uim_scm_c_list_free, uim_custom_choice_item_list): Cosmetic
        change

2004-12-17 YAMAMOTO Kengo / YamaKen <yamaken@bp.iij4u.or.jp>

    * This commit adds preliminary implementation of new custom API
      - This implementation is not yet working and lacking error
        handlings. Restruction of uim-scm API is required to work.
      - Don't insert NULL checks for free(3). free(3) accepts NULL as
        proper argument that causes no action
    
    * uim/uim-custom.h
      - The custom type 'symbol' has been renamed to 'choice' to avoid
        confusing with ordinary lisp symbol
      - (uim_bool): New type. I want a boolean type for uim to explicitly
        indicate intention about values. It should be reorganized into
        uim.h after agreement with other developers
      - (UIM_FALSE, UIM_TRUE): New macro
      - (enum UCustomType): Rename the member UCustom_Symbol with
        UCustom_Choice
      - (union uim_custom_value): Rename the member as_symbol with
        as_choice and change the type
      - (struct uim_custom_symbol): Renamed to uim_custom_choice
      - (struct uim_custom_choice): Renamed from uim_custom_symbol
      - (union uim_custom_range): New union
      - (struct uim_custom): Change types of value, default_value and
        range to pointer
      - (uim_custom_init, uim_custom_quit, uim_custom_save,
        uim_custom_broadcast, uim_custom_set): Change the return type from
        int to uim_bool to indicate the intention
      - (uim_custom_value_as_string): Renamed to uim_custom_value_as_literal
      - (uim_custom_value_as_literal): Renamed from uim_custom_value_as_string
      - (uim_custom_definition_as_string): Renamed to
        uim_custom_definition_as_literal
      - (uim_custom_definition_as_literal): Renamed from
        uim_custom_definition_as_string
    * uim/uim-custom.c
      - New file
      - This file includes some new or duplicated uim_scm_* APIs. It
        should be reorganized into uim-scm.[hc]
      - (TRUEP, FALSEP, NTRUEP, NFALSEP): New macro
      - (uim_scm_c_list_conv_func, uim_scm_c_list_free_func): New type
      - (true_sym, false_sym, return_val): New static variable
      - (uim_scm_return_value, uim_scm_c_symbol, uim_scm_c_list,
        uim_scm_c_str_failsafe, uim_scm_c_str_list, uim_scm_c_list_free):
        New function
      - (str_list_arg): New static variable
      - (uim_custom_type_eq, uim_custom_type, uim_custom_is_active,
        uim_custom_get_str, uim_custom_label, uim_custom_desc,
        uim_custom_choice_get, uim_custom_choice_free,
        uim_custom_choice_item_list, uim_custom_choice_list_free,
        uim_custom_value_internal, uim_custom_value,
        uim_custom_default_value, uim_custom_value_free,
        uim_custom_range_elem, uim_custom_range_get,
        uim_custom_range_free): New static functions
      - (uim_custom_quit, uim_custom_save, uim_custom_broadcast,
        uim_custom_set_cb): New function. Just placeholders at now
      - (uim_custom_init, uim_custom_get, uim_custom_set, uim_custom_free,
        uim_custom_value_as_literal, uim_custom_definition_as_literal,
        uim_custom_group_get, uim_custom_group_free,
        uim_custom_collect_by_group, uim_custom_groups,
        uim_custom_primary_groups, uim_custom_group_subgroups,
        uim_custom_symbol_list_free): New function
    
    * uim/uim-scm.h
      - Add #include <stdio.h> to avoid errors
      - Enclose old custom APIs with #ifdef UIM_NO_COMPAT_CUSTOM
    
    * uim/siod.h
      - (siod_return_value): New function
    * uim/slib.c
      - (siod_return_value): New function

2004-12-15 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * skk-dic.c:
     - (uim_quit_skk_dic): Added NULL check.

2004-12-14 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * uim/scim.cpp: New file. First step of a long long road...

2004-12-14 Etsushi Kato <ek.kato@gmail.com>

    * uim/skk-dic.c (dic_info) : Add personal_dic_timestamp member.
    (open_dic) : Enable uim-skk functionality even without SKK-JISYO.
    (skk_search_line_from_file) : Ditto.
    (parse_dic_line) : Ditto.
    (skk_lib_save_personal_dictionary) : Ditto.
    (uim_quit_skk_dic) : Ditto.
    (skk_lib_get_annotation) : New function.  Annotation can be
      retrieved from scheme with skk-lib-get-annotation.
    (uim_init_skk_dic) : Add skk-lib-get-annotation.

2004-12-14 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * configure.ac: Added SCIM configure test.

2004-12-14 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * uim.c: Removed calling canna initialize/finalize function, because
       canna support is splitted into plugin.
       I'll do the same thing for Anthy, SKK, PRIME.

2004-12-14 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * uim/Makefile.am: SCIM and Canna is defined as plugin.

2004-12-13 Etsushi Kato <ek.kato@gmail.com>

    * uim/skk-dic.c (skk_commit_candidate) : Even if committed word is
      0th candidate, make sure to mark the entry as "need_save = 1"
      according to ddskk's behavior.

2004-12-13 kzk <mover@hct.zaq.ne.jp>

    * Add the support of SubWindow to UimQt.
      This uses new API uim_candidate_get_annotation_str,
      so now commented out defaultly. (Version check cannot
      work properly, because now uim svn's version is "trunk"
      in configure.ac)
    
    * qt/quiminputcontext/src/Makefile.am
      - add subwindow.h and subwindow.cpp
    
    * qt/quiminputcontext/src/subwindow.h
    * qt/quiminputcontext/src/subwindow.cpp
      - new files
    
    * qt/quiminputcontext/src/candidatewindow.h
      - (slotHookSubwindow): new function
      - (moveEvent): new function
      - (resizeEvent): new function
      - (subWin): new member
    
    * qt/quiminputcontext/src/candidatewindow.cpp
      - (deactivateCandwin): cancel Hooking of subwindow
      - (setPage): get annotation string using uim_candidate_get_annotation_str.
        Now this code is commented out.

2004-12-13 kzk <mover@hct.zaq.ne.jp>

    * uim/uim.h
      - (uim_candidate_get_annotation_str): documentation update

2004-12-13 kzk <mover@hct.zaq.ne.jp>

    * scm/m17nlib.scm
      - (m17nlib-get-candidate-handler): add ""(empty string) for annotation member
    * scm/prime.scm
      - (prime-get-candidate-handler): Ditto
    * scm/generic.scm
      - (generic-get-candidate-handler): Ditto
    * scm/canna.scm
      - (canna-get-candidate-handler): Ditto
    * scm/anthy.scm
      - (anthy-get-candidate-handler): Ditto
    * scm/skk.scm
      - (skk-get-candidate-handler): Ditto

2004-12-13 kzk <mover@hct.zaq.ne.jp>

    * Add candidate's annotation support
    
    * uim/uim.h
      - (uim_candidate_get_annotation_str): new public API
      - documentation update
    
    * uim/uim.c
      - (uim_get_candidate): cand->annotation may be uim_return_str_list[2] if available
      - (uim_candidate_get_annotation_str): new function
      - (uim_candidate_free): free cand->annotation str if available

2004-12-12 Etsushi Kato <ek.kato@gmail.com>

    * xim/locale.cpp (locale_map) : Add encoding information for
      locale_map to support system which doesn't handle setlocale(3)
      without encoding name.
    (get_valid_locales) : Retry setlocale() with encoding information
      if it fails.

2004-12-12 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * uim/slib.c:
     - (string2integer): New function.

2004-12-12 Masanari Yamamoto <h013177b@ice.nuie.nagoya-u.ac.jp>

    * fep/str.c (tab2space) : New function to use prime 0.8.5

2004-12-12 Etsushi Kato <ek.kato@gmail.com>

    * configure.ac : Check strsep().
    * xim/locale.cpp (all_locales) : Add sanity check.
    * xim/util.h : Add prototype of strsep() for system without it.
    * xim/util.cpp (strsep) : New function for system without it.

2004-12-11 Etsushi Kato <ek.kato@gmail.com>

    * helper/helper-candwin-gtk.c (_UIMCandidateWindow) : Add size
      attribute variables.
    (configure_event_cb) : New function for configure_event callback.
    (init_candidate_win) : Connect to configure_event callback.
    (candwin_activate) : No need to do gtk_window_get_size() here.
    (candwin_move) : Move layout code to uim_cand_win_gtk_layout().
    (uim_cand_win_gtk_set_page) : Resize window here.  Shrink height
      in addition to width.
    (uim_cand_win_gtk_layout) : New function.

2004-12-11 kzk <mover@hct.zaq.ne.jp>

    * Enhancement of uim-chardict-qt
    
    * qt/uim-kdehelper/src/chardict/chargridview.cpp
      - (setCharacters): fix rows caluculation bug
    * qt/uim-kdehelper/src/chardict/uim-chardict-qt.h
      - add new enum member UNKNOWN
      - (changeMode): now public slot
    * qt/uim-kdehelper/src/chardict/unicodeviewwidget.h
      - remove conflicting signal
    * qt/uim-kdehelper/src/chardict/uim-chardict-qt.cpp
      - (main): parse arguments

2004-12-10 Etsushi Kato <ek.kato@gmail.com>

    * configure.ac : Check setenv() and unsetenv().  Reported by Konosuke
      Watanabe.
    * uim/setenv.c : New file.  Compatiblity function of setenv() and
      unsetenv().
    * uim/uim-util.c : Add prototype of setenv() and unsetenv() if
      they are not available on target system.
    * uim/Makefile.am : Add setenv.c as libuim_la_SOURCES.

2004-12-10 kzk <mover@hct.zaq.ne.jp>

    * scm/anthy.scm
      - This commit enable you to select candidate by pressing
        Numeral-keys (0 to 9). Now this function is defaultly
        disabled.
    
      - (anthy-select-candidate-by-numeral-key?): new variable
      - (anthy-move-candidate-in-page): new function
      - (anthy-proc-converting-state): handle numeral key when
        this function is enabled and candidate window is shown.

2004-12-10 kzk <mover@hct.zaq.ne.jp>

    * More enhancement of uim-chardict-qt
      - support ModeChange function
          - now search by bushu and unicode block
      - font selection
          - you can specify the font to display characters
      - configuration
          - store splitter's location
          - store font configuration
      - clarify class structure
    
    * uim-kdehelper/src/chardict/chargridview.cpp
    * uim-kdehelper/src/chardict/chargridview.h
    * uim-kdehelper/src/chardict/kseparator.cpp
    * uim-kdehelper/src/chardict/kseparator.h
    * uim-kdehelper/src/chardict/bushuviewwidget.cpp
    * uim-kdehelper/src/chardict/bushuviewwidget.h
    * uim-kdehelper/src/chardict/unicodeviewwidget.cpp
    * uim-kdehelper/src/chardict/unicodeviewwidget.h
      - new files
    
    * uim-kdehelper/src/chardict/Makefile.am
      - add new files

2004-12-10 Takuro Ashie <ashie@homa.ne.jp>

    * helper/im-switcher-gtk.c: Translate "Changing way".
    * po/uim.pot, po/ja.po: Update.
    * scm/custom.scm: Internationalize.

2004-12-10 kzk <mover@hct.zaq.ne.jp>

    * qt/uim-kdehelper/src/common/uimstateindicator.cpp
      - (slotMenuActivated): remove radundant "\n" of helper message

2004-12-09 Takuro Ashie <ashie@homa.ne.jp>

    * po/POTFILES.in:
      - Added helper/toolbar-common-gtk.c and helper/input-pad-ja.c.

2004-12-09 Takuro Ashie <ashie@homa.ne.jp>

    * gtk/uim-cand-win-gtk.c:
      - Set position of candidates window every time when candidates are
        set. But it'a temporary solution. I'll fix it by more suitable
        way when uim-custom is completed.
        Thanks reporting > Hiroyuki Komatsu.

2004-12-09 Takuro Ashie <ashie@homa.ne.jp>

    * helper/toolbar-standalone-gtk.c: Internationalize.

2004-12-08 Etsushi Kato <ek.kato@gmail.com>

    * configure.ac : Check for asprintf() and vasprintf(), by Konosuke
      Watanabe.
    
    * xim/Makefile.am : Add util.{h,cpp}, helper.{h,cpp} as
      uim_xim_SOURCES.
    * xim/util.h : New file.  Move fd dispatch prototypes and misc
      functions from main.c.  Add asprintf() and vasprintf() for
      system which lacks these function.
    * xim/util.cpp : Ditto.
    * xim/helper.h : New file.  Move check_helper_connection()
      prototype from ximserver.h.
    * xim/helper.cpp : Move uim-helper related functions from from
      main.c.
    * xim/connection.h : Move connection_setup() prototype from
      main.c.
    * xim/main.cpp : Use proper header files.  Move fd dispatch
      definition into util.{h,cpp}.  Move helper related function into
      helper.cpp.
    * xim/locale.cpp : Use proper header file.
    * xim/ximtrans.cpp : Ditto.
    * xim/ximic.cpp : Ditto.
    * xim/ximim.cpp : Ditto.
    * xim/ximserver.cpp : Ditto.
    * xim/convdisp.cpp : Ditto.
    * xim/ximpacket.cpp : Ditto.
    * xim/canddisp.cpp : Ditto.
    * xim/ximserver.h : Ditto.

2004-12-08 Etsushi Kato <ek.kato@gmail.com>

    * xim/ximtrans.cpp (Connection::xim_open) : In full-synchronous
      XIM event flow, don't use KeyRelease event.
    * xim/ximic.cpp (XimIC::get_ic_atr) : Update comment.
    * xim/ximserver.cpp (KeyState::check_key) : Check modifier keys
      properly even when KeyRelease event is not available.

2004-12-08 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * japanese.scm:
     - Old ja-kana-rule was renamed to ja-kana-hiragana-rule.

2004-12-08 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * intltool-update.in:
     -(GeneratePOTemplate): Remove xxx.scm.h files after use.

2004-12-08 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * uim/context.h:
     - Added function prototypes.
       uim_init_plugin and uim_quit_plugin.

2004-12-07 kzk <mover@hct.zaq.ne.jp>

    * changes for "candidate-window-position" property
    
    * quiminputcontextplugin-qt4/quiminputcontext.cpp
    * quiminputcontextplugin/src/quiminputcontext.cpp
      - (QUimInputContextPlugin): read IM configuretion
      - (getPreeditCursorPosition): return 0 if always left position
      - (readIMConf): new function
    
    * quiminputcontextplugin-qt4/quiminputcontext.h
    * quiminputcontextplugin/src/quiminputcontext.h
      - (readIMConf): new function
    
    * uiminputcontextplugin-qt4/candidatewindow.h
    * uiminputcontextplugin/src/candidatewindow.h
      - (setAlwaysLeftPosition): new function
      - (isAlwaysLeftPosition): new function
      - (isAlwaysLeft): new variable
    
    * quiminputcontextplugin-qt4/qhelpermanager.cpp
    * quiminputcontextplugin/src/qhelpermanager.cpp
      - (parseStrImChange): call QUimInputContext::readIMConf
        when im is switched.

2004-12-07 kzk <mover@hct.zaq.ne.jp>

    * initial commit of uim-chardict-qt
      now chardict has only the function to show chars
      by specifying bushu. it uses Bushu->Kanji dictionary
      of canna project. Thanks!
    
    * uim-kdehelper/src/Makefile.am
      - add chardict to SUBDIRS
    
    * uim-kdehelper/src/chardict
      - new directory
    
    * uim-kdehelper/data
      - new directory for storing various datas

2004-12-07 TOKUNAGA Hiroyuki <tkng@xem.jp>

    * In this revision, plugin system is introduced, and this system
      applied to m17nlib.c. This may cause some troubles.
    
    * uim/m17nlib.c: Some functions are renamed.
       - intcons          -> uim_scm_int_from_c_int
       - strcons          -> uim_scm_str_from_c_str
       - uim_get_c_string -> uim_scm_c_str
       - get_c_int        -> uim_scm_c_int
       - init_subr_0      -> uim_init_subr_0
       - init_subr_1      -> uim_init_subr_1
       - init_subr_2      -> uim_init_subr_2
       - init_subr_3      -> uim_init_subr_3
    
    * uim/plugin.c: New file to introduce plugin sytem.
    
    * uim/plugin.h: New file to introduce plugin sytem.
    
    * uim/Makefile.am: m17n-lib glue code (m17nlib.c) is splitted into plugin.
    
    * scm/loader.scm: Call load-plugin before read m17nlib.scm.

2004-12-07 kzk <mover@hct.zaq.ne.jp>

    * INDENTATION CHANGE FOR ALL FILES
    
    * qt/*
      - all source files( *.h, *.cpp ) are now automatically indented by
        using Artistic Style( http://astyle.sourceforge.net/ ). The
        command options are written in "INDENT" file.

2004-12-07 kzk <mover@hct.zaq.ne.jp>

    * qt/uim-kdehelper/admin
      - update build system( overwrite existing one )

2004-12-07 TOKUNAGA Hiroyuki <tkng@xem.jp>

     * test.sh.in:
      -(LIBUIM_PLUGIN_LIB_DIR): New environment variable for plugin system.

2004-12-07 TOKUNAGA Hiroyuki <tkng@xem.jp>

     * uim-util.c:
      -(uim_init_subr_0): New function.
      -(uim_init_subr_1): New function.
      -(uim_init_subr_2): New function.
      -(uim_init_subr_3): New function.

2004-12-05 TOKUNAGA Hiroyuki <tkng@xem.jp>

     * All files imported from old repository.

2004-12-05 TOKUNAGA Hiroyuki <tkng@xem.jp>

    New directory trunk/ created.
